webpackJsonp([2],[function(t,e,n){"use strict";n(22),n(1),n(3),n(23),n(25),n(26),n(83),n(668),n(58)},function(t,e,n){(function(t){!function(t,r){r(e,n(2),n(3),n(22))}(this,function(e,n,r,i){"use strict";function o(t){return void 0!==t&&null!==t}var s,a=i.__platform_browser_private__.INTERNAL_BROWSER_PLATFORM_PROVIDERS;s="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var u=s;u.assert=function(t){};var c=(function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(){t.apply(this,arguments)}return c(e,t),e.prototype.get=function(t){var e,n,r=new Promise(function(t,r){e=t,n=r}),i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="text",i.onload=function(){var r=o(i.response)?i.response:i.responseText,s=1223===i.status?204:i.status;0===s&&(s=r?200:0),200<=s&&s<=300?e(r):n("Failed to load "+t)},i.onerror=function(){n("Failed to load "+t)},i.send(),r},e.decorators=[{type:r.Injectable}],e.ctorParameters=[],e}(n.ResourceLoader),h=[a,{provide:r.COMPILER_OPTIONS,useValue:{providers:[{provide:n.ResourceLoader,useClass:l}]},multi:!0}],p=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},f=function(t){function e(){if(t.call(this),this._cache=u.$templateCache,null==this._cache)throw new Error("CachedResourceLoader: Template cache was not found in $templateCache.")}return p(e,t),e.prototype.get=function(t){return this._cache.hasOwnProperty(t)?Promise.resolve(this._cache[t]):Promise.reject("CachedResourceLoader: Did not find cached template for "+t)},e}(n.ResourceLoader),d={INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS:h,ResourceLoaderImpl:l},v=[{provide:n.ResourceLoader,useClass:f}],m=r.createPlatformFactory(n.platformCoreDynamic,"browserDynamic",h);e.RESOURCE_CACHE_PROVIDER=v,e.platformBrowserDynamic=m,e.__platform_browser_dynamic_private__=d})}).call(e,function(){return this}())},function(t,e,n){(function(t){!function(t,r){r(e,n(3))}(this,function(e,n){"use strict";function r(t){return void 0!==t&&null!==t}function i(t){return void 0===t||null===t}function o(t){return"string"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return s(t)&&Object.getPrototypeOf(t)===Ur}function u(t){return Array.isArray(t)}function c(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.overriddenName)return t.overriddenName;if(t.name)return t.name;var e=t.toString(),n=e.indexOf("\n");return n===-1?e:e.substring(0,n)}function l(t){return i(t)?null:t}function h(t){return!i(t)&&t}function p(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function f(t,e,n,r){var i=n+"\nreturn "+e+"\n//# sourceURL="+t,o=[],s=[];for(var a in r)o.push(a),s.push(r[a]);return(new(Function.bind.apply(Function,[void 0].concat(o.concat(i))))).apply(void 0,s)}function d(t){return!p(t)}function v(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function m(t,e,n){void 0===n&&(n=null);var i=[];return e.forEach(function(e){var o=e.visit(t,n);r(o)&&i.push(o)}),i}function y(t,e){if(r(t))for(var n=0;n<t.length;n++){var i=t[n];u(i)?y(i,e):e.push(i)}return e}function g(t,e,n){var r=new xo(t,e);return n.visitExpression(r,null)}function b(t){var e=new Eo;return e.visitAllStatements(t,null),e.varNames}function _(t,e){return void 0===e&&(e=null),new Di(t,e)}function w(t,e){return void 0===e&&(e=null),new Wi(t,null,e)}function x(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),r(t)?new Ti(t,e,n):null}function E(t,e){return void 0===e&&(e=null),new to(t,e)}function S(t,e){return void 0===e&&(e=null),new eo(t,e)}function T(t){return new Xi(t)}function M(t,e,n){return void 0===n&&(n=null),new Ki(t,e,n)}function C(t,e){return void 0===e&&(e=null),new Gi(t,e)}function A(t){return Vr.replaceAllMapped(t,To,function(t){return"-"+t[1].toLowerCase()})}function O(t,e){var n=t.indexOf(":");return n==-1?e:[t.slice(0,n).trim(),t.slice(n+1).trim()]}function P(t){return Vr.replaceAll(t,/\W/g,"_")}function R(t,e,n){return u(t)?e.visitArray(t,n):a(t)?e.visitStringMap(t,n):i(t)||d(t)?e.visitPrimitive(t,n):e.visitOther(t,n)}function I(t,e,n){return void 0===e&&(e=null),void 0===n&&(n="src"),null==e?"asset:@angular/lib/"+t+"/index":"asset:@angular/lib/"+t+"/src/"+e}function N(t){return r(t.value)?C(t.value):t.identifierIsInstance?w(t.identifier).instantiate([],x(t.identifier,[],[ni.Const])):w(t.identifier)}function L(){throw new Error("unimplemented")}function k(t){var e=mi.parse(t.selector)[0].getMatchingElementTemplate();return Qo.create({type:new Xo({reference:Object,name:t.type.name+"_Host",moduleUrl:t.type.moduleUrl,isHost:!0}),template:new Ko({encapsulation:n.ViewEncapsulation.None,template:e,templateUrl:"",styles:[],styleUrls:[],ngContentSelectors:[],animations:[]}),changeDetection:n.ChangeDetectionStrategy.Default,inputs:[],outputs:[],host:{},isComponent:!0,selector:"*",providers:[],viewProviders:[],queries:[],viewQueries:[]})}function D(t){var e=new Map;return t.forEach(function(t){e.get(t.identifier.reference)||e.set(t.identifier.reference,t)}),ci.values(e)}function j(t){return r(t)?t:[]}function F(t){return s(t)&&r(t.name)&&r(t.filePath)}function U(t){return t>=Ps&&t<=ks||t==Aa}function V(t){return ra<=t&&t<=ia}function B(t){return t>=va&&t<=Sa||t>=oa&&t<=ca}function z(t){return t>=va&&t<=ya||t>=oa&&t<=aa||V(t)}function H(t,e){if(n.isDevMode()&&!i(e)){if(!u(e))throw new Error("Expected '"+t+"' to be an array of strings.");for(var r=0;r<e.length;r+=1)if(!o(e[r]))throw new Error("Expected '"+t+"' to be an array of strings.")}}function G(t,e){if(r(e)&&(!u(e)||2!=e.length))throw new Error("Expected '"+t+"' to be an array, [start, end].");if(n.isDevMode()&&!i(e)){var o=e[0],s=e[1];Pa.forEach(function(t){if(t.test(o)||t.test(s))throw new Error("['"+o+"', '"+s+"'] contains unusable interpolation symbol.")})}}function W(t,e){return new Da(t,oo.Character,e,Vr.fromCharCode(e))}function q(t,e){return new Da(t,oo.Identifier,0,e)}function X(t,e){return new Da(t,oo.Keyword,0,e)}function Y(t,e){return new Da(t,oo.Operator,0,e)}function Z(t,e){return new Da(t,oo.String,0,e)}function K(t,e){return new Da(t,oo.Number,e,"")}function Q(t,e){return new Da(t,oo.Error,0,e)}function J(t){return va<=t&&t<=Sa||oa<=t&&t<=ca||t==da||t==Us}function $(t){if(0==t.length)return!1;var e=new Fa(t);if(!J(e.peek))return!1;for(e.advance();e.peek!==Os;){if(!tt(e.peek))return!1;e.advance()}return!0}function tt(t){return B(t)||V(t)||t==da||t==Us}function et(t){return t==ma||t==sa}function nt(t){return t==Ys||t==qs}function rt(t){return t===zs||t===js||t===Oa}function it(t){switch(t){case ga:return Rs;case ya:return Ns;case ba:return Ls;case _a:return Ps;case xa:return Is;default:return t}}function ot(t){var e=v(t.start)+"([\\s\\S]*?)"+v(t.end);return new RegExp(e,"g")}function st(t,e,n){void 0===n&&(n=null);var r=[];return e.forEach(function(e){var i=e.visit(t,n);i&&r.push(i)}),r}function at(t){if(":"!=t[0])return[null,t];var e=t.indexOf(":",1);if(e==-1)throw new Error('Unsupported format "'+t+'" expecting ":namespace:name"');return[t.slice(1,e),t.slice(e+1)]}function ut(t){return null===t?null:at(t)[0]}function ct(t,e){return t?":"+t+":"+e:e}function lt(t,e,n,r,i){return void 0===r&&(r=!1),void 0===i&&(i=Ia),new lu(new Wa(t,e),n,r,i).tokenize()}function ht(t){var e=t===Os?"EOF":String.fromCharCode(t);return'Unexpected character "'+e+'"'}function pt(t){return'Unknown entity "'+t+'" - use the "&#<decimal>;" or  "&#x<hex>;" syntax'}function ft(t){return!U(t)||t===Os}function dt(t){return U(t)||t===ea||t===Ks||t===zs||t===js||t===ta}function vt(t){return(t<va||Sa<t)&&(t<oa||ca<t)&&(t<ra||t>ia)}function mt(t){return t==Js||t==Os||!z(t)}function yt(t){return t==Js||t==Os||!B(t)}function gt(t,e,n){var r=!!n&&t.indexOf(n.start,e)==e;return t.charCodeAt(e)==Ta&&!r}function bt(t){return t===ta||B(t)}function _t(t,e){return wt(t)==wt(e)}function wt(t){return t>=va&&t<=Sa?t-va+oa:t}function xt(t){for(var e,n=[],r=0;r<t.length;r++){var i=t[r];e&&e.type==eu.TEXT&&i.type==eu.TEXT?(e.parts[0]+=i.parts[0],e.sourceSpan.end=i.sourceSpan.end):(e=i,n.push(e))}return n}function Et(t,e){return t.length>0&&t[t.length-1]===e}function St(t){return Mt(Tt(t.nodes).join("")+("["+t.meaning+"]"))}function Tt(t){return t.map(function(t){return t.visit(yu,null)})}function Mt(t){var e=Ct(t),n=Ot(e),r=8*e.length,i=new Array(80),o=[1732584193,4023233417,2562383102,271733878,3285377520],s=o[0],a=o[1],u=o[2],c=o[3],l=o[4];n[r>>5]|=128<<24-r%32,n[(r+64>>9<<4)+15]=r;for(var h=0;h<n.length;h+=16){for(var p=[s,a,u,c,l],f=p[0],d=p[1],v=p[2],m=p[3],y=p[4],g=0;g<80;g++){g<16?i[g]=n[h+g]:i[g]=Nt(i[g-3]^i[g-8]^i[g-14]^i[g-16],1);var b=Rt(g,a,u,c),_=b[0],w=b[1],x=[Nt(s,5),_,l,w,i[g]].reduce(It);M=[c,u,Nt(a,30),s,x],l=M[0],c=M[1],u=M[2],a=M[3],s=M[4]}C=[It(s,f),It(a,d),It(u,v),It(c,m),It(l,y)],s=C[0],a=C[1],u=C[2],c=C[3],l=C[4]}for(var E=Pt([s,a,u,c,l]),S="",h=0;h<E.length;h++){var T=E.charCodeAt(h);S+=(T>>>4&15).toString(16)+(15&T).toString(16)}return S.toLowerCase();var M,C}function Ct(t){for(var e="",n=0;n<t.length;n++){var r=At(t,n);r<=127?e+=String.fromCharCode(r):r<=2047?e+=String.fromCharCode(192|r>>>6,128|63&r):r<=65535?e+=String.fromCharCode(224|r>>>12,128|r>>>6&63,128|63&r):r<=2097151&&(e+=String.fromCharCode(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r))}return e}function At(t,e){if(e<0||e>=t.length)throw new Error("index="+e+' is out of range in "'+t+'"');var n,r=t.charCodeAt(e);return r>=55296&&r<=57343&&t.length>e+1&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?1024*(r-55296)+n-56320+65536:r}function Ot(t){for(var e=Array(t.length>>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<t.length;n++)e[n>>>2]|=(255&t.charCodeAt(n))<<8*(3-n&3);return e}function Pt(t){for(var e="",n=0;n<4*t.length;n++)e+=String.fromCharCode(t[n>>>2]>>>8*(3-n&3)&255);return e}function Rt(t,e,n,r){return t<20?[e&n|~e&r,1518500249]:t<40?[e^n^r,1859775393]:t<60?[e&n|e&r|n&r,2400959708]:[e^n^r,3395469782]}function It(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function Nt(t,e){return t<<e|t>>>32-e}function Lt(t){return Mu[t.toLowerCase()]||Cu}function kt(t){var e=new Ru(Pu,t);return function(t,n,r){return e.toI18nMessage(t,n,r)}}function Dt(t){return t.split(Iu)[1]}function jt(t,e,n,r){var i=new Vu(n,r);return i.extract(t,e)}function Ft(t,e,n,r,i){var o=new Vu(r,i);return o.merge(t,e,n)}function Ut(t){return t instanceof tu&&t.value&&t.value.startsWith("i18n")}function Vt(t){return t instanceof tu&&t.value&&"/i18n"===t.value}function Bt(t){return t.attrs.find(function(t){return t.name===ku})||null}function zt(t){if(!t)return["",""];var e=t.indexOf("|");return e==-1?["",t]:[t.slice(0,e),t.slice(e+1)]}function Ht(t){return Hu}function Gt(t){var e=t.getMessageMap(),n={};return Object.keys(e).forEach(function(t){n[t]=e[t].placeholders}),n}function Wt(t){var e=t.getMessageMap(),n={};return Object.keys(e).forEach(function(t){n[t]=e[t].placeholderToMsgIds}),n}function qt(t){return t.map(function(t){return t.visit(Xu)}).join("")}function Xt(t){return Ju.reduce(function(t,e){return t.replace(e[0],e[1])},t)}function Yt(t){return new zo({name:t.name,moduleUrl:t.moduleUrl,reference:sl.resolveIdentifier(t.name,t.moduleUrl,t.runtime)})}function Zt(t){return new qo({identifier:t})}function Kt(t){return Zt(Yt(t))}function Qt(t,e){var n=sl.resolveEnum(t.reference,e);return new zo({name:t.name+"."+e,moduleUrl:t.moduleUrl,reference:n})}function Jt(t){var e=new Dl;return new Ll(st(e,t),e.isExpanded,e.errors)}function $t(t,e){var n=t.cases.map(function(t){Nl.indexOf(t.value)!=-1||t.value.match(/^=\d+$/)||e.push(new kl(t.valueSourceSpan,'Plural cases should be "=<number>" or one of '+Nl.join(", ")));var n=Jt(t.expression);return e.push.apply(e,n.errors),new $a("template",[new Ja("ngPluralCase",""+t.value,t.valueSourceSpan)],n.nodes,t.sourceSpan,t.sourceSpan,t.sourceSpan)}),r=new Ja("[ngPlural]",t.switchValue,t.switchValueSourceSpan);return new $a("ng-container",[r],n,t.sourceSpan,t.sourceSpan,t.sourceSpan)}function te(t,e){var n=t.cases.map(function(t){var n=Jt(t.expression);return e.push.apply(e,n.errors),new $a("template",[new Ja("ngSwitchCase",""+t.value,t.valueSourceSpan)],n.nodes,t.sourceSpan,t.sourceSpan,t.sourceSpan)}),r=new Ja("[ngSwitch]",t.switchValue,t.switchValueSourceSpan);return new $a("ng-container",[r],n,t.sourceSpan,t.sourceSpan,t.sourceSpan)}function ee(t,e){var n=e.useExisting,r=e.useValue,i=e.deps;return new Go({token:t.token,useClass:t.useClass,useExisting:n,useFactory:t.useFactory,useValue:r,deps:i,multi:t.multi})}function ne(t,e){var n=e.eager,r=e.providers;return new ti(t.token,t.multiProvider,t.eager||n,r,t.providerType,t.lifecycleHooks,t.sourceSpan)}function re(t,e,n,o){return void 0===o&&(o=null),i(o)&&(o=[]),r(t)&&t.forEach(function(t){if(u(t))re(t,e,n,o);else{var i=void 0;t instanceof Go?i=t:t instanceof Xo?i=new Go({token:new qo({identifier:t}),useClass:t}):n.push(new Fl("Unknown provider type "+t,e)),r(i)&&o.push(i)}}),o}function ie(t,n,r){var i=new Map;t.forEach(function(t){var o=new Go({token:new qo({identifier:t.type}),useClass:t.type});oe([o],t.isComponent?e.ProviderAstType.Component:e.ProviderAstType.Directive,!0,n,r,i)});var o=t.filter(function(t){return t.isComponent}).concat(t.filter(function(t){return!t.isComponent}));return o.forEach(function(t){oe(re(t.providers,n,r),e.ProviderAstType.PublicService,!1,n,r,i),oe(re(t.viewProviders,n,r),e.ProviderAstType.PrivateService,!1,n,r,i)}),i}function oe(t,e,n,o,s,a){t.forEach(function(t){var u=a.get(t.token.reference);if(r(u)&&u.multiProvider!==t.multi&&s.push(new Fl("Mixing multi and non multi provider is not possible for token "+u.token.name,o)),i(u)){var c=t.token.identifier&&t.token.identifier instanceof Xo?t.token.identifier.lifecycleHooks:[];u=new ti(t.token,t.multi,n||c.length>0,[t],e,c,o),a.set(t.token.reference,u)}else t.multi||hi.clear(u.providers),u.providers.push(t)})}function se(t){var e=new Map;return r(t.viewQueries)&&t.viewQueries.forEach(function(t){return ue(e,t)}),t.type.diDeps.forEach(function(t){r(t.viewQuery)&&ue(e,t.viewQuery)}),e}function ae(t){var e=new Map;return t.forEach(function(t){r(t.queries)&&t.queries.forEach(function(t){return ue(e,t)}),t.type.diDeps.forEach(function(t){r(t.query)&&ue(e,t.query)})}),e}function ue(t,e){e.selectors.forEach(function(n){var r=t.get(n.reference);i(r)&&(r=[],t.set(n.reference,r)),r.push(e)})}function ce(t){if(i(t)||0===t.length||"/"==t[0])return!1;var e=t.match(Wl);return null===e||"package"==e[1]||"asset"==e[1]}function le(t,e,n){var i=[],o=Vr.replaceAllMapped(n,Gl,function(n){var o=r(n[1])?n[1]:n[2];return ce(o)?(i.push(t.resolve(e,o)),""):n[0]});return new Hl(o,i)}function he(t){var e=null,n=null,r=null,i=!1,o=null;t.attrs.forEach(function(t){var s=t.name.toLowerCase();s==ql?e=t.value:s==Kl?n=t.value:s==Zl?r=t.value:t.name==th?i=!0:t.name==eh&&t.value.length>0&&(o=t.value)}),e=pe(e);var s=t.name.toLowerCase(),a=Uu.OTHER;return at(s)[1]==Xl?a=Uu.NG_CONTENT:s==Jl?a=Uu.STYLE:s==$l?a=Uu.SCRIPT:s==Yl&&r==Ql&&(a=Uu.STYLESHEET),new rh(a,e,n,i,o)}function pe(t){return null===t||0===t.length?"*":t}function fe(t){return t.trim().split(/\s+/g)}function de(t,e){var n=new mi,r=at(t)[1];n.setElement(r);for(var i=0;i<e.length;i++){var o=e[i][0],s=at(o)[1],a=e[i][1];if(n.addAttribute(s,a),o.toLowerCase()==_h){var u=fe(a);u.forEach(function(t){return n.addClassName(t)})}}return n}function ve(){throw new Error("unimplemented")}function me(t){var e=[],n={},r=[],i=[];t.definitions.forEach(function(t){t instanceof No?ge(t,e).forEach(function(t){i.push(t),n[t.stateName]=t.styles}):r.push(t)});var o=r.map(function(t){return be(t,n,e)}),s=new Gh(t.name,i,o);return new up(s,e)}function ye(t,e){var n,r=t.split("."),i="";if(r.length>1){n=r[0];var o=r[1];switch(o){case"start":case"done":i=o;break;default:e.push(new ap('The provided animation output phase value "'+o+'" for "@'+n+'" is not supported (use start or done)'))}}else n=t,e.push(new ap("The animation trigger output event (@"+n+") is missing its phase value name (start or done are currently supported)"));return new dl(n,i,t)}function ge(t,e){var n=[];t.styles.styles.forEach(function(t){s(t)?n.push(t):e.push(new ap("State based animations cannot contain references to other states"))});var r=new Zh(n),i=t.stateNameExpr.split(/\s*,\s*/);return i.map(function(t){return new Wh(t,r)})}function be(t,e,n){var r=new np,i=[],o=t.stateChangeExpr.split(/\s*,\s*/);o.forEach(function(t){_e(t,n).forEach(function(t){i.push(t)})});var s=we(t.steps),a=Ee(s,e,n),u=Ae(a,0,r,e,n);0==n.length&&Oe(u,r,n);var c=u instanceof $h?u:new $h([u]);return new Xh(i,c)}function _e(t,e){var n=[],i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(!r(i)||i.length<4)return e.push(new ap("the provided "+t+" is not of a supported format")),n;var o=i[1],s=i[2],a=i[3];n.push(new qh(o,a));var u=o==vl&&a==vl;return"<"!=s[0]||u||n.push(new qh(a,o)),n}function we(t){return u(t)?new Vo(t):t}function xe(t,e,n){var r=[];return t.styles.forEach(function(t){o(t)?hi.addAll(r,Me(t,e,n)):r.push(t)}),r}function Ee(t,e,n){var r=Te(t,e,n);return new Vo(r)}function Se(t,e){if(s(e)&&t.length>0){var n=t.length-1,r=t[n];if(s(r))return void(t[n]=li.merge(r,e))}t.push(e)}function Te(t,e,n){var i;if(!(t instanceof Uo))return[t];i=t.steps;var o,s=[];return i.forEach(function(t){if(t instanceof jo)r(o)||(o=[]),xe(t,e,n).forEach(function(t){Se(o,t)});else{if(r(o)&&(s.push(new jo(0,o)),o=null),t instanceof Fo){var i=t.styles;i instanceof jo?i.styles=xe(i,e,n):i instanceof Do&&i.steps.forEach(function(t){t.styles=xe(t,e,n)})}else if(t instanceof Uo){var a=Te(t,e,n);t=t instanceof Bo?new Bo(a):new Vo(a)}s.push(t)}}),r(o)&&s.push(new jo(0,o)),s}function Me(t,e,n){var i=[];if(":"!=t[0])n.push(new ap('Animation states via styles must be prefixed with a ":"'));else{var o=t.substring(1),a=e[o];r(a)?a.styles.forEach(function(t){s(t)&&i.push(t)}):n.push(new ap('Unable to apply styles due to missing a state: "'+o+'"'))}return i}function Ce(t,e,n,i,o){var s=t.steps.length,a=0;t.steps.forEach(function(t){return a+=r(t.offset)?1:0}),a>0&&a<s&&(o.push(new ap("Not all style() entries contain an offset for the provided keyframe()")),a=s);var u=s-1,c=0==a?1/u:0,l=[],h=0,p=!1,f=0;t.steps.forEach(function(t){var e=t.offset,n={};t.styles.forEach(function(t){li.forEach(t,function(t,e){"offset"!=e&&(n[e]=t)})}),r(e)?p=p||e<f:e=h==u?op:c*h,l.push([e,n]),f=e,h++}),p&&hi.sort(l,function(t,e){return t[0]<=e[0]?-1:1});var d,v=l[0];v[0]!=ip&&hi.insert(l,0,v=[ip,{}]);var m=v[1];u=l.length-1;var y=l[u];y[0]!=op&&(l.push(y=[op,{}]),u++);var g=y[1];for(d=1;d<=u;d++){var b=l[d],_=b[1];li.forEach(_,function(t,e){r(m[e])||(m[e]=gl)})}for(d=u-1;d>=0;d--){var b=l[d],_=b[1];li.forEach(_,function(t,e){r(g[e])||(g[e]=t)})}return l.map(function(t){return new Kh(t[0],new Zh([t[1]]))})}function Ae(t,e,n,i,o){var s,a=0,u=e;if(t instanceof Uo){var c,l=0,h=[],p=t instanceof Bo;if(t.steps.forEach(function(t){var s=p?u:e;if(t instanceof jo)return t.styles.forEach(function(t){var e=t;li.forEach(e,function(t,e){n.insertAtTime(e,s,t)})}),void(c=t.styles);var f=Ae(t,s,n,i,o);if(r(c)){if(t instanceof Uo){var d=new Zh(c);h.push(new Yh(d,[],0,0,""))}else{var v=f;hi.addAll(v.startingStyles.styles,c)}c=null}var m=f.playTime;e+=m,a+=m,l=tp.max(m,l),h.push(f)}),r(c)){var f=new Zh(c);h.push(new Yh(f,[],0,0,""))}p?(s=new Jh(h),a=l,e=u+a):s=new $h(h)}else if(t instanceof Fo){var d,v=Pe(t.timings,o),m=t.styles;if(m instanceof Do)d=Ce(m,e,n,i,o);else{var y=m,g=op,b=new Zh(y.styles),_=new Kh(g,b);d=[_]}s=new Yh(new Zh([]),d,v.duration,v.delay,v.easing),a=v.duration+v.delay,e+=a,d.forEach(function(t){return t.styles.styles.forEach(function(t){return li.forEach(t,function(t,r){return n.insertAtTime(r,e,t)})})})}else s=new Yh(null,[],0,0,"");return s.playTime=a,s.startTime=u,s}function Oe(t,e,n){if(t instanceof Yh&&t.keyframes.length>0){var r=t.keyframes;if(1==r.length){var i=r[0],o=Re(i,t.startTime,t.playTime,e,n);t.keyframes=[o,i]}}else t instanceof Qh&&t.steps.forEach(function(t){return Oe(t,e,n)})}function Pe(t,e){var n,s=/^([\.\d]+)(m?s)(?:\s+([\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?/i,a=0,u=null;if(o(t)){var c=t.match(s);if(null===c)return e.push(new ap('The provided timing value "'+t+'" is invalid.')),new cp(0,0,null);var l=zr.parseFloat(c[1]),h=c[2];"s"==h&&(l*=sp),n=tp.floor(l);var p=c[3],f=c[4];if(r(p)){var d=zr.parseFloat(p);r(f)&&"s"==f&&(d*=sp),a=tp.floor(d)}var v=c[5];i(v)||(u=v)}else n=t;return new cp(n,a,u)}function Re(t,e,n,i,o){var s={},a=e+n;return t.styles.styles.forEach(function(t){li.forEach(t,function(t,n){if("offset"!=n){var u,c,l,h=i.indexOfAtOrBeforeTime(n,e);r(h)?(u=i.getByIndex(n,h),l=u.value,c=i.getByIndex(n,h+1)):l=gl,r(c)&&!c.matches(a,t)&&o.push(new ap('The animated CSS property "'+n+'" unexpectedly changes between steps "'+u.time+'ms" and "'+a+'ms" at "'+c.time+'ms"')),s[n]=l}})}),new Kh(ip,new Zh([s]))}function Ie(t,e){var n=C(yl);switch(e){case yl:return t.equals(n);case vl:return C(!0);default:return t.equals(C(e))}}function Ne(t){if(t instanceof Yh&&t.duration>0&&2==t.keyframes.length){var e=Le(t.keyframes[0])[0],n=Le(t.keyframes[1])[0];return li.isEmpty(e)&&li.isEmpty(n)}return!1}function Le(t){return t.styles.styles}function ke(t,e){var n=new Pp(t);return m(n,e),new Op(n.outputs,n.errors)}function De(t,e){return void 0===e&&(e=null),R(t,new Rp,e)}function je(t,e,n){if(e===n)return t;for(var i=no,o=e;o!==n&&r(o.declarationElement.view);)o=o.declarationElement.view,i=i.prop("parent");if(o!==n)throw new Error("Internal error: Could not calculate a property in a parent view: "+t);if(t instanceof Ji){var s=t;(n.fields.some(function(t){return t.name==s.name})||n.getters.some(function(t){return t.name==s.name}))&&(i=i.cast(n.classType))}return g(no.name,i,t)}function Fe(t,e){var n=[N(t)];return e&&n.push(io),no.prop("parentInjector").callMethod("get",n)}function Ue(t,e){return"viewFactory_"+t.type.name+e}function Ve(t){for(var e=[],n=E([]),r=0;r<t.length;r++){var i=t[r];i.type instanceof Mi?(e.length>0&&(n=n.callMethod(ki.ConcatArray,[E(e)]),e=[]),n=n.callMethod(ki.ConcatArray,[i])):e.push(i)}return e.length>0&&(n=n.callMethod(ki.ConcatArray,[E(e)])),n}function Be(t,e,n,r){r.fields.push(new po(n.name,null));var o=e<Ol.pureProxies.length?Ol.pureProxies[e]:null;if(i(o))throw new Error("Unsupported number of argument for pure functions: "+e);r.createMethod.addStmt(no.prop(n.name).set(w(Yt(o)).callFn([t])).toStmt())}function ze(t){return hi.flatten(t.values.map(function(t){return t instanceof kp?He(t.view.declarationElement.appElement,t.view,ze(t)):t}))}function He(t,e,n){var r=n.map(function(t){return g(no.name,_("nestedView"),t)});return t.callMethod("mapNestedViews",[_(e.className),M([new Zi("nestedView",e.classType)],[new lo(E(r))],Ai)])}function Ge(t,e,n,r){r.fields.push(new po(n,x(Yt(Ol.QueryList),[Ai])));var i=no.prop(n);return r.createMethod.addStmt(no.prop(n).set(w(Yt(Ol.QueryList),[Ai]).instantiate([])).toStmt()),i}function We(t,e){e.meta.selectors.forEach(function(n){var r=t.get(n.reference);i(r)&&(r=[],t.set(n.reference,r)),r.push(e)})}function qe(t,e){return w(Qt(t,e))}function Xe(t,e,n,r){var i;return i=e>0?C(t).lowerEquals(Hp.requestNodeIndex).and(Hp.requestNodeIndex.lowerEquals(C(t+e))):C(t).identical(Hp.requestNodeIndex),new yo(Hp.token.identical(N(n.token)).and(i),[new lo(r)])}function Ye(t,e,n,r,o,s){var a,u,c=s.view;if(r?(a=E(n),u=new Mi(Ai)):(a=n[0],u=n[0].type),i(u)&&(u=Ai),o)c.fields.push(new po(t,u)),c.createMethod.addStmt(no.prop(t).set(a).toStmt());else{var l="_"+t;c.fields.push(new po(l,u));var h=new Lp(c);h.resetDebugInfo(s.nodeIndex,s.sourceAst),h.addStmt(new yo(no.prop(l).isBlank(),[no.prop(l).set(a).toStmt()])),h.addStmt(new lo(no.prop(l))),c.getters.push(new vo(t,h.finish(),u))}return no.prop(t)}function Ze(t,e){for(var n=null,r=t.pipeMetas.length-1;r>=0;r--){var o=t.pipeMetas[r];if(o.name==e){n=o;break}}if(i(n))throw new Error("Illegal state: Could not find pipe "+e+" although the parser should have detected this error!");return n}function Ke(t,e){return e>0?Lc.EMBEDDED:t.type.isHost?Lc.HOST:Lc.COMPONENT}function Qe(t,e,n,r,i){var o=new tf(t,e,r,i),s=n.visit(o,nh.Expression);return new Jp(s,o.needsValueUnwrapper,o.temporaryCount)}function Je(t,e,n,r){var i=new tf(t,e,null,r),o=[];return sn(n.visit(i,nh.Statement),o),en(i.temporaryCount,r,o),o}function $e(t,e){return"tmp_"+t+"_"+e}function tn(t,e){return new ao($e(t,e),io)}function en(t,e,n){for(var r=t-1;r>=0;r--)n.unshift(tn(e,r))}function nn(t,e){if(t!==nh.Statement)throw new Error("Expected a statement, but saw "+e)}function rn(t,e){if(t!==nh.Expression)throw new Error("Expected an expression, but saw "+e)}function on(t,e){return t===nh.Statement?e.toStmt():e}function sn(t,e){u(t)?t.forEach(function(t){return sn(t,e)}):e.push(t)}function an(t,e,n){var r=[];return t.forEach(function(t){n.view.bindings.push(new Qp(n,t));var e=nf.getOrCreate(n,t.target,t.name,r);e.addAction(t,null,null)}),e.forEach(function(t){var e=n.instances.get(Zt(t.directive.type).reference);t.hostEvents.forEach(function(i){n.view.bindings.push(new Qp(n,i));var o=nf.getOrCreate(n,i.target,i.name,r);o.addAction(i,t.directive,e)})}),r.forEach(function(t){return t.finishMethod()}),r}function un(t,e,n){li.forEach(t.directive.outputs,function(t,r){n.filter(function(e){return e.eventName==t}).forEach(function(t){t.listenToDirective(e,r)})})}function cn(t){t.forEach(function(t){return t.listenToRenderer()})}function ln(t){t.forEach(function(t){t.listener.listenToAnimation(t.output)})}function hn(t){return t instanceof co?t.expr:t instanceof lo?t.value:null}function pn(t){return Vr.replaceAll(t,/[^a-zA-Z_]/g,"_")}function fn(t,e,n){var r=n.view,i=r.detectChangesInInputsMethod,o=t.directive.type.lifecycleHooks;o.indexOf(Mc.OnChanges)!==-1&&t.inputs.length>0&&i.addStmt(new yo(Gp.changes.notIdentical(io),[e.callMethod("ngOnChanges",[Gp.changes]).toStmt()])),o.indexOf(Mc.OnInit)!==-1&&i.addStmt(new yo(rf.and(of),[e.callMethod("ngOnInit",[]).toStmt()])),o.indexOf(Mc.DoCheck)!==-1&&i.addStmt(new yo(of,[e.callMethod("ngDoCheck",[]).toStmt()]))}function dn(t,e,n){var r=n.view,i=t.type.lifecycleHooks,o=r.afterContentLifecycleCallbacksMethod;o.resetDebugInfo(n.nodeIndex,n.sourceAst),i.indexOf(Mc.AfterContentInit)!==-1&&o.addStmt(new yo(rf,[e.callMethod("ngAfterContentInit",[]).toStmt()])),i.indexOf(Mc.AfterContentChecked)!==-1&&o.addStmt(e.callMethod("ngAfterContentChecked",[]).toStmt())}function vn(t,e,n){var r=n.view,i=t.type.lifecycleHooks,o=r.afterViewLifecycleCallbacksMethod;o.resetDebugInfo(n.nodeIndex,n.sourceAst),i.indexOf(Mc.AfterViewInit)!==-1&&o.addStmt(new yo(rf,[e.callMethod("ngAfterViewInit",[]).toStmt()])),i.indexOf(Mc.AfterViewChecked)!==-1&&o.addStmt(e.callMethod("ngAfterViewChecked",[]).toStmt())}function mn(t,e,n){var r=n.view.destroyMethod;r.resetDebugInfo(n.nodeIndex,n.sourceAst),t.lifecycleHooks.indexOf(Mc.OnDestroy)!==-1&&r.addStmt(e.callMethod("ngOnDestroy",[]).toStmt())}function yn(t,e,n){var r=n.destroyMethod;t.type.lifecycleHooks.indexOf(Mc.OnDestroy)!==-1&&r.addStmt(e.callMethod("ngOnDestroy",[]).toStmt())}function gn(t){return no.prop("_expr_"+t)}function bn(t){return _("currVal_"+t)}function _n(t,e,n,r,o,s,a,u){var c=Qe(t,o,r,Gp.valUnwrapper,u);if(!i(c.expression)){if(c.temporaryCount)for(var l=0;l<c.temporaryCount;l++)a.addStmt(tn(u,l));if(t.fields.push(new po(n.name,null,[Vi.Private])),t.createMethod.addStmt(no.prop(n.name).set(w(Yt(Ol.UNINITIALIZED))).toStmt()),c.needsValueUnwrapper){var h=Gp.valUnwrapper.callMethod("reset",[]).toStmt();a.addStmt(h)}a.addStmt(e.set(c.expression).toDeclStmt(null,[Vi.Final]));var p=w(Yt(Ol.checkBinding)).callFn([Gp.throwOnChange,n,e]);c.needsValueUnwrapper&&(p=Gp.valUnwrapper.prop("hasWrappedValue").or(p)),a.addStmt(new yo(p,s.concat([no.prop(n.name).set(e).toStmt()])))}}function wn(t,e,n){var r=n.bindings.length;n.bindings.push(new Qp(e,t));var i=bn(r),o=gn(r);n.detectChangesRenderPropertiesMethod.resetDebugInfo(e.nodeIndex,t),_n(n,i,o,t.value,n.componentContext,[no.prop("renderer").callMethod("setText",[e.renderNode,i]).toStmt()],n.detectChangesRenderPropertiesMethod,r)}function xn(t,n,i,o){var s=i.view,a=i.renderNode;t.forEach(function(t){var u=s.bindings.length;s.bindings.push(new Qp(i,t)),s.detectChangesRenderPropertiesMethod.resetDebugInfo(i.nodeIndex,t);var c=gn(u),l=bn(u),h=En(t,c),p=En(t,l),f=[];switch(t.type){case e.PropertyBindingType.Property:s.genConfig.logBindingUpdate&&f.push(Cn(a,t.name,p)),f.push(no.prop("renderer").callMethod("setElementProperty",[a,C(t.name),p]).toStmt());break;case e.PropertyBindingType.Attribute:p=p.isBlank().conditional(io,p.callMethod("toString",[])),f.push(no.prop("renderer").callMethod("setElementAttribute",[a,C(t.name),p]).toStmt());break;case e.PropertyBindingType.Class:f.push(no.prop("renderer").callMethod("setElementClass",[a,C(t.name),p]).toStmt());break;case e.PropertyBindingType.Style:var d=p.callMethod("toString",[]);r(t.unit)&&(d=d.plus(C(t.unit))),p=p.isBlank().conditional(io,d),f.push(no.prop("renderer").callMethod("setElementStyle",[a,C(t.name),p]).toStmt());break;case e.PropertyBindingType.Animation:var v=t.name,m=no;o&&(m=i.appElement.prop("componentView"));var y=m.prop("componentType").prop("animations").key(C(v)),g=C(yl),b=_("oldRenderVar");f.push(b.set(h).toDeclStmt()),f.push(new yo(b.equals(w(Yt(Ol.UNINITIALIZED))),[b.set(g).toStmt()]));var x=_("newRenderVar");if(f.push(x.set(p).toDeclStmt()),f.push(new yo(x.equals(w(Yt(Ol.UNINITIALIZED))),[x.set(g).toStmt()])),f.push(y.callFn([no,a,b,x]).toStmt()),s.detachMethod.addStmt(y.callFn([no,a,h,g]).toStmt()),!sf.get(s)){sf.set(s,!0);var E=no.callMethod("triggerQueuedAnimations",[]).toStmt();s.afterViewLifecycleCallbacksMethod.addStmt(E),s.detachMethod.addStmt(E)}}_n(s,l,c,t.value,n,f,s.detectChangesRenderPropertiesMethod,s.bindings.length)})}function En(t,e){var r;switch(t.securityContext){case n.SecurityContext.NONE:return e;case n.SecurityContext.HTML:r="HTML";break;case n.SecurityContext.STYLE:r="STYLE";break;case n.SecurityContext.SCRIPT:r="SCRIPT";break;case n.SecurityContext.URL:r="URL";break;case n.SecurityContext.RESOURCE_URL:r="RESOURCE_URL";break;default:throw new Error("internal error, unexpected SecurityContext "+t.securityContext+".")}var i=Bp.viewUtils.prop("sanitizer"),o=[w(Yt(Ol.SecurityContext)).prop(r),e];return i.callMethod("sanitize",o)}function Sn(t,e){xn(t,e.view.componentContext,e,!1)}function Tn(t,e,n){xn(t.hostProperties,e,n,!0)}function Mn(t,e,n){if(0!==t.inputs.length){var r=n.view,i=r.detectChangesInInputsMethod;i.resetDebugInfo(n.nodeIndex,n.sourceAst);var o=t.directive.type.lifecycleHooks,s=o.indexOf(Mc.OnChanges)!==-1,a=t.directive.isComponent&&!Sc(t.directive.changeDetection);s&&i.addStmt(Gp.changes.set(io).toStmt()),a&&i.addStmt(Gp.changed.set(C(!1)).toStmt()),t.inputs.forEach(function(t){var o=r.bindings.length;r.bindings.push(new Qp(n,t)),i.resetDebugInfo(n.nodeIndex,t);var u=gn(o),c=bn(o),l=[e.prop(t.directiveName).set(c).toStmt()];s&&(l.push(new yo(Gp.changes.identical(io),[Gp.changes.set(S([],new Ci(x(Yt(Ol.SimpleChange))))).toStmt()])),
l.push(Gp.changes.key(C(t.directiveName)).set(w(Yt(Ol.SimpleChange)).instantiate([u,c])).toStmt())),a&&l.push(Gp.changed.set(C(!0)).toStmt()),r.genConfig.logBindingUpdate&&l.push(Cn(n.renderNode,t.directiveName,c)),_n(r,c,u,t.value,r.componentContext,l,i,o)}),a&&i.addStmt(new yo(Gp.changed,[n.appElement.prop("componentView").callMethod("markAsCheckOnce",[]).toStmt()]))}}function Cn(t,e,n){var r=no.prop("renderer").callMethod("setBindingDebugInfo",[t,C("ng-reflect-"+A(e)),n.isBlank().conditional(io,n.callMethod("toString",[]))]).toStmt(),i=no.prop("renderer").callMethod("setBindingDebugInfo",[t,C("ng-reflect-"+A(e)),C("[ERROR] Exception while trying to serialize the value")]).toStmt();return new go([r],[i])}function An(t,e,n){var r=new af(t,n);m(r,e),t.pipes.forEach(function(t){yn(t.meta,t.instance,t.view)})}function On(t,e,n){var r=new mf(t,n);return m(r,e,t.declarationElement.isNull()?t.declarationElement:t.declarationElement.parent),r.nestedViewCount}function Pn(t,e){t.afterNodes(),Fn(t,e),t.nodes.forEach(function(t){t instanceof Xp&&t.hasEmbeddedView&&Pn(t.embeddedView,e)})}function Rn(t){for(var e=t.view;Nn(t.parent,e);)t=t.parent;return t}function In(t){for(var e=t.view;Nn(t,e);)t=t.parent;return t}function Nn(t,e){return!t.isNull()&&t.sourceAst.name===hf&&t.view===e}function Ln(t,e){var n={};return li.forEach(t,function(t,e){n[e]=t}),e.forEach(function(t){li.forEach(t.hostAttributes,function(t,e){var i=n[e];n[e]=r(i)?Dn(e,i,t):t})}),jn(n)}function kn(t){var e={};return t.forEach(function(t){e[t.name]=t.value}),e}function Dn(t,e,n){return t==cf||t==lf?e+" "+n:n}function jn(t){var e=[];return li.forEach(t,function(t,n){e.push([n,t])}),hi.sort(e,function(t,e){return Vr.compare(t[0],e[0])}),e}function Fn(t,e){var n=io;t.genConfig.genDebugInfo&&(n=_("nodeDebugInfos_"+t.component.type.name+t.viewIndex),e.push(n.set(E(t.nodes.map(Un),new Mi(new Ti(Yt(Ol.StaticNodeDebugInfo)),[ni.Const]))).toDeclStmt(null,[Vi.Final])));var r=_("renderType_"+t.component.type.name);0===t.viewIndex&&e.push(r.set(io).toDeclStmt(x(Yt(Ol.RenderComponentType))));var i=Vn(t,r,n);e.push(i),e.push(Bn(t,i,r))}function Un(t){var e=t instanceof Xp?t:null,n=[],i=io,o=[];return r(e)&&(n=e.getProviderTokens(),r(e.component)&&(i=N(Zt(e.component.type))),li.forEach(e.referenceTokens,function(t,e){o.push([e,r(t)?N(t):io])})),w(Yt(Ol.StaticNodeDebugInfo)).instantiate([E(n,new Mi(Ai,[ni.Const])),i,S(o,new Ci(Ai,[ni.Const]))],x(Yt(Ol.StaticNodeDebugInfo),null,[ni.Const]))}function Vn(t,e,n){var r=[new Zi(Vp.viewUtils.name,x(Yt(Ol.ViewUtils))),new Zi(Vp.parentInjector.name,x(Yt(Ol.Injector))),new Zi(Vp.declarationEl.name,x(Yt(Ol.AppElement)))],i=[_(t.className),e,jp.fromValue(t.viewType),Vp.viewUtils,Vp.parentInjector,Vp.declarationEl,Up.fromValue(qn(t))];t.genConfig.genDebugInfo&&i.push(n);var o=new fo(null,r,[ro.callFn(i).toStmt()]),s=[new fo("createInternal",[new Zi(ff.name,Ri)],zn(t),x(Yt(Ol.AppElement))),new fo("injectorGetInternal",[new Zi(Hp.token.name,Ai),new Zi(Hp.requestNodeIndex.name,Pi),new Zi(Hp.notFoundResult.name,Ai)],Gn(t.injectorGetMethod.finish(),Hp.notFoundResult),Ai),new fo("detectChangesInternal",[new Zi(Gp.throwOnChange.name,Oi)],Hn(t)),new fo("dirtyParentQueriesInternal",[],t.dirtyParentQueriesMethod.finish()),new fo("destroyInternal",[],t.destroyMethod.finish()),new fo("detachInternal",[],t.detachMethod.finish())].concat(t.eventHandlerMethods),a=t.genConfig.genDebugInfo?Ol.DebugAppView:Ol.AppView,u=new mo(t.className,w(Yt(a),[Wn(t)]),t.fields,t.getters,o,s.filter(function(t){return t.body.length>0}));return u}function Bn(t,e,n){var r,i=[new Zi(Vp.viewUtils.name,x(Yt(Ol.ViewUtils))),new Zi(Vp.parentInjector.name,x(Yt(Ol.Injector))),new Zi(Vp.declarationEl.name,x(Yt(Ol.AppElement)))],o=[];if(r=t.component.template.templateUrl==t.component.type.moduleUrl?t.component.type.moduleUrl+" class "+t.component.type.name+" - inline template":t.component.template.templateUrl,0===t.viewIndex){var s=S(t.animations.map(function(t){return[t.name,t.fnVariable]}));o=[new yo(n.identical(io),[n.set(Vp.viewUtils.callMethod("createRenderComponentType",[C(r),C(t.component.template.ngContentSelectors.length),Fp.fromValue(t.component.template.encapsulation),t.styles,s])).toStmt()])]}return M(i,o.concat([new lo(_(e.name).instantiate(e.constructorMethod.params.map(function(t){return _(t.name)})))]),x(Yt(Ol.AppView),[Wn(t)])).toDeclStmt(t.viewFactory.name,[Vi.Final])}function zn(t){var e=io,n=[];t.viewType===Lc.COMPONENT&&(e=Bp.renderer.callMethod("createViewRoot",[no.prop("declarationAppElement").prop("nativeElement")]),n=[pf.set(e).toDeclStmt(x(t.genConfig.renderTypes.renderNode),[Vi.Final])]);var r;return r=t.viewType===Lc.HOST?t.nodes[0].appElement:io,n.concat(t.createMethod.finish(),[no.callMethod("init",[Ve(t.rootNodesOrAppElements),E(t.nodes.map(function(t){return t.renderNode})),E(t.disposables),E(t.subscriptions)]).toStmt(),new lo(r)])}function Hn(t){var e=[];if(t.detectChangesInInputsMethod.isEmpty()&&t.updateContentQueriesMethod.isEmpty()&&t.afterContentLifecycleCallbacksMethod.isEmpty()&&t.detectChangesRenderPropertiesMethod.isEmpty()&&t.updateViewQueriesMethod.isEmpty()&&t.afterViewLifecycleCallbacksMethod.isEmpty())return e;hi.addAll(e,t.detectChangesInInputsMethod.finish()),e.push(no.callMethod("detectContentChildrenChanges",[Gp.throwOnChange]).toStmt());var n=t.updateContentQueriesMethod.finish().concat(t.afterContentLifecycleCallbacksMethod.finish());n.length>0&&e.push(new yo(T(Gp.throwOnChange),n)),hi.addAll(e,t.detectChangesRenderPropertiesMethod.finish()),e.push(no.callMethod("detectViewChildrenChanges",[Gp.throwOnChange]).toStmt());var r=t.updateViewQueriesMethod.finish().concat(t.afterViewLifecycleCallbacksMethod.finish());r.length>0&&e.push(new yo(T(Gp.throwOnChange),r));var i=[],o=b(e);return fi.has(o,Gp.changed.name)&&i.push(Gp.changed.set(C(!0)).toDeclStmt(Oi)),fi.has(o,Gp.changes.name)&&i.push(Gp.changes.set(io).toDeclStmt(new Ci(x(Yt(Ol.SimpleChange))))),fi.has(o,Gp.valUnwrapper.name)&&i.push(Gp.valUnwrapper.set(w(Yt(Ol.ValueUnwrapper)).instantiate([])).toDeclStmt(null,[Vi.Final])),i.concat(e)}function Gn(t,e){return t.length>0?t.concat([new lo(e)]):t}function Wn(t){return t.viewType===Lc.COMPONENT?x(t.component.type):Ai}function qn(t){var e;return e=t.viewType===Lc.COMPONENT?Sc(t.component.changeDetection)?Tc.CheckAlways:Tc.CheckOnce:Tc.CheckAlways}function Xn(t){return t.dependencies.forEach(function(t){if(t instanceof df){var e=t;e.placeholder.moduleUrl=Zn(e.comp.moduleUrl)}else if(t instanceof vf){var n=t;n.placeholder.name=Kn(n.comp),n.placeholder.moduleUrl=Zn(n.comp.moduleUrl)}}),t.statements}function Yn(t,e){return t.dependencies.forEach(function(t){t.valuePlaceholder.moduleUrl=Qn(t.moduleUrl,t.isShimmed,e)}),t.statements}function Zn(t){var e=$n(t);return e[0]+".ngfactory"+e[1]}function Kn(t){return t.name+"NgFactory"}function Qn(t,e,n){return e?t+".shim"+n:""+t+n}function Jn(t){if(!t.isComponent)throw new Error("Could not compile '"+t.type.name+"' because it is not a component.")}function $n(t){if(/\.d\.ts$/.test(t))return[t.substring(0,t.length-5),".ts"];var e=t.lastIndexOf(".");return e!==-1?[t.substring(0,e),t.substring(e)]:[t,""]}function tr(){return new Tf(Ef)}function er(t){var e=rr(t);return e&&e[$p.Scheme]||""}function nr(t,e,n,i,o,s,a){var u=[];return r(t)&&u.push(t+":"),r(n)&&(u.push("//"),r(e)&&u.push(e+"@"),u.push(n),r(i)&&u.push(":"+i)),r(o)&&u.push(o),r(s)&&u.push("?"+s),r(a)&&u.push("#"+a),u.join("")}function rr(t){return t.match(Mf)}function ir(t){if("/"==t)return"/";for(var e="/"==t[0]?"/":"",n="/"===t[t.length-1]?"/":"",r=t.split("/"),i=[],o=0,s=0;s<r.length;s++){var a=r[s];switch(a){case"":case".":break;case"..":i.length>0?i.pop():o++;break;default:i.push(a)}}if(""==e){for(;o-- >0;)i.unshift("..");0===i.length&&i.push(".")}return e+i.join("/")+n}function or(t){var e=t[$p.Path];return e=i(e)?"":ir(e),t[$p.Path]=e,nr(t[$p.Scheme],t[$p.UserInfo],t[$p.Domain],t[$p.Port],e,t[$p.QueryData],t[$p.Fragment])}function sr(t,e){var n=rr(encodeURI(e)),o=rr(t);if(r(n[$p.Scheme]))return or(n);n[$p.Scheme]=o[$p.Scheme];for(var s=$p.Scheme;s<=$p.Port;s++)i(n[s])&&(n[s]=o[s]);if("/"==n[$p.Path][0])return or(n);var a=o[$p.Path];i(a)&&(a="/");var u=a.lastIndexOf("/");return a=a.substring(0,u+1)+n[$p.Path],n[$p.Path]=a,or(n)}function ar(t,e){return new Qo({type:t.type,isComponent:t.isComponent,selector:t.selector,exportAs:t.exportAs,changeDetection:t.changeDetection,inputs:t.inputs,outputs:t.outputs,hostListeners:t.hostListeners,hostProperties:t.hostProperties,hostAttributes:t.hostAttributes,providers:t.providers,viewProviders:t.viewProviders,queries:t.queries,viewQueries:t.viewQueries,entryComponents:t.entryComponents,template:e})}function ur(t){return t instanceof n.DirectiveMetadata}function cr(t,e){var n=Pf.get(t),r=Rf.get(t);return sl.hasLifecycleHook(e,n,r)}function lr(t){return t instanceof n.NgModuleMetadata}function hr(t){return t instanceof n.PipeMetadata}function pr(t,e,n,r){return void 0===n&&(n=[]),void 0===r&&(r=new Set),t.forEach(function(t){if(!r.has(t.type.reference)){r.add(t.type.reference);var i=e?t.importedModules.concat(t.exportedModules):t.exportedModules;pr(i,e,n,r),n.push(t)}}),n}function fr(t,e){if(void 0===e&&(e=[]),t)for(var r=0;r<t.length;r++){var i=n.resolveForwardRef(t[r]);u(i)?fr(i,e):e.push(i)}return e}function dr(t){return F(t)||t instanceof n.Type}function vr(t){return F(t)?t.filePath:null}function mr(t,e,n){if(F(e))return vr(e);if(r(n.moduleId)){var i=n.moduleId,o=er(i);return r(o)&&o.length>0?i:"package:"+i+So}return t.importUri(e)}function yr(t,e){return R(t,new Df,e)}function gr(t,e,n){if(void 0===n&&(n=!0),i(t))return null;var r=Vr.replaceAllMapped(t,Hf,function(t){return"$"==t[0]?e?"\\$":"$":"\n"==t[0]?"\\n":"\r"==t[0]?"\\r":"\\"+t[0]}),o=n||!Gf.test(r);return o?"'"+r+"'":r}function br(t){for(var e="",n=0;n<t;n++)e+="  ";return e}function _r(t){var e,n=new $f(Qf),r=Yf.createRoot([]);return e=u(t)?t:[t],e.forEach(function(t){if(t instanceof so)t.visitStatement(n,r);else if(t instanceof Li)t.visitExpression(n,r);else{if(!(t instanceof xi))throw new Error("Don't know how to print debug info for "+t);t.visitType(n,r)}}),r.toSource()}function wr(t,e){var n=t.concat([new lo(_(e))]),i=new td(null,null,null,new Map),o=new nd,s=o.visitAllStatements(n,i);return r(s)?s.value:null}function xr(t,e,n,i,o){for(var s=i.createChildWihtLocalVars(),a=0;a<t.length;a++)s.vars.set(t[a],e[a]);var u=o.visitAllStatements(n,s);return r(u)?u.value:null}function Er(t,e,n){var r={};t.getters.forEach(function(i){r[i.name]={configurable:!1,get:function(){var r=new td(e,this,t.name,e.vars);return xr([],[],i.body,r,n)}}}),t.methods.forEach(function(i){var o=i.params.map(function(t){return t.name});r[i.name]={writable:!1,configurable:!1,value:function(){for(var r=[],s=0;s<arguments.length;s++)r[s-0]=arguments[s];var a=new td(e,this,t.name,e.vars);return xr(o,r,i.body,a,n)}}});var i=t.constructorMethod.params.map(function(t){return t.name}),o=function(){for(var r=this,o=[],s=0;s<arguments.length;s++)o[s-0]=arguments[s];var a=new td(e,this,t.name,e.vars);t.fields.forEach(function(t){r[t.name]=void 0}),xr(i,o,t.constructorMethod.body,a,n)},s=t.parent.visitExpression(n,e);return o.prototype=Object.create(s.prototype,r),o}function Sr(t,e,n,r){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return xr(t,i,e,n,r)}}function Tr(t,e,n){var r=new ud,i=Yf.createRoot([n]);return r.visitAllStatements(e,i),f(t,n,i.toSource(),r.getArgs())}function Mr(t){return Vr.replaceAllMapped(t,Td,function(t){return""})}function Cr(t){var e=t.match(Md);return e?e[1]:""}function Ar(t,e){var n=Or(t),i=0;return Vr.replaceAllMapped(n.escapedString,Cd,function(t){var o=t[2],s="",a=t[4],u="";r(t[4])&&t[4].startsWith("{"+Rd)&&(s=n.blocks[i++],a=t[4].substring(Rd.length+1),u="{");var c=e(new Id(o,s));return""+t[1]+c.selector+t[3]+u+c.content+a})}function Or(t){for(var e=Vr.split(t,Ad),n=[],r=[],i=0,o=[],s=0;s<e.length;s++){var a=e[s];a==Pd&&i--,i>0?o.push(a):(o.length>0&&(r.push(o.join("")),n.push(Rd),o=[]),n.push(a)),a==Od&&i++}return o.length>0&&(r.push(o.join("")),n.push(Rd)),new Nd(n.join(""),r)}function Pr(t){var e="styles";return t&&(e+="_"+t.type.name),e}function Rr(t){if(!t.isComponent)throw new Error("Could not compile '"+t.type.name+"' because it is not a component.")}function Ir(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];Gd[i.toLowerCase()]=t}}function Nr(){sl.reflectionCapabilities=new ul}function Lr(t){return{useDebug:kr(t.map(function(t){return t.useDebug})),useJit:kr(t.map(function(t){return t.useJit})),defaultEncapsulation:kr(t.map(function(t){return t.defaultEncapsulation})),providers:Dr(t.map(function(t){return t.providers}))}}function kr(t){for(var e=t.length-1;e>=0;e--)if(void 0!==t[e])return t[e]}function Dr(t){var e=[];return t.forEach(function(t){return t&&e.push.apply(e,t)}),e}var jr;jr="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var Fr=jr;Fr.assert=function(t){};var Ur=Object.getPrototypeOf({}),Vr=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return t.indexOf(e)!=-1},t.compare=function(t,e){return t<e?-1:t>e?1:0},t}(),Br=function(){function t(t){void 0===t&&(t=[]),this.parts=t}return t.prototype.add=function(t){this.parts.push(t)},t.prototype.toString=function(){return this.parts.join("")},t}(),zr=function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),Hr=function(){function t(t,e,n){this.value=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),Gr=function(){function t(t,e,n){this.value=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitBoundText(this,e)},t}(),Wr=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitAttr(this,e)},t}(),qr=function(){function t(t,e,n,r,i,o){this.name=t,this.type=e,this.securityContext=n,this.value=r,this.unit=i,this.sourceSpan=o}return t.prototype.visit=function(t,e){return t.visitElementProperty(this,e)},t}(),Xr=function(){function t(t,e,n,r){this.name=t,this.target=e,this.handler=n,this.sourceSpan=r}return t.prototype.visit=function(t,e){return t.visitEvent(this,e)},Object.defineProperty(t.prototype,"fullName",{get:function(){return r(this.target)?this.target+":"+this.name:this.name},enumerable:!0,configurable:!0}),t}(),Yr=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitReference(this,e)},t}(),Zr=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitVariable(this,e)},t}(),Kr=function(){function t(t,e,n,r,i,o,s,a,u,c,l){this.name=t,this.attrs=e,this.inputs=n,this.outputs=r,this.references=i,this.directives=o,this.providers=s,this.hasViewContainer=a,this.children=u,this.ngContentIndex=c,this.sourceSpan=l}return t.prototype.visit=function(t,e){return t.visitElement(this,e)},t}(),Qr=function(){function t(t,e,n,r,i,o,s,a,u,c){this.attrs=t,this.outputs=e,this.references=n,this.variables=r,this.directives=i,this.providers=o,this.hasViewContainer=s,this.children=a,this.ngContentIndex=u,this.sourceSpan=c}return t.prototype.visit=function(t,e){return t.visitEmbeddedTemplate(this,e)},t}(),Jr=function(){function t(t,e,n,r){this.directiveName=t,this.templateName=e,this.value=n,this.sourceSpan=r}return t.prototype.visit=function(t,e){return t.visitDirectiveProperty(this,e)},t}(),$r=function(){function t(t,e,n,r,i){this.directive=t,this.inputs=e,this.hostProperties=n,this.hostEvents=r,this.sourceSpan=i}return t.prototype.visit=function(t,e){return t.visitDirective(this,e)},t}(),ti=function(){function t(t,e,n,r,i,o,s){this.token=t,this.multiProvider=e,this.eager=n,this.providers=r,this.providerType=i,this.lifecycleHooks=o,this.sourceSpan=s}return t.prototype.visit=function(t,e){return null},t}();e.ProviderAstType,function(t){t[t.PublicService=0]="PublicService",t[t.PrivateService=1]="PrivateService",t[t.Component=2]="Component",t[t.Directive=3]="Directive",t[t.Builtin=4]="Builtin"}(e.ProviderAstType||(e.ProviderAstType={}));var ei=function(){function t(t,e,n){this.index=t,this.ngContentIndex=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitNgContent(this,e)},t}();e.PropertyBindingType,function(t){t[t.Property=0]="Property",t[t.Attribute=1]="Attribute",t[t.Class=2]="Class",t[t.Style=3]="Style",t[t.Animation=4]="Animation"}(e.PropertyBindingType||(e.PropertyBindingType={}));var ni,ri=Fr.Map,ii=Fr.Set,oi=function(){try{if(1===new ri([[1,2]]).size)return function(t){return new ri(t)}}catch(t){}return function(t){for(var e=new ri,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),si=function(){try{if(new ri(new ri))return function(t){return new ri(t)}}catch(t){}return function(t){var e=new ri;return t.forEach(function(t,n){e.set(n,t)}),e}}(),ai=function(){return(new ri).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),ui=function(){try{if((new ri).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=hi.createFixedSize(t.size),r=0;return t.forEach(function(t,i){n[r]=e?t:i,r++}),n}}(),ci=function(){function t(){}return t.clone=function(t){return si(t)},t.createFromStringMap=function(t){var e=new ri;for(var n in t)e.set(n,t[n]);return e},t.toStringMap=function(t){var e={};return t.forEach(function(t,n){return e[n]=t}),e},t.createFromPairs=function(t){return oi(t)},t.clearValues=function(t){ai(t)},t.iterable=function(t){return t},t.keys=function(t){return ui(t,!1)},t.values=function(t){return ui(t,!0)},t}(),li=function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.isEmpty=function(t){for(var e in t)return!1;return!0},t.delete=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(t[i],i)}},t.merge=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=t[o]}for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];n[o]=e[o]}return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},t}(),hi=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return t.indexOf(e)!==-1},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){r(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),o=0;o<t.length;o++){var s=t[o];if(!i(s)){var a=e(s);a>r&&(n=s,r=a)}}return n},t.flatten=function(t){var e=[];return y(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),pi=function(){var t=new ii([1,2,3]);return 3===t.size?function(t){return new ii(t)}:function(t){var e=new ii(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),fi=function(){function t(){}return t.createFromList=function(t){return pi(t)},t.has=function(t,e){return t.has(e)},t.delete=function(t,e){t.delete(e)},t}(),di="",vi=new RegExp("(\\:not\\()|([-\\w]+)|(?:\\.([-\\w]+))|(?:\\[([-\\w*]+)(?:=([^\\]]*))?\\])|(\\))|(\\s*,\\s*)","g"),mi=function(){function t(){this.element=null,this.classNames=[],this.attrs=[],this.notSelectors=[]}return t.parse=function(e){var n,o=[],s=function(t,e){e.notSelectors.length>0&&i(e.element)&&hi.isEmpty(e.classNames)&&hi.isEmpty(e.attrs)&&(e.element="*"),t.push(e)},a=new t,u=a,c=!1;for(vi.lastIndex=0;r(n=vi.exec(e));){if(r(n[1])){if(c)throw new Error("Nesting :not is not allowed in a selector");c=!0,u=new t,a.notSelectors.push(u)}if(r(n[2])&&u.setElement(n[2]),r(n[3])&&u.addClassName(n[3]),r(n[4])&&u.addAttribute(n[4],n[5]),r(n[6])&&(c=!1,u=a),r(n[7])){if(c)throw new Error("Multiple selectors in :not are not supported");s(o,a),a=u=new t}}return s(o,a),o},t.prototype.isElementSelector=function(){return this.hasElementSelector()&&0==this.classNames.length&&0==this.attrs.length&&0===this.notSelectors.length},t.prototype.hasElementSelector=function(){return!!this.element},t.prototype.setElement=function(t){void 0===t&&(t=null),this.element=t},t.prototype.getMatchingElementTemplate=function(){for(var t=r(this.element)?this.element:"div",e=this.classNames.length>0?' class="'+this.classNames.join(" ")+'"':"",n="",i=0;i<this.attrs.length;i+=2){var o=this.attrs[i],s=""!==this.attrs[i+1]?'="'+this.attrs[i+1]+'"':"";n+=" "+o+s}return"<"+t+e+n+"></"+t+">"},t.prototype.addAttribute=function(t,e){void 0===e&&(e=di),this.attrs.push(t),e=r(e)?e.toLowerCase():di,this.attrs.push(e)},t.prototype.addClassName=function(t){this.classNames.push(t.toLowerCase())},t.prototype.toString=function(){var t="";if(r(this.element)&&(t+=this.element),r(this.classNames))for(var e=0;e<this.classNames.length;e++)t+="."+this.classNames[e];if(r(this.attrs))for(var e=0;e<this.attrs.length;){var n=this.attrs[e++],i=this.attrs[e++];t+="["+n,i.length>0&&(t+="="+i),t+="]"}return this.notSelectors.forEach(function(e){return t+=":not("+e+")"}),t},t}(),yi=function(){function t(){this._elementMap=new Map,this._elementPartialMap=new Map,this._classMap=new Map,this._classPartialMap=new Map,this._attrValueMap=new Map,this._attrValuePartialMap=new Map,this._listContexts=[]}return t.createNotMatcher=function(e){var n=new t;return n.addSelectables(e,null),n},t.prototype.addSelectables=function(t,e){var n=null;t.length>1&&(n=new gi(t),this._listContexts.push(n));for(var r=0;r<t.length;r++)this._addSelectable(t[r],e,n)},t.prototype._addSelectable=function(t,e,n){var o=this,s=t.element,a=t.classNames,u=t.attrs,c=new bi(t,e,n);if(r(s)){var l=0===u.length&&0===a.length;l?this._addTerminal(o._elementMap,s,c):o=this._addPartial(o._elementPartialMap,s)}if(r(a))for(var h=0;h<a.length;h++){var l=0===u.length&&h===a.length-1,p=a[h];l?this._addTerminal(o._classMap,p,c):o=this._addPartial(o._classPartialMap,p)}if(r(u))for(var h=0;h<u.length;){var l=h===u.length-2,f=u[h++],d=u[h++];if(l){var v=o._attrValueMap,m=v.get(f);i(m)&&(m=new Map,v.set(f,m)),this._addTerminal(m,d,c)}else{var y=o._attrValuePartialMap,g=y.get(f);i(g)&&(g=new Map,y.set(f,g)),o=this._addPartial(g,d)}}},t.prototype._addTerminal=function(t,e,n){var r=t.get(e);i(r)&&(r=[],t.set(e,r)),r.push(n)},t.prototype._addPartial=function(e,n){var r=e.get(n);return i(r)&&(r=new t,e.set(n,r)),r},t.prototype.match=function(t,e){for(var n=!1,i=t.element,o=t.classNames,s=t.attrs,a=0;a<this._listContexts.length;a++)this._listContexts[a].alreadyMatched=!1;if(n=this._matchTerminal(this._elementMap,i,t,e)||n,n=this._matchPartial(this._elementPartialMap,i,t,e)||n,r(o))for(var u=0;u<o.length;u++){var c=o[u];n=this._matchTerminal(this._classMap,c,t,e)||n,n=this._matchPartial(this._classPartialMap,c,t,e)||n}if(r(s))for(var u=0;u<s.length;){var l=s[u++],h=s[u++],p=this._attrValueMap.get(l);Vr.equals(h,di)||(n=this._matchTerminal(p,di,t,e)||n),n=this._matchTerminal(p,h,t,e)||n;var f=this._attrValuePartialMap.get(l);Vr.equals(h,di)||(n=this._matchPartial(f,di,t,e)||n),n=this._matchPartial(f,h,t,e)||n}return n},t.prototype._matchTerminal=function(t,e,n,o){if(i(t)||i(e))return!1;var s=t.get(e),a=t.get("*");if(r(a)&&(s=s.concat(a)),i(s))return!1;for(var u,c=!1,l=0;l<s.length;l++)u=s[l],c=u.finalize(n,o)||c;return c},t.prototype._matchPartial=function(t,e,n,r){if(i(t)||i(e))return!1;var o=t.get(e);return!i(o)&&o.match(n,r)},t}(),gi=function(){function t(t){this.selectors=t,this.alreadyMatched=!1}return t}(),bi=function(){function t(t,e,n){this.selector=t,this.cbContext=e,this.listContext=n,this.notSelectors=t.notSelectors}return t.prototype.finalize=function(t,e){var n=!0;if(this.notSelectors.length>0&&(i(this.listContext)||!this.listContext.alreadyMatched)){var o=yi.createNotMatcher(this.notSelectors);n=!o.match(t,null)}return n&&r(e)&&(i(this.listContext)||!this.listContext.alreadyMatched)&&(r(this.listContext)&&(this.listContext.alreadyMatched=!0),e(this.selector,this.cbContext)),n},t}(),_i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){t[t.Const=0]="Const"}(ni||(ni={}));var wi,xi=function(){function t(t){void 0===t&&(t=null),this.modifiers=t,i(t)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return this.modifiers.indexOf(t)!==-1},t}();!function(t){t[t.Dynamic=0]="Dynamic",t[t.Bool=1]="Bool",t[t.String=2]="String",t[t.Int=3]="Int",t[t.Number=4]="Number",t[t.Function=5]="Function"}(wi||(wi={}));var Ei,Si=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.name=e}return _i(e,t),e.prototype.visitType=function(t,e){return t.visitBuiltintType(this,e)},e}(xi),Ti=function(t){function e(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null),t.call(this,r),this.value=e,this.typeParams=n}return _i(e,t),e.prototype.visitType=function(t,e){return t.visitExternalType(this,e)},e}(xi),Mi=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.of=e}return _i(e,t),e.prototype.visitType=function(t,e){return t.visitArrayType(this,e)},e}(xi),Ci=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.valueType=e}return _i(e,t),e.prototype.visitType=function(t,e){return t.visitMapType(this,e)},e}(xi),Ai=new Si(wi.Dynamic),Oi=new Si(wi.Bool),Pi=(new Si(wi.Int),new Si(wi.Number)),Ri=new Si(wi.String),Ii=new Si(wi.Function);!function(t){t[t.Equals=0]="Equals",t[t.NotEquals=1]="NotEquals",t[t.Identical=2]="Identical",t[t.NotIdentical=3]="NotIdentical",t[t.Minus=4]="Minus",t[t.Plus=5]="Plus",t[t.Divide=6]="Divide",t[t.Multiply=7]="Multiply",t[t.Modulo=8]="Modulo",t[t.And=9]="And",t[t.Or=10]="Or",t[t.Lower=11]="Lower",t[t.LowerEquals=12]="LowerEquals",t[t.Bigger=13]="Bigger",t[t.BiggerEquals=14]="BiggerEquals"}(Ei||(Ei={}));var Ni,Li=function(){function t(t){this.type=t}return t.prototype.prop=function(t){return new Ji(this,t)},t.prototype.key=function(t,e){return void 0===e&&(e=null),new $i(this,t,e)},t.prototype.callMethod=function(t,e){return new Bi(this,t,e)},t.prototype.callFn=function(t){return new zi(this,t)},t.prototype.instantiate=function(t,e){return void 0===e&&(e=null),new Hi(this,t,e)},t.prototype.conditional=function(t,e){return void 0===e&&(e=null),new qi(this,t,e)},t.prototype.equals=function(t){return new Qi(Ei.Equals,this,t)},t.prototype.notEquals=function(t){return new Qi(Ei.NotEquals,this,t)},t.prototype.identical=function(t){return new Qi(Ei.Identical,this,t)},t.prototype.notIdentical=function(t){return new Qi(Ei.NotIdentical,this,t)},t.prototype.minus=function(t){return new Qi(Ei.Minus,this,t)},t.prototype.plus=function(t){return new Qi(Ei.Plus,this,t)},t.prototype.divide=function(t){return new Qi(Ei.Divide,this,t)},t.prototype.multiply=function(t){return new Qi(Ei.Multiply,this,t)},t.prototype.modulo=function(t){return new Qi(Ei.Modulo,this,t)},t.prototype.and=function(t){return new Qi(Ei.And,this,t)},t.prototype.or=function(t){return new Qi(Ei.Or,this,t)},t.prototype.lower=function(t){return new Qi(Ei.Lower,this,t)},t.prototype.lowerEquals=function(t){return new Qi(Ei.LowerEquals,this,t)},t.prototype.bigger=function(t){return new Qi(Ei.Bigger,this,t)},t.prototype.biggerEquals=function(t){return new Qi(Ei.BiggerEquals,this,t)},t.prototype.isBlank=function(){return this.equals(io)},t.prototype.cast=function(t){return new Yi(this,t)},t.prototype.toStmt=function(){return new co(this)},t}();!function(t){t[t.This=0]="This",t[t.Super=1]="Super",t[t.CatchError=2]="CatchError",t[t.CatchStack=3]="CatchStack"}(Ni||(Ni={}));var ki,Di=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),o(e)?(this.name=e,this.builtin=null):(this.name=null,this.builtin=e)}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadVarExpr(this,e)},e.prototype.set=function(t){return new ji(this.name,t)},e}(Li),ji=function(t){function e(e,n,i){void 0===i&&(i=null),t.call(this,r(i)?i:n.type),this.name=e,this.value=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitWriteVarExpr(this,e)},e.prototype.toDeclStmt=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),new ao(this.name,this.value,t,e)},e}(Li),Fi=function(t){function e(e,n,i,o){void 0===o&&(o=null),t.call(this,r(o)?o:i.type),this.receiver=e,this.index=n,this.value=i}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitWriteKeyExpr(this,e)},e}(Li),Ui=function(t){function e(e,n,i,o){void 0===o&&(o=null),t.call(this,r(o)?o:i.type),this.receiver=e,this.name=n,this.value=i}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitWritePropExpr(this,e)},e}(Li);!function(t){t[t.ConcatArray=0]="ConcatArray",t[t.SubscribeObservable=1]="SubscribeObservable",t[t.Bind=2]="Bind"}(ki||(ki={}));var Vi,Bi=function(t){function e(e,n,r,i){void 0===i&&(i=null),t.call(this,i),this.receiver=e,this.args=r,o(n)?(this.name=n,this.builtin=null):(this.name=null,
this.builtin=n)}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitInvokeMethodExpr(this,e)},e}(Li),zi=function(t){function e(e,n,r){void 0===r&&(r=null),t.call(this,r),this.fn=e,this.args=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitInvokeFunctionExpr(this,e)},e}(Li),Hi=function(t){function e(e,n,r){t.call(this,r),this.classExpr=e,this.args=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitInstantiateExpr(this,e)},e}(Li),Gi=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.value=e}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralExpr(this,e)},e}(Li),Wi=function(t){function e(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null),t.call(this,n),this.value=e,this.typeParams=r}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitExternalExpr(this,e)},e}(Li),qi=function(t){function e(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),t.call(this,r(o)?o:n.type),this.condition=e,this.falseCase=i,this.trueCase=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitConditionalExpr(this,e)},e}(Li),Xi=function(t){function e(e){t.call(this,Oi),this.condition=e}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitNotExpr(this,e)},e}(Li),Yi=function(t){function e(e,n){t.call(this,n),this.value=e}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitCastExpr(this,e)},e}(Li),Zi=function(){function t(t,e){void 0===e&&(e=null),this.name=t,this.type=e}return t}(),Ki=function(t){function e(e,n,r){void 0===r&&(r=null),t.call(this,r),this.params=e,this.statements=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitFunctionExpr(this,e)},e.prototype.toDeclStmt=function(t,e){return void 0===e&&(e=null),new uo(t,this.params,this.statements,this.type,e)},e}(Li),Qi=function(t){function e(e,n,i,o){void 0===o&&(o=null),t.call(this,r(o)?o:n.type),this.operator=e,this.rhs=i,this.lhs=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitBinaryOperatorExpr(this,e)},e}(Li),Ji=function(t){function e(e,n,r){void 0===r&&(r=null),t.call(this,r),this.receiver=e,this.name=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadPropExpr(this,e)},e.prototype.set=function(t){return new Ui(this.receiver,this.name,t)},e}(Li),$i=function(t){function e(e,n,r){void 0===r&&(r=null),t.call(this,r),this.receiver=e,this.index=n}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitReadKeyExpr(this,e)},e.prototype.set=function(t){return new Fi(this.receiver,this.index,t)},e}(Li),to=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.entries=e}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralArrayExpr(this,e)},e}(Li),eo=function(t){function e(e,n){void 0===n&&(n=null),t.call(this,n),this.entries=e,this.valueType=null,r(n)&&(this.valueType=n.valueType)}return _i(e,t),e.prototype.visitExpression=function(t,e){return t.visitLiteralMapExpr(this,e)},e}(Li),no=new Di(Ni.This),ro=new Di(Ni.Super),io=(new Di(Ni.CatchError),new Di(Ni.CatchStack),new Gi(null,null));!function(t){t[t.Final=0]="Final",t[t.Private=1]="Private"}(Vi||(Vi={}));var oo,so=function(){function t(t){void 0===t&&(t=null),this.modifiers=t,i(t)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return this.modifiers.indexOf(t)!==-1},t}(),ao=function(t){function e(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null),t.call(this,o),this.name=e,this.value=n,this.type=r(i)?i:n.type}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareVarStmt(this,e)},e}(so),uo=function(t){function e(e,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),t.call(this,o),this.name=e,this.params=n,this.statements=r,this.type=i}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareFunctionStmt(this,e)},e}(so),co=function(t){function e(e){t.call(this),this.expr=e}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitExpressionStmt(this,e)},e}(so),lo=function(t){function e(e){t.call(this),this.value=e}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitReturnStmt(this,e)},e}(so),ho=function(){function t(t,e){void 0===t&&(t=null),this.type=t,this.modifiers=e,i(e)&&(this.modifiers=[])}return t.prototype.hasModifier=function(t){return this.modifiers.indexOf(t)!==-1},t}(),po=function(t){function e(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null),t.call(this,n,r),this.name=e}return _i(e,t),e}(ho),fo=function(t){function e(e,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),t.call(this,i,o),this.name=e,this.params=n,this.body=r}return _i(e,t),e}(ho),vo=function(t){function e(e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),t.call(this,r,i),this.name=e,this.body=n}return _i(e,t),e}(ho),mo=function(t){function e(e,n,r,i,o,s,a){void 0===a&&(a=null),t.call(this,a),this.name=e,this.parent=n,this.fields=r,this.getters=i,this.constructorMethod=o,this.methods=s}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitDeclareClassStmt(this,e)},e}(so),yo=function(t){function e(e,n,r){void 0===r&&(r=[]),t.call(this),this.condition=e,this.trueCase=n,this.falseCase=r}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitIfStmt(this,e)},e}(so),go=(function(t){function e(e){t.call(this),this.comment=e}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitCommentStmt(this,e)},e}(so),function(t){function e(e,n){t.call(this),this.bodyStmts=e,this.catchStmts=n}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitTryCatchStmt(this,e)},e}(so)),bo=function(t){function e(e){t.call(this),this.error=e}return _i(e,t),e.prototype.visitStatement=function(t,e){return t.visitThrowStmt(this,e)},e}(so),_o=function(){function t(){}return t.prototype.visitReadVarExpr=function(t,e){return t},t.prototype.visitWriteVarExpr=function(t,e){return new ji(t.name,t.value.visitExpression(this,e))},t.prototype.visitWriteKeyExpr=function(t,e){return new Fi(t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.value.visitExpression(this,e))},t.prototype.visitWritePropExpr=function(t,e){return new Ui(t.receiver.visitExpression(this,e),t.name,t.value.visitExpression(this,e))},t.prototype.visitInvokeMethodExpr=function(t,e){var n=r(t.builtin)?t.builtin:t.name;return new Bi(t.receiver.visitExpression(this,e),n,this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitInvokeFunctionExpr=function(t,e){return new zi(t.fn.visitExpression(this,e),this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitInstantiateExpr=function(t,e){return new Hi(t.classExpr.visitExpression(this,e),this.visitAllExpressions(t.args,e),t.type)},t.prototype.visitLiteralExpr=function(t,e){return t},t.prototype.visitExternalExpr=function(t,e){return t},t.prototype.visitConditionalExpr=function(t,e){return new qi(t.condition.visitExpression(this,e),t.trueCase.visitExpression(this,e),t.falseCase.visitExpression(this,e))},t.prototype.visitNotExpr=function(t,e){return new Xi(t.condition.visitExpression(this,e))},t.prototype.visitCastExpr=function(t,e){return new Yi(t.value.visitExpression(this,e),e)},t.prototype.visitFunctionExpr=function(t,e){return t},t.prototype.visitBinaryOperatorExpr=function(t,e){return new Qi(t.operator,t.lhs.visitExpression(this,e),t.rhs.visitExpression(this,e),t.type)},t.prototype.visitReadPropExpr=function(t,e){return new Ji(t.receiver.visitExpression(this,e),t.name,t.type)},t.prototype.visitReadKeyExpr=function(t,e){return new $i(t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.type)},t.prototype.visitLiteralArrayExpr=function(t,e){return new to(this.visitAllExpressions(t.entries,e))},t.prototype.visitLiteralMapExpr=function(t,e){var n=this;return new eo(t.entries.map(function(t){return[t[0],t[1].visitExpression(n,e)]}))},t.prototype.visitAllExpressions=function(t,e){var n=this;return t.map(function(t){return t.visitExpression(n,e)})},t.prototype.visitDeclareVarStmt=function(t,e){return new ao(t.name,t.value.visitExpression(this,e),t.type,t.modifiers)},t.prototype.visitDeclareFunctionStmt=function(t,e){return t},t.prototype.visitExpressionStmt=function(t,e){return new co(t.expr.visitExpression(this,e))},t.prototype.visitReturnStmt=function(t,e){return new lo(t.value.visitExpression(this,e))},t.prototype.visitDeclareClassStmt=function(t,e){return t},t.prototype.visitIfStmt=function(t,e){return new yo(t.condition.visitExpression(this,e),this.visitAllStatements(t.trueCase,e),this.visitAllStatements(t.falseCase,e))},t.prototype.visitTryCatchStmt=function(t,e){return new go(this.visitAllStatements(t.bodyStmts,e),this.visitAllStatements(t.catchStmts,e))},t.prototype.visitThrowStmt=function(t,e){return new bo(t.error.visitExpression(this,e))},t.prototype.visitCommentStmt=function(t,e){return t},t.prototype.visitAllStatements=function(t,e){var n=this;return t.map(function(t){return t.visitStatement(n,e)})},t}(),wo=function(){function t(){}return t.prototype.visitReadVarExpr=function(t,e){return t},t.prototype.visitWriteVarExpr=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitWriteKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t.value.visitExpression(this,e),t},t.prototype.visitWritePropExpr=function(t,e){return t.receiver.visitExpression(this,e),t.value.visitExpression(this,e),t},t.prototype.visitInvokeMethodExpr=function(t,e){return t.receiver.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitInvokeFunctionExpr=function(t,e){return t.fn.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitInstantiateExpr=function(t,e){return t.classExpr.visitExpression(this,e),this.visitAllExpressions(t.args,e),t},t.prototype.visitLiteralExpr=function(t,e){return t},t.prototype.visitExternalExpr=function(t,e){return t},t.prototype.visitConditionalExpr=function(t,e){return t.condition.visitExpression(this,e),t.trueCase.visitExpression(this,e),t.falseCase.visitExpression(this,e),t},t.prototype.visitNotExpr=function(t,e){return t.condition.visitExpression(this,e),t},t.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitFunctionExpr=function(t,e){return t},t.prototype.visitBinaryOperatorExpr=function(t,e){return t.lhs.visitExpression(this,e),t.rhs.visitExpression(this,e),t},t.prototype.visitReadPropExpr=function(t,e){return t.receiver.visitExpression(this,e),t},t.prototype.visitReadKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),t.index.visitExpression(this,e),t},t.prototype.visitLiteralArrayExpr=function(t,e){return this.visitAllExpressions(t.entries,e),t},t.prototype.visitLiteralMapExpr=function(t,e){var n=this;return t.entries.forEach(function(t){return t[1].visitExpression(n,e)}),t},t.prototype.visitAllExpressions=function(t,e){var n=this;t.forEach(function(t){return t.visitExpression(n,e)})},t.prototype.visitDeclareVarStmt=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitDeclareFunctionStmt=function(t,e){return t},t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e),t},t.prototype.visitReturnStmt=function(t,e){return t.value.visitExpression(this,e),t},t.prototype.visitDeclareClassStmt=function(t,e){return t},t.prototype.visitIfStmt=function(t,e){return t.condition.visitExpression(this,e),this.visitAllStatements(t.trueCase,e),this.visitAllStatements(t.falseCase,e),t},t.prototype.visitTryCatchStmt=function(t,e){return this.visitAllStatements(t.bodyStmts,e),this.visitAllStatements(t.catchStmts,e),t},t.prototype.visitThrowStmt=function(t,e){return t.error.visitExpression(this,e),t},t.prototype.visitCommentStmt=function(t,e){return t},t.prototype.visitAllStatements=function(t,e){var n=this;t.forEach(function(t){return t.visitStatement(n,e)})},t}(),xo=function(t){function e(e,n){t.call(this),this._varName=e,this._newValue=n}return _i(e,t),e.prototype.visitReadVarExpr=function(t,e){return t.name==this._varName?this._newValue:t},e}(_o),Eo=function(t){function e(){t.apply(this,arguments),this.varNames=new Set}return _i(e,t),e.prototype.visitReadVarExpr=function(t,e){return this.varNames.add(t.name),null},e}(wo),So="",To=/([A-Z])/g,Mo=function(){function t(){}return t.prototype.visitArray=function(t,e){var n=this;return t.map(function(t){return R(t,n,e)})},t.prototype.visitStringMap=function(t,e){var n=this,r={};return li.forEach(t,function(t,i){r[i]=R(t,n,e)}),r},t.prototype.visitPrimitive=function(t,e){return t},t.prototype.visitOther=function(t,e){return t},t}(),Co=function(){function t(t,e){void 0===e&&(e=null),this.syncResult=t,this.asyncResult=e,e||(this.asyncResult=Promise.resolve(t))}return t}(),Ao=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Oo=/^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/,Po=function(){function t(){}return Object.defineProperty(t.prototype,"identifier",{get:function(){return L()},enumerable:!0,configurable:!0}),t}(),Ro=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.name=t,this.definitions=e}return t}(),Io=function(){function t(){}return t}(),No=function(t){function e(e,n){t.call(this),this.stateNameExpr=e,this.styles=n}return Ao(e,t),e}(Io),Lo=function(t){function e(e,n){t.call(this),this.stateChangeExpr=e,this.steps=n}return Ao(e,t),e}(Io),ko=function(){function t(){}return t}(),Do=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.steps=e}return Ao(e,t),e}(ko),jo=function(t){function e(e,n){void 0===n&&(n=null),t.call(this),this.offset=e,this.styles=n}return Ao(e,t),e}(ko),Fo=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=null),t.call(this),this.timings=e,this.styles=n}return Ao(e,t),e}(ko),Uo=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.steps=e}return Ao(e,t),e}(ko),Vo=function(t){function e(e){void 0===e&&(e=null),t.call(this,e)}return Ao(e,t),e}(Uo),Bo=function(t){function e(e){void 0===e&&(e=null),t.call(this,e)}return Ao(e,t),e}(Uo),zo=function(){function t(t){var e=void 0===t?{}:t,n=e.reference,r=e.name,i=e.moduleUrl,o=e.prefix,s=e.value;this.reference=n,this.name=r,this.prefix=o,this.moduleUrl=i,this.value=s}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this},enumerable:!0,configurable:!0}),t}(),Ho=function(){function t(t){var e=void 0===t?{}:t,n=e.isAttribute,r=e.isSelf,i=e.isHost,o=e.isSkipSelf,s=e.isOptional,a=e.isValue,u=e.query,c=e.viewQuery,l=e.token,p=e.value;this.isAttribute=h(n),this.isSelf=h(r),this.isHost=h(i),this.isSkipSelf=h(o),this.isOptional=h(s),this.isValue=h(a),this.query=u,this.viewQuery=c,this.token=l,this.value=p}return t}(),Go=function(){function t(t){var e=t.token,n=t.useClass,r=t.useValue,i=t.useExisting,o=t.useFactory,s=t.deps,a=t.multi;this.token=e,this.useClass=n,this.useValue=r,this.useExisting=i,this.useFactory=o,this.deps=l(s),this.multi=h(a)}return t}(),Wo=function(t){function e(e){var n=e.reference,r=e.name,i=e.moduleUrl,o=e.prefix,s=e.diDeps,a=e.value;t.call(this,{reference:n,name:r,prefix:o,moduleUrl:i,value:a}),this.diDeps=j(s)}return Ao(e,t),e}(zo),qo=function(){function t(t){var e=t.value,n=t.identifier,r=t.identifierIsInstance;this.value=e,this.identifier=n,this.identifierIsInstance=h(r)}return Object.defineProperty(t.prototype,"reference",{get:function(){return r(this.identifier)?this.identifier.reference:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return r(this.value)?P(this.value):this.identifier.name},enumerable:!0,configurable:!0}),t}(),Xo=function(t){function e(e){var n=void 0===e?{}:e,r=n.reference,i=n.name,o=n.moduleUrl,s=n.prefix,a=n.isHost,u=n.value,c=n.diDeps,l=n.lifecycleHooks;t.call(this,{reference:r,name:i,moduleUrl:o,prefix:s,value:u}),this.isHost=h(a),this.diDeps=j(c),this.lifecycleHooks=j(l)}return Ao(e,t),e}(zo),Yo=function(){function t(t){var e=void 0===t?{}:t,n=e.selectors,r=e.descendants,i=e.first,o=e.propertyName,s=e.read;this.selectors=n,this.descendants=h(r),this.first=h(i),this.propertyName=o,this.read=s}return t}(),Zo=function(){function t(t){var e=void 0===t?{}:t,n=e.moduleUrl,r=e.styles,i=e.styleUrls;this.moduleUrl=n,this.styles=j(r),this.styleUrls=j(i)}return t}(),Ko=function(){function t(t){var e=void 0===t?{}:t,n=e.encapsulation,i=e.template,o=e.templateUrl,s=e.styles,a=e.styleUrls,u=e.externalStylesheets,c=e.animations,l=e.ngContentSelectors,h=e.interpolation;if(this.encapsulation=n,this.template=i,this.templateUrl=o,this.styles=j(s),this.styleUrls=j(a),this.externalStylesheets=j(u),this.animations=r(c)?hi.flatten(c):[],this.ngContentSelectors=r(l)?l:[],r(h)&&2!=h.length)throw new Error("'interpolation' should have a start and an end symbol.");this.interpolation=h}return t}(),Qo=function(){function t(t){var e=void 0===t?{}:t,n=e.type,r=e.isComponent,i=e.selector,o=e.exportAs,s=e.changeDetection,a=e.inputs,u=e.outputs,c=e.hostListeners,l=e.hostProperties,h=e.hostAttributes,p=e.providers,f=e.viewProviders,d=e.queries,v=e.viewQueries,m=e.entryComponents,y=e.template;this.type=n,this.isComponent=r,this.selector=i,this.exportAs=o,this.changeDetection=s,this.inputs=a,this.outputs=u,this.hostListeners=c,this.hostProperties=l,this.hostAttributes=h,this.providers=j(p),this.viewProviders=j(f),this.queries=j(d),this.viewQueries=j(v),this.entryComponents=j(m),this.template=y}return t.create=function(e){var n=void 0===e?{}:e,i=n.type,o=n.isComponent,s=n.selector,a=n.exportAs,u=n.changeDetection,c=n.inputs,l=n.outputs,p=n.host,f=n.providers,d=n.viewProviders,v=n.queries,m=n.viewQueries,y=n.entryComponents,g=n.template,b={},_={},w={};r(p)&&li.forEach(p,function(t,e){var n=e.match(Oo);null===n?w[e]=t:r(n[1])?_[n[1]]=t:r(n[2])&&(b[n[2]]=t)});var x={};r(c)&&c.forEach(function(t){var e=O(t,[t,t]);x[e[0]]=e[1]});var E={};return r(l)&&l.forEach(function(t){var e=O(t,[t,t]);E[e[0]]=e[1]}),new t({type:i,isComponent:h(o),selector:s,exportAs:a,changeDetection:u,inputs:x,outputs:E,hostListeners:b,hostProperties:_,hostAttributes:w,providers:f,viewProviders:d,queries:v,viewQueries:m,entryComponents:y,template:g})},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),t}(),Jo=function(){function t(t){var e=void 0===t?{}:t,n=e.type,r=e.name,i=e.pure;this.type=n,this.name=r,this.pure=h(i)}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),t}(),$o=function(){function t(t){var e=void 0===t?{}:t,n=e.type,r=e.providers,i=e.declaredDirectives,o=e.exportedDirectives,s=e.declaredPipes,a=e.exportedPipes,u=e.entryComponents,c=e.bootstrapComponents,l=e.importedModules,h=e.exportedModules,p=e.schemas,f=e.transitiveModule;this.type=n,this.declaredDirectives=j(i),this.exportedDirectives=j(o),this.declaredPipes=j(s),this.exportedPipes=j(a),this.providers=j(r),this.entryComponents=j(u),this.bootstrapComponents=j(c),this.importedModules=j(l),this.exportedModules=j(h),this.schemas=j(p),this.transitiveModule=f}return Object.defineProperty(t.prototype,"identifier",{get:function(){return this.type},enumerable:!0,configurable:!0}),t}(),ts=function(){function t(t,e,n,r,i){var o=this;this.modules=t,this.providers=e,this.entryComponents=n,this.directives=r,this.pipes=i,this.directivesSet=new Set,this.pipesSet=new Set,r.forEach(function(t){return o.directivesSet.add(t.type.reference)}),i.forEach(function(t){return o.pipesSet.add(t.type.reference)})}return t}(),es=function(){function t(t,e){var n=e.useClass,r=e.useValue,i=e.useExisting,o=e.useFactory,s=e.deps,a=e.multi;this.token=t,this.useClass=n,this.useValue=r,this.useExisting=i,this.useFactory=o,this.dependencies=s,this.multi=!!a}return t}(),ns=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},rs=function(){function t(t,e,n,r){this.input=e,this.errLocation=n,this.ctxLocation=r,this.message="Parser Error: "+t+" "+n+" ["+e+"] in "+r}return t}(),is=function(){function t(t,e){this.start=t,this.end=e}return t}(),os=function(){function t(t){this.span=t}return t.prototype.visit=function(t,e){return void 0===e&&(e=null),null},t.prototype.toString=function(){return"AST"},t}(),ss=function(t){function e(e,n,r,i){t.call(this,e),this.prefix=n,this.uninterpretedExpression=r,this.location=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitQuote(this,e)},e.prototype.toString=function(){return"Quote"},e}(os),as=function(t){function e(){t.apply(this,arguments)}return ns(e,t),e.prototype.visit=function(t,e){void 0===e&&(e=null)},e}(os),us=function(t){function e(){t.apply(this,arguments)}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitImplicitReceiver(this,e)},e}(os),cs=function(t){function e(e,n){t.call(this,e),this.expressions=n}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitChain(this,e)},e}(os),ls=function(t){function e(e,n,r,i){t.call(this,e),this.condition=n,this.trueExp=r,this.falseExp=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitConditional(this,e)},e}(os),hs=function(t){function e(e,n,r){t.call(this,e),this.receiver=n,this.name=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyRead(this,e)},e}(os),ps=function(t){function e(e,n,r,i){t.call(this,e),this.receiver=n,this.name=r,this.value=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPropertyWrite(this,e)},e}(os),fs=function(t){function e(e,n,r){t.call(this,e),this.receiver=n,this.name=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafePropertyRead(this,e)},e}(os),ds=function(t){function e(e,n,r){t.call(this,e),this.obj=n,this.key=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedRead(this,e)},e}(os),vs=function(t){function e(e,n,r,i){t.call(this,e),this.obj=n,this.key=r,this.value=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitKeyedWrite(this,e)},e}(os),ms=function(t){function e(e,n,r,i){t.call(this,e),this.exp=n,this.name=r,this.args=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPipe(this,e)},e}(os),ys=function(t){function e(e,n){t.call(this,e),this.value=n}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralPrimitive(this,e)},e}(os),gs=function(t){function e(e,n){t.call(this,e),this.expressions=n}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralArray(this,e)},e}(os),bs=function(t){function e(e,n,r){t.call(this,e),this.keys=n,this.values=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitLiteralMap(this,e)},e}(os),_s=function(t){function e(e,n,r){t.call(this,e),this.strings=n,this.expressions=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitInterpolation(this,e)},e}(os),ws=function(t){function e(e,n,r,i){t.call(this,e),this.operation=n,this.left=r,this.right=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitBinary(this,e)},e}(os),xs=function(t){function e(e,n){t.call(this,e),this.expression=n}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitPrefixNot(this,e)},e}(os),Es=function(t){function e(e,n,r,i){t.call(this,e),this.receiver=n,this.name=r,this.args=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitMethodCall(this,e)},e}(os),Ss=function(t){function e(e,n,r,i){t.call(this,e),this.receiver=n,this.name=r,this.args=i}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitSafeMethodCall(this,e)},e}(os),Ts=function(t){function e(e,n,r){t.call(this,e),this.target=n,this.args=r}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),t.visitFunctionCall(this,e)},e}(os),Ms=function(t){function e(e,n,r,o){t.call(this,new is(0,i(n)?0:n.length)),this.ast=e,this.source=n,this.location=r,this.errors=o}return ns(e,t),e.prototype.visit=function(t,e){return void 0===e&&(e=null),this.ast.visit(t,e)},e.prototype.toString=function(){return this.source+" in "+this.location},e}(os),Cs=function(){function t(t,e,n,r){this.key=t,this.keyIsVar=e,this.name=n,this.expression=r}return t}(),As=function(){function t(){}return t.prototype.visitBinary=function(t,e){return t.left.visit(this),t.right.visit(this),null},t.prototype.visitChain=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitConditional=function(t,e){return t.condition.visit(this),t.trueExp.visit(this),t.falseExp.visit(this),null},t.prototype.visitPipe=function(t,e){return t.exp.visit(this),this.visitAll(t.args,e),null},t.prototype.visitFunctionCall=function(t,e){return t.target.visit(this),this.visitAll(t.args,e),null},t.prototype.visitImplicitReceiver=function(t,e){return null},t.prototype.visitInterpolation=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitKeyedRead=function(t,e){return t.obj.visit(this),t.key.visit(this),null},t.prototype.visitKeyedWrite=function(t,e){return t.obj.visit(this),t.key.visit(this),t.value.visit(this),null},t.prototype.visitLiteralArray=function(t,e){return this.visitAll(t.expressions,e)},t.prototype.visitLiteralMap=function(t,e){return this.visitAll(t.values,e)},t.prototype.visitLiteralPrimitive=function(t,e){return null},t.prototype.visitMethodCall=function(t,e){return t.receiver.visit(this),this.visitAll(t.args,e)},t.prototype.visitPrefixNot=function(t,e){return t.expression.visit(this),null},t.prototype.visitPropertyRead=function(t,e){return t.receiver.visit(this),null},t.prototype.visitPropertyWrite=function(t,e){return t.receiver.visit(this),t.value.visit(this),null},t.prototype.visitSafePropertyRead=function(t,e){return t.receiver.visit(this),null},t.prototype.visitSafeMethodCall=function(t,e){return t.receiver.visit(this),this.visitAll(t.args,e)},t.prototype.visitAll=function(t,e){var n=this;return t.forEach(function(t){return t.visit(n,e)}),null},t.prototype.visitQuote=function(t,e){return null},t}(),Os=0,Ps=9,Rs=10,Is=11,Ns=12,Ls=13,ks=32,Ds=33,js=34,Fs=35,Us=36,Vs=37,Bs=38,zs=39,Hs=40,Gs=41,Ws=42,qs=43,Xs=44,Ys=45,Zs=46,Ks=47,Qs=58,Js=59,$s=60,ta=61,ea=62,na=63,ra=48,ia=57,oa=65,sa=69,aa=70,ua=88,ca=90,la=91,ha=92,pa=93,fa=94,da=95,va=97,ma=101,ya=102,ga=110,ba=114,_a=116,wa=117,xa=118,Ea=120,Sa=122,Ta=123,Ma=124,Ca=125,Aa=160,Oa=96,Pa=[/^\s*$/,/[<>]/,/^[{}]$/,/&(#|[a-z])/i,/^\/\//],Ra=function(){function t(t,e){this.start=t,this.end=e}return t.fromArray=function(e){return e?(G("interpolation",e),new t(e[0],e[1])):Ia},t}(),Ia=new Ra("{{","}}");!function(t){t[t.Character=0]="Character",t[t.Identifier=1]="Identifier",t[t.Keyword=2]="Keyword",t[t.String=3]="String",t[t.Operator=4]="Operator",t[t.Number=5]="Number",t[t.Error=6]="Error"}(oo||(oo={}));var Na,La=["var","let","null","undefined","true","false","if","else","this"],ka=function(){function t(){}return t.prototype.tokenize=function(t){for(var e=new Fa(t),n=[],r=e.scanToken();null!=r;)n.push(r),r=e.scanToken();return n},t.decorators=[{type:n.Injectable}],t.ctorParameters=[],t}(),Da=function(){function t(t,e,n,r){this.index=t,this.type=e,this.numValue=n,this.strValue=r}return t.prototype.isCharacter=function(t){return this.type==oo.Character&&this.numValue==t},t.prototype.isNumber=function(){return this.type==oo.Number},t.prototype.isString=function(){return this.type==oo.String},t.prototype.isOperator=function(t){return this.type==oo.Operator&&this.strValue==t},t.prototype.isIdentifier=function(){return this.type==oo.Identifier},t.prototype.isKeyword=function(){return this.type==oo.Keyword},t.prototype.isKeywordLet=function(){return this.type==oo.Keyword&&"let"==this.strValue},t.prototype.isKeywordNull=function(){return this.type==oo.Keyword&&"null"==this.strValue},t.prototype.isKeywordUndefined=function(){return this.type==oo.Keyword&&"undefined"==this.strValue},t.prototype.isKeywordTrue=function(){return this.type==oo.Keyword&&"true"==this.strValue},t.prototype.isKeywordFalse=function(){return this.type==oo.Keyword&&"false"==this.strValue},t.prototype.isKeywordThis=function(){return this.type==oo.Keyword&&"this"==this.strValue},t.prototype.isError=function(){return this.type==oo.Error},t.prototype.toNumber=function(){return this.type==oo.Number?this.numValue:-1},t.prototype.toString=function(){switch(this.type){case oo.Character:case oo.Identifier:case oo.Keyword:case oo.Operator:case oo.String:case oo.Error:return this.strValue;case oo.Number:return this.numValue.toString();default:return null}},t}(),ja=new Da((-1),oo.Character,0,""),Fa=function(){function t(t){this.input=t,this.peek=0,this.index=-1,this.length=t.length,this.advance()}return t.prototype.advance=function(){this.peek=++this.index>=this.length?Os:Vr.charCodeAt(this.input,this.index)},t.prototype.scanToken=function(){for(var t=this.input,e=this.length,n=this.peek,r=this.index;n<=ks;){if(++r>=e){n=Os;break}n=Vr.charCodeAt(t,r)}if(this.peek=n,this.index=r,r>=e)return null;if(J(n))return this.scanIdentifier();if(V(n))return this.scanNumber(r);var i=r;switch(n){case Zs:return this.advance(),V(this.peek)?this.scanNumber(i):W(i,Zs);case Hs:case Gs:case Ta:case Ca:case la:case pa:case Xs:case Qs:case Js:return this.scanCharacter(i,n);case zs:case js:return this.scanString();case Fs:case qs:case Ys:case Ws:case Ks:case Vs:case fa:return this.scanOperator(i,Vr.fromCharCode(n));case na:return this.scanComplexOperator(i,"?",Zs,".");case $s:case ea:return this.scanComplexOperator(i,Vr.fromCharCode(n),ta,"=");case Ds:case ta:return this.scanComplexOperator(i,Vr.fromCharCode(n),ta,"=",ta,"=");case Bs:return this.scanComplexOperator(i,"&",Bs,"&");case Ma:return this.scanComplexOperator(i,"|",Ma,"|");case Aa:for(;U(this.peek);)this.advance();return this.scanToken()}return this.advance(),this.error("Unexpected character ["+Vr.fromCharCode(n)+"]",0)},t.prototype.scanCharacter=function(t,e){return this.advance(),W(t,e)},t.prototype.scanOperator=function(t,e){return this.advance(),Y(t,e)},t.prototype.scanComplexOperator=function(t,e,n,i,o,s){this.advance();var a=e;return this.peek==n&&(this.advance(),a+=i),r(o)&&this.peek==o&&(this.advance(),a+=s),Y(t,a)},t.prototype.scanIdentifier=function(){var t=this.index;for(this.advance();tt(this.peek);)this.advance();var e=this.input.substring(t,this.index);return La.indexOf(e)>-1?X(t,e):q(t,e)},t.prototype.scanNumber=function(t){var e=this.index===t;for(this.advance();;){if(V(this.peek));else if(this.peek==Zs)e=!1;else{if(!et(this.peek))break;if(this.advance(),nt(this.peek)&&this.advance(),!V(this.peek))return this.error("Invalid exponent",-1);e=!1}this.advance()}var n=this.input.substring(t,this.index),r=e?zr.parseIntAutoRadix(n):zr.parseFloat(n);return K(t,r)},t.prototype.scanString=function(){var t=this.index,e=this.peek;this.advance();for(var n,r=this.index,i=this.input;this.peek!=e;)if(this.peek==ha){null==n&&(n=new Br),n.add(i.substring(r,this.index)),this.advance();var o;if(this.peek==wa){var s=i.substring(this.index+1,this.index+5);try{o=zr.parseInt(s,16)}catch(a){return this.error("Invalid unicode escape [\\u"+s+"]",0)}for(var u=0;u<5;u++)this.advance()}else o=it(this.peek),this.advance();n.add(Vr.fromCharCode(o)),r=this.index}else{if(this.peek==Os)return this.error("Unterminated quote",0);this.advance()}var c=i.substring(r,this.index);this.advance();var l=c;return null!=n&&(n.add(c),l=n.toString()),Z(t,l)},t.prototype.error=function(t,e){var n=this.index+e;return Q(n,"Lexer Error: "+t+" at column "+n+" in expression ["+this.input+"]")},t}(),Ua=function(){function t(t,e){this.strings=t,this.expressions=e}return t}(),Va=function(){function t(t,e,n){
this.templateBindings=t,this.warnings=e,this.errors=n}return t}(),Ba=function(){function t(t){this._lexer=t,this.errors=[]}return t.prototype.parseAction=function(t,e,n){void 0===n&&(n=Ia),this._checkNoInterpolation(t,e,n);var r=this._lexer.tokenize(this._stripComments(t)),i=new za(t,e,r,(!0),this.errors).parseChain();return new Ms(i,t,e,this.errors)},t.prototype.parseBinding=function(t,e,n){void 0===n&&(n=Ia);var r=this._parseBindingAst(t,e,n);return new Ms(r,t,e,this.errors)},t.prototype.parseSimpleBinding=function(t,e,n){void 0===n&&(n=Ia);var r=this._parseBindingAst(t,e,n);return Ha.check(r)||this._reportError("Host binding expression can only contain field access and constants",t,e),new Ms(r,t,e,this.errors)},t.prototype._reportError=function(t,e,n,r){this.errors.push(new rs(t,e,n,r))},t.prototype._parseBindingAst=function(t,e,n){var i=this._parseQuote(t,e);if(r(i))return i;this._checkNoInterpolation(t,e,n);var o=this._lexer.tokenize(this._stripComments(t));return new za(t,e,o,(!1),this.errors).parseChain()},t.prototype._parseQuote=function(t,e){if(i(t))return null;var n=t.indexOf(":");if(n==-1)return null;var r=t.substring(0,n).trim();if(!$(r))return null;var o=t.substring(n+1);return new ss(new is(0,t.length),r,o,e)},t.prototype.parseTemplateBindings=function(t,e){var n=this._lexer.tokenize(t);return new za(t,e,n,(!1),this.errors).parseTemplateBindings()},t.prototype.parseInterpolation=function(t,e,n){void 0===n&&(n=Ia);var r=this.splitInterpolation(t,e,n);if(null==r)return null;for(var o=[],s=0;s<r.expressions.length;++s){var a=this._lexer.tokenize(this._stripComments(r.expressions[s])),u=new za(t,e,a,(!1),this.errors).parseChain();o.push(u)}return new Ms(new _s(new is(0,i(t)?0:t.length),r.strings,o),t,e,this.errors)},t.prototype.splitInterpolation=function(t,e,n){void 0===n&&(n=Ia);var r=ot(n),i=Vr.split(t,r);if(i.length<=1)return null;for(var o=[],s=[],a=0;a<i.length;a++){var u=i[a];a%2===0?o.push(u):u.trim().length>0?s.push(u):this._reportError("Blank expressions are not allowed in interpolated strings",t,"at column "+this._findInterpolationErrorColumn(i,a,n)+" in",e)}return new Ua(o,s)},t.prototype.wrapLiteralPrimitive=function(t,e){return new Ms(new ys(new is(0,i(t)?0:t.length),t),t,e,this.errors)},t.prototype._stripComments=function(t){var e=this._commentStart(t);return r(e)?t.substring(0,e).trim():t},t.prototype._commentStart=function(t){for(var e=null,n=0;n<t.length-1;n++){var r=Vr.charCodeAt(t,n),o=Vr.charCodeAt(t,n+1);if(r===Ks&&o==Ks&&i(e))return n;e===r?e=null:i(e)&&rt(r)&&(e=r)}return null},t.prototype._checkNoInterpolation=function(t,e,n){var r=ot(n),i=Vr.split(t,r);i.length>1&&this._reportError("Got interpolation ("+n.start+n.end+") where expression was expected",t,"at column "+this._findInterpolationErrorColumn(i,1,n)+" in",e)},t.prototype._findInterpolationErrorColumn=function(t,e,n){for(var r="",i=0;i<e;i++)r+=i%2===0?t[i]:""+n.start+t[i]+n.end;return r.length},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:ka}],t}(),za=function(){function t(t,e,n,r,i){this.input=t,this.location=e,this.tokens=n,this.parseAction=r,this.errors=i,this.rparensExpected=0,this.rbracketsExpected=0,this.rbracesExpected=0,this.index=0}return t.prototype.peek=function(t){var e=this.index+t;return e<this.tokens.length?this.tokens[e]:ja},Object.defineProperty(t.prototype,"next",{get:function(){return this.peek(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputIndex",{get:function(){return this.index<this.tokens.length?this.next.index:this.input.length},enumerable:!0,configurable:!0}),t.prototype.span=function(t){return new is(t,this.inputIndex)},t.prototype.advance=function(){this.index++},t.prototype.optionalCharacter=function(t){return!!this.next.isCharacter(t)&&(this.advance(),!0)},t.prototype.peekKeywordLet=function(){return this.next.isKeywordLet()},t.prototype.expectCharacter=function(t){this.optionalCharacter(t)||this.error("Missing expected "+Vr.fromCharCode(t))},t.prototype.optionalOperator=function(t){return!!this.next.isOperator(t)&&(this.advance(),!0)},t.prototype.expectOperator=function(t){this.optionalOperator(t)||this.error("Missing expected operator "+t)},t.prototype.expectIdentifierOrKeyword=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()?(this.advance(),t.toString()):(this.error("Unexpected token "+t+", expected identifier or keyword"),"")},t.prototype.expectIdentifierOrKeywordOrString=function(){var t=this.next;return t.isIdentifier()||t.isKeyword()||t.isString()?(this.advance(),t.toString()):(this.error("Unexpected token "+t+", expected identifier, keyword, or string"),"")},t.prototype.parseChain=function(){for(var t=[],e=this.inputIndex;this.index<this.tokens.length;){var n=this.parsePipe();if(t.push(n),this.optionalCharacter(Js))for(this.parseAction||this.error("Binding expression cannot contain chained expression");this.optionalCharacter(Js););else this.index<this.tokens.length&&this.error("Unexpected token '"+this.next+"'")}return 0==t.length?new as(this.span(e)):1==t.length?t[0]:new cs(this.span(e),t)},t.prototype.parsePipe=function(){var t=this.parseExpression();if(this.optionalOperator("|")){this.parseAction&&this.error("Cannot have a pipe in an action expression");do{for(var e=this.expectIdentifierOrKeyword(),n=[];this.optionalCharacter(Qs);)n.push(this.parseExpression());t=new ms(this.span(t.span.start),t,e,n)}while(this.optionalOperator("|"))}return t},t.prototype.parseExpression=function(){return this.parseConditional()},t.prototype.parseConditional=function(){var t=this.inputIndex,e=this.parseLogicalOr();if(this.optionalOperator("?")){var n=this.parsePipe(),r=void 0;if(this.optionalCharacter(Qs))r=this.parsePipe();else{var i=this.inputIndex,o=this.input.substring(t,i);this.error("Conditional expression "+o+" requires all 3 expressions"),r=new as(this.span(t))}return new ls(this.span(t),e,n,r)}return e},t.prototype.parseLogicalOr=function(){for(var t=this.parseLogicalAnd();this.optionalOperator("||");){var e=this.parseLogicalAnd();t=new ws(this.span(t.span.start),"||",t,e)}return t},t.prototype.parseLogicalAnd=function(){for(var t=this.parseEquality();this.optionalOperator("&&");){var e=this.parseEquality();t=new ws(this.span(t.span.start),"&&",t,e)}return t},t.prototype.parseEquality=function(){for(var t=this.parseRelational();this.next.type==oo.Operator;){var e=this.next.strValue;switch(e){case"==":case"===":case"!=":case"!==":this.advance();var n=this.parseRelational();t=new ws(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseRelational=function(){for(var t=this.parseAdditive();this.next.type==oo.Operator;){var e=this.next.strValue;switch(e){case"<":case">":case"<=":case">=":this.advance();var n=this.parseAdditive();t=new ws(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseAdditive=function(){for(var t=this.parseMultiplicative();this.next.type==oo.Operator;){var e=this.next.strValue;switch(e){case"+":case"-":this.advance();var n=this.parseMultiplicative();t=new ws(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parseMultiplicative=function(){for(var t=this.parsePrefix();this.next.type==oo.Operator;){var e=this.next.strValue;switch(e){case"*":case"%":case"/":this.advance();var n=this.parsePrefix();t=new ws(this.span(t.span.start),e,t,n);continue}break}return t},t.prototype.parsePrefix=function(){if(this.next.type==oo.Operator){var t=this.inputIndex,e=this.next.strValue,n=void 0;switch(e){case"+":return this.advance(),this.parsePrefix();case"-":return this.advance(),n=this.parsePrefix(),new ws(this.span(t),e,new ys(new is(t,t),0),n);case"!":return this.advance(),n=this.parsePrefix(),new xs(this.span(t),n)}}return this.parseCallChain()},t.prototype.parseCallChain=function(){for(var t=this.parsePrimary();;)if(this.optionalCharacter(Zs))t=this.parseAccessMemberOrMethodCall(t,!1);else if(this.optionalOperator("?."))t=this.parseAccessMemberOrMethodCall(t,!0);else if(this.optionalCharacter(la)){this.rbracketsExpected++;var e=this.parsePipe();if(this.rbracketsExpected--,this.expectCharacter(pa),this.optionalOperator("=")){var n=this.parseConditional();t=new vs(this.span(t.span.start),t,e,n)}else t=new ds(this.span(t.span.start),t,e)}else{if(!this.optionalCharacter(Hs))return t;this.rparensExpected++;var r=this.parseCallArguments();this.rparensExpected--,this.expectCharacter(Gs),t=new Ts(this.span(t.span.start),t,r)}},t.prototype.parsePrimary=function(){var t=this.inputIndex;if(this.optionalCharacter(Hs)){this.rparensExpected++;var e=this.parsePipe();return this.rparensExpected--,this.expectCharacter(Gs),e}if(this.next.isKeywordNull())return this.advance(),new ys(this.span(t),null);if(this.next.isKeywordUndefined())return this.advance(),new ys(this.span(t),(void 0));if(this.next.isKeywordTrue())return this.advance(),new ys(this.span(t),(!0));if(this.next.isKeywordFalse())return this.advance(),new ys(this.span(t),(!1));if(this.next.isKeywordThis())return this.advance(),new us(this.span(t));if(this.optionalCharacter(la)){this.rbracketsExpected++;var n=this.parseExpressionList(pa);return this.rbracketsExpected--,this.expectCharacter(pa),new gs(this.span(t),n)}if(this.next.isCharacter(Ta))return this.parseLiteralMap();if(this.next.isIdentifier())return this.parseAccessMemberOrMethodCall(new us(this.span(t)),!1);if(this.next.isNumber()){var r=this.next.toNumber();return this.advance(),new ys(this.span(t),r)}if(this.next.isString()){var i=this.next.toString();return this.advance(),new ys(this.span(t),i)}return this.index>=this.tokens.length?(this.error("Unexpected end of expression: "+this.input),new as(this.span(t))):(this.error("Unexpected token "+this.next),new as(this.span(t)))},t.prototype.parseExpressionList=function(t){var e=[];if(!this.next.isCharacter(t))do e.push(this.parsePipe());while(this.optionalCharacter(Xs));return e},t.prototype.parseLiteralMap=function(){var t=[],e=[],n=this.inputIndex;if(this.expectCharacter(Ta),!this.optionalCharacter(Ca)){this.rbracesExpected++;do{var r=this.expectIdentifierOrKeywordOrString();t.push(r),this.expectCharacter(Qs),e.push(this.parsePipe())}while(this.optionalCharacter(Xs));this.rbracesExpected--,this.expectCharacter(Ca)}return new bs(this.span(n),t,e)},t.prototype.parseAccessMemberOrMethodCall=function(t,e){void 0===e&&(e=!1);var n=t.span.start,r=this.expectIdentifierOrKeyword();if(this.optionalCharacter(Hs)){this.rparensExpected++;var i=this.parseCallArguments();this.expectCharacter(Gs),this.rparensExpected--;var o=this.span(n);return e?new Ss(o,t,r,i):new Es(o,t,r,i)}if(e)return this.optionalOperator("=")?(this.error("The '?.' operator cannot be used in the assignment"),new as(this.span(n))):new fs(this.span(n),t,r);if(this.optionalOperator("=")){if(!this.parseAction)return this.error("Bindings cannot contain assignments"),new as(this.span(n));var s=this.parseConditional();return new ps(this.span(n),t,r,s)}return new hs(this.span(n),t,r)},t.prototype.parseCallArguments=function(){if(this.next.isCharacter(Gs))return[];var t=[];do t.push(this.parsePipe());while(this.optionalCharacter(Xs));return t},t.prototype.expectTemplateBindingKey=function(){var t="",e=!1;do t+=this.expectIdentifierOrKeywordOrString(),e=this.optionalOperator("-"),e&&(t+="-");while(e);return t.toString()},t.prototype.parseTemplateBindings=function(){for(var t=[],e=null,n=[];this.index<this.tokens.length;){var r=this.peekKeywordLet();r&&this.advance();var i=this.expectTemplateBindingKey();r||(null==e?e=i:i=e+i[0].toUpperCase()+i.substring(1)),this.optionalCharacter(Qs);var o=null,s=null;if(r)o=this.optionalOperator("=")?this.expectTemplateBindingKey():"$implicit";else if(this.next!==ja&&!this.peekKeywordLet()){var a=this.inputIndex,u=this.parsePipe(),c=this.input.substring(a,this.inputIndex);s=new Ms(u,c,this.location,this.errors)}t.push(new Cs(i,r,o,s)),this.optionalCharacter(Js)||this.optionalCharacter(Xs)}return new Va(t,n,this.errors)},t.prototype.error=function(t,e){void 0===e&&(e=null),this.errors.push(new rs(t,this.input,this.locationText(e),this.location)),this.skip()},t.prototype.locationText=function(t){return void 0===t&&(t=null),i(t)&&(t=this.index),t<this.tokens.length?"at column "+(this.tokens[t].index+1)+" in":"at the end of the expression"},t.prototype.skip=function(){for(var t=this.next;this.index<this.tokens.length&&!t.isCharacter(Js)&&(this.rparensExpected<=0||!t.isCharacter(Gs))&&(this.rbracesExpected<=0||!t.isCharacter(Ca))&&(this.rbracketsExpected<=0||!t.isCharacter(pa));)this.next.isError()&&this.errors.push(new rs(this.next.toString(),this.input,this.locationText(),this.location)),this.advance(),t=this.next},t}(),Ha=function(){function t(){this.simple=!0}return t.check=function(e){var n=new t;return e.visit(n),n.simple},t.prototype.visitImplicitReceiver=function(t,e){},t.prototype.visitInterpolation=function(t,e){this.simple=!1},t.prototype.visitLiteralPrimitive=function(t,e){},t.prototype.visitPropertyRead=function(t,e){},t.prototype.visitPropertyWrite=function(t,e){this.simple=!1},t.prototype.visitSafePropertyRead=function(t,e){this.simple=!1},t.prototype.visitMethodCall=function(t,e){this.simple=!1},t.prototype.visitSafeMethodCall=function(t,e){this.simple=!1},t.prototype.visitFunctionCall=function(t,e){this.simple=!1},t.prototype.visitLiteralArray=function(t,e){this.visitAll(t.expressions)},t.prototype.visitLiteralMap=function(t,e){this.visitAll(t.values)},t.prototype.visitBinary=function(t,e){this.simple=!1},t.prototype.visitPrefixNot=function(t,e){this.simple=!1},t.prototype.visitConditional=function(t,e){this.simple=!1},t.prototype.visitPipe=function(t,e){this.simple=!1},t.prototype.visitKeyedRead=function(t,e){this.simple=!1},t.prototype.visitKeyedWrite=function(t,e){this.simple=!1},t.prototype.visitAll=function(t){var e=this;return t.map(function(t){return t.visit(e)})},t.prototype.visitChain=function(t,e){this.simple=!1},t.prototype.visitQuote=function(t,e){this.simple=!1},t}(),Ga=function(){function t(t,e,n,r){this.file=t,this.offset=e,this.line=n,this.col=r}return t.prototype.toString=function(){return r(this.offset)?this.file.url+"@"+this.line+":"+this.col:this.file.url},t}(),Wa=function(){function t(t,e){this.content=t,this.url=e}return t}(),qa=function(){function t(t,e,n){void 0===n&&(n=null),this.start=t,this.end=e,this.details=n}return t.prototype.toString=function(){return this.start.file.content.substring(this.start.offset,this.end.offset)},t}();!function(t){t[t.WARNING=0]="WARNING",t[t.FATAL=1]="FATAL"}(Na||(Na={}));var Xa,Ya=function(){function t(t,e,n){void 0===n&&(n=Na.FATAL),this.span=t,this.msg=e,this.level=n}return t.prototype.toString=function(){var t=this.span.start.file.content,e=this.span.start.offset,n="",i="";if(r(e)){e>t.length-1&&(e=t.length-1);for(var o=e,s=0,a=0;s<100&&e>0&&(e--,s++,"\n"!=t[e]||3!=++a););for(s=0,a=0;s<100&&o<t.length-1&&(o++,s++,"\n"!=t[o]||3!=++a););var u=t.substring(e,this.span.start.offset)+"[ERROR ->]"+t.substring(this.span.start.offset,o+1);n=' ("'+u+'")'}return this.span.details&&(i=", "+this.span.details),""+this.msg+n+": "+this.span.start+i},t}(),Za=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),Ka=function(){function t(t,e,n,r,i){this.switchValue=t,this.type=e,this.cases=n,this.sourceSpan=r,this.switchValueSourceSpan=i}return t.prototype.visit=function(t,e){return t.visitExpansion(this,e)},t}(),Qa=function(){function t(t,e,n,r,i){this.value=t,this.expression=e,this.sourceSpan=n,this.valueSourceSpan=r,this.expSourceSpan=i}return t.prototype.visit=function(t,e){return t.visitExpansionCase(this,e)},t}(),Ja=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitAttribute(this,e)},t}(),$a=function(){function t(t,e,n,r,i,o){this.name=t,this.attrs=e,this.children=n,this.sourceSpan=r,this.startSourceSpan=i,this.endSourceSpan=o}return t.prototype.visit=function(t,e){return t.visitElement(this,e)},t}(),tu=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitComment(this,e)},t}();!function(t){t[t.RAW_TEXT=0]="RAW_TEXT",t[t.ESCAPABLE_RAW_TEXT=1]="ESCAPABLE_RAW_TEXT",t[t.PARSABLE_DATA=2]="PARSABLE_DATA"}(Xa||(Xa={}));var eu,nu={Aacute:"",aacute:"",Acirc:"",acirc:"",acute:"",AElig:"",aelig:"",Agrave:"",agrave:"",alefsym:"",Alpha:"",alpha:"",amp:"&",and:"",ang:"",apos:"'",Aring:"",aring:"",asymp:"",Atilde:"",atilde:"",Auml:"",auml:"",bdquo:"",Beta:"",beta:"",brvbar:"",bull:"",cap:"",Ccedil:"",ccedil:"",cedil:"",cent:"",Chi:"",chi:"",circ:"",clubs:"",cong:"",copy:"",crarr:"",cup:"",curren:"",dagger:"",Dagger:"",darr:"",dArr:"",deg:"",Delta:"",delta:"",diams:"",divide:"",Eacute:"",eacute:"",Ecirc:"",ecirc:"",Egrave:"",egrave:"",empty:"",emsp:"",ensp:"",Epsilon:"",epsilon:"",equiv:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",exist:"",fnof:"",forall:"",frac12:"",frac14:"",frac34:"",frasl:"",Gamma:"",gamma:"",ge:"",gt:">",harr:"",hArr:"",hearts:"",hellip:"",Iacute:"",iacute:"",Icirc:"",icirc:"",iexcl:"",Igrave:"",igrave:"",image:"",infin:"","int":"",Iota:"",iota:"",iquest:"",isin:"",Iuml:"",iuml:"",Kappa:"",kappa:"",Lambda:"",lambda:"",lang:"",laquo:"",larr:"",lArr:"",lceil:"",ldquo:"",le:"",lfloor:"",lowast:"",loz:"",lrm:"",lsaquo:"",lsquo:"",lt:"<",macr:"",mdash:"",micro:"",middot:"",minus:"",Mu:"",mu:"",nabla:"",nbsp:"",ndash:"",ne:"",ni:"",not:"",notin:"",nsub:"",Ntilde:"",ntilde:"",Nu:"",nu:"",Oacute:"",oacute:"",Ocirc:"",ocirc:"",OElig:"",oelig:"",Ograve:"",ograve:"",oline:"",Omega:"",omega:"",Omicron:"",omicron:"",oplus:"",or:"",ordf:"",ordm:"",Oslash:"",oslash:"",Otilde:"",otilde:"",otimes:"",Ouml:"",ouml:"",para:"",permil:"",perp:"",Phi:"",phi:"",Pi:"",pi:"",piv:"",plusmn:"",pound:"",prime:"",Prime:"",prod:"",prop:"",Psi:"",psi:"",quot:'"',radic:"",rang:"",raquo:"",rarr:"",rArr:"",rceil:"",rdquo:"",real:"",reg:"",rfloor:"",Rho:"",rho:"",rlm:"",rsaquo:"",rsquo:"",sbquo:"",Scaron:"",scaron:"",sdot:"",sect:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sim:"",spades:"",sub:"",sube:"",sum:"",sup:"",sup1:"",sup2:"",sup3:"",supe:"",szlig:"",Tau:"",tau:"",there4:"",Theta:"",theta:"",thetasym:"",thinsp:"",THORN:"",thorn:"",tilde:"",times:"",trade:"",Uacute:"",uacute:"",uarr:"",uArr:"",Ucirc:"",ucirc:"",Ugrave:"",ugrave:"",uml:"",upsih:"",Upsilon:"",upsilon:"",Uuml:"",uuml:"",weierp:"",Xi:"",xi:"",Yacute:"",yacute:"",yen:"",yuml:"",Yuml:"",Zeta:"",zeta:"",zwj:"",zwnj:""},ru=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(t){t[t.TAG_OPEN_START=0]="TAG_OPEN_START",t[t.TAG_OPEN_END=1]="TAG_OPEN_END",t[t.TAG_OPEN_END_VOID=2]="TAG_OPEN_END_VOID",t[t.TAG_CLOSE=3]="TAG_CLOSE",t[t.TEXT=4]="TEXT",t[t.ESCAPABLE_RAW_TEXT=5]="ESCAPABLE_RAW_TEXT",t[t.RAW_TEXT=6]="RAW_TEXT",t[t.COMMENT_START=7]="COMMENT_START",t[t.COMMENT_END=8]="COMMENT_END",t[t.CDATA_START=9]="CDATA_START",t[t.CDATA_END=10]="CDATA_END",t[t.ATTR_NAME=11]="ATTR_NAME",t[t.ATTR_VALUE=12]="ATTR_VALUE",t[t.DOC_TYPE=13]="DOC_TYPE",t[t.EXPANSION_FORM_START=14]="EXPANSION_FORM_START",t[t.EXPANSION_CASE_VALUE=15]="EXPANSION_CASE_VALUE",t[t.EXPANSION_CASE_EXP_START=16]="EXPANSION_CASE_EXP_START",t[t.EXPANSION_CASE_EXP_END=17]="EXPANSION_CASE_EXP_END",t[t.EXPANSION_FORM_END=18]="EXPANSION_FORM_END",t[t.EOF=19]="EOF"}(eu||(eu={}));var iu,ou=function(){function t(t,e,n){this.type=t,this.parts=e,this.sourceSpan=n}return t}(),su=function(t){function e(e,n,r){t.call(this,r,e),this.tokenType=n}return ru(e,t),e}(Ya),au=function(){function t(t,e){this.tokens=t,this.errors=e}return t}(),uu=/\r\n?/g,cu=function(){function t(t){this.error=t}return t}(),lu=function(){function t(t,e,n,r){void 0===r&&(r=Ia),this._file=t,this._getTagDefinition=e,this._tokenizeIcu=n,this._interpolationConfig=r,this._peek=-1,this._nextPeek=-1,this._index=-1,this._line=0,this._column=-1,this._expansionCaseStack=[],this._inInterpolation=!1,this.tokens=[],this.errors=[],this._input=t.content,this._length=t.content.length,this._advance()}return t.prototype._processCarriageReturns=function(t){return t.replace(uu,"\n")},t.prototype.tokenize=function(){for(;this._peek!==Os;){var t=this._getLocation();try{this._attemptCharCode($s)?this._attemptCharCode(Ds)?this._attemptCharCode(la)?this._consumeCdata(t):this._attemptCharCode(Ys)?this._consumeComment(t):this._consumeDocType(t):this._attemptCharCode(Ks)?this._consumeTagClose(t):this._consumeTagOpen(t):this._tokenizeIcu&&this._tokenizeExpansionForm()||this._consumeText()}catch(e){if(!(e instanceof cu))throw e;this.errors.push(e.error)}}return this._beginToken(eu.EOF),this._endToken([]),new au(xt(this.tokens),this.errors)},t.prototype._tokenizeExpansionForm=function(){if(gt(this._input,this._index,this._interpolationConfig))return this._consumeExpansionFormStart(),!0;if(bt(this._peek)&&this._isInExpansionForm())return this._consumeExpansionCaseStart(),!0;if(this._peek===Ca){if(this._isInExpansionCase())return this._consumeExpansionCaseEnd(),!0;if(this._isInExpansionForm())return this._consumeExpansionFormEnd(),!0}return!1},t.prototype._getLocation=function(){return new Ga(this._file,this._index,this._line,this._column)},t.prototype._getSpan=function(t,e){return void 0===t&&(t=this._getLocation()),void 0===e&&(e=this._getLocation()),new qa(t,e)},t.prototype._beginToken=function(t,e){void 0===e&&(e=this._getLocation()),this._currentTokenStart=e,this._currentTokenType=t},t.prototype._endToken=function(t,e){void 0===e&&(e=this._getLocation());var n=new ou(this._currentTokenType,t,new qa(this._currentTokenStart,e));return this.tokens.push(n),this._currentTokenStart=null,this._currentTokenType=null,n},t.prototype._createError=function(t,e){this._isInExpansionForm()&&(t+=' (Do you have an unescaped "{" in your template? Use "{{ \'{\' }}") to escape it.)');var n=new su(t,this._currentTokenType,e);return this._currentTokenStart=null,this._currentTokenType=null,new cu(n)},t.prototype._advance=function(){if(this._index>=this._length)throw this._createError(ht(Os),this._getSpan());this._peek===Rs?(this._line++,this._column=0):this._peek!==Rs&&this._peek!==Ls&&this._column++,this._index++,this._peek=this._index>=this._length?Os:this._input.charCodeAt(this._index),this._nextPeek=this._index+1>=this._length?Os:this._input.charCodeAt(this._index+1)},t.prototype._attemptCharCode=function(t){return this._peek===t&&(this._advance(),!0)},t.prototype._attemptCharCodeCaseInsensitive=function(t){return!!_t(this._peek,t)&&(this._advance(),!0)},t.prototype._requireCharCode=function(t){var e=this._getLocation();if(!this._attemptCharCode(t))throw this._createError(ht(this._peek),this._getSpan(e,e))},t.prototype._attemptStr=function(t){var e=t.length;if(this._index+e>this._length)return!1;for(var n=this._savePosition(),r=0;r<e;r++)if(!this._attemptCharCode(t.charCodeAt(r)))return this._restorePosition(n),!1;return!0},t.prototype._attemptStrCaseInsensitive=function(t){for(var e=0;e<t.length;e++)if(!this._attemptCharCodeCaseInsensitive(t.charCodeAt(e)))return!1;return!0},t.prototype._requireStr=function(t){var e=this._getLocation();if(!this._attemptStr(t))throw this._createError(ht(this._peek),this._getSpan(e))},t.prototype._attemptCharCodeUntilFn=function(t){for(;!t(this._peek);)this._advance()},t.prototype._requireCharCodeUntilFn=function(t,e){var n=this._getLocation();if(this._attemptCharCodeUntilFn(t),this._index-n.offset<e)throw this._createError(ht(this._peek),this._getSpan(n,n))},t.prototype._attemptUntilChar=function(t){for(;this._peek!==t;)this._advance()},t.prototype._readChar=function(t){if(t&&this._peek===Bs)return this._decodeEntity();var e=this._index;return this._advance(),this._input[e]},t.prototype._decodeEntity=function(){var t=this._getLocation();if(this._advance(),!this._attemptCharCode(Fs)){var e=this._savePosition();if(this._attemptCharCodeUntilFn(yt),this._peek!=Js)return this._restorePosition(e),"&";this._advance();var n=this._input.substring(t.offset+1,this._index-1),r=nu[n];if(!r)throw this._createError(pt(n),this._getSpan(t));return r}var i=this._attemptCharCode(Ea)||this._attemptCharCode(ua),o=this._getLocation().offset;if(this._attemptCharCodeUntilFn(mt),this._peek!=Js)throw this._createError(ht(this._peek),this._getSpan());this._advance();var s=this._input.substring(o,this._index-1);try{var a=parseInt(s,i?16:10);return String.fromCharCode(a)}catch(u){var c=this._input.substring(t.offset+1,this._index-1);throw this._createError(pt(c),this._getSpan(t))}},t.prototype._consumeRawText=function(t,e,n){var r,i=this._getLocation();this._beginToken(t?eu.ESCAPABLE_RAW_TEXT:eu.RAW_TEXT,i);for(var o=[];;){if(r=this._getLocation(),this._attemptCharCode(e)&&n())break;for(this._index>r.offset&&o.push(this._input.substring(r.offset,this._index));this._peek!==e;)o.push(this._readChar(t))}return this._endToken([this._processCarriageReturns(o.join(""))],r)},t.prototype._consumeComment=function(t){var e=this;this._beginToken(eu.COMMENT_START,t),this._requireCharCode(Ys),this._endToken([]);var n=this._consumeRawText(!1,Ys,function(){return e._attemptStr("->")});this._beginToken(eu.COMMENT_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeCdata=function(t){var e=this;this._beginToken(eu.CDATA_START,t),this._requireStr("CDATA["),this._endToken([]);var n=this._consumeRawText(!1,pa,function(){return e._attemptStr("]>")});this._beginToken(eu.CDATA_END,n.sourceSpan.end),this._endToken([])},t.prototype._consumeDocType=function(t){this._beginToken(eu.DOC_TYPE,t),this._attemptUntilChar(ea),this._advance(),this._endToken([this._input.substring(t.offset+2,this._index-1)])},t.prototype._consumePrefixAndName=function(){for(var t=this._index,e=null;this._peek!==Qs&&!vt(this._peek);)this._advance();var n;this._peek===Qs?(this._advance(),e=this._input.substring(t,this._index-1),n=this._index):n=t,this._requireCharCodeUntilFn(dt,this._index===n?1:0);var r=this._input.substring(n,this._index);return[e,r]},t.prototype._consumeTagOpen=function(t){var e,n,r=this._savePosition();try{if(!B(this._peek))throw this._createError(ht(this._peek),this._getSpan());var i=this._index;for(this._consumeTagOpenStart(t),e=this._input.substring(i,this._index),n=e.toLowerCase(),this._attemptCharCodeUntilFn(ft);this._peek!==Ks&&this._peek!==ea;)this._consumeAttributeName(),this._attemptCharCodeUntilFn(ft),this._attemptCharCode(ta)&&(this._attemptCharCodeUntilFn(ft),this._consumeAttributeValue()),this._attemptCharCodeUntilFn(ft);this._consumeTagOpenEnd()}catch(o){if(o instanceof cu)return this._restorePosition(r),this._beginToken(eu.TEXT,t),void this._endToken(["<"]);throw o}var s=this._getTagDefinition(e).contentType;s===Xa.RAW_TEXT?this._consumeRawTextWithTagClose(n,!1):s===Xa.ESCAPABLE_RAW_TEXT&&this._consumeRawTextWithTagClose(n,!0)},t.prototype._consumeRawTextWithTagClose=function(t,e){var n=this,r=this._consumeRawText(e,$s,function(){return!!n._attemptCharCode(Ks)&&(n._attemptCharCodeUntilFn(ft),!!n._attemptStrCaseInsensitive(t)&&(n._attemptCharCodeUntilFn(ft),n._attemptCharCode(ea)))});this._beginToken(eu.TAG_CLOSE,r.sourceSpan.end),this._endToken([null,t])},t.prototype._consumeTagOpenStart=function(t){this._beginToken(eu.TAG_OPEN_START,t);var e=this._consumePrefixAndName();this._endToken(e)},t.prototype._consumeAttributeName=function(){this._beginToken(eu.ATTR_NAME);var t=this._consumePrefixAndName();this._endToken(t)},t.prototype._consumeAttributeValue=function(){this._beginToken(eu.ATTR_VALUE);var t;if(this._peek===zs||this._peek===js){var e=this._peek;this._advance();for(var n=[];this._peek!==e;)n.push(this._readChar(!0));t=n.join(""),this._advance()}else{var r=this._index;this._requireCharCodeUntilFn(dt,1),t=this._input.substring(r,this._index)}this._endToken([this._processCarriageReturns(t)])},t.prototype._consumeTagOpenEnd=function(){var t=this._attemptCharCode(Ks)?eu.TAG_OPEN_END_VOID:eu.TAG_OPEN_END;this._beginToken(t),this._requireCharCode(ea),this._endToken([])},t.prototype._consumeTagClose=function(t){this._beginToken(eu.TAG_CLOSE,t),this._attemptCharCodeUntilFn(ft);var e=this._consumePrefixAndName();this._attemptCharCodeUntilFn(ft),this._requireCharCode(ea),this._endToken(e)},t.prototype._consumeExpansionFormStart=function(){this._beginToken(eu.EXPANSION_FORM_START,this._getLocation()),this._requireCharCode(Ta),this._endToken([]),this._expansionCaseStack.push(eu.EXPANSION_FORM_START),this._beginToken(eu.RAW_TEXT,this._getLocation());var t=this._readUntil(Xs);this._endToken([t],this._getLocation()),this._requireCharCode(Xs),this._attemptCharCodeUntilFn(ft),this._beginToken(eu.RAW_TEXT,this._getLocation());var e=this._readUntil(Xs);this._endToken([e],this._getLocation()),this._requireCharCode(Xs),this._attemptCharCodeUntilFn(ft)},t.prototype._consumeExpansionCaseStart=function(){this._beginToken(eu.EXPANSION_CASE_VALUE,this._getLocation());var t=this._readUntil(Ta).trim();this._endToken([t],this._getLocation()),this._attemptCharCodeUntilFn(ft),this._beginToken(eu.EXPANSION_CASE_EXP_START,this._getLocation()),this._requireCharCode(Ta),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(ft),this._expansionCaseStack.push(eu.EXPANSION_CASE_EXP_START)},t.prototype._consumeExpansionCaseEnd=function(){this._beginToken(eu.EXPANSION_CASE_EXP_END,this._getLocation()),this._requireCharCode(Ca),this._endToken([],this._getLocation()),this._attemptCharCodeUntilFn(ft),this._expansionCaseStack.pop()},t.prototype._consumeExpansionFormEnd=function(){this._beginToken(eu.EXPANSION_FORM_END,this._getLocation()),this._requireCharCode(Ca),this._endToken([]),this._expansionCaseStack.pop()},t.prototype._consumeText=function(){var t=this._getLocation();this._beginToken(eu.TEXT,t);var e=[];do this._interpolationConfig&&this._attemptStr(this._interpolationConfig.start)?(e.push(this._interpolationConfig.start),this._inInterpolation=!0):this._interpolationConfig&&this._attemptStr(this._interpolationConfig.end)&&this._inInterpolation?(e.push(this._interpolationConfig.end),this._inInterpolation=!1):e.push(this._readChar(!0));while(!this._isTextEnd());this._endToken([this._processCarriageReturns(e.join(""))])},t.prototype._isTextEnd=function(){if(this._peek===$s||this._peek===Os)return!0;if(this._tokenizeIcu&&!this._inInterpolation){if(gt(this._input,this._index,this._interpolationConfig))return!0;if(this._peek===Ca&&this._isInExpansionCase())return!0}return!1},t.prototype._savePosition=function(){return[this._peek,this._index,this._column,this._line,this.tokens.length]},t.prototype._readUntil=function(t){var e=this._index;return this._attemptUntilChar(t),this._input.substring(e,this._index)},t.prototype._restorePosition=function(t){this._peek=t[0],this._index=t[1],this._column=t[2],this._line=t[3];var e=t[4];e<this.tokens.length&&(this.tokens=this.tokens.slice(0,e))},t.prototype._isInExpansionCase=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===eu.EXPANSION_CASE_EXP_START},t.prototype._isInExpansionForm=function(){return this._expansionCaseStack.length>0&&this._expansionCaseStack[this._expansionCaseStack.length-1]===eu.EXPANSION_FORM_START},t}(),hu=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},pu=function(t){function e(e,n,r){t.call(this,n,r),this.elementName=e}return hu(e,t),e.create=function(t,n,r){return new e(t,n,r)},e}(Ya),fu=function(){function t(t,e){this.rootNodes=t,this.errors=e}return t}(),du=function(){function t(t){this.getTagDefinition=t}return t.prototype.parse=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=Ia);var i=lt(t,e,this.getTagDefinition,n,r),o=new vu(i.tokens,this.getTagDefinition).build();
return new fu(o.rootNodes,i.errors.concat(o.errors))},t}(),vu=function(){function t(t,e){this.tokens=t,this.getTagDefinition=e,this._index=-1,this._rootNodes=[],this._errors=[],this._elementStack=[],this._advance()}return t.prototype.build=function(){for(;this._peek.type!==eu.EOF;)this._peek.type===eu.TAG_OPEN_START?this._consumeStartTag(this._advance()):this._peek.type===eu.TAG_CLOSE?this._consumeEndTag(this._advance()):this._peek.type===eu.CDATA_START?(this._closeVoidElement(),this._consumeCdata(this._advance())):this._peek.type===eu.COMMENT_START?(this._closeVoidElement(),this._consumeComment(this._advance())):this._peek.type===eu.TEXT||this._peek.type===eu.RAW_TEXT||this._peek.type===eu.ESCAPABLE_RAW_TEXT?(this._closeVoidElement(),this._consumeText(this._advance())):this._peek.type===eu.EXPANSION_FORM_START?this._consumeExpansion(this._advance()):this._advance();return new fu(this._rootNodes,this._errors)},t.prototype._advance=function(){var t=this._peek;return this._index<this.tokens.length-1&&this._index++,this._peek=this.tokens[this._index],t},t.prototype._advanceIf=function(t){return this._peek.type===t?this._advance():null},t.prototype._consumeCdata=function(t){this._consumeText(this._advance()),this._advanceIf(eu.CDATA_END)},t.prototype._consumeComment=function(t){var e=this._advanceIf(eu.RAW_TEXT);this._advanceIf(eu.COMMENT_END);var n=r(e)?e.parts[0].trim():null;this._addToParent(new tu(n,t.sourceSpan))},t.prototype._consumeExpansion=function(t){for(var e=this._advance(),n=this._advance(),r=[];this._peek.type===eu.EXPANSION_CASE_VALUE;){var o=this._parseExpansionCase();if(i(o))return;r.push(o)}if(this._peek.type!==eu.EXPANSION_FORM_END)return void this._errors.push(pu.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '}'."));var s=new qa(t.sourceSpan.start,this._peek.sourceSpan.end);this._addToParent(new Ka(e.parts[0],n.parts[0],r,s,e.sourceSpan)),this._advance()},t.prototype._parseExpansionCase=function(){var e=this._advance();if(this._peek.type!==eu.EXPANSION_CASE_EXP_START)return this._errors.push(pu.create(null,this._peek.sourceSpan,"Invalid ICU message. Missing '{'.")),null;var n=this._advance(),r=this._collectExpansionExpTokens(n);if(i(r))return null;var o=this._advance();r.push(new ou(eu.EOF,[],o.sourceSpan));var s=new t(r,this.getTagDefinition).build();if(s.errors.length>0)return this._errors=this._errors.concat(s.errors),null;var a=new qa(e.sourceSpan.start,o.sourceSpan.end),u=new qa(n.sourceSpan.start,o.sourceSpan.end);return new Qa(e.parts[0],s.rootNodes,a,e.sourceSpan,u)},t.prototype._collectExpansionExpTokens=function(t){for(var e=[],n=[eu.EXPANSION_CASE_EXP_START];;){if(this._peek.type!==eu.EXPANSION_FORM_START&&this._peek.type!==eu.EXPANSION_CASE_EXP_START||n.push(this._peek.type),this._peek.type===eu.EXPANSION_CASE_EXP_END){if(!Et(n,eu.EXPANSION_CASE_EXP_START))return this._errors.push(pu.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;if(n.pop(),0==n.length)return e}if(this._peek.type===eu.EXPANSION_FORM_END){if(!Et(n,eu.EXPANSION_FORM_START))return this._errors.push(pu.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;n.pop()}if(this._peek.type===eu.EOF)return this._errors.push(pu.create(null,t.sourceSpan,"Invalid ICU message. Missing '}'.")),null;e.push(this._advance())}},t.prototype._consumeText=function(t){var e=t.parts[0];if(e.length>0&&"\n"==e[0]){var n=this._getParentElement();r(n)&&0==n.children.length&&this.getTagDefinition(n.name).ignoreFirstLf&&(e=e.substring(1))}e.length>0&&this._addToParent(new Za(e,t.sourceSpan))},t.prototype._closeVoidElement=function(){if(this._elementStack.length>0){var t=hi.last(this._elementStack);this.getTagDefinition(t.name).isVoid&&this._elementStack.pop()}},t.prototype._consumeStartTag=function(t){for(var e=t.parts[0],n=t.parts[1],r=[];this._peek.type===eu.ATTR_NAME;)r.push(this._consumeAttr(this._advance()));var i=this._getElementFullName(e,n,this._getParentElement()),o=!1;if(this._peek.type===eu.TAG_OPEN_END_VOID){this._advance(),o=!0;var s=this.getTagDefinition(i);s.canSelfClose||null!==ut(i)||s.isVoid||this._errors.push(pu.create(i,t.sourceSpan,'Only void and foreign elements can be self closed "'+t.parts[1]+'"'))}else this._peek.type===eu.TAG_OPEN_END&&(this._advance(),o=!1);var a=this._peek.sourceSpan.start,u=new qa(t.sourceSpan.start,a),c=new $a(i,r,[],u,u,null);this._pushElement(c),o&&(this._popElement(i),c.endSourceSpan=u)},t.prototype._pushElement=function(t){if(this._elementStack.length>0){var e=hi.last(this._elementStack);this.getTagDefinition(e.name).isClosedByChild(t.name)&&this._elementStack.pop()}var n=this.getTagDefinition(t.name),i=this._getParentElementSkippingContainers(),o=i.parent,s=i.container;if(r(o)&&n.requireExtraParent(o.name)){var a=new $a(n.parentToAdd,[],[],t.sourceSpan,t.startSourceSpan,t.endSourceSpan);this._insertBeforeContainer(o,s,a)}this._addToParent(t),this._elementStack.push(t)},t.prototype._consumeEndTag=function(t){var e=this._getElementFullName(t.parts[0],t.parts[1],this._getParentElement());this._getParentElement()&&(this._getParentElement().endSourceSpan=t.sourceSpan),this.getTagDefinition(e).isVoid?this._errors.push(pu.create(e,t.sourceSpan,'Void elements do not have end tags "'+t.parts[1]+'"')):this._popElement(e)||this._errors.push(pu.create(e,t.sourceSpan,'Unexpected closing tag "'+t.parts[1]+'"'))},t.prototype._popElement=function(t){for(var e=this._elementStack.length-1;e>=0;e--){var n=this._elementStack[e];if(n.name==t)return hi.splice(this._elementStack,e,this._elementStack.length-e),!0;if(!this.getTagDefinition(n.name).closedByParent)return!1}return!1},t.prototype._consumeAttr=function(t){var e=ct(t.parts[0],t.parts[1]),n=t.sourceSpan.end,r="";if(this._peek.type===eu.ATTR_VALUE){var i=this._advance();r=i.parts[0],n=i.sourceSpan.end}return new Ja(e,r,new qa(t.sourceSpan.start,n))},t.prototype._getParentElement=function(){return this._elementStack.length>0?hi.last(this._elementStack):null},t.prototype._getParentElementSkippingContainers=function(){for(var t=null,e=this._elementStack.length-1;e>=0;e--){if("ng-container"!==this._elementStack[e].name)return{parent:this._elementStack[e],container:t};t=this._elementStack[e]}return{parent:hi.last(this._elementStack),container:t}},t.prototype._addToParent=function(t){var e=this._getParentElement();r(e)?e.children.push(t):this._rootNodes.push(t)},t.prototype._insertBeforeContainer=function(t,e,n){if(e){if(t){var r=t.children.indexOf(e);t.children[r]=n}else this._rootNodes.push(n);n.children.push(e),this._elementStack.splice(this._elementStack.indexOf(e),0,n)}else this._addToParent(n),this._elementStack.push(n)},t.prototype._getElementFullName=function(t,e,n){return i(t)&&(t=this.getTagDefinition(e).implicitNamespacePrefix,i(t)&&r(n)&&(t=ut(n.name))),ct(t,e)},t}(),mu=function(){function t(){}return t.prototype.visitText=function(t,e){return t.value},t.prototype.visitContainer=function(t,e){var n=this;return"["+t.children.map(function(t){return t.visit(n)}).join(", ")+"]"},t.prototype.visitIcu=function(t,e){var n=this,r=Object.keys(t.cases).map(function(e){return e+" {"+t.cases[e].visit(n)+"}"});return"{"+t.expression+", "+t.type+", "+r.join(", ")+"}"},t.prototype.visitTagPlaceholder=function(t,e){var n=this;return t.isVoid?'<ph tag name="'+t.startName+'"/>':'<ph tag name="'+t.startName+'">'+t.children.map(function(t){return t.visit(n)}).join(", ")+'</ph name="'+t.closeName+'">'},t.prototype.visitPlaceholder=function(t,e){return'<ph name="'+t.name+'">'+t.value+"</ph>"},t.prototype.visitIcuPlaceholder=function(t,e){return'<ph icu name="'+t.name+'">'+t.value.visit(this)+"</ph>"},t}(),yu=new mu,gu=function(){function t(t,e,n,r,i){this.nodes=t,this.placeholders=e,this.placeholderToMsgIds=n,this.meaning=r,this.description=i}return t}(),bu=function(){function t(t,e){this.value=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitText(this,e)},t}(),_u=function(){function t(t,e){this.children=t,this.sourceSpan=e}return t.prototype.visit=function(t,e){return t.visitContainer(this,e)},t}(),wu=function(){function t(t,e,n,r){this.expression=t,this.type=e,this.cases=n,this.sourceSpan=r}return t.prototype.visit=function(t,e){return t.visitIcu(this,e)},t}(),xu=function(){function t(t,e,n,r,i,o,s){this.tag=t,this.attrs=e,this.startName=n,this.closeName=r,this.children=i,this.isVoid=o,this.sourceSpan=s}return t.prototype.visit=function(t,e){return t.visitTagPlaceholder(this,e)},t}(),Eu=function(){function t(t,e,n){void 0===e&&(e=""),this.value=t,this.name=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitPlaceholder(this,e)},t}(),Su=function(){function t(t,e,n){void 0===e&&(e=""),this.value=t,this.name=e,this.sourceSpan=n}return t.prototype.visit=function(t,e){return t.visitIcuPlaceholder(this,e)},t}(),Tu=function(){function t(t){var e=this,n=void 0===t?{}:t,r=n.closedByChildren,i=n.requiredParents,o=n.implicitNamespacePrefix,s=n.contentType,a=void 0===s?Xa.PARSABLE_DATA:s,u=n.closedByParent,c=void 0!==u&&u,l=n.isVoid,h=void 0!==l&&l,p=n.ignoreFirstLf,f=void 0!==p&&p;this.closedByChildren={},this.closedByParent=!1,this.canSelfClose=!1,r&&r.length>0&&r.forEach(function(t){return e.closedByChildren[t]=!0}),this.isVoid=h,this.closedByParent=c||h,i&&i.length>0&&(this.requiredParents={},this.parentToAdd=i[0],i.forEach(function(t){return e.requiredParents[t]=!0})),this.implicitNamespacePrefix=o,this.contentType=a,this.ignoreFirstLf=f}return t.prototype.requireExtraParent=function(t){if(!this.requiredParents)return!1;if(!t)return!0;var e=t.toLowerCase();return 1!=this.requiredParents[e]&&"template"!=e},t.prototype.isClosedByChild=function(t){return this.isVoid||t.toLowerCase()in this.closedByChildren},t}(),Mu={base:new Tu({isVoid:!0}),meta:new Tu({isVoid:!0}),area:new Tu({isVoid:!0}),embed:new Tu({isVoid:!0}),link:new Tu({isVoid:!0}),img:new Tu({isVoid:!0}),input:new Tu({isVoid:!0}),param:new Tu({isVoid:!0}),hr:new Tu({isVoid:!0}),br:new Tu({isVoid:!0}),source:new Tu({isVoid:!0}),track:new Tu({isVoid:!0}),wbr:new Tu({isVoid:!0}),p:new Tu({closedByChildren:["address","article","aside","blockquote","div","dl","fieldset","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","main","nav","ol","p","pre","section","table","ul"],closedByParent:!0}),thead:new Tu({closedByChildren:["tbody","tfoot"]}),tbody:new Tu({closedByChildren:["tbody","tfoot"],closedByParent:!0}),tfoot:new Tu({closedByChildren:["tbody"],closedByParent:!0}),tr:new Tu({closedByChildren:["tr"],requiredParents:["tbody","tfoot","thead"],closedByParent:!0}),td:new Tu({closedByChildren:["td","th"],closedByParent:!0}),th:new Tu({closedByChildren:["td","th"],closedByParent:!0}),col:new Tu({requiredParents:["colgroup"],isVoid:!0}),svg:new Tu({implicitNamespacePrefix:"svg"}),math:new Tu({implicitNamespacePrefix:"math"}),li:new Tu({closedByChildren:["li"],closedByParent:!0}),dt:new Tu({closedByChildren:["dt","dd"]}),dd:new Tu({closedByChildren:["dt","dd"],closedByParent:!0}),rb:new Tu({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rt:new Tu({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),rtc:new Tu({closedByChildren:["rb","rtc","rp"],closedByParent:!0}),rp:new Tu({closedByChildren:["rb","rt","rtc","rp"],closedByParent:!0}),optgroup:new Tu({closedByChildren:["optgroup"],closedByParent:!0}),option:new Tu({closedByChildren:["option","optgroup"],closedByParent:!0}),pre:new Tu({ignoreFirstLf:!0}),listing:new Tu({ignoreFirstLf:!0}),style:new Tu({contentType:Xa.RAW_TEXT}),script:new Tu({contentType:Xa.RAW_TEXT}),title:new Tu({contentType:Xa.ESCAPABLE_RAW_TEXT}),textarea:new Tu({contentType:Xa.ESCAPABLE_RAW_TEXT,ignoreFirstLf:!0})},Cu=new Tu,Au={A:"LINK",B:"BOLD_TEXT",BR:"LINE_BREAK",EM:"EMPHASISED_TEXT",H1:"HEADING_LEVEL1",H2:"HEADING_LEVEL2",H3:"HEADING_LEVEL3",H4:"HEADING_LEVEL4",H5:"HEADING_LEVEL5",H6:"HEADING_LEVEL6",HR:"HORIZONTAL_RULE",I:"ITALIC_TEXT",LI:"LIST_ITEM",LINK:"MEDIA_LINK",OL:"ORDERED_LIST",P:"PARAGRAPH",Q:"QUOTATION",S:"STRIKETHROUGH_TEXT",SMALL:"SMALL_TEXT",SUB:"SUBSTRIPT",SUP:"SUPERSCRIPT",TBODY:"TABLE_BODY",TD:"TABLE_CELL",TFOOT:"TABLE_FOOTER",TH:"TABLE_HEADER_CELL",THEAD:"TABLE_HEADER",TR:"TABLE_ROW",TT:"MONOSPACED_TEXT",U:"UNDERLINED_TEXT",UL:"UNORDERED_LIST"},Ou=function(){function t(){this._placeHolderNameCounts={},this._signatureToName={}}return t.prototype.getStartTagPlaceholderName=function(t,e,n){var r=this._hashTag(t,e,n);if(this._signatureToName[r])return this._signatureToName[r];var i=t.toUpperCase(),o=Au[i]||"TAG_"+i,s=this._generateUniqueName(n?o:"START_"+o);return this._signatureToName[r]=s,s},t.prototype.getCloseTagPlaceholderName=function(t){var e=this._hashClosingTag(t);if(this._signatureToName[e])return this._signatureToName[e];var n=t.toUpperCase(),r=Au[n]||"TAG_"+n,i=this._generateUniqueName("CLOSE_"+r);return this._signatureToName[e]=i,i},t.prototype.getPlaceholderName=function(t,e){var n=t.toUpperCase(),r="PH: "+n+"="+e;if(this._signatureToName[r])return this._signatureToName[r];var i=this._generateUniqueName(n);return this._signatureToName[r]=i,i},t.prototype._hashTag=function(t,e,n){var r="<"+t,i=Object.keys(e).sort().map(function(t){return" "+t+"="+e[t]}).join(""),o=n?"/>":"></"+t+">";return r+i+o},t.prototype._hashClosingTag=function(t){return this._hashTag("/"+t,{},!1)},t.prototype._generateUniqueName=function(t){var e=t,n=this._placeHolderNameCounts[e];return n?(e+="_"+n,n++):n=1,this._placeHolderNameCounts[t]=n,e},t}(),Pu=new Ba(new ka),Ru=function(){function t(t,e){this._expressionParser=t,this._interpolationConfig=e}return t.prototype.toI18nMessage=function(t,e,n){this._isIcu=1==t.length&&t[0]instanceof Ka,this._icuDepth=0,this._placeholderRegistry=new Ou,this._placeholderToContent={},this._placeholderToIds={};var r=st(this,t,{});return new gu(r,this._placeholderToContent,this._placeholderToIds,e,n)},t.prototype.visitElement=function(t,e){var n=st(this,t.children),r={};t.attrs.forEach(function(t){r[t.name]=t.value});var i=Lt(t.name).isVoid,o=this._placeholderRegistry.getStartTagPlaceholderName(t.name,r,i);this._placeholderToContent[o]=t.sourceSpan.toString();var s="";return i||(s=this._placeholderRegistry.getCloseTagPlaceholderName(t.name),this._placeholderToContent[s]="</"+t.name+">"),new xu(t.name,r,o,s,n,i,t.sourceSpan)},t.prototype.visitAttribute=function(t,e){return this._visitTextWithInterpolation(t.value,t.sourceSpan)},t.prototype.visitText=function(t,e){return this._visitTextWithInterpolation(t.value,t.sourceSpan)},t.prototype.visitComment=function(t,e){return null},t.prototype.visitExpansion=function(e,n){var r=this;this._icuDepth++;var i={},o=new wu(e.switchValue,e.type,i,e.sourceSpan);if(e.cases.forEach(function(t){i[t.value]=new _u(t.expression.map(function(t){return t.visit(r,{})}),t.expSourceSpan)}),this._icuDepth--,this._isIcu||this._icuDepth>0)return o;var s=this._placeholderRegistry.getPlaceholderName("ICU",e.sourceSpan.toString()),a=new t(this._expressionParser,this._interpolationConfig);return this._placeholderToIds[s]=St(a.toI18nMessage([e],"","")),new Su(o,s,e.sourceSpan)},t.prototype.visitExpansionCase=function(t,e){throw new Error("Unreachable code")},t.prototype._visitTextWithInterpolation=function(t,e){var n=this._expressionParser.splitInterpolation(t,e.start.toString(),this._interpolationConfig);if(!n)return new bu(t,e);for(var r=[],i=new _u(r,e),o=this._interpolationConfig,s=o.start,a=o.end,u=0;u<n.strings.length-1;u++){var c=n.expressions[u],l=Dt(c)||"INTERPOLATION",h=this._placeholderRegistry.getPlaceholderName(l,c);n.strings[u].length&&r.push(new bu(n.strings[u],e)),r.push(new Eu(c,h,e)),this._placeholderToContent[h]=s+c+a}var p=n.strings.length-1;return n.strings[p].length&&r.push(new bu(n.strings[p],e)),i},t}(),Iu=/\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*"([\s\S]*?)"[\s\S]*\)/g,Nu=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Lu=function(t){function e(e,n){t.call(this,e,n)}return Nu(e,t),e}(Ya),ku="i18n",Du="i18n-",ju=/^i18n:?/,Fu=function(){function t(t,e){this.messages=t,this.errors=e}return t}();!function(t){t[t.Extract=0]="Extract",t[t.Merge=1]="Merge"}(iu||(iu={}));var Uu,Vu=function(){function t(t,e){this._implicitTags=t,this._implicitAttrs=e}return t.prototype.extract=function(t,e){var n=this;return this._init(iu.Extract,e),t.forEach(function(t){return t.visit(n,null)}),this._inI18nBlock&&this._reportError(t[t.length-1],"Unclosed block"),new Fu(this._messages,this._errors)},t.prototype.merge=function(t,e,n){this._init(iu.Merge,n),this._translations=e;var r=new $a("wrapper",[],t,null,null,null),i=r.visit(this,null);return this._inI18nBlock&&this._reportError(t[t.length-1],"Unclosed block"),new fu(i.children,this._errors)},t.prototype.visitExpansionCase=function(t,e){var n=st(this,t.expression,e);if(this._mode===iu.Merge)return new Qa(t.value,n,t.sourceSpan,t.valueSourceSpan,t.expSourceSpan)},t.prototype.visitExpansion=function(t,e){this._mayBeAddBlockChildren(t);var n=this._inIcu;this._inIcu||(this._isInTranslatableSection&&this._addMessage([t]),this._inIcu=!0);var r=st(this,t.cases,e);return this._mode===iu.Merge&&(t=new Ka(t.switchValue,t.type,r,t.sourceSpan,t.switchValueSourceSpan)),this._inIcu=n,t},t.prototype.visitComment=function(t,e){var n=Ut(t);if(n&&this._isInTranslatableSection)return void this._reportError(t,"Could not start a block inside a translatable section");var r=Vt(t);if(r&&!this._inI18nBlock)return void this._reportError(t,"Trying to close an unopened block");if(!this._inI18nNode&&!this._inIcu)if(this._inI18nBlock){if(r){if(this._depth==this._blockStartDepth){this._closeTranslatableSection(t,this._blockChildren),this._inI18nBlock=!1;var i=this._addMessage(this._blockChildren,this._blockMeaningAndDesc),o=this._translateMessage(t,i);return st(this,o)}return void this._reportError(t,"I18N blocks should not cross element boundaries")}}else n&&(this._inI18nBlock=!0,this._blockStartDepth=this._depth,this._blockChildren=[],this._blockMeaningAndDesc=t.value.replace(ju,"").trim(),this._openTranslatableSection(t))},t.prototype.visitText=function(t,e){return this._isInTranslatableSection&&this._mayBeAddBlockChildren(t),t},t.prototype.visitElement=function(t,e){var n=this;this._mayBeAddBlockChildren(t),this._depth++;var r,i=this._inI18nNode,o=this._inImplicitNode,s=Bt(t),a=this._implicitTags.some(function(e){return t.name===e})&&!this._inIcu&&!this._isInTranslatableSection,u=!o&&a;if(this._inImplicitNode=this._inImplicitNode||a,this._isInTranslatableSection||this._inIcu)(s||u)&&this._reportError(t,"Could not mark an element as translatable inside a translatable section"),this._mode==iu.Extract&&st(this,t.children),this._mode==iu.Merge&&(r=[],t.children.forEach(function(t){var i=t.visit(n,e);i&&!n._isInTranslatableSection&&(r=r.concat(i))}));else{if(s){this._inI18nNode=!0;var c=this._addMessage(t.children,s.value);r=this._translateMessage(t,c)}else if(u){this._inI18nNode=!0;var c=this._addMessage(t.children);r=this._translateMessage(t,c)}if(this._mode==iu.Extract){var l=s||u;l&&this._openTranslatableSection(t),st(this,t.children),l&&this._closeTranslatableSection(t,t.children)}this._mode!==iu.Merge||s||u||(r=[],t.children.forEach(function(t){var i=t.visit(n,e);i&&!n._isInTranslatableSection&&(r=r.concat(i))}))}if(this._visitAttributesOf(t),this._depth--,this._inI18nNode=i,this._inImplicitNode=o,this._mode===iu.Merge){var h=this._translateAttributes(t);return new $a(t.name,h,r,t.sourceSpan,t.startSourceSpan,t.endSourceSpan)}},t.prototype.visitAttribute=function(t,e){throw new Error("unreachable code")},t.prototype._init=function(t,e){this._mode=t,this._inI18nBlock=!1,this._inI18nNode=!1,this._depth=0,this._inIcu=!1,this._msgCountAtSectionStart=void 0,this._errors=[],this._messages=[],this._inImplicitNode=!1,this._createI18nMessage=kt(e)},t.prototype._visitAttributesOf=function(t){var e=this,n={},r=this._implicitAttrs[t.name]||[];t.attrs.filter(function(t){return t.name.startsWith(Du)}).forEach(function(t){return n[t.name.slice(Du.length)]=t.value}),t.attrs.forEach(function(t){t.name in n?e._addMessage([t],n[t.name]):r.some(function(e){return t.name===e})&&e._addMessage([t])})},t.prototype._addMessage=function(t,e){if(!(0==t.length||1==t.length&&t[0]instanceof Ja&&!t[0].value)){var n=zt(e),r=n[0],i=n[1],o=this._createI18nMessage(t,r,i);return this._messages.push(o),o}},t.prototype._translateMessage=function(t,e){if(e&&this._mode===iu.Merge){var n=St(e),r=this._translations.get(n);if(r)return r;this._reportError(t,'Translation unavailable for message id="'+n+'"')}return[]},t.prototype._translateAttributes=function(t){var e=this,n=t.attrs,r={};n.forEach(function(t){t.name.startsWith(Du)&&(r[t.name.slice(Du.length)]=zt(t.value)[0])});var i=[];return n.forEach(function(n){if(n.name!==ku&&!n.name.startsWith(Du))if(n.value&&""!=n.value&&r.hasOwnProperty(n.name)){var o=r[n.name],s=e._createI18nMessage([n],o,""),a=St(s),u=e._translations.get(a);if(u)if(u[0]instanceof Za){var c=u[0].value;i.push(new Ja(n.name,c,n.sourceSpan))}else e._reportError(t,'Unexpected translation for attribute "'+n.name+'" (id="'+a+'")');else e._reportError(t,'Translation unavailable for attribute "'+n.name+'" (id="'+a+'")')}else i.push(n)}),i},t.prototype._mayBeAddBlockChildren=function(t){this._inI18nBlock&&!this._inIcu&&this._depth==this._blockStartDepth&&this._blockChildren.push(t)},t.prototype._openTranslatableSection=function(t){this._isInTranslatableSection?this._reportError(t,"Unexpected section start"):this._msgCountAtSectionStart=this._messages.length},Object.defineProperty(t.prototype,"_isInTranslatableSection",{get:function(){return void 0!==this._msgCountAtSectionStart},enumerable:!0,configurable:!0}),t.prototype._closeTranslatableSection=function(t,e){if(!this._isInTranslatableSection)return void this._reportError(t,"Unexpected section end");var n=this._msgCountAtSectionStart,r=e.reduce(function(t,e){return t+(e instanceof tu?0:1)},0);if(1==r)for(var i=this._messages.length-1;i>=n;i--){var o=this._messages[i].nodes;if(!(1==o.length&&o[0]instanceof bu)){this._messages.splice(i,1);break}}this._msgCountAtSectionStart=void 0},t.prototype._reportError=function(t,e){this._errors.push(new Lu(t.sourceSpan,e))},t}(),Bu=function(){function t(t,e,n){this._htmlParser=t,this._implicitTags=e,this._implicitAttrs=n,this._messageMap={}}return t.prototype.updateFromTemplate=function(t,e,n){var r=this,i=this._htmlParser.parse(t,e,!0,n);if(i.errors.length)return i.errors;var o=jt(i.rootNodes,n,this._implicitTags,this._implicitAttrs);return o.errors.length?o.errors:void o.messages.forEach(function(t){r._messageMap[St(t)]=t})},t.prototype.getMessageMap=function(){return this._messageMap},t.prototype.write=function(t){return t.write(this._messageMap)},t}(),zu=function(){function t(){this.closedByParent=!1,this.contentType=Xa.PARSABLE_DATA,this.isVoid=!1,this.ignoreFirstLf=!1,this.canSelfClose=!0}return t.prototype.requireExtraParent=function(t){return!1},t.prototype.isClosedByChild=function(t){return!1},t}(),Hu=new zu,Gu=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Wu=function(t){function e(){t.call(this,Ht)}return Gu(e,t),e.prototype.parse=function(e,n,r){return void 0===r&&(r=!1),t.prototype.parse.call(this,e,n,r,null)},e}(du),qu=function(){function t(){}return t.prototype.visitTag=function(t){var e=this,n=this._serializeAttributes(t.attrs);if(0==t.children.length)return"<"+t.name+n+"/>";var r=t.children.map(function(t){return t.visit(e)});return"<"+t.name+n+">"+r.join("")+"</"+t.name+">"},t.prototype.visitText=function(t){return t.value},t.prototype.visitDeclaration=function(t){return"<?xml"+this._serializeAttributes(t.attrs)+" ?>"},t.prototype._serializeAttributes=function(t){var e=Object.keys(t).map(function(e){return e+'="'+t[e]+'"'}).join(" ");return e.length>0?" "+e:""},t.prototype.visitDoctype=function(t){return"<!DOCTYPE "+t.rootTag+" [\n"+t.dtd+"\n]>"},t}(),Xu=new qu,Yu=function(){function t(t){var e=this;this.attrs={},Object.keys(t).forEach(function(n){e.attrs[n]=Xt(t[n])})}return t.prototype.visit=function(t){return t.visitDeclaration(this)},t}(),Zu=function(){function t(t,e){this.rootTag=t,this.dtd=e}return t.prototype.visit=function(t){return t.visitDoctype(this)},t}(),Ku=function(){function t(t,e,n){var r=this;void 0===e&&(e={}),void 0===n&&(n=[]),this.name=t,this.children=n,this.attrs={},Object.keys(e).forEach(function(t){r.attrs[t]=Xt(e[t])})}return t.prototype.visit=function(t){return t.visitTag(this)},t}(),Qu=function(){function t(t){this.value=Xt(t)}return t.prototype.visit=function(t){return t.visitText(this)},t}(),Ju=[[/&/g,"&amp;"],[/"/g,"&quot;"],[/'/g,"&apos;"],[/</g,"&lt;"],[/>/g,"&gt;"]],$u="1.2",tc="urn:oasis:names:tc:xliff:document:1.2",ec="en",nc="x",rc="source",ic="target",oc="trans-unit",sc=function(t){return void 0===t&&(t=0),new Qu("\n"+new Array(t).join(" "))},ac=function(){function t(t,e){this._htmlParser=t,this._interpolationConfig=e}return t.prototype.write=function(t){var e=new uc,n=[];Object.keys(t).forEach(function(r){var i=t[r],o=new Ku(oc,{id:r,datatype:"html"});o.children.push(sc(8),new Ku(rc,{},e.serialize(i.nodes)),sc(8),new Ku(ic)),i.description&&o.children.push(sc(8),new Ku("note",{priority:"1",from:"description"},[new Qu(i.description)])),i.meaning&&o.children.push(sc(8),new Ku("note",{priority:"1",from:"meaning"},[new Qu(i.meaning)])),o.children.push(sc(6)),n.push(sc(6),o)});var r=new Ku("body",{},n.concat([sc(4)])),i=new Ku("file",{"source-language":ec,datatype:"plaintext",original:"ng2.template"},[sc(4),r,sc(2)]),o=new Ku("xliff",{version:$u,xmlns:tc},[sc(2),i,sc()]);return qt([new Yu({version:"1.0",encoding:"UTF-8"}),sc(),o])},t.prototype.load=function(t,e,n){var r=this,i=(new Wu).parse(t,e);if(i.errors.length)throw new Error("xtb parse errors:\n"+i.errors.join("\n"));var o=(new cc).parse(i.rootNodes,n),s=o.messages,a=o.errors;if(a.length)throw new Error("xtb parse errors:\n"+a.join("\n"));var u={},c=[];if(Object.keys(s).forEach(function(t){var n=r._htmlParser.parse(s[t],e,!0,r._interpolationConfig);c.push.apply(c,n.errors),u[t]=n.rootNodes}),c.length)throw new Error("xtb parse errors:\n"+c.join("\n"));return u},t}(),uc=function(){function t(){}return t.prototype.visitText=function(t,e){return[new Qu(t.value)]},t.prototype.visitContainer=function(t,e){var n=this,r=[];return t.children.forEach(function(t){return r.push.apply(r,t.visit(n))}),r},t.prototype.visitIcu=function(t,e){if(this._isInIcu)throw new Error("xliff does not support nested ICU messages");this._isInIcu=!0;var n=[];return this._isInIcu=!1,n},t.prototype.visitTagPlaceholder=function(t,e){var n=new Ku(nc,{id:t.startName,ctype:t.tag});if(t.isVoid)return[n];var r=new Ku(nc,{id:t.closeName,ctype:t.tag});return[n].concat(this.serialize(t.children),[r])},t.prototype.visitPlaceholder=function(t,e){return[new Ku(nc,{id:t.name})]},t.prototype.visitIcuPlaceholder=function(t,e){return[new Ku(nc,{id:t.name})]},t.prototype.serialize=function(t){var e=this;return this._isInIcu=!1,hi.flatten(t.map(function(t){return t.visit(e)}))},t}(),cc=function(){function t(){}return t.prototype.parse=function(t,e){var n=this;this._messageNodes=[],this._translatedMessages={},this._msgId="",this._target=[],this._errors=[],st(this,t,null);var r=e.getMessageMap(),i=Gt(e),o=Wt(e);return this._messageNodes.filter(function(t){return r.hasOwnProperty(t[0])}).sort(function(t,e){return 0==Object.keys(r[t[0]].placeholderToMsgIds).length?-1:0==Object.keys(r[e[0]].placeholderToMsgIds).length?1:0}).forEach(function(t){var e=t[0];n._placeholders=i[e]||{},n._placeholderToIds=o[e]||{},n._translatedMessages[e]=st(n,t[1]).join("")}),{messages:this._translatedMessages,errors:this._errors}},t.prototype.visitElement=function(t,e){switch(t.name){case oc:this._target=null;var n=t.attrs.find(function(t){return"id"===t.name});n?this._msgId=n.value:this._addError(t,"<"+oc+'> misses the "id" attribute'),st(this,t.children,null),null!==this._msgId&&this._messageNodes.push([this._msgId,this._target]);break;case rc:break;case ic:this._target=t.children;break;case nc:var r=t.attrs.find(function(t){return"id"===t.name});if(r){var i=r.value;if(this._placeholders.hasOwnProperty(i))return this._placeholders[i];if(this._placeholderToIds.hasOwnProperty(i)&&this._translatedMessages.hasOwnProperty(this._placeholderToIds[i]))return this._translatedMessages[this._placeholderToIds[i]];this._addError(t,'The placeholder "'+i+'" does not exists in the source message')}else this._addError(t,"<"+nc+'> misses the "id" attribute');break;default:st(this,t.children,null)}},t.prototype.visitAttribute=function(t,e){throw new Error("unreachable code")},t.prototype.visitText=function(t,e){return t.value},t.prototype.visitComment=function(t,e){return""},t.prototype.visitExpansion=function(t,e){throw new Error("unreachable code")},t.prototype.visitExpansionCase=function(t,e){throw new Error("unreachable code")},t.prototype._addError=function(t,e){this._errors.push(new Lu(t.sourceSpan,e))},t}(),lc="messagebundle",hc="msg",pc="ph",fc="ex",dc='<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) "default">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>',vc=function(){function t(){}return t.prototype.write=function(t){var e=new mc,n=new Ku(lc);return n.children.push(new Qu("\n")),Object.keys(t).forEach(function(r){var i=t[r],o={id:r};i.description&&(o.desc=i.description),i.meaning&&(o.meaning=i.meaning),n.children.push(new Qu("  "),new Ku(hc,o,e.serialize(i.nodes)),new Qu("\n"))}),qt([new Yu({version:"1.0",encoding:"UTF-8"}),new Qu("\n"),new Zu(lc,dc),new Qu("\n"),n])},t.prototype.load=function(t,e,n){throw new Error("Unsupported")},t}(),mc=function(){function t(){}return t.prototype.visitText=function(t,e){return[new Qu(t.value)]},t.prototype.visitContainer=function(t,e){var n=this,r=[];return t.children.forEach(function(t){return r.push.apply(r,t.visit(n))}),r},t.prototype.visitIcu=function(t,e){var n=this,r=[new Qu("{"+t.expression+", "+t.type+", ")];return Object.keys(t.cases).forEach(function(e){r.push.apply(r,[new Qu(e+" {")].concat(t.cases[e].visit(n),[new Qu("} ")]))}),r.push(new Qu("}")),r},t.prototype.visitTagPlaceholder=function(t,e){var n=new Ku(fc,{},[new Qu("<"+t.tag+">")]),r=new Ku(pc,{name:t.startName},[n]);if(t.isVoid)return[r];var i=new Ku(fc,{},[new Qu("</"+t.tag+">")]),o=new Ku(pc,{name:t.closeName},[i]);return[r].concat(this.serialize(t.children),[o])},t.prototype.visitPlaceholder=function(t,e){return[new Ku(pc,{name:t.name})]},t.prototype.visitIcuPlaceholder=function(t,e){return[new Ku(pc,{name:t.name})]},t.prototype.serialize=function(t){var e=this;return hi.flatten(t.map(function(t){return t.visit(e)}))},t}(),yc="translationbundle",gc="translation",bc="ph",_c=function(){function t(t,e){this._htmlParser=t,this._interpolationConfig=e}return t.prototype.write=function(t){throw new Error("Unsupported")},t.prototype.load=function(t,e,n){var r=this,i=(new Wu).parse(t,e);if(i.errors.length)throw new Error("xtb parse errors:\n"+i.errors.join("\n"));var o=(new wc).parse(i.rootNodes,n),s=o.messages,a=o.errors;if(a.length)throw new Error("xtb parse errors:\n"+a.join("\n"));var u={},c=[];if(Object.keys(s).forEach(function(t){var n=r._htmlParser.parse(s[t],e,!0,r._interpolationConfig);c.push.apply(c,n.errors),u[t]=n.rootNodes}),c.length)throw new Error("xtb parse errors:\n"+c.join("\n"));return u},t}(),wc=function(){function t(){}return t.prototype.parse=function(t,e){
var n=this;this._messageNodes=[],this._translatedMessages={},this._bundleDepth=0,this._translationDepth=0,this._errors=[],st(this,t,null);var r=e.getMessageMap(),i=Gt(e),o=Wt(e);return this._messageNodes.filter(function(t){return r.hasOwnProperty(t[0])}).sort(function(t,e){return 0==Object.keys(r[t[0]].placeholderToMsgIds).length?-1:0==Object.keys(r[e[0]].placeholderToMsgIds).length?1:0}).forEach(function(t){var e=t[0];n._placeholders=i[e]||{},n._placeholderToIds=o[e]||{},n._translatedMessages[e]=st(n,t[1]).join("")}),{messages:this._translatedMessages,errors:this._errors}},t.prototype.visitElement=function(t,e){switch(t.name){case yc:this._bundleDepth++,this._bundleDepth>1&&this._addError(t,"<"+yc+"> elements can not be nested"),st(this,t.children,null),this._bundleDepth--;break;case gc:this._translationDepth++,this._translationDepth>1&&this._addError(t,"<"+gc+"> elements can not be nested");var n=t.attrs.find(function(t){return"id"===t.name});n?this._messageNodes.push([n.value,t.children]):this._addError(t,"<"+gc+'> misses the "id" attribute'),this._translationDepth--;break;case bc:var r=t.attrs.find(function(t){return"name"===t.name});if(r){var i=r.value;if(this._placeholders.hasOwnProperty(i))return this._placeholders[i];if(this._placeholderToIds.hasOwnProperty(i)&&this._translatedMessages.hasOwnProperty(this._placeholderToIds[i]))return this._translatedMessages[this._placeholderToIds[i]];this._addError(t,'The placeholder "'+i+'" does not exists in the source message')}else this._addError(t,"<"+bc+'> misses the "name" attribute');break;default:this._addError(t,"Unexpected tag")}},t.prototype.visitAttribute=function(t,e){throw new Error("unreachable code")},t.prototype.visitText=function(t,e){return t.value},t.prototype.visitComment=function(t,e){return""},t.prototype.visitExpansion=function(t,e){var n=this;t.cases.map(function(t){return t.visit(n,null)});return"{"+t.switchValue+", "+t.type+", strCases.join(' ')}"},t.prototype.visitExpansionCase=function(t,e){return t.value+" {"+st(this,t.expression,null)+"}"},t.prototype._addError=function(t,e){this._errors.push(new Lu(t.sourceSpan,e))},t}(),xc=function(){function t(t){void 0===t&&(t={}),this._messageMap=t}return t.load=function(e,n,r,i){return new t(i.load(e,n,r))},t.prototype.get=function(t){return this._messageMap[t]},t.prototype.has=function(t){return t in this._messageMap},t}(),Ec=function(){function t(t,e,n){this._htmlParser=t,this._translations=e,this._translationsFormat=n}return t.prototype.parse=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=Ia);var i=this._htmlParser.parse(t,e,n,r);if(!this._translations||""===this._translations)return i;var o=new Bu(this._htmlParser,[],{}),s=o.updateFromTemplate(t,e,r);if(s&&s.length)return new fu(i.rootNodes,i.errors.concat(s));var a=this._createSerializer(r),u=xc.load(this._translations,e,o,a);return Ft(i.rootNodes,u,r,[],{})},t.prototype._createSerializer=function(t){var e=(this._translationsFormat||"xlf").toLowerCase();switch(e){case"xmb":return new vc;case"xtb":return new _c(this._htmlParser,t);case"xliff":case"xlf":default:return new ac(this._htmlParser,t)}},t}(),Sc=n.__core_private__.isDefaultChangeDetectionStrategy,Tc=n.__core_private__.ChangeDetectorStatus,Mc=n.__core_private__.LifecycleHooks,Cc=n.__core_private__.LIFECYCLE_HOOKS_VALUES,Ac=n.__core_private__.ReflectorReader,Oc=n.__core_private__.AppElement,Pc=n.__core_private__.CodegenComponentFactoryResolver,Rc=n.__core_private__.AppView,Ic=n.__core_private__.DebugAppView,Nc=n.__core_private__.NgModuleInjector,Lc=n.__core_private__.ViewType,kc=n.__core_private__.MAX_INTERPOLATION_VALUES,Dc=n.__core_private__.checkBinding,jc=n.__core_private__.flattenNestedViewRenderNodes,Fc=n.__core_private__.interpolate,Uc=n.__core_private__.ViewUtils,Vc=n.__core_private__.DebugContext,Bc=n.__core_private__.StaticNodeDebugInfo,zc=n.__core_private__.devModeEqual,Hc=n.__core_private__.UNINITIALIZED,Gc=n.__core_private__.ValueUnwrapper,Wc=n.__core_private__.TemplateRef_,qc=n.__core_private__.EMPTY_ARRAY,Xc=n.__core_private__.EMPTY_MAP,Yc=n.__core_private__.pureProxy1,Zc=n.__core_private__.pureProxy2,Kc=n.__core_private__.pureProxy3,Qc=n.__core_private__.pureProxy4,Jc=n.__core_private__.pureProxy5,$c=n.__core_private__.pureProxy6,tl=n.__core_private__.pureProxy7,el=n.__core_private__.pureProxy8,nl=n.__core_private__.pureProxy9,rl=n.__core_private__.pureProxy10,il=n.__core_private__.castByValue,ol=n.__core_private__.Console,sl=n.__core_private__.reflector,al=n.__core_private__.Reflector,ul=n.__core_private__.ReflectionCapabilities,cl=n.__core_private__.NoOpAnimationPlayer,ll=n.__core_private__.AnimationSequencePlayer,hl=n.__core_private__.AnimationGroupPlayer,pl=n.__core_private__.AnimationKeyframe,fl=n.__core_private__.AnimationStyles,dl=n.__core_private__.AnimationOutput,vl=n.__core_private__.ANY_STATE,ml=n.__core_private__.DEFAULT_STATE,yl=n.__core_private__.EMPTY_STATE,gl=n.__core_private__.FILL_STYLE_FLAG,bl=n.__core_private__.prepareFinalAnimationStyles,_l=n.__core_private__.balanceAnimationKeyframes,wl=n.__core_private__.clearStyles,xl=n.__core_private__.collectAndResolveStyles,El=n.__core_private__.renderStyles,Sl=n.__core_private__.ComponentStillLoadingError,Tl=I("core","linker/view"),Ml=I("core","linker/view_utils"),Cl=I("core","change_detection/change_detection"),Al=I("core","animation/animation_style_util"),Ol=function(){function t(){}return t.ANALYZE_FOR_ENTRY_COMPONENTS={name:"ANALYZE_FOR_ENTRY_COMPONENTS",moduleUrl:I("core","metadata/di"),runtime:n.ANALYZE_FOR_ENTRY_COMPONENTS},t.ViewUtils={name:"ViewUtils",moduleUrl:I("core","linker/view_utils"),runtime:Uc},t.AppView={name:"AppView",moduleUrl:Tl,runtime:Rc},t.DebugAppView={name:"DebugAppView",moduleUrl:Tl,runtime:Ic},t.AppElement={name:"AppElement",moduleUrl:I("core","linker/element"),runtime:Oc},t.ElementRef={name:"ElementRef",moduleUrl:I("core","linker/element_ref"),runtime:n.ElementRef},t.ViewContainerRef={name:"ViewContainerRef",moduleUrl:I("core","linker/view_container_ref"),runtime:n.ViewContainerRef},t.ChangeDetectorRef={name:"ChangeDetectorRef",moduleUrl:I("core","change_detection/change_detector_ref"),runtime:n.ChangeDetectorRef},t.RenderComponentType={name:"RenderComponentType",moduleUrl:I("core","render/api"),runtime:n.RenderComponentType},t.QueryList={name:"QueryList",moduleUrl:I("core","linker/query_list"),runtime:n.QueryList},t.TemplateRef={name:"TemplateRef",moduleUrl:I("core","linker/template_ref"),runtime:n.TemplateRef},t.TemplateRef_={name:"TemplateRef_",moduleUrl:I("core","linker/template_ref"),runtime:Wc},t.CodegenComponentFactoryResolver={name:"CodegenComponentFactoryResolver",moduleUrl:I("core","linker/component_factory_resolver"),runtime:Pc},t.ComponentFactoryResolver={name:"ComponentFactoryResolver",moduleUrl:I("core","linker/component_factory_resolver"),runtime:n.ComponentFactoryResolver},t.ComponentFactory={name:"ComponentFactory",runtime:n.ComponentFactory,moduleUrl:I("core","linker/component_factory")},t.NgModuleFactory={name:"NgModuleFactory",runtime:n.NgModuleFactory,moduleUrl:I("core","linker/ng_module_factory")},t.NgModuleInjector={name:"NgModuleInjector",runtime:Nc,moduleUrl:I("core","linker/ng_module_factory")},t.ValueUnwrapper={name:"ValueUnwrapper",moduleUrl:Cl,runtime:Gc},t.Injector={name:"Injector",moduleUrl:I("core","di/injector"),runtime:n.Injector},t.ViewEncapsulation={name:"ViewEncapsulation",moduleUrl:I("core","metadata/view"),runtime:n.ViewEncapsulation},t.ViewType={name:"ViewType",moduleUrl:I("core","linker/view_type"),runtime:Lc},t.ChangeDetectionStrategy={name:"ChangeDetectionStrategy",moduleUrl:Cl,runtime:n.ChangeDetectionStrategy},t.StaticNodeDebugInfo={name:"StaticNodeDebugInfo",moduleUrl:I("core","linker/debug_context"),runtime:Bc},t.DebugContext={name:"DebugContext",moduleUrl:I("core","linker/debug_context"),runtime:Vc},t.Renderer={name:"Renderer",moduleUrl:I("core","render/api"),runtime:n.Renderer},t.SimpleChange={name:"SimpleChange",moduleUrl:Cl,runtime:n.SimpleChange},t.UNINITIALIZED={name:"UNINITIALIZED",moduleUrl:Cl,runtime:Hc},t.ChangeDetectorStatus={name:"ChangeDetectorStatus",moduleUrl:Cl,runtime:Tc},t.checkBinding={name:"checkBinding",moduleUrl:Ml,runtime:Dc},t.flattenNestedViewRenderNodes={name:"flattenNestedViewRenderNodes",moduleUrl:Ml,runtime:jc},t.devModeEqual={name:"devModeEqual",moduleUrl:Cl,runtime:zc},t.interpolate={name:"interpolate",moduleUrl:Ml,runtime:Fc},t.castByValue={name:"castByValue",moduleUrl:Ml,runtime:il},t.EMPTY_ARRAY={name:"EMPTY_ARRAY",moduleUrl:Ml,runtime:qc},t.EMPTY_MAP={name:"EMPTY_MAP",moduleUrl:Ml,runtime:Xc},t.pureProxies=[null,{name:"pureProxy1",moduleUrl:Ml,runtime:Yc},{name:"pureProxy2",moduleUrl:Ml,runtime:Zc},{name:"pureProxy3",moduleUrl:Ml,runtime:Kc},{name:"pureProxy4",moduleUrl:Ml,runtime:Qc},{name:"pureProxy5",moduleUrl:Ml,runtime:Jc},{name:"pureProxy6",moduleUrl:Ml,runtime:$c},{name:"pureProxy7",moduleUrl:Ml,runtime:tl},{name:"pureProxy8",moduleUrl:Ml,runtime:el},{name:"pureProxy9",moduleUrl:Ml,runtime:nl},{name:"pureProxy10",moduleUrl:Ml,runtime:rl}],t.SecurityContext={name:"SecurityContext",moduleUrl:I("core","security"),runtime:n.SecurityContext},t.AnimationKeyframe={name:"AnimationKeyframe",moduleUrl:I("core","animation/animation_keyframe"),runtime:pl},t.AnimationStyles={name:"AnimationStyles",moduleUrl:I("core","animation/animation_styles"),runtime:fl},t.NoOpAnimationPlayer={name:"NoOpAnimationPlayer",moduleUrl:I("core","animation/animation_player"),runtime:cl},t.AnimationGroupPlayer={name:"AnimationGroupPlayer",moduleUrl:I("core","animation/animation_group_player"),runtime:hl},t.AnimationSequencePlayer={name:"AnimationSequencePlayer",moduleUrl:I("core","animation/animation_sequence_player"),runtime:ll},t.prepareFinalAnimationStyles={name:"prepareFinalAnimationStyles",moduleUrl:Al,runtime:bl},t.balanceAnimationKeyframes={name:"balanceAnimationKeyframes",moduleUrl:Al,runtime:_l},t.clearStyles={name:"clearStyles",moduleUrl:Al,runtime:wl},t.renderStyles={name:"renderStyles",moduleUrl:Al,runtime:El},t.collectAndResolveStyles={name:"collectAndResolveStyles",moduleUrl:Al,runtime:xl},t.LOCALE_ID={name:"LOCALE_ID",moduleUrl:I("core","i18n/tokens"),runtime:n.LOCALE_ID},t.TRANSLATIONS_FORMAT={name:"TRANSLATIONS_FORMAT",moduleUrl:I("core","i18n/tokens"),runtime:n.TRANSLATIONS_FORMAT},t.AnimationOutput={name:"AnimationOutput",moduleUrl:I("core","animation/animation_output"),runtime:dl},t}(),Pl=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Rl=function(t){function e(){t.call(this,Lt)}return Pl(e,t),e.prototype.parse=function(e,n,r,i){return void 0===r&&(r=!1),void 0===i&&(i=Ia),t.prototype.parse.call(this,e,n,r,i)},e.decorators=[{type:n.Injectable}],e.ctorParameters=[],e}(du),Il=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Nl=["zero","one","two","few","many","other"],Ll=function(){function t(t,e,n){this.nodes=t,this.expanded=e,this.errors=n}return t}(),kl=function(t){function e(e,n){t.call(this,e,n)}return Il(e,t),e}(Ya),Dl=function(){function t(){this.isExpanded=!1,this.errors=[]}return t.prototype.visitElement=function(t,e){return new $a(t.name,t.attrs,st(this,t.children),t.sourceSpan,t.startSourceSpan,t.endSourceSpan)},t.prototype.visitAttribute=function(t,e){return t},t.prototype.visitText=function(t,e){return t},t.prototype.visitComment=function(t,e){return t},t.prototype.visitExpansion=function(t,e){return this.isExpanded=!0,"plural"==t.type?$t(t,this.errors):te(t,this.errors)},t.prototype.visitExpansionCase=function(t,e){throw new Error("Should not be reached")},t}(),jl=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Fl=function(t){function e(e,n){t.call(this,n,e)}return jl(e,t),e}(Ya),Ul=function(){function t(t,e){var n=this;this.component=t,this.sourceSpan=e,this.errors=[],this.viewQueries=se(t),this.viewProviders=new Map,re(t.viewProviders,e,this.errors).forEach(function(t){i(n.viewProviders.get(t.token.reference))&&n.viewProviders.set(t.token.reference,!0)})}return t}(),Vl=function(){function t(t,e,n,i,o,s,a){var u=this;this._viewContext=t,this._parent=e,this._isViewRoot=n,this._directiveAsts=i,this._sourceSpan=a,this._transformedProviders=new Map,this._seenProviders=new Map,this._hasViewContainer=!1,this._attrs={},o.forEach(function(t){return u._attrs[t.name]=t.value});var c=i.map(function(t){return t.directive});this._allProviders=ie(c,a,t.errors),this._contentQueries=ae(c);var l=new Map;ci.values(this._allProviders).forEach(function(t){u._addQueryReadsTo(t.token,l)}),s.forEach(function(t){u._addQueryReadsTo(new qo({value:t.name}),l)}),r(l.get(Kt(Ol.ViewContainerRef).reference))&&(this._hasViewContainer=!0),ci.values(this._allProviders).forEach(function(t){var e=t.eager||r(l.get(t.token.reference));e&&u._getOrCreateLocalProvider(t.providerType,t.token,!0)})}return t.prototype.afterElement=function(){var t=this;ci.values(this._allProviders).forEach(function(e){t._getOrCreateLocalProvider(e.providerType,e.token,!1)})},Object.defineProperty(t.prototype,"transformProviders",{get:function(){return ci.values(this._transformedProviders)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformedDirectiveAsts",{get:function(){var t=this.transformProviders.map(function(t){return t.token.identifier}),e=hi.clone(this._directiveAsts);return hi.sort(e,function(e,n){return t.indexOf(e.directive.type)-t.indexOf(n.directive.type)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformedHasViewContainer",{get:function(){return this._hasViewContainer},enumerable:!0,configurable:!0}),t.prototype._addQueryReadsTo=function(t,e){this._getQueriesFor(t).forEach(function(n){var o=r(n.read)?n.read:t;i(e.get(o.reference))&&e.set(o.reference,!0)})},t.prototype._getQueriesFor=function(t){for(var e,n=[],i=this,o=0;null!==i;)e=i._contentQueries.get(t.reference),r(e)&&hi.addAll(n,e.filter(function(t){return t.descendants||o<=1})),i._directiveAsts.length>0&&o++,i=i._parent;return e=this._viewContext.viewQueries.get(t.reference),r(e)&&hi.addAll(n,e),n},t.prototype._getOrCreateLocalProvider=function(t,n,o){var s=this,a=this._allProviders.get(n.reference);if(i(a)||(t===e.ProviderAstType.Directive||t===e.ProviderAstType.PublicService)&&a.providerType===e.ProviderAstType.PrivateService||(t===e.ProviderAstType.PrivateService||t===e.ProviderAstType.PublicService)&&a.providerType===e.ProviderAstType.Builtin)return null;var u=this._transformedProviders.get(n.reference);if(r(u))return u;if(r(this._seenProviders.get(n.reference)))return this._viewContext.errors.push(new Fl("Cannot instantiate cyclic dependency! "+n.name,this._sourceSpan)),null;this._seenProviders.set(n.reference,!0);var c=a.providers.map(function(t){var e,n=t.useValue,i=t.useExisting;if(r(t.useExisting)){var u=s._getDependency(a.providerType,new Ho({token:t.useExisting}),o);r(u.token)?i=u.token:(i=null,n=u.value)}else if(r(t.useFactory)){var c=r(t.deps)?t.deps:t.useFactory.diDeps;e=c.map(function(t){return s._getDependency(a.providerType,t,o)})}else if(r(t.useClass)){var c=r(t.deps)?t.deps:t.useClass.diDeps;e=c.map(function(t){return s._getDependency(a.providerType,t,o)})}return ee(t,{useExisting:i,useValue:n,deps:e})});return u=ne(a,{eager:o,providers:c}),this._transformedProviders.set(n.reference,u),u},t.prototype._getLocalDependency=function(t,n,i){if(void 0===i&&(i=null),n.isAttribute){var o=this._attrs[n.token.value];return new Ho({isValue:!0,value:l(o)})}if(r(n.query)||r(n.viewQuery))return n;if(r(n.token)){if(t===e.ProviderAstType.Directive||t===e.ProviderAstType.Component){if(n.token.reference===Kt(Ol.Renderer).reference||n.token.reference===Kt(Ol.ElementRef).reference||n.token.reference===Kt(Ol.ChangeDetectorRef).reference||n.token.reference===Kt(Ol.TemplateRef).reference)return n;n.token.reference===Kt(Ol.ViewContainerRef).reference&&(this._hasViewContainer=!0)}if(n.token.reference===Kt(Ol.Injector).reference)return n;if(r(this._getOrCreateLocalProvider(t,n.token,i)))return n}return null},t.prototype._getDependency=function(t,n,o){void 0===o&&(o=null);var s=this,a=o,u=null;if(n.isSkipSelf||(u=this._getLocalDependency(t,n,o)),n.isSelf)i(u)&&n.isOptional&&(u=new Ho({isValue:!0,value:null}));else{for(;i(u)&&r(s._parent);){var c=s;s=s._parent,c._isViewRoot&&(a=!1),u=s._getLocalDependency(e.ProviderAstType.PublicService,n,a)}i(u)&&(u=!n.isHost||this._viewContext.component.type.isHost||this._viewContext.component.type.reference===n.token.reference||r(this._viewContext.viewProviders.get(n.token.reference))?n:n.isOptional?u=new Ho({isValue:!0,value:null}):null)}return i(u)&&this._viewContext.errors.push(new Fl("No provider for "+n.token.name,this._sourceSpan)),u},t}(),Bl=function(){function t(t,n,r){var i=this;this._transformedProviders=new Map,this._seenProviders=new Map,this._errors=[],this._allProviders=new Map;var o=t.transitiveModule.modules.map(function(t){return t.type});o.forEach(function(t){var n=new Go({token:new qo({identifier:t}),useClass:t});oe([n],e.ProviderAstType.PublicService,!0,r,i._errors,i._allProviders)}),oe(re(t.transitiveModule.providers.concat(n),r,this._errors),e.ProviderAstType.PublicService,!1,r,this._errors,this._allProviders)}return t.prototype.parse=function(){var t=this;if(ci.values(this._allProviders).forEach(function(e){t._getOrCreateLocalProvider(e.token,e.eager)}),this._errors.length>0){var e=this._errors.join("\n");throw new Error("Provider parse errors:\n"+e)}return ci.values(this._transformedProviders)},t.prototype._getOrCreateLocalProvider=function(t,e){var n=this,o=this._allProviders.get(t.reference);if(i(o))return null;var s=this._transformedProviders.get(t.reference);if(r(s))return s;if(r(this._seenProviders.get(t.reference)))return this._errors.push(new Fl("Cannot instantiate cyclic dependency! "+t.name,o.sourceSpan)),null;this._seenProviders.set(t.reference,!0);var a=o.providers.map(function(t){var i,s=t.useValue,a=t.useExisting;if(r(t.useExisting)){var u=n._getDependency(new Ho({token:t.useExisting}),e,o.sourceSpan);r(u.token)?a=u.token:(a=null,s=u.value)}else if(r(t.useFactory)){var c=r(t.deps)?t.deps:t.useFactory.diDeps;i=c.map(function(t){return n._getDependency(t,e,o.sourceSpan)})}else if(r(t.useClass)){var c=r(t.deps)?t.deps:t.useClass.diDeps;i=c.map(function(t){return n._getDependency(t,e,o.sourceSpan)})}return ee(t,{useExisting:a,useValue:s,deps:i})});return s=ne(o,{eager:e,providers:a}),this._transformedProviders.set(t.reference,s),s},t.prototype._getDependency=function(t,e,n){void 0===e&&(e=null);var i=!1;!t.isSkipSelf&&r(t.token)&&(t.token.reference===Kt(Ol.Injector).reference||t.token.reference===Kt(Ol.ComponentFactoryResolver).reference?i=!0:r(this._getOrCreateLocalProvider(t.token,e))&&(i=!0));var o=t;return t.isSelf&&!i&&(t.isOptional?o=new Ho({isValue:!0,value:null}):this._errors.push(new Fl("No provider for "+t.token.name,n))),o},t}(),zl=function(){function t(){}return t}(),Hl=function(){function t(t,e){this.style=t,this.styleUrls=e}return t}(),Gl=/@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g,Wl=/^([^:\/?#]+):/,ql="select",Xl="ng-content",Yl="link",Zl="rel",Kl="href",Ql="stylesheet",Jl="style",$l="script",th="ngNonBindable",eh="ngProjectAs";!function(t){t[t.NG_CONTENT=0]="NG_CONTENT",t[t.STYLE=1]="STYLE",t[t.STYLESHEET=2]="STYLESHEET",t[t.SCRIPT=3]="SCRIPT",t[t.OTHER=4]="OTHER"}(Uu||(Uu={}));var nh,rh=function(){function t(t,e,n,r,i){this.type=t,this.selectAttr=e,this.hrefAttr=n,this.nonBindable=r,this.projectAs=i}return t}(),ih=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},oh=/^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/,sh=1,ah=2,uh=3,ch=4,lh=5,hh=6,ph=7,fh=8,dh=9,vh=10,mh="animate-",yh="template",gh="template",bh="*",_h="class",wh=".",xh="attr",Eh="class",Sh="style",Th=mi.parse("*")[0],Mh=new n.OpaqueToken("TemplateTransforms"),Ch=function(t){function e(e,n,r){t.call(this,n,e,r)}return ih(e,t),e}(Ya),Ah=function(){function t(t,e){this.templateAst=t,this.errors=e}return t}(),Oh=function(){function t(t,e,n,r,i){this._exprParser=t,this._schemaRegistry=e,this._htmlParser=n,this._console=r,this.transforms=i}return t.prototype.parse=function(t,e,n,r,i,o){var s=this.tryParse(t,e,n,r,i,o),a=s.errors.filter(function(t){return t.level===Na.WARNING}),u=s.errors.filter(function(t){return t.level===Na.FATAL});if(a.length>0&&this._console.warn("Template parse warnings:\n"+a.join("\n")),u.length>0){var c=u.join("\n");throw new Error("Template parse errors:\n"+c)}return s.templateAst},t.prototype.tryParse=function(t,e,n,i,o,s){var a;t.template&&(a=Ra.fromArray(t.template.interpolation));var u,c=this._htmlParser.parse(e,s,!0,a),l=c.errors;if(0==l.length){var h=Jt(c.rootNodes);l.push.apply(l,h.errors),c=new fu(h.nodes,l)}if(c.rootNodes.length>0){var p=D(n),f=D(i),d=new Ul(t,c.rootNodes[0].sourceSpan),v=new Ph(d,p,f,o,this._exprParser,this._schemaRegistry);u=st(v,c.rootNodes,kh),l.push.apply(l,v.errors.concat(d.errors))}else u=[];return this._assertNoReferenceDuplicationOnTemplate(u,l),l.length>0?new Ah(u,l):(r(this.transforms)&&this.transforms.forEach(function(t){u=m(t,u)}),new Ah(u,l))},t.prototype._assertNoReferenceDuplicationOnTemplate=function(t,e){var n=[];t.filter(function(t){return!!t.references}).forEach(function(t){return t.references.forEach(function(t){var r=t.name;if(n.indexOf(r)<0)n.push(r);else{var i=new Ch('Reference "#'+r+'" is defined several times',t.sourceSpan,Na.FATAL);e.push(i)}})})},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Ba},{type:zl},{type:Ec},{type:ol},{type:Array,decorators:[{type:n.Optional},{type:n.Inject,args:[Mh]}]}],t}(),Ph=function(){function t(t,e,n,r,i,o){var s=this;this.providerViewContext=t,this._schemas=r,this._exprParser=i,this._schemaRegistry=o,this.selectorMatcher=new yi,this.errors=[],this.directivesIndex=new Map,this.ngContentCount=0,this.pipesByName=new Map;var a=t.component.template;a&&a.interpolation&&(this._interpolationConfig={start:a.interpolation[0],end:a.interpolation[1]}),e.forEach(function(t,e){var n=mi.parse(t.selector);s.selectorMatcher.addSelectables(n,t),s.directivesIndex.set(t,e)}),n.forEach(function(t){return s.pipesByName.set(t.name,t)})}return t.prototype._reportError=function(t,e,n){void 0===n&&(n=Na.FATAL),this.errors.push(new Ch(t,e,n))},t.prototype._reportParserErrors=function(t,e){for(var n=0,r=t;n<r.length;n++){var i=r[n];this._reportError(i.message,e)}},t.prototype._parseInterpolation=function(t,e){var n=e.start.toString();try{var i=this._exprParser.parseInterpolation(t,n,this._interpolationConfig);if(i&&this._reportParserErrors(i.errors,e),this._checkPipes(i,e),r(i)&&i.ast.expressions.length>kc)throw new Error("Only support at most "+kc+" interpolation values!");return i}catch(o){return this._reportError(""+o,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},t.prototype._parseAction=function(t,e){var n=e.start.toString();try{var r=this._exprParser.parseAction(t,n,this._interpolationConfig);return r&&this._reportParserErrors(r.errors,e),!r||r.ast instanceof as?(this._reportError("Empty expressions are not allowed",e),this._exprParser.wrapLiteralPrimitive("ERROR",n)):(this._checkPipes(r,e),r)}catch(i){return this._reportError(""+i,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},t.prototype._parseBinding=function(t,e){var n=e.start.toString();try{var r=this._exprParser.parseBinding(t,n,this._interpolationConfig);return r&&this._reportParserErrors(r.errors,e),this._checkPipes(r,e),r}catch(i){return this._reportError(""+i,e),this._exprParser.wrapLiteralPrimitive("ERROR",n)}},t.prototype._parseTemplateBindings=function(t,e){var n=this,i=e.start.toString();try{var o=this._exprParser.parseTemplateBindings(t,i);return this._reportParserErrors(o.errors,e),o.templateBindings.forEach(function(t){r(t.expression)&&n._checkPipes(t.expression,e)}),o.warnings.forEach(function(t){n._reportError(t,e,Na.WARNING)}),o.templateBindings}catch(s){return this._reportError(""+s,e),[]}},t.prototype._checkPipes=function(t,e){var n=this;if(r(t)){var i=new jh;t.visit(i),i.pipes.forEach(function(t){n.pipesByName.has(t)||n._reportError("The pipe '"+t+"' could not be found",e)})}},t.prototype.visitExpansion=function(t,e){return null},t.prototype.visitExpansionCase=function(t,e){return null},t.prototype.visitText=function(t,e){var n=e.findNgContentIndex(Th),i=this._parseInterpolation(t.value,t.sourceSpan);return r(i)?new Gr(i,n,t.sourceSpan):new Hr(t.value,n,t.sourceSpan)},t.prototype.visitAttribute=function(t,e){return new Wr(t.name,t.value,t.sourceSpan)},t.prototype.visitComment=function(t,e){return null},t.prototype.visitElement=function(t,e){var n=this,i=t.name,o=he(t);if(o.type===Uu.SCRIPT||o.type===Uu.STYLE)return null;if(o.type===Uu.STYLESHEET&&ce(o.hrefAttr))return null;var s=[],a=[],u=[],c=[],l=[],h=[],p=[],f=[],d=[],v=!1,m=[],y=at(i.toLowerCase())[1],g=y==yh;t.attrs.forEach(function(t){var e=n._parseAttr(g,t,s,a,l,h,u,c),r=n._parseInlineTemplateBinding(t,f,p,d);r&&v&&n._reportError("Can't have multiple template bindings on one element. Use only one attribute named 'template' or prefixed with *",t.sourceSpan),e||r||(m.push(n.visitAttribute(t,null)),s.push([t.name,t.value])),r&&(v=!0)});var b=de(i,s),_=this._parseDirectives(this.selectorMatcher,b),w=_.directives,x=_.matchElement,E=[],S=this._createDirectiveAsts(g,t.name,w,a,u,t.sourceSpan,E),T=this._createElementPropertyAsts(t.name,a,S).concat(l),M=e.isTemplateElement||v,C=new Vl(this.providerViewContext,e.providerContext,M,S,m,E,t.sourceSpan),A=st(o.nonBindable?Dh:this,t.children,Lh.create(g,S,g?e.providerContext:C));C.afterElement();var O,P=r(o.projectAs)?mi.parse(o.projectAs)[0]:b,R=e.findNgContentIndex(P);if(o.type===Uu.NG_CONTENT)r(t.children)&&t.children.length>0&&this._reportError("<ng-content> element cannot have content. <ng-content> must be immediately followed by </ng-content>",t.sourceSpan),O=new ei((this.ngContentCount++),v?null:R,t.sourceSpan);else if(g)this._assertAllEventsPublishedByDirectives(S,h),this._assertNoComponentsNorElementBindingsOnTemplate(S,T,t.sourceSpan),O=new Qr(m,h,E,c,C.transformedDirectiveAsts,C.transformProviders,C.transformedHasViewContainer,A,v?null:R,t.sourceSpan);else{this._assertElementExists(x,t),this._assertOnlyOneComponent(S,t.sourceSpan);var I=v?null:e.findNgContentIndex(P);O=new Kr(i,m,T,h,E,C.transformedDirectiveAsts,C.transformProviders,C.transformedHasViewContainer,A,v?null:I,t.sourceSpan)}if(v){var N=de(yh,f),L=this._parseDirectives(this.selectorMatcher,N).directives,k=this._createDirectiveAsts(!0,t.name,L,p,[],t.sourceSpan,[]),D=this._createElementPropertyAsts(t.name,p,k);this._assertNoComponentsNorElementBindingsOnTemplate(k,D,t.sourceSpan);var j=new Vl(this.providerViewContext,e.providerContext,e.isTemplateElement,k,[],[],t.sourceSpan);j.afterElement(),O=new Qr([],[],[],d,j.transformedDirectiveAsts,j.transformProviders,j.transformedHasViewContainer,[O],R,t.sourceSpan)}return O},t.prototype._parseInlineTemplateBinding=function(t,e,n,i){var o=null;if(this._normalizeAttributeName(t.name)==gh)o=t.value;else if(t.name.startsWith(bh)){var s=t.name.substring(bh.length);o=0==t.value.length?s:s+" "+t.value}if(r(o)){for(var a=this._parseTemplateBindings(o,t.sourceSpan),u=0;u<a.length;u++){var c=a[u];c.keyIsVar?i.push(new Zr(c.key,c.name,t.sourceSpan)):r(c.expression)?this._parsePropertyAst(c.key,c.expression,t.sourceSpan,e,n):(e.push([c.key,""]),this._parseLiteralAttr(c.key,null,t.sourceSpan,n))}return!0}return!1},t.prototype._parseAttr=function(t,e,n,i,o,s,a,u){var c=this._normalizeAttributeName(e.name),l=e.value,h=e.sourceSpan,p=c.match(oh),f=!1;if(null!==p)if(f=!0,r(p[sh]))this._parsePropertyOrAnimation(p[ph],l,h,n,i,o);else if(p[ah])if(t){var d=p[ph];this._parseVariable(d,l,h,u)}else this._reportError('"let-" is only supported on template elements.',h);else if(p[uh]){var d=p[ph];this._parseReference(d,l,h,a)}else p[ch]?this._parseEvent(p[ph],l,h,n,s):p[lh]?(this._parsePropertyOrAnimation(p[ph],l,h,n,i,o),this._parseAssignmentEvent(p[ph],l,h,n,s)):p[hh]?("@"==c[0]&&r(l)&&l.length>0&&this._reportError('Assigning animation triggers via @prop="exp" attributes with an expression is invalid. Use property bindings (e.g. [@prop]="exp") or use an attribute without a value (e.g. @prop) instead.',h,Na.FATAL),this._parseAnimation(p[ph],l,h,n,o)):p[fh]?(this._parsePropertyOrAnimation(p[fh],l,h,n,i,o),this._parseAssignmentEvent(p[fh],l,h,n,s)):p[dh]?this._parsePropertyOrAnimation(p[dh],l,h,n,i,o):p[vh]&&this._parseEvent(p[vh],l,h,n,s);else f=this._parsePropertyInterpolation(c,l,h,n,i);return f||this._parseLiteralAttr(c,l,h,i),f},t.prototype._normalizeAttributeName=function(t){return/^data-/i.test(t)?t.substring(5):t},t.prototype._parseVariable=function(t,e,n,r){t.indexOf("-")>-1&&this._reportError('"-" is not allowed in variable names',n),r.push(new Zr(t,e,n))},t.prototype._parseReference=function(t,e,n,r){t.indexOf("-")>-1&&this._reportError('"-" is not allowed in reference names',n),r.push(new Nh(t,e,n))},t.prototype._parsePropertyOrAnimation=function(t,e,n,r,i,o){var s=mh.length,a="@"==t[0],u=1;t.substring(0,s)==mh&&(a=!0,u=s),a?this._parseAnimation(t.substr(u),e,n,r,o):this._parsePropertyAst(t,this._parseBinding(e,n),n,r,i)},t.prototype._parseAnimation=function(t,i,o,s,a){r(i)&&0!=i.length||(i="null");var u=this._parseBinding(i,o);s.push([t,u.source]),a.push(new qr(t,e.PropertyBindingType.Animation,n.SecurityContext.NONE,u,null,o))},t.prototype._parsePropertyInterpolation=function(t,e,n,i,o){var s=this._parseInterpolation(e,n);return!!r(s)&&(this._parsePropertyAst(t,s,n,i,o),!0)},t.prototype._parsePropertyAst=function(t,e,n,r,i){r.push([t,e.source]),i.push(new Ih(t,e,(!1),n))},t.prototype._parseAssignmentEvent=function(t,e,n,r,i){this._parseEvent(t+"Change",e+"=$event",n,r,i)},t.prototype._parseEvent=function(t,e,n,r,i){var o=O(t,[null,t]),s=o[0],a=o[1],u=this._parseAction(e,n);r.push([t,u.source]),i.push(new Xr(a,s,u,n))},t.prototype._parseLiteralAttr=function(t,e,n,r){r.push(new Ih(t,this._exprParser.wrapLiteralPrimitive(e,""),(!0),n))},t.prototype._parseDirectives=function(t,e){var n=this,r=new Array(this.directivesIndex.size),i=!1;return t.match(e,function(t,e){r[n.directivesIndex.get(e)]=e,i=i||t.hasElementSelector()}),{directives:r.filter(function(t){return!!t}),matchElement:i}},t.prototype._createDirectiveAsts=function(t,e,n,r,i,o,s){var a=this,u=new Set,c=null,l=n.map(function(t){var n=new qa(o.start,o.end,"Directive "+t.type.name);t.isComponent&&(c=t);var l=[],h=[],p=[];return a._createDirectiveHostPropertyAsts(e,t.hostProperties,n,l),a._createDirectiveHostEventAsts(t.hostListeners,n,h),a._createDirectivePropertyAsts(t.inputs,r,p),i.forEach(function(e){(0===e.value.length&&t.isComponent||t.exportAs==e.value)&&(s.push(new Yr(e.name,Zt(t.type),e.sourceSpan)),u.add(e.name))}),new $r(t,p,l,h,n)});return i.forEach(function(e){if(e.value.length>0)u.has(e.name)||a._reportError('There is no directive with "exportAs" set to "'+e.value+'"',e.sourceSpan);else if(!c){var n=null;t&&(n=Kt(Ol.TemplateRef)),s.push(new Yr(e.name,n,e.sourceSpan))}}),l},t.prototype._createDirectiveHostPropertyAsts=function(t,e,n,r){var i=this;e&&li.forEach(e,function(e,s){if(o(e)){var a=i._parseBinding(e,n);r.push(i._createElementPropertyAst(t,s,a,n))}else i._reportError('Value of the host property binding "'+s+'" needs to be a string representing an expression but got "'+e+'" ('+typeof e+")",n)})},t.prototype._createDirectiveHostEventAsts=function(t,e,n){var r=this;t&&li.forEach(t,function(t,i){o(t)?r._parseEvent(i,t,e,[],n):r._reportError('Value of the host listener "'+i+'" needs to be a string representing an expression but got "'+t+'" ('+typeof t+")",e);
})},t.prototype._createDirectivePropertyAsts=function(t,e,n){if(t){var r=new Map;e.forEach(function(t){var e=r.get(t.name);(i(e)||e.isLiteral)&&r.set(t.name,t)}),li.forEach(t,function(t,e){var i=r.get(t);i&&n.push(new Jr(e,i.name,i.expression,i.sourceSpan))})}},t.prototype._createElementPropertyAsts=function(t,e,n){var r=this,o=[],s=new Map;return n.forEach(function(t){t.inputs.forEach(function(t){s.set(t.templateName,t)})}),e.forEach(function(e){!e.isLiteral&&i(s.get(e.name))&&o.push(r._createElementPropertyAst(t,e.name,e.expression,e.sourceSpan))}),o},t.prototype._createElementPropertyAst=function(t,r,i,o){var s,a,u,c=null,l=r.split(wh);if(1===l.length){var h=l[0];if("@"==h[0])a=h.substr(1),s=e.PropertyBindingType.Animation,u=n.SecurityContext.NONE;else if(a=this._schemaRegistry.getMappedPropName(h),u=this._schemaRegistry.securityContext(t,a),s=e.PropertyBindingType.Property,this._assertNoEventBinding(a,o),!this._schemaRegistry.hasProperty(t,a,this._schemas)){var p="Can't bind to '"+a+"' since it isn't a known property of '"+t+"'.";t.indexOf("-")>-1&&(p+="\n1. If '"+t+"' is an Angular component and it has '"+a+"' input, then verify that it is part of this module."+("\n2. If '"+t+"' is a Web Component then add \"CUSTOM_ELEMENTS_SCHEMA\" to the '@NgModule.schema' of this component to suppress this message.\n")),this._reportError(p,o)}}else if(l[0]==xh){a=l[1],this._assertNoEventBinding(a,o);var f=this._schemaRegistry.getMappedPropName(a);u=this._schemaRegistry.securityContext(t,f);var d=a.indexOf(":");if(d>-1){var v=a.substring(0,d),m=a.substring(d+1);a=ct(v,m)}s=e.PropertyBindingType.Attribute}else l[0]==Eh?(a=l[1],s=e.PropertyBindingType.Class,u=n.SecurityContext.NONE):l[0]==Sh?(c=l.length>2?l[2]:null,a=l[1],s=e.PropertyBindingType.Style,u=n.SecurityContext.STYLE):(this._reportError("Invalid property name '"+r+"'",o),s=null,u=null);return new qr(a,s,u,i,c,o)},t.prototype._assertNoEventBinding=function(t,e){t.toLowerCase().startsWith("on")&&this._reportError("Binding to event attribute '"+t+"' is disallowed "+("for security reasons, please use ("+t.slice(2)+")=..."),e,Na.FATAL)},t.prototype._findComponentDirectiveNames=function(t){var e=[];return t.forEach(function(t){var n=t.directive.type.name;t.directive.isComponent&&e.push(n)}),e},t.prototype._assertOnlyOneComponent=function(t,e){var n=this._findComponentDirectiveNames(t);n.length>1&&this._reportError("More than one component: "+n.join(","),e)},t.prototype._assertElementExists=function(t,e){var n=e.name.replace(/^:xhtml:/,"");if(!t&&!this._schemaRegistry.hasElement(n,this._schemas)){var r="'"+n+"' is not a known element:\n"+("1. If '"+n+"' is an Angular component, then verify that it is part of this module.\n")+("2. If '"+n+"' is a Web Component then add \"CUSTOM_ELEMENTS_SCHEMA\" to the '@NgModule.schema' of this component to suppress this message.");this._reportError(r,e.sourceSpan)}},t.prototype._assertNoComponentsNorElementBindingsOnTemplate=function(t,e,n){var r=this,i=this._findComponentDirectiveNames(t);i.length>0&&this._reportError("Components on an embedded template: "+i.join(","),n),e.forEach(function(t){r._reportError("Property binding "+t.name+' not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the "directives" section.',n)})},t.prototype._assertAllEventsPublishedByDirectives=function(t,e){var n=this,i=new Set;t.forEach(function(t){li.forEach(t.directive.outputs,function(t){i.add(t)})}),e.forEach(function(t){!r(t.target)&&i.has(t.name)||n._reportError("Event binding "+t.fullName+' not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the "directives" section.',t.sourceSpan)})},t}(),Rh=function(){function t(){}return t.prototype.visitElement=function(t,e){var n=he(t);if(n.type===Uu.SCRIPT||n.type===Uu.STYLE||n.type===Uu.STYLESHEET)return null;var r=t.attrs.map(function(t){return[t.name,t.value]}),i=de(t.name,r),o=e.findNgContentIndex(i),s=st(this,t.children,kh);return new Kr(t.name,st(this,t.attrs),[],[],[],[],[],(!1),s,o,t.sourceSpan)},t.prototype.visitComment=function(t,e){return null},t.prototype.visitAttribute=function(t,e){return new Wr(t.name,t.value,t.sourceSpan)},t.prototype.visitText=function(t,e){var n=e.findNgContentIndex(Th);return new Hr(t.value,n,t.sourceSpan)},t.prototype.visitExpansion=function(t,e){return t},t.prototype.visitExpansionCase=function(t,e){return t},t}(),Ih=function(){function t(t,e,n,r){this.name=t,this.expression=e,this.isLiteral=n,this.sourceSpan=r}return t}(),Nh=function(){function t(t,e,n){this.name=t,this.value=e,this.sourceSpan=n}return t}(),Lh=function(){function t(t,e,n,r){this.isTemplateElement=t,this._ngContentIndexMatcher=e,this._wildcardNgContentIndex=n,this.providerContext=r}return t.create=function(e,n,r){var i=new yi,o=null,s=n.find(function(t){return t.directive.isComponent});if(s)for(var a=s.directive.template.ngContentSelectors,u=0;u<a.length;u++){var c=a[u];"*"===c?o=u:i.addSelectables(mi.parse(a[u]),u)}return new t(e,i,o,r)},t.prototype.findNgContentIndex=function(t){var e=[];return this._ngContentIndexMatcher.match(t,function(t,n){e.push(n)}),e.sort(),r(this._wildcardNgContentIndex)&&e.push(this._wildcardNgContentIndex),e.length>0?e[0]:null},t}(),kh=new Lh((!0),new yi,null,null),Dh=new Rh,jh=function(t){function e(){t.apply(this,arguments),this.pipes=new Set}return ih(e,t),e.prototype.visitPipe=function(t,e){return this.pipes.add(t.name),t.exp.visit(this),this.visitAll(t.args,e),null},e}(As),Fh=function(){function t(t){var e=void 0===t?{}:t,r=e.renderTypes,i=void 0===r?new Vh:r,o=e.defaultEncapsulation,s=void 0===o?n.ViewEncapsulation.Emulated:o,a=e.genDebugInfo,u=e.logBindingUpdate,c=e.useJit,l=void 0===c||c;this.renderTypes=i,this.defaultEncapsulation=s,this._genDebugInfo=a,this._logBindingUpdate=u,this.useJit=l}return Object.defineProperty(t.prototype,"genDebugInfo",{get:function(){return void 0===this._genDebugInfo?n.isDevMode():this._genDebugInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logBindingUpdate",{get:function(){return void 0===this._logBindingUpdate?n.isDevMode():this._logBindingUpdate},enumerable:!0,configurable:!0}),t}(),Uh=function(){function t(){}return Object.defineProperty(t.prototype,"renderer",{get:function(){return ve()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderText",{get:function(){return ve()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderElement",{get:function(){return ve()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderComment",{get:function(){return ve()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return ve()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderEvent",{get:function(){return ve()},enumerable:!0,configurable:!0}),t}(),Vh=function(){function t(){this.renderText=null,this.renderElement=null,this.renderComment=null,this.renderNode=null,this.renderEvent=null}return Object.defineProperty(t.prototype,"renderer",{get:function(){return Yt(Ol.Renderer)},enumerable:!0,configurable:!0}),t}(),Bh=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},zh=function(){function t(){this.startTime=0,this.playTime=0}return t}(),Hh=function(t){function e(){t.apply(this,arguments)}return Bh(e,t),e}(zh),Gh=function(t){function e(e,n,r){t.call(this),this.name=e,this.stateDeclarations=n,this.stateTransitions=r}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationEntry(this,e)},e}(zh),Wh=function(t){function e(e,n){t.call(this),this.stateName=e,this.styles=n}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationStateDeclaration(this,e)},e}(Hh),qh=function(){function t(t,e){this.fromState=t,this.toState=e}return t}(),Xh=function(t){function e(e,n){t.call(this),this.stateChanges=e,this.animation=n}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationStateTransition(this,e)},e}(Hh),Yh=function(t){function e(e,n,r,i,o){t.call(this),this.startingStyles=e,this.keyframes=n,this.duration=r,this.delay=i,this.easing=o}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationStep(this,e)},e}(zh),Zh=function(t){function e(e){t.call(this),this.styles=e}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationStyles(this,e)},e}(zh),Kh=function(t){function e(e,n){t.call(this),this.offset=e,this.styles=n}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationKeyframe(this,e)},e}(zh),Qh=function(t){function e(e){t.call(this),this.steps=e}return Bh(e,t),e}(zh),Jh=function(t){function e(e){t.call(this,e)}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationGroup(this,e)},e}(Qh),$h=function(t){function e(e){t.call(this,e)}return Bh(e,t),e.prototype.visit=function(t,e){return t.visitAnimationSequence(this,e)},e}(Qh),tp=Fr.Math,ep=function(){function t(t,e){this.time=t,this.value=e}return t.prototype.matches=function(t,e){return t==this.time&&e==this.value},t}(),np=function(){function t(){this.styles={}}return t.prototype.insertAtTime=function(t,e,n){var i=new ep(e,n),o=this.styles[t];r(o)||(o=this.styles[t]=[]);for(var s=0,a=o.length-1;a>=0;a--)if(o[a].time<=e){s=a+1;break}hi.insert(o,s,i)},t.prototype.getByIndex=function(t,e){var n=this.styles[t];return r(n)?e>=n.length?null:n[e]:null},t.prototype.indexOfAtOrBeforeTime=function(t,e){var n=this.styles[t];if(r(n))for(var i=n.length-1;i>=0;i--)if(n[i].time<=e)return i;return null},t}(),rp=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ip=0,op=1,sp=1e3,ap=function(t){function e(e){t.call(this,null,e)}return rp(e,t),e.prototype.toString=function(){return""+this.msg},e}(Ya),up=function(){function t(t,e){this.ast=t,this.errors=e}return t}(),cp=function(){function t(t,e,n){this.duration=t,this.delay=e,this.easing=n}return t}(),lp=new Map,hp=function(){function t(t,e,n,r,i){this.name=t,this.statesMapStatement=e,this.statesVariableName=n,this.fnStatement=r,this.fnVariable=i}return t}(),pp=function(){function t(t,e){this.outputs=t,this.triggers=e}return t}(),fp=function(){function t(){}return t.prototype.compileComponent=function(t,e){var n=[],r=[],i={},o=t.type.name;t.template.animations.forEach(function(t){var e=me(t),s=t.name;if(e.errors.length>0){var a='Unable to parse the animation sequence for "'+s+'" due to the following errors:';e.errors.forEach(function(t){a+="\n-- "+t.msg}),r.push(a)}if(i[s])r.push('The animation trigger "'+s+'" has already been registered on "'+o+'"');else{var u=o+"_"+t.name,c=new Mp(s,u),l=c.build(e.ast);n.push(l),i[t.name]=l}});var s=ke(n,e);if(s.errors.forEach(function(t){r.push(t.msg)}),r.length>0){var a="Animation parsing for "+t.type.name+" has failed due to the following errors:";throw r.forEach(function(t){return a+="\n- "+t}),new Error(a)}return lp.set(t,n),new pp(s.outputs,n)},t}(),dp=_("element"),vp=_("defaultStateStyles"),mp=_("view"),yp=mp.prop("renderer"),gp=_("currentState"),bp=_("nextState"),_p=_("player"),wp=_("totalTime"),xp=_("startStateStyles"),Ep=_("endStateStyles"),Sp=_("collectedStyles"),Tp=S([]),Mp=function(){function t(t,e){this.animationName=t,this._fnVarName=e+"_factory",this._statesMapVarName=e+"_states",this._statesMapVar=_(this._statesMapVarName)}return t.prototype.visitAnimationStyles=function(t,e){var n=[];return e.isExpectingFirstStyleStep&&(n.push(xp),e.isExpectingFirstStyleStep=!1),t.styles.forEach(function(t){n.push(S(li.keys(t).map(function(e){return[e,C(t[e])]})))}),w(Yt(Ol.AnimationStyles)).instantiate([w(Yt(Ol.collectAndResolveStyles)).callFn([Sp,E(n)])])},t.prototype.visitAnimationKeyframe=function(t,e){return w(Yt(Ol.AnimationKeyframe)).instantiate([C(t.offset),t.styles.visit(this,e)])},t.prototype.visitAnimationStep=function(t,e){var n=this;if(e.endStateAnimateStep===t)return this._visitEndStateAnimation(t,e);var r=t.startingStyles.visit(this,e),i=t.keyframes.map(function(t){return t.visit(n,e)});return this._callAnimateMethod(t,r,E(i),e)},t.prototype._visitEndStateAnimation=function(t,e){var n=this,r=t.startingStyles.visit(this,e),i=t.keyframes.map(function(t){return t.visit(n,e)}),o=w(Yt(Ol.balanceAnimationKeyframes)).callFn([Sp,Ep,E(i)]);return this._callAnimateMethod(t,r,o,e)},t.prototype._callAnimateMethod=function(t,e,n,r){return r.totalTransitionTime+=t.duration+t.delay,yp.callMethod("animate",[dp,e,n,C(t.duration),C(t.delay),C(t.easing)])},t.prototype.visitAnimationSequence=function(t,e){var n=this,r=t.steps.map(function(t){return t.visit(n,e)});return w(Yt(Ol.AnimationSequencePlayer)).instantiate([E(r)])},t.prototype.visitAnimationGroup=function(t,e){var n=this,r=t.steps.map(function(t){return t.visit(n,e)});return w(Yt(Ol.AnimationGroupPlayer)).instantiate([E(r)])},t.prototype.visitAnimationStateDeclaration=function(t,e){var n={};Le(t).forEach(function(t){li.forEach(t,function(t,e){n[e]=t})}),e.stateMap.registerState(t.stateName,n)},t.prototype.visitAnimationStateTransition=function(t,e){var n=t.animation.steps,r=n[n.length-1];Ne(r)&&(e.endStateAnimateStep=r),e.totalTransitionTime=0,e.isExpectingFirstStyleStep=!0;var i=[];t.stateChanges.forEach(function(t){i.push(Ie(gp,t.fromState).and(Ie(bp,t.toState))),t.fromState!=vl&&e.stateMap.registerState(t.fromState),t.toState!=vl&&e.stateMap.registerState(t.toState)});var o=t.animation.visit(this,e),s=i.reduce(function(t,e){return t.or(e)}),a=_p.equals(io).and(s),u=_p.set(o).toStmt(),c=wp.set(C(e.totalTransitionTime)).toStmt();return new yo(a,[u,c])},t.prototype.visitAnimationEntry=function(t,e){var n=this;t.stateDeclarations.forEach(function(t){return t.visit(n,e)}),e.stateMap.registerState(ml,{});var r=[];r.push(mp.callMethod("cancelActiveAnimation",[dp,C(this.animationName),bp.equals(C(yl))]).toStmt()),r.push(Sp.set(Tp).toDeclStmt()),r.push(_p.set(io).toDeclStmt()),r.push(wp.set(C(0)).toDeclStmt()),r.push(vp.set(this._statesMapVar.key(C(ml))).toDeclStmt()),r.push(xp.set(this._statesMapVar.key(gp)).toDeclStmt()),r.push(new yo(xp.equals(io),[xp.set(vp).toStmt()])),r.push(Ep.set(this._statesMapVar.key(bp)).toDeclStmt()),r.push(new yo(Ep.equals(io),[Ep.set(vp).toStmt()]));var i=w(Yt(Ol.renderStyles));return r.push(i.callFn([dp,yp,w(Yt(Ol.clearStyles)).callFn([xp])]).toStmt()),t.stateTransitions.forEach(function(t){return r.push(t.visit(n,e))}),r.push(new yo(_p.equals(io),[_p.set(w(Yt(Ol.NoOpAnimationPlayer)).instantiate([])).toStmt()])),r.push(_p.callMethod("onDone",[M([],[i.callFn([dp,yp,w(Yt(Ol.prepareFinalAnimationStyles)).callFn([xp,Ep])]).toStmt()])]).toStmt()),r.push(mp.callMethod("queueAnimation",[dp,C(this.animationName),_p,wp,gp,bp]).toStmt()),M([new Zi(mp.name,x(Yt(Ol.AppView),[Ai])),new Zi(dp.name,Ai),new Zi(gp.name,Ai),new Zi(bp.name,Ai)],r)},t.prototype.build=function(t){var e=new Cp,n=t.visit(this,e).toDeclStmt(this._fnVarName),i=_(this._fnVarName),o=[];li.forEach(e.stateMap.states,function(t,e){var n=Tp;if(r(t)){var i=[];li.forEach(t,function(t,e){i.push([e,C(t)])}),n=S(i)}o.push([e,n])});var s=this._statesMapVar.set(S(o)).toDeclStmt();return new hp(this.animationName,s,this._statesMapVarName,n,i)},t}(),Cp=function(){function t(){this.stateMap=new Ap,this.endStateAnimateStep=null,this.isExpectingFirstStyleStep=!1,this.totalTransitionTime=0}return t}(),Ap=function(){function t(){this._states={}}return Object.defineProperty(t.prototype,"states",{get:function(){return this._states},enumerable:!0,configurable:!0}),t.prototype.registerState=function(t,e){void 0===e&&(e=null);var n=this._states[t];i(n)&&(this._states[t]=e)},t}(),Op=function(){function t(t,e){this.outputs=t,this.errors=e}return t}(),Pp=function(){function t(t){this.errors=[],this.outputs=[],this._animationRegistry=this._buildCompileAnimationLookup(t)}return t.prototype._buildCompileAnimationLookup=function(t){var e={};return t.forEach(function(t){e[t.name]=!0}),e},t.prototype._validateAnimationInputOutputPairs=function(t,n,i,o){var s=this,a={};t.forEach(function(t){if(t.type==e.PropertyBindingType.Animation){var n=t.name;r(i[n])?a[n]=!0:s.errors.push(new ap("Couldn't find an animation entry for "+n))}}),n.forEach(function(t){if("@"==t.name[0]){var e=ye(t.name.substr(1),s.errors),n=e.name,r=e.phase;i[n]?a[n]?s.outputs.push(e):s.errors.push(new ap("Unable to listen on (@"+n+"."+r+") because the animation trigger [@"+n+"] isn't being used on the same element")):s.errors.push(new ap("Couldn't find the corresponding "+(o?"host-level ":"")+"animation trigger definition for (@"+n+")"))}})},t.prototype.visitElement=function(t,e){this._validateAnimationInputOutputPairs(t.inputs,t.outputs,this._animationRegistry,!1);var n=t.directives.find(function(t){return t.directive.isComponent});if(n){var r=lp.get(n.directive);r&&this._validateAnimationInputOutputPairs(n.hostProperties,n.hostEvents,this._buildCompileAnimationLookup(r),!0)}m(this,t.children)},t.prototype.visitEmbeddedTemplate=function(t,e){m(this,t.children)},t.prototype.visitEvent=function(t,e){},t.prototype.visitBoundText=function(t,e){},t.prototype.visitText=function(t,e){},t.prototype.visitNgContent=function(t,e){},t.prototype.visitAttr=function(t,e){},t.prototype.visitDirective=function(t,e){},t.prototype.visitReference=function(t,e){},t.prototype.visitVariable=function(t,e){},t.prototype.visitDirectiveProperty=function(t,e){},t.prototype.visitElementProperty=function(t,e){},t}(),Rp=function(){function t(){}return t.prototype.visitArray=function(t,e){var n=this;return E(t.map(function(t){return R(t,n,null)}),e)},t.prototype.visitStringMap=function(t,e){var n=this,r=[];return li.forEach(t,function(t,e){r.push([e,R(t,n,null)])}),S(r,e)},t.prototype.visitPrimitive=function(t,e){return C(t,e)},t.prototype.visitOther=function(t,e){if(t instanceof zo)return w(t);if(t instanceof Li)return t;throw new Error("Illegal state: Don't now how to compile value "+t)},t}(),Ip=function(){function t(t,e){this.nodeIndex=t,this.sourceAst=e}return t}(),Np=new Ip(null,null),Lp=function(){function t(t){this._view=t,this._newState=Np,this._currState=Np,this._bodyStatements=[],this._debugEnabled=this._view.genConfig.genDebugInfo}return t.prototype._updateDebugContextIfNeeded=function(){if(this._newState.nodeIndex!==this._currState.nodeIndex||this._newState.sourceAst!==this._currState.sourceAst){var t=this._updateDebugContext(this._newState);r(t)&&this._bodyStatements.push(t.toStmt())}},t.prototype._updateDebugContext=function(t){if(this._currState=this._newState=t,this._debugEnabled){var e=r(t.sourceAst)?t.sourceAst.sourceSpan.start:null;return no.callMethod("debug",[C(t.nodeIndex),r(e)?C(e.line):io,r(e)?C(e.col):io])}return null},t.prototype.resetDebugInfoExpr=function(t,e){var n=this._updateDebugContext(new Ip(t,e));return r(n)?n:io},t.prototype.resetDebugInfo=function(t,e){this._newState=new Ip(t,e)},t.prototype.addStmt=function(t){this._updateDebugContextIfNeeded(),this._bodyStatements.push(t)},t.prototype.addStmts=function(t){this._updateDebugContextIfNeeded(),hi.addAll(this._bodyStatements,t)},t.prototype.finish=function(){return this._bodyStatements},t.prototype.isEmpty=function(){return 0===this._bodyStatements.length},t}(),kp=function(){function t(t,e){this.view=t,this.values=e}return t}(),Dp=function(){function t(t,e,n,r){this.meta=t,this.queryList=e,this.ownerDirectiveExpression=n,this.view=r,this._values=new kp(r,[])}return t.prototype.addValue=function(t,e){for(var n=e,i=[];r(n)&&n!==this.view;){var o=n.declarationElement;i.unshift(o),n=o.view}var s=je(this.queryList,e,this.view),a=this._values;i.forEach(function(t){var e=a.values.length>0?a.values[a.values.length-1]:null;if(e instanceof kp&&e.view===t.embeddedView)a=e;else{var n=new kp(t.embeddedView,[]);a.values.push(n),a=n}}),a.values.push(t),i.length>0&&e.dirtyParentQueriesMethod.addStmt(s.callMethod("setDirty",[]).toStmt())},t.prototype._isStatic=function(){return!this._values.values.some(function(t){return t instanceof kp})},t.prototype.afterChildren=function(t,e){var n=ze(this._values),i=[this.queryList.callMethod("reset",[E(n)]).toStmt()];if(r(this.ownerDirectiveExpression)){var o=this.meta.first?this.queryList.prop("first"):this.queryList;i.push(this.ownerDirectiveExpression.prop(this.meta.propertyName).set(o).toStmt())}this.meta.first||i.push(this.queryList.callMethod("notifyOnChanges",[]).toStmt()),this.meta.first&&this._isStatic()?t.addStmts(i):e.addStmt(new yo(this.queryList.prop("dirty"),i))},t}(),jp=function(){function t(){}return t.fromValue=function(t){var e=Yt(Ol.ViewType);switch(t){case Lc.HOST:return qe(e,"HOST");case Lc.COMPONENT:return qe(e,"COMPONENT");case Lc.EMBEDDED:return qe(e,"EMBEDDED");default:throw Error("Inavlid ViewType value: "+t)}},t}(),Fp=function(){function t(){}return t.fromValue=function(t){var e=Yt(Ol.ViewEncapsulation);switch(t){case n.ViewEncapsulation.Emulated:return qe(e,"Emulated");case n.ViewEncapsulation.Native:return qe(e,"Native");case n.ViewEncapsulation.None:return qe(e,"None");default:throw Error("Inavlid ViewEncapsulation value: "+t)}},t}(),Up=function(){function t(){}return t.fromValue=function(t){var e=Yt(Ol.ChangeDetectorStatus);switch(t){case Tc.CheckOnce:return qe(e,"CheckOnce");case Tc.Checked:return qe(e,"Checked");case Tc.CheckAlways:return qe(e,"CheckAlways");case Tc.Detached:return qe(e,"Detached");case Tc.Errored:return qe(e,"Errored");case Tc.Destroyed:return qe(e,"Destroyed");default:throw Error("Inavlid ChangeDetectorStatus value: "+t)}},t}(),Vp=function(){function t(){}return t.viewUtils=_("viewUtils"),t.parentInjector=_("parentInjector"),t.declarationEl=_("declarationEl"),t}(),Bp=function(){function t(){}return t.renderer=no.prop("renderer"),t.projectableNodes=no.prop("projectableNodes"),t.viewUtils=no.prop("viewUtils"),t}(),zp=function(){function t(){}return t.event=_("$event"),t}(),Hp=function(){function t(){}return t.token=_("token"),t.requestNodeIndex=_("requestNodeIndex"),t.notFoundResult=_("notFoundResult"),t}(),Gp=function(){function t(){}return t.throwOnChange=_("throwOnChange"),t.changes=_("changes"),t.changed=_("changed"),t.valUnwrapper=_("valUnwrapper"),t}(),Wp=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},qp=function(){function t(t,e,n,r,i){this.parent=t,this.view=e,this.nodeIndex=n,this.renderNode=r,this.sourceAst=i}return t.prototype.isNull=function(){return i(this.renderNode)},t.prototype.isRootElement=function(){return this.view!=this.parent.view},t}(),Xp=function(t){function n(e,n,i,o,s,a,u,c,l,h,p){var f=this;t.call(this,e,n,i,o,s),this.component=a,this._directives=u,this._resolvedProvidersArray=c,this.hasViewContainer=l,this.hasEmbeddedView=h,this._compViewExpr=null,this.instances=new Map,this._queryCount=0,this._queries=new Map,this._componentConstructorViewQueryLists=[],this.contentNodesByNgContentIndex=null,this.referenceTokens={},p.forEach(function(t){return f.referenceTokens[t.name]=t.value}),this.elementRef=w(Yt(Ol.ElementRef)).instantiate([this.renderNode]),this.instances.set(Kt(Ol.ElementRef).reference,this.elementRef),this.injector=no.callMethod("injector",[C(this.nodeIndex)]),this.instances.set(Kt(Ol.Injector).reference,this.injector),this.instances.set(Kt(Ol.Renderer).reference,no.prop("renderer")),(this.hasViewContainer||this.hasEmbeddedView||r(this.component))&&this._createAppElement()}return Wp(n,t),n.createNull=function(){return new n(null,null,null,null,null,null,[],[],(!1),(!1),[])},n.prototype._createAppElement=function(){var t="_appEl_"+this.nodeIndex,e=this.isRootElement()?null:this.parent.nodeIndex;this.view.fields.push(new po(t,x(Yt(Ol.AppElement)),[Vi.Private]));var n=no.prop(t).set(w(Yt(Ol.AppElement)).instantiate([C(this.nodeIndex),C(e),no,this.renderNode])).toStmt();this.view.createMethod.addStmt(n),this.appElement=no.prop(t),this.instances.set(Kt(Ol.AppElement).reference,this.appElement)},n.prototype.createComponentFactoryResolver=function(t){if(t&&0!==t.length){var n=w(Yt(Ol.CodegenComponentFactoryResolver)).instantiate([E(t.map(function(t){return w(t)})),Fe(Kt(Ol.ComponentFactoryResolver),!1)]),r=new Go({token:Kt(Ol.ComponentFactoryResolver),useValue:n});this._resolvedProvidersArray.unshift(new ti(r.token,(!1),(!0),[r],e.ProviderAstType.PrivateService,[],this.sourceAst.sourceSpan))}},n.prototype.setComponentView=function(t){this._compViewExpr=t,this.contentNodesByNgContentIndex=hi.createFixedSize(this.component.template.ngContentSelectors.length);for(var e=0;e<this.contentNodesByNgContentIndex.length;e++)this.contentNodesByNgContentIndex[e]=[]},n.prototype.setEmbeddedView=function(t){if(this.embeddedView=t,r(t)){var n=w(Yt(Ol.TemplateRef_)).instantiate([this.appElement,this.embeddedView.viewFactory]),i=new Go({token:Kt(Ol.TemplateRef),useValue:n});this._resolvedProvidersArray.unshift(new ti(i.token,(!1),(!0),[i],e.ProviderAstType.Builtin,[],this.sourceAst.sourceSpan))}},n.prototype.beforeChildren=function(){var t=this;this.hasViewContainer&&this.instances.set(Kt(Ol.ViewContainerRef).reference,this.appElement.prop("vcRef")),this._resolvedProviders=new Map,this._resolvedProvidersArray.forEach(function(e){return t._resolvedProviders.set(e.token.reference,e)}),ci.values(this._resolvedProviders).forEach(function(e){var n=e.providers.map(function(n){if(r(n.useExisting))return t._getDependency(e.providerType,new Ho({token:n.useExisting}));if(r(n.useFactory)){var i=r(n.deps)?n.deps:n.useFactory.diDeps,o=i.map(function(n){return t._getDependency(e.providerType,n)});return w(n.useFactory).callFn(o)}if(r(n.useClass)){var i=r(n.deps)?n.deps:n.useClass.diDeps,o=i.map(function(n){return t._getDependency(e.providerType,n)});return w(n.useClass).instantiate(o,x(n.useClass))}return De(n.useValue)}),i="_"+e.token.name+"_"+t.nodeIndex+"_"+t.instances.size,o=Ye(i,e,n,e.multiProvider,e.eager,t);t.instances.set(e.token.reference,o)});for(var e=0;e<this._directives.length;e++){var n=this._directives[e],i=this.instances.get(Zt(n.type).reference);n.queries.forEach(function(e){t._addQuery(e,i)})}var o=[];if(ci.values(this._resolvedProviders).forEach(function(e){var n=t._getQueriesFor(e.token);hi.addAll(o,n.map(function(t){return new Yp(t,e.token)}))}),li.forEach(this.referenceTokens,function(e,n){var i,s=t.referenceTokens[n];i=r(s)?t.instances.get(s.reference):t.renderNode,t.view.locals.set(n,i);var a=new qo({value:n});hi.addAll(o,t._getQueriesFor(a).map(function(t){return new Yp(t,a)}))}),o.forEach(function(e){var n;if(r(e.read.identifier))n=t.instances.get(e.read.reference);else{var i=t.referenceTokens[e.read.value];n=r(i)?t.instances.get(i.reference):t.elementRef}r(n)&&e.query.addValue(n,t.view)}),r(this.component)){var s=r(this.component)?E(this._componentConstructorViewQueryLists):io,a=r(this.getComponent())?this.getComponent():io;this.view.createMethod.addStmt(this.appElement.callMethod("initComponent",[a,s,this._compViewExpr]).toStmt())}},n.prototype.afterChildren=function(t){var n=this;ci.values(this._resolvedProviders).forEach(function(r){var i=n.instances.get(r.token.reference),o=r.providerType===e.ProviderAstType.PrivateService?0:t;n.view.injectorGetMethod.addStmt(Xe(n.nodeIndex,o,r,i))}),ci.values(this._queries).forEach(function(t){return t.forEach(function(t){return t.afterChildren(n.view.createMethod,n.view.updateContentQueriesMethod)})})},n.prototype.addContentNode=function(t,e){this.contentNodesByNgContentIndex[t].push(e)},n.prototype.getComponent=function(){return r(this.component)?this.instances.get(Zt(this.component.type).reference):null},n.prototype.getProviderTokens=function(){return ci.values(this._resolvedProviders).map(function(t){return N(t.token)})},n.prototype._getQueriesFor=function(t){for(var e,n=[],i=this,o=0;!i.isNull();)e=i._queries.get(t.reference),r(e)&&hi.addAll(n,e.filter(function(t){return t.meta.descendants||o<=1})),i._directives.length>0&&o++,i=i.parent;return e=this.view.componentView.viewQueries.get(t.reference),r(e)&&hi.addAll(n,e),n},n.prototype._addQuery=function(t,e){var n="_query_"+t.selectors[0].name+"_"+this.nodeIndex+"_"+this._queryCount++,r=Ge(t,e,n,this.view),i=new Dp(t,r,e,this.view);return We(this._queries,i),i},n.prototype._getLocalDependency=function(t,n){var o=null;if(i(o)&&r(n.query)&&(o=this._addQuery(n.query,null).queryList),i(o)&&r(n.viewQuery)&&(o=Ge(n.viewQuery,null,"_viewQuery_"+n.viewQuery.selectors[0].name+"_"+this.nodeIndex+"_"+this._componentConstructorViewQueryLists.length,this.view),this._componentConstructorViewQueryLists.push(o)),r(n.token)){if(i(o)&&n.token.reference===Kt(Ol.ChangeDetectorRef).reference)return t===e.ProviderAstType.Component?this._compViewExpr.prop("ref"):je(no.prop("ref"),this.view,this.view.componentView);if(i(o)){var s=this._resolvedProviders.get(n.token.reference);if(s&&(t===e.ProviderAstType.Directive||t===e.ProviderAstType.PublicService)&&s.providerType===e.ProviderAstType.PrivateService)return null;o=this.instances.get(n.token.reference)}}return o},n.prototype._getDependency=function(t,n){var r=this,o=null;for(n.isValue&&(o=C(n.value)),i(o)&&!n.isSkipSelf&&(o=this._getLocalDependency(t,n));i(o)&&!r.parent.isNull();)r=r.parent,o=r._getLocalDependency(e.ProviderAstType.PublicService,new Ho({token:n.token}));return i(o)&&(o=Fe(n.token,n.isOptional)),i(o)&&(o=io),je(o,this.view,r.view)},n}(qp),Yp=function(){function t(t,e){this.query=t,this.read=r(t.meta.read)?t.meta.read:e}return t}(),Zp=function(){function t(t,e){var n=this;this.view=t,this.meta=e,this._purePipeProxyCount=0,this.instance=no.prop("_pipe_"+e.name+"_"+t.pipeCount++);var r=this.meta.type.diDeps.map(function(t){return t.token.reference===Kt(Ol.ChangeDetectorRef).reference?je(no.prop("ref"),n.view,n.view.componentView):Fe(t.token,!1)});this.view.fields.push(new po(this.instance.name,x(this.meta.type))),this.view.createMethod.resetDebugInfo(null,null),this.view.createMethod.addStmt(no.prop(this.instance.name).set(w(this.meta.type).instantiate(r)).toStmt())}return t.call=function(e,n,r){var o,s=e.componentView,a=Ze(s,n);return a.pure?(o=s.purePipes.get(n),i(o)&&(o=new t(s,a),s.purePipes.set(n,o),s.pipes.push(o))):(o=new t(e,a),e.pipes.push(o)),o._call(e,r)},Object.defineProperty(t.prototype,"pure",{get:function(){return this.meta.pure},enumerable:!0,configurable:!0}),t.prototype._call=function(t,e){if(this.meta.pure){var n=no.prop(this.instance.name+"_"+this._purePipeProxyCount++),r=je(this.instance,t,this.view);return Be(r.prop("transform").callMethod(ki.Bind,[r]),e.length,n,t),w(Yt(Ol.castByValue)).callFn([n,r.prop("transform")]).callFn(e)}return je(this.instance,t,this.view).callMethod("transform",e)},t}(),Kp=function(){function t(t,e,n,i,o,s,a,u){var c=this;this.component=t,this.genConfig=e,this.pipeMetas=n,this.styles=i,this.animations=o,this.viewIndex=s,this.declarationElement=a,this.templateVariableBindings=u,this.nodes=[],this.rootNodesOrAppElements=[],this.bindings=[],this.classStatements=[],this.eventHandlerMethods=[],this.fields=[],this.getters=[],this.disposables=[],this.subscriptions=[],this.purePipes=new Map,this.pipes=[],this.locals=new Map,this.literalArrayCount=0,this.literalMapCount=0,this.pipeCount=0,this.createMethod=new Lp(this),this.injectorGetMethod=new Lp(this),this.updateContentQueriesMethod=new Lp(this),this.dirtyParentQueriesMethod=new Lp(this),this.updateViewQueriesMethod=new Lp(this),this.detectChangesInInputsMethod=new Lp(this),this.detectChangesRenderPropertiesMethod=new Lp(this),this.afterContentLifecycleCallbacksMethod=new Lp(this),this.afterViewLifecycleCallbacksMethod=new Lp(this),this.destroyMethod=new Lp(this),this.detachMethod=new Lp(this),this.viewType=Ke(t,s),this.className="_View_"+t.type.name+s,this.classType=x(new zo({name:this.className})),this.viewFactory=_(Ue(t,s)),this.viewType===Lc.COMPONENT||this.viewType===Lc.HOST?this.componentView=this:this.componentView=this.declarationElement.view.componentView,
this.componentContext=je(no.prop("context"),this,this.componentView);var l=new Map;if(this.viewType===Lc.COMPONENT){var h=no.prop("context");hi.forEachWithIndex(this.component.viewQueries,function(t,e){var n="_viewQuery_"+t.selectors[0].name+"_"+e,r=Ge(t,h,n,c),i=new Dp(t,r,h,c);We(l,i)});var p=0;this.component.type.diDeps.forEach(function(t){if(r(t.viewQuery)){var e=no.prop("declarationAppElement").prop("componentConstructorViewQueries").key(C(p++)),n=new Dp(t.viewQuery,e,null,c);We(l,n)}})}this.viewQueries=l,u.forEach(function(t){c.locals.set(t[1],no.prop("context").prop(t[0]))}),this.declarationElement.isNull()||this.declarationElement.setEmbeddedView(this)}return t.prototype.callPipe=function(t,e,n){return Zp.call(this,t,[e].concat(n))},t.prototype.getLocal=function(t){if(t==zp.event.name)return zp.event;for(var e=this,n=e.locals.get(t);i(n)&&r(e.declarationElement.view);)e=e.declarationElement.view,n=e.locals.get(t);return r(n)?je(n,this,e):null},t.prototype.createLiteralArray=function(t){if(0===t.length)return w(Yt(Ol.EMPTY_ARRAY));for(var e=no.prop("_arr_"+this.literalArrayCount++),n=[],r=[],i=0;i<t.length;i++){var o="p"+i;n.push(new Zi(o)),r.push(_(o))}return Be(M(n,[new lo(E(r))],new Mi(Ai)),t.length,e,this),e.callFn(t)},t.prototype.createLiteralMap=function(t){if(0===t.length)return w(Yt(Ol.EMPTY_MAP));for(var e=no.prop("_map_"+this.literalMapCount++),n=[],r=[],i=[],o=0;o<t.length;o++){var s="p"+o;n.push(new Zi(s)),r.push([t[o][0],_(s)]),i.push(t[o][1])}return Be(M(n,[new lo(S(r))],new Ci(Ai)),t.length,e,this),e.callFn(i)},t.prototype.afterNodes=function(){var t=this;ci.values(this.viewQueries).forEach(function(e){return e.forEach(function(e){return e.afterChildren(t.createMethod,t.updateViewQueriesMethod)})})},t}(),Qp=function(){function t(t,e){this.node=t,this.sourceAst=e}return t}(),Jp=function(){function t(t,e,n){this.expression=t,this.needsValueUnwrapper=e,this.temporaryCount=n}return t}();!function(t){t[t.Statement=0]="Statement",t[t.Expression=1]="Expression"}(nh||(nh={}));var $p,tf=function(){function t(t,e,n,r){this._nameResolver=t,this._implicitReceiver=e,this._valueUnwrapper=n,this.bindingIndex=r,this._nodeMap=new Map,this._resultMap=new Map,this._currentTemporary=0,this.needsValueUnwrapper=!1,this.temporaryCount=0}return t.prototype.visitBinary=function(t,e){var n;switch(t.operation){case"+":n=Ei.Plus;break;case"-":n=Ei.Minus;break;case"*":n=Ei.Multiply;break;case"/":n=Ei.Divide;break;case"%":n=Ei.Modulo;break;case"&&":n=Ei.And;break;case"||":n=Ei.Or;break;case"==":n=Ei.Equals;break;case"!=":n=Ei.NotEquals;break;case"===":n=Ei.Identical;break;case"!==":n=Ei.NotIdentical;break;case"<":n=Ei.Lower;break;case">":n=Ei.Bigger;break;case"<=":n=Ei.LowerEquals;break;case">=":n=Ei.BiggerEquals;break;default:throw new Error("Unsupported operation "+t.operation)}return on(e,new Qi(n,this.visit(t.left,nh.Expression),this.visit(t.right,nh.Expression)))},t.prototype.visitChain=function(t,e){return nn(e,t),this.visitAll(t.expressions,e)},t.prototype.visitConditional=function(t,e){var n=this.visit(t.condition,nh.Expression);return on(e,n.conditional(this.visit(t.trueExp,nh.Expression),this.visit(t.falseExp,nh.Expression)))},t.prototype.visitPipe=function(t,e){var n=this.visit(t.exp,nh.Expression),r=this.visitAll(t.args,nh.Expression),i=this._nameResolver.callPipe(t.name,n,r);return this.needsValueUnwrapper=!0,on(e,this._valueUnwrapper.callMethod("unwrap",[i]))},t.prototype.visitFunctionCall=function(t,e){return on(e,this.visit(t.target,nh.Expression).callFn(this.visitAll(t.args,nh.Expression)))},t.prototype.visitImplicitReceiver=function(t,e){return rn(e,t),this._implicitReceiver},t.prototype.visitInterpolation=function(t,e){rn(e,t);for(var n=[C(t.expressions.length)],r=0;r<t.strings.length-1;r++)n.push(C(t.strings[r])),n.push(this.visit(t.expressions[r],nh.Expression));return n.push(C(t.strings[t.strings.length-1])),w(Yt(Ol.interpolate)).callFn(n)},t.prototype.visitKeyedRead=function(t,e){return on(e,this.visit(t.obj,nh.Expression).key(this.visit(t.key,nh.Expression)))},t.prototype.visitKeyedWrite=function(t,e){var n=this.visit(t.obj,nh.Expression),r=this.visit(t.key,nh.Expression),i=this.visit(t.value,nh.Expression);return on(e,n.key(r).set(i))},t.prototype.visitLiteralArray=function(t,e){return on(e,this._nameResolver.createLiteralArray(this.visitAll(t.expressions,e)))},t.prototype.visitLiteralMap=function(t,e){for(var n=[],r=0;r<t.keys.length;r++)n.push([t.keys[r],this.visit(t.values[r],nh.Expression)]);return on(e,this._nameResolver.createLiteralMap(n))},t.prototype.visitLiteralPrimitive=function(t,e){return on(e,C(t.value))},t.prototype.visitMethodCall=function(t,e){var n=this.leftMostSafeNode(t);if(n)return this.convertSafeAccess(t,n,e);var o=this.visitAll(t.args,nh.Expression),s=null,a=this.visit(t.receiver,nh.Expression);if(a===this._implicitReceiver){var u=this._nameResolver.getLocal(t.name);r(u)&&(s=u.callFn(o))}return i(s)&&(s=a.callMethod(t.name,o)),on(e,s)},t.prototype.visitPrefixNot=function(t,e){return on(e,T(this.visit(t.expression,nh.Expression)))},t.prototype.visitPropertyRead=function(t,e){var n=this.leftMostSafeNode(t);if(n)return this.convertSafeAccess(t,n,e);var r=null,o=this.visit(t.receiver,nh.Expression);return o===this._implicitReceiver&&(r=this._nameResolver.getLocal(t.name)),i(r)&&(r=o.prop(t.name)),on(e,r)},t.prototype.visitPropertyWrite=function(t,e){var n=this.visit(t.receiver,nh.Expression);if(n===this._implicitReceiver){var i=this._nameResolver.getLocal(t.name);if(r(i))throw new Error("Cannot assign to a reference or variable!")}return on(e,n.prop(t.name).set(this.visit(t.value,nh.Expression)))},t.prototype.visitSafePropertyRead=function(t,e){return this.convertSafeAccess(t,this.leftMostSafeNode(t),e)},t.prototype.visitSafeMethodCall=function(t,e){return this.convertSafeAccess(t,this.leftMostSafeNode(t),e)},t.prototype.visitAll=function(t,e){var n=this;return t.map(function(t){return n.visit(t,e)})},t.prototype.visitQuote=function(t,e){throw new Error("Quotes are not supported for evaluation!")},t.prototype.visit=function(t,e){var n=this._resultMap.get(t);return n?n:(this._nodeMap.get(t)||t).visit(this,e)},t.prototype.convertSafeAccess=function(t,e,n){var r,i=this.visit(e.receiver,n);this.needsTemporary(e.receiver)&&(r=this.allocateTemporary(),i=r.set(i),this._resultMap.set(e.receiver,r));var o=i.isBlank();e instanceof Ss?this._nodeMap.set(e,new Es(e.span,e.receiver,e.name,e.args)):this._nodeMap.set(e,new hs(e.span,e.receiver,e.name));var s=this.visit(t,n);return this._nodeMap.delete(e),r&&this.releaseTemporary(r),o.conditional(C(null),s)},t.prototype.leftMostSafeNode=function(t){var e=this,n=function(t,n){return(e._nodeMap.get(n)||n).visit(t)};return t.visit({visitBinary:function(t){return null},visitChain:function(t){return null},visitConditional:function(t){return null},visitFunctionCall:function(t){return null},visitImplicitReceiver:function(t){return null},visitInterpolation:function(t){return null},visitKeyedRead:function(t){return n(this,t.obj)},visitKeyedWrite:function(t){return null},visitLiteralArray:function(t){return null},visitLiteralMap:function(t){return null},visitLiteralPrimitive:function(t){return null},visitMethodCall:function(t){return n(this,t.receiver)},visitPipe:function(t){return null},visitPrefixNot:function(t){return null},visitPropertyRead:function(t){return n(this,t.receiver)},visitPropertyWrite:function(t){return null},visitQuote:function(t){return null},visitSafeMethodCall:function(t){return n(this,t.receiver)||t},visitSafePropertyRead:function(t){return n(this,t.receiver)||t}})},t.prototype.needsTemporary=function(t){var e=this,n=function(t,n){return n&&(e._nodeMap.get(n)||n).visit(t)},r=function(t,e){return e.some(function(e){return n(t,e)})};return t.visit({visitBinary:function(t){return n(this,t.left)||n(this,t.right)},visitChain:function(t){return!1},visitConditional:function(t){return n(this,t.condition)||n(this,t.trueExp)||n(this,t.falseExp)},visitFunctionCall:function(t){return!0},visitImplicitReceiver:function(t){return!1},visitInterpolation:function(t){return r(this,t.expressions)},visitKeyedRead:function(t){return!1},visitKeyedWrite:function(t){return!1},visitLiteralArray:function(t){return!0},visitLiteralMap:function(t){return!0},visitLiteralPrimitive:function(t){return!1},visitMethodCall:function(t){return!0},visitPipe:function(t){return!0},visitPrefixNot:function(t){return n(this,t.expression)},visitPropertyRead:function(t){return!1},visitPropertyWrite:function(t){return!1},visitQuote:function(t){return!1},visitSafeMethodCall:function(t){return!0},visitSafePropertyRead:function(t){return!1}})},t.prototype.allocateTemporary=function(){var t=this._currentTemporary++;return this.temporaryCount=Math.max(this._currentTemporary,this.temporaryCount),new Di($e(this.bindingIndex,t))},t.prototype.releaseTemporary=function(t){if(this._currentTemporary--,t.name!=$e(this.bindingIndex,this._currentTemporary))throw new Error("Temporary "+t.name+" released out of order")},t}(),ef=function(){function t(t,e){this.listener=t,this.output=e}return t}(),nf=function(){function t(t,e,n,r){this.compileElement=t,this.eventTarget=e,this.eventName=n,this._hasComponentHostListener=!1,this._actionResultExprs=[],this._method=new Lp(t.view),this._methodName="_handle_"+pn(n)+"_"+t.nodeIndex+"_"+r,this._eventParam=new Zi(zp.event.name,x(this.compileElement.view.genConfig.renderTypes.renderEvent))}return t.getOrCreate=function(e,n,r,o){var s=o.find(function(t){return t.eventTarget==n&&t.eventName==r});return i(s)&&(s=new t(e,n,r,o.length),o.push(s)),s},Object.defineProperty(t.prototype,"methodName",{get:function(){return this._methodName},enumerable:!0,configurable:!0}),t.prototype.addAction=function(t,e,n){r(e)&&e.isComponent&&(this._hasComponentHostListener=!0),this._method.resetDebugInfo(this.compileElement.nodeIndex,t);var i=r(n)?n:this.compileElement.view.componentContext,o=Je(this.compileElement.view,i,t.handler,this.compileElement.nodeIndex),s=o.length-1;if(s>=0){var a=o[s],u=hn(a),c=_("pd_"+this._actionResultExprs.length);this._actionResultExprs.push(c),r(u)&&(o[s]=c.set(u.cast(Ai).notIdentical(C(!1))).toDeclStmt(null,[Vi.Final]))}this._method.addStmts(o)},t.prototype.finishMethod=function(){var t=this._hasComponentHostListener?this.compileElement.appElement.prop("componentView"):no,e=C(!0);this._actionResultExprs.forEach(function(t){e=e.and(t)});var n=[t.callMethod("markPathToRootAsCheckOnce",[]).toStmt()].concat(this._method.finish()).concat([new lo(e)]);this.compileElement.view.eventHandlerMethods.push(new fo(this._methodName,[this._eventParam],n,Oi,[Vi.Private]))},t.prototype.listenToRenderer=function(){var t,e=no.callMethod("eventHandler",[no.prop(this._methodName).callMethod(ki.Bind,[no])]);t=r(this.eventTarget)?Bp.renderer.callMethod("listenGlobal",[C(this.eventTarget),C(this.eventName),e]):Bp.renderer.callMethod("listen",[this.compileElement.renderNode,C(this.eventName),e]);var n=_("disposable_"+this.compileElement.view.disposables.length);this.compileElement.view.disposables.push(n),this.compileElement.view.createMethod.addStmt(n.set(t).toDeclStmt(Ii,[Vi.Private]))},t.prototype.listenToAnimation=function(t){var e=no.callMethod("eventHandler",[no.prop(this._methodName).callMethod(ki.Bind,[no])]),n=no.callMethod("registerAnimationOutput",[this.compileElement.renderNode,w(Yt(Ol.AnimationOutput)).instantiate([C(t.name),C(t.phase)]),e]).toStmt();this.compileElement.view.createMethod.addStmt(n)},t.prototype.listenToDirective=function(t,e){var n=_("subscription_"+this.compileElement.view.subscriptions.length);this.compileElement.view.subscriptions.push(n);var r=no.callMethod("eventHandler",[no.prop(this._methodName).callMethod(ki.Bind,[no])]);this.compileElement.view.createMethod.addStmt(n.set(t.prop(e).callMethod(ki.SubscribeObservable,[r])).toDeclStmt(null,[Vi.Final]))},t}(),rf=no.prop("numberOfChecks").identical(new Gi(0)),of=T(Gp.throwOnChange),sf=new Map,af=function(){function t(t,e){var n=this;this.view=t,this.animationOutputs=e,this._nodeIndex=0,this._animationOutputsMap={},e.forEach(function(t){n._animationOutputsMap[t.fullPropertyName]=t})}return t.prototype.visitBoundText=function(t,e){var n=this.view.nodes[this._nodeIndex++];return wn(t,n,this.view),null},t.prototype.visitText=function(t,e){return this._nodeIndex++,null},t.prototype.visitNgContent=function(t,e){return null},t.prototype.visitElement=function(t,e){var n=this,r=this.view.nodes[this._nodeIndex++],i=[],o=[];return an(t.outputs,t.directives,r).forEach(function(t){if("@"==t.eventName[0]){var e=t.eventName.substr(1),r=n._animationOutputsMap[e];r&&o.push(new ef(t,r))}else i.push(t)}),ln(o),Sn(t.inputs,r),cn(i),t.directives.forEach(function(t){var e=r.instances.get(t.directive.type.reference);Mn(t,e,r),fn(t,e,r),Tn(t,e,r),un(t,e,i)}),m(this,t.children,r),t.directives.forEach(function(t){var e=r.instances.get(t.directive.type.reference);dn(t.directive,e,r),vn(t.directive,e,r)}),t.providers.forEach(function(t){var e=r.instances.get(t.token.reference);mn(t,e,r)}),null},t.prototype.visitEmbeddedTemplate=function(t,e){var n=this.view.nodes[this._nodeIndex++],r=an(t.outputs,t.directives,n);return t.directives.forEach(function(t){var e=n.instances.get(t.directive.type.reference);Mn(t,e,n),fn(t,e,n),un(t,e,r),dn(t.directive,e,n),vn(t.directive,e,n)}),t.providers.forEach(function(t){var e=n.instances.get(t.token.reference);mn(t,e,n)}),An(n.embeddedView,t.children,this.animationOutputs),null},t.prototype.visitAttr=function(t,e){return null},t.prototype.visitDirective=function(t,e){return null},t.prototype.visitEvent=function(t,e){return null},t.prototype.visitReference=function(t,e){return null},t.prototype.visitVariable=function(t,e){return null},t.prototype.visitDirectiveProperty=function(t,e){return null},t.prototype.visitElementProperty=function(t,e){return null},t}(),uf="$implicit",cf="class",lf="style",hf="ng-container",pf=_("parentRenderNode"),ff=_("rootSelector"),df=function(){function t(t,e){this.comp=t,this.placeholder=e}return t}(),vf=function(){function t(t,e){this.comp=t,this.placeholder=e}return t}(),mf=function(){function t(t,e){this.view=t,this.targetDependencies=e,this.nestedViewCount=0,this._animationCompiler=new fp}return t.prototype._isRootNode=function(t){return t.view!==this.view},t.prototype._addRootNodeAndProject=function(t){var e=Rn(t),n=e.parent,i=e.sourceAst.ngContentIndex,o=t instanceof Xp&&t.hasViewContainer?t.appElement:null;this._isRootNode(n)?this.view.viewType!==Lc.COMPONENT&&this.view.rootNodesOrAppElements.push(r(o)?o:t.renderNode):r(n.component)&&r(i)&&n.addContentNode(i,r(o)?o:t.renderNode)},t.prototype._getParentRenderNode=function(t){return t=In(t),this._isRootNode(t)?this.view.viewType===Lc.COMPONENT?pf:io:r(t.component)&&t.component.template.encapsulation!==n.ViewEncapsulation.Native?io:t.renderNode},t.prototype.visitBoundText=function(t,e){return this._visitText(t,"",e)},t.prototype.visitText=function(t,e){return this._visitText(t,t.value,e)},t.prototype._visitText=function(t,e,n){var r="_text_"+this.view.nodes.length;this.view.fields.push(new po(r,x(this.view.genConfig.renderTypes.renderText)));var i=no.prop(r),o=new qp(n,this.view,this.view.nodes.length,i,t),s=no.prop(r).set(Bp.renderer.callMethod("createText",[this._getParentRenderNode(n),C(e),this.view.createMethod.resetDebugInfoExpr(this.view.nodes.length,t)])).toStmt();return this.view.nodes.push(o),this.view.createMethod.addStmt(s),this._addRootNodeAndProject(o),i},t.prototype.visitNgContent=function(t,e){this.view.createMethod.resetDebugInfo(null,t);var n=this._getParentRenderNode(e),i=Bp.projectableNodes.key(C(t.index),new Mi(x(this.view.genConfig.renderTypes.renderNode)));return n!==io?this.view.createMethod.addStmt(Bp.renderer.callMethod("projectNodes",[n,w(Yt(Ol.flattenNestedViewRenderNodes)).callFn([i])]).toStmt()):this._isRootNode(e)?this.view.viewType!==Lc.COMPONENT&&this.view.rootNodesOrAppElements.push(i):r(e.component)&&r(t.ngContentIndex)&&e.addContentNode(t.ngContentIndex,i),null},t.prototype.visitElement=function(t,e){var n,i=this,o=this.view.nodes.length,s=this.view.createMethod.resetDebugInfoExpr(o,t);n=0===o&&this.view.viewType===Lc.HOST?no.callMethod("selectOrCreateHostElement",[C(t.name),ff,s]):t.name===hf?Bp.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(e),s]):Bp.renderer.callMethod("createElement",[this._getParentRenderNode(e),C(t.name),s]);var a="_el_"+o;this.view.fields.push(new po(a,x(this.view.genConfig.renderTypes.renderElement))),this.view.createMethod.addStmt(no.prop(a).set(n).toStmt());for(var u=no.prop(a),c=t.directives.map(function(t){return t.directive}),l=c.find(function(t){return t.isComponent}),h=kn(t.attrs),p=Ln(h,c),f=0;f<p.length;f++){var d=p[f][0];if(t.name!==hf){var v=p[f][1];this.view.createMethod.addStmt(Bp.renderer.callMethod("setElementAttribute",[u,C(d),C(v)]).toStmt())}}var y=new Xp(e,this.view,o,u,t,l,c,t.providers,t.hasViewContainer,(!1),t.references);this.view.nodes.push(y);var g=null;if(r(l)){var b=new zo({name:Ue(l,0)});this.targetDependencies.push(new df(l.type,b));var S=l.entryComponents.map(function(t){var e=new zo({name:t.name});return i.targetDependencies.push(new vf(t,e)),e});y.createComponentFactoryResolver(S),g=_("compView_"+o),y.setComponentView(g),this.view.createMethod.addStmt(g.set(w(b).callFn([Bp.viewUtils,y.injector,y.appElement])).toDeclStmt())}if(y.beforeChildren(),this._addRootNodeAndProject(y),m(this,t.children,y),y.afterChildren(this.view.nodes.length-o-1),r(g)){var T;T=this.view.component.type.isHost?Bp.projectableNodes:E(y.contentNodesByNgContentIndex.map(function(t){return Ve(t)})),this.view.createMethod.addStmt(g.callMethod("create",[y.getComponent(),T,io]).toStmt())}return null},t.prototype.visitEmbeddedTemplate=function(t,e){var n=this.view.nodes.length,r="_anchor_"+n;this.view.fields.push(new po(r,x(this.view.genConfig.renderTypes.renderComment))),this.view.createMethod.addStmt(no.prop(r).set(Bp.renderer.callMethod("createTemplateAnchor",[this._getParentRenderNode(e),this.view.createMethod.resetDebugInfoExpr(n,t)])).toStmt());var i=no.prop(r),o=t.variables.map(function(t){return[t.value.length>0?t.value:uf,t.name]}),s=t.directives.map(function(t){return t.directive}),a=new Xp(e,this.view,n,i,t,null,s,t.providers,t.hasViewContainer,(!0),t.references);this.view.nodes.push(a);var u=this._animationCompiler.compileComponent(this.view.component,[t]);this.nestedViewCount++;var c=new Kp(this.view.component,this.view.genConfig,this.view.pipeMetas,io,u.triggers,this.view.viewIndex+this.nestedViewCount,a,o);return this.nestedViewCount+=On(c,t.children,this.targetDependencies),a.beforeChildren(),this._addRootNodeAndProject(a),a.afterChildren(0),null},t.prototype.visitAttr=function(t,e){return null},t.prototype.visitDirective=function(t,e){return null},t.prototype.visitEvent=function(t,e){return null},t.prototype.visitReference=function(t,e){return null},t.prototype.visitVariable=function(t,e){return null},t.prototype.visitDirectiveProperty=function(t,e){return null},t.prototype.visitElementProperty=function(t,e){return null},t}(),yf=function(){function t(t,e,n){this.statements=t,this.viewFactoryVar=e,this.dependencies=n}return t}(),gf=function(){function t(t){this._genConfig=t,this._animationCompiler=new fp}return t.prototype.compileComponent=function(t,e,n,r){var i=[],o=this._animationCompiler.compileComponent(t,e),s=[],a=o.triggers;a.forEach(function(t){s.push(t.statesMapStatement),s.push(t.fnStatement)});var u=new Kp(t,this._genConfig,r,n,a,0,Xp.createNull(),[]);return On(u,e,i),An(u,e,o.outputs),Pn(u,s),new yf(s,u.viewFactory.name,i)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Fh}],t}(),bf=function(){function t(t,e){this.moduleUrl=t,this.source=e}return t}(),_f=function(){function t(t){this.ngModuleByComponent=t}return t}(),wf=function(){function t(t,e,n,r,i,o,s,a,u){this._metadataResolver=t,this._directiveNormalizer=e,this._templateParser=n,this._styleCompiler=r,this._viewCompiler=i,this._ngModuleCompiler=o,this._outputEmitter=s,this._localeId=a,this._translationFormat=u}return t.prototype.analyzeModules=function(t){var e=this,n=new Map;return t.forEach(function(t){var r=e._metadataResolver.getNgModuleMetadata(t);r.declaredDirectives.forEach(function(t){t.isComponent&&n.set(t.type.reference,r)})}),new _f(n)},t.prototype.clearCache=function(){this._directiveNormalizer.clearCache(),this._metadataResolver.clearCache()},t.prototype.compile=function(t,e,n,r){var i=this,o=$n(t)[1],s=[],a=[],u=[];return a.push.apply(a,r.map(function(t){return i._compileModule(t,s)})),Promise.all(n.map(function(t){var n=i._metadataResolver.getDirectiveMetadata(t),r=e.ngModuleByComponent.get(t);if(!r)throw new Error("Cannot determine the module for component "+n.type.name+"!");return Promise.all([n].concat(r.transitiveModule.directives).map(function(t){return i._directiveNormalizer.normalizeDirective(t).asyncResult})).then(function(t){var e=t[0],n=t.slice(1);Jn(e);var c=i._styleCompiler.compileComponent(e);c.externalStylesheets.forEach(function(t){u.push(i._codgenStyles(t,o))}),a.push(i._compileComponentFactory(e,o,s)),a.push(i._compileComponent(e,n,r.transitiveModule.pipes,r.schemas,c.componentStylesheet,o,s))})})).then(function(){return s.length>0&&u.unshift(i._codegenSourceModule(Zn(t),s,a)),u})},t.prototype._compileModule=function(t,e){var n=this._metadataResolver.getNgModuleMetadata(t),r=this._ngModuleCompiler.compile(n,[new Go({token:Kt(Ol.LOCALE_ID),useValue:this._localeId}),new Go({token:Kt(Ol.TRANSLATIONS_FORMAT),useValue:this._translationFormat})]);return r.dependencies.forEach(function(t){t.placeholder.name=Kn(t.comp),t.placeholder.moduleUrl=Zn(t.comp.moduleUrl)}),e.push.apply(e,r.statements),r.ngModuleFactoryVar},t.prototype._compileComponentFactory=function(t,e,n){var r=k(t),i=this._compileComponent(r,[t],[],[],null,e,n),o=Kn(t.type);return n.push(_(o).set(w(Yt(Ol.ComponentFactory),[x(t.type)]).instantiate([C(t.selector),_(i),w(t.type)],x(Yt(Ol.ComponentFactory),[x(t.type)],[ni.Const]))).toDeclStmt(null,[Vi.Final])),o},t.prototype._compileComponent=function(t,e,n,r,i,o,s){var a=this._templateParser.parse(t,t.template.template,e,n,r,t.type.name),u=i?_(i.stylesVar):E([]),c=this._viewCompiler.compileComponent(t,a,u,n);return i&&hi.addAll(s,Yn(i,o)),hi.addAll(s,Xn(c)),c.viewFactoryVar},t.prototype._codgenStyles=function(t,e){return Yn(t,e),this._codegenSourceModule(Qn(t.meta.moduleUrl,t.isShimmed,e),t.statements,[t.stylesVar])},t.prototype._codegenSourceModule=function(t,e,n){return new bf(t,this._outputEmitter.emitStatements(t,e,n))},t}(),xf=function(){function t(){}return t.prototype.get=function(t){return null},t}(),Ef="asset:",Sf={provide:n.PACKAGE_ROOT_URL,useValue:"/"},Tf=function(){function t(t){void 0===t&&(t=null),this._packagePrefix=t}return t.prototype.resolve=function(t,e){var n=e;r(t)&&t.length>0&&(n=sr(t,n));var i=rr(n),o=this._packagePrefix;if(r(o)&&r(i)&&"package"==i[$p.Scheme]){var s=i[$p.Path];if(this._packagePrefix!==Ef)return o=Vr.stripRight(o,"/"),s=Vr.stripLeft(s,"/"),o+"/"+s;var a=s.split(/\//);n="asset:"+a[0]+"/lib/"+a.slice(1).join("/")}return n},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.PACKAGE_ROOT_URL]}]}],t}(),Mf=new RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([\\w\\d\\-\\u0100-\\uffff.%]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");!function(t){t[t.Scheme=1]="Scheme",t[t.UserInfo=2]="UserInfo",t[t.Domain=3]="Domain",t[t.Port=4]="Port",t[t.Path=5]="Path",t[t.QueryData=6]="QueryData",t[t.Fragment=7]="Fragment"}($p||($p={}));var Cf=function(){function t(t,e,n,r){this._resourceLoader=t,this._urlResolver=e,this._htmlParser=n,this._config=r,this._resourceLoaderCache=new Map}return t.prototype.clearCache=function(){this._resourceLoaderCache.clear()},t.prototype.clearCacheFor=function(t){var e=this;t.isComponent&&(this._resourceLoaderCache.delete(t.template.templateUrl),t.template.externalStylesheets.forEach(function(t){e._resourceLoaderCache.delete(t.moduleUrl)}))},t.prototype._fetch=function(t){var e=this._resourceLoaderCache.get(t);return e||(e=this._resourceLoader.get(t),this._resourceLoaderCache.set(t,e)),e},t.prototype.normalizeDirective=function(t){var e=this;if(!t.isComponent)return new Co(t,Promise.resolve(t));var n,i=null;if(r(t.template.template))i=this.normalizeTemplateSync(t.type,t.template),n=Promise.resolve(i);else{if(!t.template.templateUrl)throw new Error("No template specified for component "+t.type.name);n=this.normalizeTemplateAsync(t.type,t.template)}if(i&&0===i.styleUrls.length){var o=ar(t,i);return new Co(o,Promise.resolve(o))}return new Co(null,n.then(function(t){return e.normalizeExternalStylesheets(t)}).then(function(e){return ar(t,e)}))},t.prototype.normalizeTemplateSync=function(t,e){return this.normalizeLoadedTemplate(t,e,e.template,t.moduleUrl)},t.prototype.normalizeTemplateAsync=function(t,e){var n=this,r=this._urlResolver.resolve(t.moduleUrl,e.templateUrl);return this._fetch(r).then(function(i){return n.normalizeLoadedTemplate(t,e,i,r)})},t.prototype.normalizeLoadedTemplate=function(t,e,r,o){var s=Ra.fromArray(e.interpolation),a=this._htmlParser.parse(r,t.name,!1,s);if(a.errors.length>0){var u=a.errors.join("\n");throw new Error("Template parse errors:\n"+u)}var c=this.normalizeStylesheet(new Zo({styles:e.styles,styleUrls:e.styleUrls,moduleUrl:t.moduleUrl})),l=new Af;st(l,a.rootNodes);var h=this.normalizeStylesheet(new Zo({styles:l.styles,styleUrls:l.styleUrls,moduleUrl:o})),p=c.styles.concat(h.styles),f=c.styleUrls.concat(h.styleUrls),d=e.encapsulation;return i(d)&&(d=this._config.defaultEncapsulation),d===n.ViewEncapsulation.Emulated&&0===p.length&&0===f.length&&(d=n.ViewEncapsulation.None),new Ko({encapsulation:d,template:r,templateUrl:o,styles:p,styleUrls:f,externalStylesheets:e.externalStylesheets,ngContentSelectors:l.ngContentSelectors,animations:e.animations,interpolation:e.interpolation})},t.prototype.normalizeExternalStylesheets=function(t){return this._loadMissingExternalStylesheets(t.styleUrls).then(function(e){return new Ko({encapsulation:t.encapsulation,template:t.template,templateUrl:t.templateUrl,styles:t.styles,styleUrls:t.styleUrls,externalStylesheets:e,ngContentSelectors:t.ngContentSelectors,animations:t.animations,interpolation:t.interpolation})})},t.prototype._loadMissingExternalStylesheets=function(t,e){var n=this;return void 0===e&&(e=new Map),Promise.all(t.filter(function(t){return!e.has(t)}).map(function(t){return n._fetch(t).then(function(r){var i=n.normalizeStylesheet(new Zo({styles:[r],moduleUrl:t}));return e.set(t,i),n._loadMissingExternalStylesheets(i.styleUrls,e)})})).then(function(t){return ci.values(e)})},t.prototype.normalizeStylesheet=function(t){var e=this,n=t.styleUrls.filter(ce).map(function(n){return e._urlResolver.resolve(t.moduleUrl,n)}),r=t.styles.map(function(r){var i=le(e._urlResolver,t.moduleUrl,r);return n.push.apply(n,i.styleUrls),i.style});return new Zo({styles:r,styleUrls:n,moduleUrl:t.moduleUrl})},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:xf},{type:Tf},{type:Rl},{type:Fh}],t}(),Af=function(){function t(){this.ngContentSelectors=[],this.styles=[],this.styleUrls=[],this.ngNonBindableStackCount=0}return t.prototype.visitElement=function(t,e){var n=he(t);switch(n.type){case Uu.NG_CONTENT:0===this.ngNonBindableStackCount&&this.ngContentSelectors.push(n.selectAttr);break;case Uu.STYLE:var r="";t.children.forEach(function(t){t instanceof Za&&(r+=t.value)}),this.styles.push(r);break;case Uu.STYLESHEET:this.styleUrls.push(n.hrefAttr)}return n.nonBindable&&this.ngNonBindableStackCount++,st(this,t.children),n.nonBindable&&this.ngNonBindableStackCount--,null},t.prototype.visitComment=function(t,e){return null},t.prototype.visitAttribute=function(t,e){return null},t.prototype.visitText=function(t,e){return null},t.prototype.visitExpansion=function(t,e){return null},t.prototype.visitExpansionCase=function(t,e){return null},t}(),Of=function(){function t(t){void 0===t&&(t=sl),this._reflector=t}return t.prototype.resolve=function(t,e){void 0===e&&(e=!0);var i=this._reflector.annotations(n.resolveForwardRef(t));if(r(i)){var o=i.find(ur);if(r(o)){var s=this._reflector.propMetadata(t);return this._mergeWithPropertyMetadata(o,s,t)}}if(e)throw new Error("No Directive annotation found on "+c(t));return null},t.prototype._mergeWithPropertyMetadata=function(t,e,i){var o=[],s=[],a={},u={};return li.forEach(e,function(t,e){t.forEach(function(t){if(t instanceof n.InputMetadata)r(t.bindingPropertyName)?o.push(e+": "+t.bindingPropertyName):o.push(e);else if(t instanceof n.OutputMetadata)r(t.bindingPropertyName)?s.push(e+": "+t.bindingPropertyName):s.push(e);else if(t instanceof n.HostBindingMetadata)r(t.hostPropertyName)?a["["+t.hostPropertyName+"]"]=e:a["["+e+"]"]=e;else if(t instanceof n.HostListenerMetadata){var i=r(t.args)?t.args.join(", "):"";a["("+t.eventName+")"]=e+"("+i+")"}else t instanceof n.QueryMetadata&&(u[e]=t)})}),this._merge(t,o,s,a,u,i)},t.prototype._extractPublicName=function(t){return O(t,[null,t])[1].trim()},t.prototype._merge=function(t,e,i,o,s,a){var u,l=this;if(r(t.inputs)){var h=t.inputs.map(function(t){return l._extractPublicName(t)});e.forEach(function(t){var e=l._extractPublicName(t);if(h.indexOf(e)>-1)throw new Error("Input '"+e+"' defined multiple times in '"+c(a)+"'")}),u=t.inputs.concat(e)}else u=e;var p;if(r(t.outputs)){var f=t.outputs.map(function(t){return l._extractPublicName(t)});i.forEach(function(t){var e=l._extractPublicName(t);if(f.indexOf(e)>-1)throw new Error("Output event '"+e+"' defined multiple times in '"+c(a)+"'")}),p=t.outputs.concat(i)}else p=i;var d=r(t.host)?li.merge(t.host,o):o,v=r(t.queries)?li.merge(t.queries,s):s;return t instanceof n.ComponentMetadata?new n.ComponentMetadata({selector:t.selector,inputs:u,outputs:p,host:d,exportAs:t.exportAs,moduleId:t.moduleId,queries:v,changeDetection:t.changeDetection,providers:t.providers,viewProviders:t.viewProviders,entryComponents:t.entryComponents,template:t.template,templateUrl:t.templateUrl,styles:t.styles,styleUrls:t.styleUrls,encapsulation:t.encapsulation,animations:t.animations,interpolation:t.interpolation}):new n.DirectiveMetadata({selector:t.selector,inputs:u,outputs:p,host:d,exportAs:t.exportAs,queries:v,providers:t.providers})},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Ac}],t}(),Pf=ci.createFromPairs([[Mc.OnInit,n.OnInit],[Mc.OnDestroy,n.OnDestroy],[Mc.DoCheck,n.DoCheck],[Mc.OnChanges,n.OnChanges],[Mc.AfterContentInit,n.AfterContentInit],[Mc.AfterContentChecked,n.AfterContentChecked],[Mc.AfterViewInit,n.AfterViewInit],[Mc.AfterViewChecked,n.AfterViewChecked]]),Rf=ci.createFromPairs([[Mc.OnInit,"ngOnInit"],[Mc.OnDestroy,"ngOnDestroy"],[Mc.DoCheck,"ngDoCheck"],[Mc.OnChanges,"ngOnChanges"],[Mc.AfterContentInit,"ngAfterContentInit"],[Mc.AfterContentChecked,"ngAfterContentChecked"],[Mc.AfterViewInit,"ngAfterViewInit"],[Mc.AfterViewChecked,"ngAfterViewChecked"]]),If=function(){function t(t){void 0===t&&(t=sl),this._reflector=t}return t.prototype.resolve=function(t,e){void 0===e&&(e=!0);var n=this._reflector.annotations(t).find(lr);if(r(n))return n;if(e)throw new Error("No NgModule metadata found for '"+c(t)+"'.");return null},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Ac}],t}(),Nf=function(){function t(t){void 0===t&&(t=sl),this._reflector=t}return t.prototype.resolve=function(t,e){void 0===e&&(e=!0);var i=this._reflector.annotations(n.resolveForwardRef(t));if(r(i)){var o=i.find(hr);if(r(o))return o}if(e)throw new Error("No Pipe decorator found on "+c(t));return null},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Ac}],t}(),Lf=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},kf=function(){function t(t,e,n,r,i){void 0===i&&(i=sl),this._ngModuleResolver=t,this._directiveResolver=e,this._pipeResolver=n,this._schemaRegistry=r,this._reflector=i,
this._directiveCache=new Map,this._pipeCache=new Map,this._ngModuleCache=new Map,this._ngModuleOfTypes=new Map,this._anonymousTypes=new Map,this._anonymousTypeIndex=0}return t.prototype.sanitizeTokenName=function(t){var e=c(t);if(e.indexOf("(")>=0){var n=this._anonymousTypes.get(t);i(n)&&(this._anonymousTypes.set(t,this._anonymousTypeIndex++),n=this._anonymousTypes.get(t)),e="anonymous_token_"+n+"_"}return P(e)},t.prototype.clearCacheFor=function(t){this._directiveCache.delete(t),this._pipeCache.delete(t),this._ngModuleOfTypes.delete(t),this._ngModuleCache.clear()},t.prototype.clearCache=function(){this._directiveCache.clear(),this._pipeCache.clear(),this._ngModuleCache.clear(),this._ngModuleOfTypes.clear()},t.prototype.getAnimationEntryMetadata=function(t){var e=this,n=t.definitions.map(function(t){return e.getAnimationStateMetadata(t)});return new Ro(t.name,n)},t.prototype.getAnimationStateMetadata=function(t){if(t instanceof n.AnimationStateDeclarationMetadata){var e=this.getAnimationStyleMetadata(t.styles);return new No(t.stateNameExpr,e)}return t instanceof n.AnimationStateTransitionMetadata?new Lo(t.stateChangeExpr,this.getAnimationMetadata(t.steps)):null},t.prototype.getAnimationStyleMetadata=function(t){return new jo(t.offset,t.styles)},t.prototype.getAnimationMetadata=function(t){var e=this;if(t instanceof n.AnimationStyleMetadata)return this.getAnimationStyleMetadata(t);if(t instanceof n.AnimationKeyframesSequenceMetadata)return new Do(t.steps.map(function(t){return e.getAnimationStyleMetadata(t)}));if(t instanceof n.AnimationAnimateMetadata){var r=this.getAnimationMetadata(t.styles);return new Fo(t.timings,r)}if(t instanceof n.AnimationWithStepsMetadata){var i=t.steps.map(function(t){return e.getAnimationMetadata(t)});return t instanceof n.AnimationGroupMetadata?new Bo(i):new Vo(i)}return null},t.prototype.getDirectiveMetadata=function(t,e){var o=this;void 0===e&&(e=!0),t=n.resolveForwardRef(t);var s=this._directiveCache.get(t);if(i(s)){var a=this._directiveResolver.resolve(t,e);if(!a)return null;var u=null,l=null,h=[],p=vr(t),f=[],d=a.selector;if(a instanceof n.ComponentMetadata){var v=a;H("styles",v.styles),G("interpolation",v.interpolation);var m=r(v.animations)?v.animations.map(function(t){return o.getAnimationEntryMetadata(t)}):null;H("styles",v.styles),H("styleUrls",v.styleUrls),u=new Ko({encapsulation:v.encapsulation,template:v.template,templateUrl:v.templateUrl,styles:v.styles,styleUrls:v.styleUrls,animations:m,interpolation:v.interpolation}),l=v.changeDetection,r(a.viewProviders)&&(h=this.getProvidersMetadata(a.viewProviders,f,'viewProviders for "'+c(t)+'"')),p=mr(this._reflector,t,v),v.entryComponents&&(f=fr(v.entryComponents).map(function(t){return o.getTypeMetadata(t,vr(t))}).concat(f)),d||(d=this._schemaRegistry.getDefaultComponentElementName())}else if(!d)throw new Error("Directive "+c(t)+" has no selector, please add it!");var y=[];r(a.providers)&&(y=this.getProvidersMetadata(a.providers,f,'providers for "'+c(t)+'"'));var g=[],b=[];r(a.queries)&&(g=this.getQueriesMetadata(a.queries,!1,t),b=this.getQueriesMetadata(a.queries,!0,t)),s=Qo.create({selector:d,exportAs:a.exportAs,isComponent:r(u),type:this.getTypeMetadata(t,p),template:u,changeDetection:l,inputs:a.inputs,outputs:a.outputs,host:a.host,providers:y,viewProviders:h,queries:g,viewQueries:b,entryComponents:f}),this._directiveCache.set(t,s)}return s},t.prototype.getNgModuleMetadata=function(t,e){var r=this;void 0===e&&(e=!0),t=n.resolveForwardRef(t);var i=this._ngModuleCache.get(t);if(!i){var o=this._ngModuleResolver.resolve(t,e);if(!o)return null;var s=[],a=[],u=[],l=[],h=[],p=[],f=[],d=[],v=[],m=[];o.imports&&fr(o.imports).forEach(function(e){var n;if(dr(e))n=e;else if(e&&e.ngModule){var i=e;n=i.ngModule,i.providers&&f.push.apply(f,r.getProvidersMetadata(i.providers,d,"provider for the NgModule '"+c(n)+"'"))}if(!n)throw new Error("Unexpected value '"+c(e)+"' imported by the module '"+c(t)+"'");var o=r.getNgModuleMetadata(n,!1);if(null===o)throw new Error("Unexpected "+r._getTypeDescriptor(e)+" '"+c(e)+"' imported by the module '"+c(t)+"'");h.push(o)}),o.exports&&fr(o.exports).forEach(function(e){if(!dr(e))throw new Error("Unexpected value '"+c(e)+"' exported by the module '"+c(t)+"'");var n,i,o;if(n=r.getDirectiveMetadata(e,!1))a.push(n);else if(i=r.getPipeMetadata(e,!1))l.push(i);else{if(!(o=r.getNgModuleMetadata(e,!1)))throw new Error("Unexpected "+r._getTypeDescriptor(e)+" '"+c(e)+"' exported by the module '"+c(t)+"'");p.push(o)}});var y=this._getTransitiveNgModuleMetadata(h,p);o.declarations&&fr(o.declarations).forEach(function(e){if(!dr(e))throw new Error("Unexpected value '"+c(e)+"' declared by the module '"+c(t)+"'");var n,i;if(n=r.getDirectiveMetadata(e,!1))r._addDirectiveToModule(n,t,y,s,!0);else{if(!(i=r.getPipeMetadata(e,!1)))throw new Error("Unexpected "+r._getTypeDescriptor(e)+" '"+c(e)+"' declared by the module '"+c(t)+"'");r._addPipeToModule(i,t,y,u,!0)}}),o.providers&&f.push.apply(f,this.getProvidersMetadata(o.providers,d,"provider for the NgModule '"+c(t)+"'")),o.entryComponents&&d.push.apply(d,fr(o.entryComponents).map(function(t){return r.getTypeMetadata(t,vr(t))})),o.bootstrap&&v.push.apply(v,fr(o.bootstrap).map(function(t){return r.getTypeMetadata(t,vr(t))})),d.push.apply(d,v),o.schemas&&m.push.apply(m,fr(o.schemas)),(g=y.entryComponents).push.apply(g,d),(b=y.providers).push.apply(b,f),i=new $o({type:this.getTypeMetadata(t,vr(t)),providers:f,entryComponents:d,bootstrapComponents:v,schemas:m,declaredDirectives:s,exportedDirectives:a,declaredPipes:u,exportedPipes:l,importedModules:h,exportedModules:p,transitiveModule:y}),y.modules.push(i),this._verifyModule(i),this._ngModuleCache.set(t,i)}return i;var g,b},t.prototype._verifyModule=function(t){t.exportedDirectives.forEach(function(e){if(!t.transitiveModule.directivesSet.has(e.type.reference))throw new Error("Can't export directive "+c(e.type.reference)+" from "+c(t.type.reference)+" as it was neither declared nor imported!")}),t.exportedPipes.forEach(function(e){if(!t.transitiveModule.pipesSet.has(e.type.reference))throw new Error("Can't export pipe "+c(e.type.reference)+" from "+c(t.type.reference)+" as it was neither declared nor imported!")})},t.prototype._getTypeDescriptor=function(t){return null!==this._directiveResolver.resolve(t,!1)?"directive":null!==this._pipeResolver.resolve(t,!1)?"pipe":null!==this._ngModuleResolver.resolve(t,!1)?"module":t.provide?"provider":"value"},t.prototype._addTypeToModule=function(t,e){var n=this._ngModuleOfTypes.get(t);if(n&&n!==e)throw new Error("Type "+c(t)+" is part of the declarations of 2 modules: "+c(n)+" and "+c(e)+"!");this._ngModuleOfTypes.set(t,e)},t.prototype._getTransitiveNgModuleMetadata=function(t,e){var n=pr(t.concat(e),!0),r=fr(n.map(function(t){return t.providers})),i=fr(n.map(function(t){return t.entryComponents})),o=pr(t,!1),s=fr(o.map(function(t){return t.exportedDirectives})),a=fr(o.map(function(t){return t.exportedPipes}));return new ts(n,r,i,s,a)},t.prototype._addDirectiveToModule=function(t,e,n,r,i){return void 0===i&&(i=!1),!(!i&&n.directivesSet.has(t.type.reference))&&(n.directivesSet.add(t.type.reference),n.directives.push(t),r.push(t),this._addTypeToModule(t.type.reference,e),!0)},t.prototype._addPipeToModule=function(t,e,n,r,i){return void 0===i&&(i=!1),!(!i&&n.pipesSet.has(t.type.reference))&&(n.pipesSet.add(t.type.reference),n.pipes.push(t),r.push(t),this._addTypeToModule(t.type.reference,e),!0)},t.prototype.getTypeMetadata=function(t,e,r){return void 0===r&&(r=null),t=n.resolveForwardRef(t),new Xo({name:this.sanitizeTokenName(t),moduleUrl:e,reference:t,diDeps:this.getDependenciesMetadata(t,r),lifecycleHooks:Cc.filter(function(e){return cr(e,t)})})},t.prototype.getFactoryMetadata=function(t,e,r){return void 0===r&&(r=null),t=n.resolveForwardRef(t),new Wo({name:this.sanitizeTokenName(t),moduleUrl:e,reference:t,diDeps:this.getDependenciesMetadata(t,r)})},t.prototype.getPipeMetadata=function(t,e){void 0===e&&(e=!0),t=n.resolveForwardRef(t);var r=this._pipeCache.get(t);if(i(r)){var o=this._pipeResolver.resolve(t,e);if(!o)return null;r=new Jo({type:this.getTypeMetadata(t,vr(t)),name:o.name,pure:o.pure}),this._pipeCache.set(t,r)}return r},t.prototype.getDependenciesMetadata=function(t,e){var o=this,s=!1,a=r(e)?e:this._reflector.parameters(t);i(a)&&(a=[]);var l=a.map(function(e){var a=!1,c=!1,l=!1,h=!1,p=!1,f=null,d=null,v=null;return u(e)?e.forEach(function(t){t instanceof n.HostMetadata?c=!0:t instanceof n.SelfMetadata?l=!0:t instanceof n.SkipSelfMetadata?h=!0:t instanceof n.OptionalMetadata?p=!0:t instanceof n.AttributeMetadata?(a=!0,v=t.attributeName):t instanceof n.QueryMetadata?t.isViewQuery?d=t:f=t:t instanceof n.InjectMetadata?v=t.token:dr(t)&&i(v)&&(v=t)}):v=e,i(v)?(s=!0,null):new Ho({isAttribute:a,isHost:c,isSelf:l,isSkipSelf:h,isOptional:p,query:r(f)?o.getQueryMetadata(f,null,t):null,viewQuery:r(d)?o.getQueryMetadata(d,null,t):null,token:o.getTokenMetadata(v)})});if(s){var h=l.map(function(t){return t?c(t.token):"?"}).join(", ");throw new Error("Can't resolve all parameters for "+c(t)+": ("+h+").")}return l},t.prototype.getTokenMetadata=function(t){t=n.resolveForwardRef(t);var e;return e=new qo(o(t)?{value:t}:{identifier:new zo({reference:t,name:this.sanitizeTokenName(t),moduleUrl:vr(t)})})},t.prototype.getProvidersMetadata=function(t,e,r){var i=this,o=[];return t.forEach(function(s,a){s=n.resolveForwardRef(s),s&&"object"==typeof s&&s.hasOwnProperty("provide")&&(s=new es(s.provide,s));var l;if(u(s))l=i.getProvidersMetadata(s,e,r);else if(s instanceof es){var h=i.getTokenMetadata(s.token);h.reference===Kt(Ol.ANALYZE_FOR_ENTRY_COMPONENTS).reference?e.push.apply(e,i._getEntryComponentsFromProvider(s)):l=i.getProviderMetadata(s)}else{if(!dr(s)){var p=t.reduce(function(t,e,n){return n<a?t.push(""+c(e)):n==a?t.push("?"+c(e)+"?"):n==a+1&&t.push("..."),t},[]).join(", ");throw new Error("Invalid "+(r?r:"provider")+" - only instances of Provider and Type are allowed, got: ["+p+"]")}l=i.getTypeMetadata(s,vr(s))}l&&o.push(l)}),o},t.prototype._getEntryComponentsFromProvider=function(t){var e=this,n=[],r=[];if(t.useFactory||t.useExisting||t.useClass)throw new Error("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!");if(!t.multi)throw new Error("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!");return yr(t.useValue,r),r.forEach(function(t){var r=e.getDirectiveMetadata(t.reference,!1);r&&n.push(r.type)}),n},t.prototype.getProviderMetadata=function(t){var e,n=null,i=null;return r(t.useClass)?(n=this.getTypeMetadata(t.useClass,vr(t.useClass),t.dependencies),e=n.diDeps):r(t.useFactory)&&(i=this.getFactoryMetadata(t.useFactory,vr(t.useFactory),t.dependencies),e=i.diDeps),new Go({token:this.getTokenMetadata(t.token),useClass:n,useValue:yr(t.useValue,[]),useFactory:i,useExisting:r(t.useExisting)?this.getTokenMetadata(t.useExisting):null,deps:e,multi:t.multi})},t.prototype.getQueriesMetadata=function(t,e,n){var r=this,i=[];return li.forEach(t,function(t,o){t.isViewQuery===e&&i.push(r.getQueryMetadata(t,o,n))}),i},t.prototype.getQueryMetadata=function(t,e,n){var i,o=this;if(t.isVarBindingQuery)i=t.varBindings.map(function(t){return o.getTokenMetadata(t)});else{if(!r(t.selector))throw new Error("Can't construct a query for the property \""+e+'" of "'+c(n)+"\" since the query selector wasn't defined.");i=[this.getTokenMetadata(t.selector)]}return new Yo({selectors:i,first:t.first,descendants:t.descendants,propertyName:e,read:r(t.read)?this.getTokenMetadata(t.read):null})},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:If},{type:Of},{type:Nf},{type:zl},{type:Ac}],t}(),Df=function(t){function e(){t.apply(this,arguments)}return Lf(e,t),e.prototype.visitOther=function(t,e){var n;return n=new zo(F(t)?{name:t.name,moduleUrl:t.filePath,reference:t}:{reference:t}),e.push(n),n},e}(Mo),jf=function(){function t(t,e){this.comp=t,this.placeholder=e}return t}(),Ff=function(){function t(t,e,n){this.statements=t,this.ngModuleFactoryVar=e,this.dependencies=n}return t}(),Uf=function(){function t(){}return t.prototype.compile=function(t,e){var n=r(t.type.moduleUrl)?"in NgModule "+t.type.name+" in "+t.type.moduleUrl:"in NgModule "+t.type.name,i=new Wa("",n),o=new qa(new Ga(i,null,null,null),new Ga(i,null,null,null)),s=[],a=[],u=t.transitiveModule.entryComponents.map(function(e){var n=new zo({name:e.name});return t.bootstrapComponents.indexOf(e)>-1&&a.push(n),s.push(new jf(e,n)),n}),c=new Vf(t,u,a,o),l=new Bl(t,e,o);l.parse().forEach(function(t){return c.addProvider(t)});var h=c.build(),p=t.type.name+"NgFactory",f=_(p).set(w(Yt(Ol.NgModuleFactory)).instantiate([_(h.name),w(t.type)],x(Yt(Ol.NgModuleFactory),[x(t.type)],[ni.Const]))).toDeclStmt(null,[Vi.Final]);return new Ff([h,f],p,s)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[],t}(),Vf=function(){function t(t,e,n,r){this._ngModuleMeta=t,this._entryComponentFactories=e,this._bootstrapComponentFactories=n,this._sourceSpan=r,this._tokens=[],this._instances=new Map,this._fields=[],this._createStmts=[],this._destroyStmts=[],this._getters=[]}return t.prototype.addProvider=function(t){var e=this,n=t.providers.map(function(t){return e._getProviderValue(t)}),r="_"+t.token.name+"_"+this._instances.size,i=this._createProviderProperty(r,t,n,t.multiProvider,t.eager);t.lifecycleHooks.indexOf(Mc.OnDestroy)!==-1&&this._destroyStmts.push(i.callMethod("ngOnDestroy",[]).toStmt()),this._tokens.push(t.token),this._instances.set(t.token.reference,i)},t.prototype.build=function(){var t=this,e=this._tokens.map(function(e){var n=t._instances.get(e.reference);return new yo(zf.token.identical(N(e)),[new lo(n)])}),n=[new fo("createInternal",[],this._createStmts.concat(new lo(this._instances.get(this._ngModuleMeta.type.reference))),x(this._ngModuleMeta.type)),new fo("getInternal",[new Zi(zf.token.name,Ai),new Zi(zf.notFoundResult.name,Ai)],e.concat([new lo(zf.notFoundResult)]),Ai),new fo("destroyInternal",[],this._destroyStmts)],r=new fo(null,[new Zi(Bf.parent.name,x(Yt(Ol.Injector)))],[ro.callFn([_(Bf.parent.name),E(this._entryComponentFactories.map(function(t){return w(t)})),E(this._bootstrapComponentFactories.map(function(t){return w(t)}))]).toStmt()]),i=this._ngModuleMeta.type.name+"Injector";return new mo(i,w(Yt(Ol.NgModuleInjector),[x(this._ngModuleMeta.type)]),this._fields,this._getters,r,n)},t.prototype._getProviderValue=function(t){var e,n=this;if(r(t.useExisting))e=this._getDependency(new Ho({token:t.useExisting}));else if(r(t.useFactory)){var i=r(t.deps)?t.deps:t.useFactory.diDeps,o=i.map(function(t){return n._getDependency(t)});e=w(t.useFactory).callFn(o)}else if(r(t.useClass)){var i=r(t.deps)?t.deps:t.useClass.diDeps,o=i.map(function(t){return n._getDependency(t)});e=w(t.useClass).instantiate(o,x(t.useClass))}else e=De(t.useValue);return e},t.prototype._createProviderProperty=function(t,e,n,r,o){var s,a;if(r?(s=E(n),a=new Mi(Ai)):(s=n[0],a=n[0].type),i(a)&&(a=Ai),o)this._fields.push(new po(t,a)),this._createStmts.push(no.prop(t).set(s).toStmt());else{var u="_"+t;this._fields.push(new po(u,a));var c=[new yo(no.prop(u).isBlank(),[no.prop(u).set(s).toStmt()]),new lo(no.prop(u))];this._getters.push(new vo(t,c,a))}return no.prop(t)},t.prototype._getDependency=function(t){var e=null;if(t.isValue&&(e=C(t.value)),t.isSkipSelf||(!t.token||t.token.reference!==Kt(Ol.Injector).reference&&t.token.reference!==Kt(Ol.ComponentFactoryResolver).reference||(e=no),i(e)&&(e=this._instances.get(t.token.reference))),i(e)){var n=[N(t.token)];t.isOptional&&n.push(io),e=Bf.parent.callMethod("get",n)}return e},t}(),Bf=function(){function t(){}return t.parent=no.prop("parent"),t}(),zf=function(){function t(){}return t.token=_("token"),t.notFoundResult=_("notFoundResult"),t}(),Hf=/'|\\|\n|\r|\$/g,Gf=/^[$A-Z_][0-9A-Z_$]*$/i,Wf=_("error"),qf=_("stack"),Xf=function(){function t(t){this.indent=t,this.parts=[]}return t}(),Yf=function(){function t(t,e){this._exportedVars=t,this._indent=e,this._classes=[],this._lines=[new Xf(e)]}return t.createRoot=function(e){return new t(e,0)},Object.defineProperty(t.prototype,"_currentLine",{get:function(){return this._lines[this._lines.length-1]},enumerable:!0,configurable:!0}),t.prototype.isExportedVar=function(t){return this._exportedVars.indexOf(t)!==-1},t.prototype.println=function(t){void 0===t&&(t=""),this.print(t,!0)},t.prototype.lineIsEmpty=function(){return 0===this._currentLine.parts.length},t.prototype.print=function(t,e){void 0===e&&(e=!1),t.length>0&&this._currentLine.parts.push(t),e&&this._lines.push(new Xf(this._indent))},t.prototype.removeEmptyLastLine=function(){this.lineIsEmpty()&&this._lines.pop()},t.prototype.incIndent=function(){this._indent++,this._currentLine.indent=this._indent},t.prototype.decIndent=function(){this._indent--,this._currentLine.indent=this._indent},t.prototype.pushClass=function(t){this._classes.push(t)},t.prototype.popClass=function(){return this._classes.pop()},Object.defineProperty(t.prototype,"currentClass",{get:function(){return this._classes.length>0?this._classes[this._classes.length-1]:null},enumerable:!0,configurable:!0}),t.prototype.toSource=function(){var t=this._lines;return 0===t[t.length-1].parts.length&&(t=t.slice(0,t.length-1)),t.map(function(t){return t.parts.length>0?br(t.indent)+t.parts.join(""):""}).join("\n")},t}(),Zf=function(){function t(t){this._escapeDollarInStrings=t}return t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e),e.println(";"),null},t.prototype.visitReturnStmt=function(t,e){return e.print("return "),t.value.visitExpression(this,e),e.println(";"),null},t.prototype.visitIfStmt=function(t,e){e.print("if ("),t.condition.visitExpression(this,e),e.print(") {");var n=r(t.falseCase)&&t.falseCase.length>0;return t.trueCase.length<=1&&!n?(e.print(" "),this.visitAllStatements(t.trueCase,e),e.removeEmptyLastLine(),e.print(" ")):(e.println(),e.incIndent(),this.visitAllStatements(t.trueCase,e),e.decIndent(),n&&(e.println("} else {"),e.incIndent(),this.visitAllStatements(t.falseCase,e),e.decIndent())),e.println("}"),null},t.prototype.visitThrowStmt=function(t,e){return e.print("throw "),t.error.visitExpression(this,e),e.println(";"),null},t.prototype.visitCommentStmt=function(t,e){var n=t.comment.split("\n");return n.forEach(function(t){e.println("// "+t)}),null},t.prototype.visitWriteVarExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),e.print(t.name+" = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitWriteKeyExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),t.receiver.visitExpression(this,e),e.print("["),t.index.visitExpression(this,e),e.print("] = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitWritePropExpr=function(t,e){var n=e.lineIsEmpty();return n||e.print("("),t.receiver.visitExpression(this,e),e.print("."+t.name+" = "),t.value.visitExpression(this,e),n||e.print(")"),null},t.prototype.visitInvokeMethodExpr=function(t,e){t.receiver.visitExpression(this,e);var n=t.name;return r(t.builtin)&&(n=this.getBuiltinMethodName(t.builtin),i(n))?null:(e.print("."+n+"("),this.visitAllExpressions(t.args,e,","),e.print(")"),null)},t.prototype.visitInvokeFunctionExpr=function(t,e){return t.fn.visitExpression(this,e),e.print("("),this.visitAllExpressions(t.args,e,","),e.print(")"),null},t.prototype.visitReadVarExpr=function(t,e){var n=t.name;if(r(t.builtin))switch(t.builtin){case Ni.Super:n="super";break;case Ni.This:n="this";break;case Ni.CatchError:n=Wf.name;break;case Ni.CatchStack:n=qf.name;break;default:throw new Error("Unknown builtin variable "+t.builtin)}return e.print(n),null},t.prototype.visitInstantiateExpr=function(t,e){return e.print("new "),t.classExpr.visitExpression(this,e),e.print("("),this.visitAllExpressions(t.args,e,","),e.print(")"),null},t.prototype.visitLiteralExpr=function(t,e,n){void 0===n&&(n="null");var r=t.value;return o(r)?e.print(gr(r,this._escapeDollarInStrings)):i(r)?e.print(n):e.print(""+r),null},t.prototype.visitConditionalExpr=function(t,e){return e.print("("),t.condition.visitExpression(this,e),e.print("? "),t.trueCase.visitExpression(this,e),e.print(": "),t.falseCase.visitExpression(this,e),e.print(")"),null},t.prototype.visitNotExpr=function(t,e){return e.print("!"),t.condition.visitExpression(this,e),null},t.prototype.visitBinaryOperatorExpr=function(t,e){var n;switch(t.operator){case Ei.Equals:n="==";break;case Ei.Identical:n="===";break;case Ei.NotEquals:n="!=";break;case Ei.NotIdentical:n="!==";break;case Ei.And:n="&&";break;case Ei.Or:n="||";break;case Ei.Plus:n="+";break;case Ei.Minus:n="-";break;case Ei.Divide:n="/";break;case Ei.Multiply:n="*";break;case Ei.Modulo:n="%";break;case Ei.Lower:n="<";break;case Ei.LowerEquals:n="<=";break;case Ei.Bigger:n=">";break;case Ei.BiggerEquals:n=">=";break;default:throw new Error("Unknown operator "+t.operator)}return e.print("("),t.lhs.visitExpression(this,e),e.print(" "+n+" "),t.rhs.visitExpression(this,e),e.print(")"),null},t.prototype.visitReadPropExpr=function(t,e){return t.receiver.visitExpression(this,e),e.print("."),e.print(t.name),null},t.prototype.visitReadKeyExpr=function(t,e){return t.receiver.visitExpression(this,e),e.print("["),t.index.visitExpression(this,e),e.print("]"),null},t.prototype.visitLiteralArrayExpr=function(t,e){var n=t.entries.length>1;return e.print("[",n),e.incIndent(),this.visitAllExpressions(t.entries,e,",",n),e.decIndent(),e.print("]",n),null},t.prototype.visitLiteralMapExpr=function(t,e){var n=this,r=t.entries.length>1;return e.print("{",r),e.incIndent(),this.visitAllObjects(function(t){e.print(gr(t[0],n._escapeDollarInStrings,!1)+": "),t[1].visitExpression(n,e)},t.entries,e,",",r),e.decIndent(),e.print("}",r),null},t.prototype.visitAllExpressions=function(t,e,n,r){var i=this;void 0===r&&(r=!1),this.visitAllObjects(function(t){return t.visitExpression(i,e)},t,e,n,r)},t.prototype.visitAllObjects=function(t,e,n,r,i){void 0===i&&(i=!1);for(var o=0;o<e.length;o++)o>0&&n.print(r,i),t(e[o]);i&&n.println()},t.prototype.visitAllStatements=function(t,e){var n=this;t.forEach(function(t){return t.visitStatement(n,e)})},t}(),Kf=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Qf="asset://debug/lib",Jf=function(){function t(t){this._importGenerator=t}return t.prototype.emitStatements=function(t,e,n){var r=this,i=new $f(t),o=Yf.createRoot(n);i.visitAllStatements(e,o);var s=[];return i.importsWithPrefixes.forEach(function(e,n){s.push("imp"+("ort * as "+e+" from '"+r._importGenerator.getImportPath(t,n)+"';"))}),s.push(o.toSource()),s.join("\n")},t}(),$f=function(t){function e(e){t.call(this,!1),this._moduleUrl=e,this.importsWithPrefixes=new Map}return Kf(e,t),e.prototype.visitType=function(t,e,n){void 0===n&&(n="any"),r(t)?t.visitType(this,e):e.print(n)},e.prototype.visitLiteralExpr=function(e,n){t.prototype.visitLiteralExpr.call(this,e,n,"(null as any)")},e.prototype.visitExternalExpr=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitDeclareVarStmt=function(t,e){return e.isExportedVar(t.name)&&e.print("export "),t.hasModifier(Vi.Final)?e.print("const"):e.print("var"),e.print(" "+t.name+":"),this.visitType(t.type,e),e.print(" = "),t.value.visitExpression(this,e),e.println(";"),null},e.prototype.visitCastExpr=function(t,e){return e.print("(<"),t.type.visitType(this,e),e.print(">"),t.value.visitExpression(this,e),e.print(")"),null},e.prototype.visitDeclareClassStmt=function(t,e){var n=this;return e.pushClass(t),e.isExportedVar(t.name)&&e.print("export "),e.print("class "+t.name),r(t.parent)&&(e.print(" extends "),t.parent.visitExpression(this,e)),e.println(" {"),e.incIndent(),t.fields.forEach(function(t){return n._visitClassField(t,e)}),r(t.constructorMethod)&&this._visitClassConstructor(t,e),t.getters.forEach(function(t){return n._visitClassGetter(t,e)}),t.methods.forEach(function(t){return n._visitClassMethod(t,e)}),e.decIndent(),e.println("}"),e.popClass(),null},e.prototype._visitClassField=function(t,e){t.hasModifier(Vi.Private)&&e.print("/*private*/ "),e.print(t.name),e.print(":"),this.visitType(t.type,e),e.println(";")},e.prototype._visitClassGetter=function(t,e){t.hasModifier(Vi.Private)&&e.print("private "),e.print("get "+t.name+"()"),e.print(":"),this.visitType(t.type,e),e.println(" {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype._visitClassConstructor=function(t,e){e.print("constructor("),this._visitParams(t.constructorMethod.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.constructorMethod.body,e),e.decIndent(),e.println("}")},e.prototype._visitClassMethod=function(t,e){t.hasModifier(Vi.Private)&&e.print("private "),e.print(t.name+"("),this._visitParams(t.params,e),e.print("):"),this.visitType(t.type,e,"void"),e.println(" {"),e.incIndent(),this.visitAllStatements(t.body,e),e.decIndent(),e.println("}")},e.prototype.visitFunctionExpr=function(t,e){return e.print("("),this._visitParams(t.params,e),e.print("):"),this.visitType(t.type,e,"void"),e.println(" => {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.print("}"),null},e.prototype.visitDeclareFunctionStmt=function(t,e){return e.isExportedVar(t.name)&&e.print("export "),e.print("function "+t.name+"("),this._visitParams(t.params,e),e.print("):"),this.visitType(t.type,e,"void"),e.println(" {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.println("}"),null},e.prototype.visitTryCatchStmt=function(t,e){e.println("try {"),e.incIndent(),this.visitAllStatements(t.bodyStmts,e),e.decIndent(),e.println("} catch ("+Wf.name+") {"),e.incIndent();var n=[qf.set(Wf.prop("stack")).toDeclStmt(null,[Vi.Final])].concat(t.catchStmts);return this.visitAllStatements(n,e),e.decIndent(),e.println("}"),null},e.prototype.visitBuiltintType=function(t,e){var n;switch(t.name){case wi.Bool:n="boolean";break;case wi.Dynamic:n="any";break;case wi.Function:n="Function";break;case wi.Number:n="number";break;case wi.Int:n="number";break;case wi.String:n="string";break;default:throw new Error("Unsupported builtin type "+t.name)}return e.print(n),null},e.prototype.visitExternalType=function(t,e){return this._visitIdentifier(t.value,t.typeParams,e),null},e.prototype.visitArrayType=function(t,e){return this.visitType(t.of,e),e.print("[]"),null},e.prototype.visitMapType=function(t,e){return e.print("{[key: string]:"),this.visitType(t.valueType,e),e.print("}"),null},e.prototype.getBuiltinMethodName=function(t){var e;switch(t){case ki.ConcatArray:e="concat";break;case ki.SubscribeObservable:e="subscribe";break;case ki.Bind:e="bind";break;default:throw new Error("Unknown builtin method: "+t)}return e},e.prototype._visitParams=function(t,e){var n=this;this.visitAllObjects(function(t){e.print(t.name),e.print(":"),n.visitType(t.type,e)},t,e,",")},e.prototype._visitIdentifier=function(t,e,n){var o=this;if(i(t.name))throw new Error("Internal error: unknown identifier "+t);if(r(t.moduleUrl)&&t.moduleUrl!=this._moduleUrl){var s=this.importsWithPrefixes.get(t.moduleUrl);i(s)&&(s="import"+this.importsWithPrefixes.size,this.importsWithPrefixes.set(t.moduleUrl,s)),n.print(s+".")}t.reference&&t.reference.members?(n.print(t.reference.name),n.print("."),n.print(t.reference.members.join("."))):n.print(t.name),r(e)&&e.length>0&&(n.print("<"),this.visitAllObjects(function(t){return t.visitType(o,n)},e,n,","),n.print(">"))},e}(Zf),td=function(){function t(t,e,n,r){this.parent=t,this.instance=e,this.className=n,this.vars=r}return t.prototype.createChildWihtLocalVars=function(){return new t(this,this.instance,this.className,new Map)},t}(),ed=function(){function t(t){this.value=t}return t}(),nd=function(){function t(){}return t.prototype.debugAst=function(t){return _r(t)},t.prototype.visitDeclareVarStmt=function(t,e){return e.vars.set(t.name,t.value.visitExpression(this,e)),null},t.prototype.visitWriteVarExpr=function(t,e){for(var n=t.value.visitExpression(this,e),r=e;null!=r;){if(r.vars.has(t.name))return r.vars.set(t.name,n),n;r=r.parent}throw new Error("Not declared variable "+t.name)},t.prototype.visitReadVarExpr=function(t,e){var n=t.name;if(r(t.builtin))switch(t.builtin){case Ni.Super:return e.instance.__proto__;case Ni.This:return e.instance;case Ni.CatchError:n=rd;break;case Ni.CatchStack:n=id;break;default:throw new Error("Unknown builtin variable "+t.builtin)}for(var i=e;null!=i;){if(i.vars.has(n))return i.vars.get(n);i=i.parent}throw new Error("Not declared variable "+n)},t.prototype.visitWriteKeyExpr=function(t,e){var n=t.receiver.visitExpression(this,e),r=t.index.visitExpression(this,e),i=t.value.visitExpression(this,e);return n[r]=i,i},t.prototype.visitWritePropExpr=function(t,e){var n=t.receiver.visitExpression(this,e),r=t.value.visitExpression(this,e);return n[t.name]=r,r},t.prototype.visitInvokeMethodExpr=function(t,e){var n,i=t.receiver.visitExpression(this,e),o=this.visitAllExpressions(t.args,e);if(r(t.builtin))switch(t.builtin){case ki.ConcatArray:n=hi.concat(i,o[0]);break;case ki.SubscribeObservable:n=i.subscribe({next:o[0]});break;case ki.Bind:n=i.bind(o[0]);break;default:throw new Error("Unknown builtin method "+t.builtin)}else n=i[t.name].apply(i,o);return n},t.prototype.visitInvokeFunctionExpr=function(t,e){var n=this.visitAllExpressions(t.args,e),r=t.fn;if(r instanceof Di&&r.builtin===Ni.Super)return e.instance.constructor.prototype.constructor.apply(e.instance,n),null;var i=t.fn.visitExpression(this,e);return i.apply(null,n)},t.prototype.visitReturnStmt=function(t,e){return new ed(t.value.visitExpression(this,e))},t.prototype.visitDeclareClassStmt=function(t,e){var n=Er(t,e,this);return e.vars.set(t.name,n),null},t.prototype.visitExpressionStmt=function(t,e){return t.expr.visitExpression(this,e)},t.prototype.visitIfStmt=function(t,e){var n=t.condition.visitExpression(this,e);return n?this.visitAllStatements(t.trueCase,e):r(t.falseCase)?this.visitAllStatements(t.falseCase,e):null},t.prototype.visitTryCatchStmt=function(t,e){try{return this.visitAllStatements(t.bodyStmts,e)}catch(n){var r=e.createChildWihtLocalVars();return r.vars.set(rd,n),r.vars.set(id,n.stack),this.visitAllStatements(t.catchStmts,r)}},t.prototype.visitThrowStmt=function(t,e){throw t.error.visitExpression(this,e)},t.prototype.visitCommentStmt=function(t,e){return null},t.prototype.visitInstantiateExpr=function(t,e){var n=this.visitAllExpressions(t.args,e),r=t.classExpr.visitExpression(this,e);return new(r.bind.apply(r,[void 0].concat(n)))},t.prototype.visitLiteralExpr=function(t,e){return t.value},t.prototype.visitExternalExpr=function(t,e){return t.value.reference},t.prototype.visitConditionalExpr=function(t,e){return t.condition.visitExpression(this,e)?t.trueCase.visitExpression(this,e):r(t.falseCase)?t.falseCase.visitExpression(this,e):null},t.prototype.visitNotExpr=function(t,e){return!t.condition.visitExpression(this,e)},t.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e)},t.prototype.visitFunctionExpr=function(t,e){var n=t.params.map(function(t){return t.name});return Sr(n,t.statements,e,this)},t.prototype.visitDeclareFunctionStmt=function(t,e){var n=t.params.map(function(t){return t.name});return e.vars.set(t.name,Sr(n,t.statements,e,this)),null},t.prototype.visitBinaryOperatorExpr=function(t,e){var n=this,r=function(){return t.lhs.visitExpression(n,e)},i=function(){return t.rhs.visitExpression(n,e)};switch(t.operator){case Ei.Equals:return r()==i();case Ei.Identical:return r()===i();case Ei.NotEquals:return r()!=i();case Ei.NotIdentical:return r()!==i();case Ei.And:return r()&&i();case Ei.Or:return r()||i();case Ei.Plus:return r()+i();case Ei.Minus:return r()-i();case Ei.Divide:return r()/i();case Ei.Multiply:return r()*i();case Ei.Modulo:return r()%i();case Ei.Lower:return r()<i();case Ei.LowerEquals:return r()<=i();case Ei.Bigger:return r()>i();case Ei.BiggerEquals:return r()>=i();default:throw new Error("Unknown operator "+t.operator)}},
t.prototype.visitReadPropExpr=function(t,e){var n,r=t.receiver.visitExpression(this,e);return n=r[t.name]},t.prototype.visitReadKeyExpr=function(t,e){var n=t.receiver.visitExpression(this,e),r=t.index.visitExpression(this,e);return n[r]},t.prototype.visitLiteralArrayExpr=function(t,e){return this.visitAllExpressions(t.entries,e)},t.prototype.visitLiteralMapExpr=function(t,e){var n=this,r={};return t.entries.forEach(function(t){return r[t[0]]=t[1].visitExpression(n,e)}),r},t.prototype.visitAllExpressions=function(t,e){var n=this;return t.map(function(t){return t.visitExpression(n,e)})},t.prototype.visitAllStatements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.visitStatement(this,e);if(i instanceof ed)return i}return null},t}(),rd="error",id="stack",od=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},sd=function(t){function e(){t.call(this,!1)}return od(e,t),e.prototype.visitDeclareClassStmt=function(t,e){var n=this;return e.pushClass(t),this._visitClassConstructor(t,e),r(t.parent)&&(e.print(t.name+".prototype = Object.create("),t.parent.visitExpression(this,e),e.println(".prototype);")),t.getters.forEach(function(r){return n._visitClassGetter(t,r,e)}),t.methods.forEach(function(r){return n._visitClassMethod(t,r,e)}),e.popClass(),null},e.prototype._visitClassConstructor=function(t,e){e.print("function "+t.name+"("),r(t.constructorMethod)&&this._visitParams(t.constructorMethod.params,e),e.println(") {"),e.incIndent(),r(t.constructorMethod)&&t.constructorMethod.body.length>0&&(e.println("var self = this;"),this.visitAllStatements(t.constructorMethod.body,e)),e.decIndent(),e.println("}")},e.prototype._visitClassGetter=function(t,e,n){n.println("Object.defineProperty("+t.name+".prototype, '"+e.name+"', { get: function() {"),n.incIndent(),e.body.length>0&&(n.println("var self = this;"),this.visitAllStatements(e.body,n)),n.decIndent(),n.println("}});")},e.prototype._visitClassMethod=function(t,e,n){n.print(t.name+".prototype."+e.name+" = function("),this._visitParams(e.params,n),n.println(") {"),n.incIndent(),e.body.length>0&&(n.println("var self = this;"),this.visitAllStatements(e.body,n)),n.decIndent(),n.println("};")},e.prototype.visitReadVarExpr=function(e,n){if(e.builtin===Ni.This)n.print("self");else{if(e.builtin===Ni.Super)throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");t.prototype.visitReadVarExpr.call(this,e,n)}return null},e.prototype.visitDeclareVarStmt=function(t,e){return e.print("var "+t.name+" = "),t.value.visitExpression(this,e),e.println(";"),null},e.prototype.visitCastExpr=function(t,e){return t.value.visitExpression(this,e),null},e.prototype.visitInvokeFunctionExpr=function(e,n){var r=e.fn;return r instanceof Di&&r.builtin===Ni.Super?(n.currentClass.parent.visitExpression(this,n),n.print(".call(this"),e.args.length>0&&(n.print(", "),this.visitAllExpressions(e.args,n,",")),n.print(")")):t.prototype.visitInvokeFunctionExpr.call(this,e,n),null},e.prototype.visitFunctionExpr=function(t,e){return e.print("function("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.print("}"),null},e.prototype.visitDeclareFunctionStmt=function(t,e){return e.print("function "+t.name+"("),this._visitParams(t.params,e),e.println(") {"),e.incIndent(),this.visitAllStatements(t.statements,e),e.decIndent(),e.println("}"),null},e.prototype.visitTryCatchStmt=function(t,e){e.println("try {"),e.incIndent(),this.visitAllStatements(t.bodyStmts,e),e.decIndent(),e.println("} catch ("+Wf.name+") {"),e.incIndent();var n=[qf.set(Wf.prop("stack")).toDeclStmt(null,[Vi.Final])].concat(t.catchStmts);return this.visitAllStatements(n,e),e.decIndent(),e.println("}"),null},e.prototype._visitParams=function(t,e){this.visitAllObjects(function(t){return e.print(t.name)},t,e,",")},e.prototype.getBuiltinMethodName=function(t){var e;switch(t){case ki.ConcatArray:e="concat";break;case ki.SubscribeObservable:e="subscribe";break;case ki.Bind:e="bind";break;default:throw new Error("Unknown builtin method: "+t)}return e},e}(Zf),ad=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ud=function(t){function e(){t.apply(this,arguments),this._evalArgNames=[],this._evalArgValues=[]}return ad(e,t),e.prototype.getArgs=function(){for(var t={},e=0;e<this._evalArgNames.length;e++)t[this._evalArgNames[e]]=this._evalArgValues[e];return t},e.prototype.visitExternalExpr=function(t,e){var n=t.value.reference,i=this._evalArgValues.indexOf(n);if(i===-1){i=this._evalArgValues.length,this._evalArgValues.push(n);var o=r(t.value.name)?P(t.value.name):"val";this._evalArgNames.push(P("jit_"+o+i))}return e.print(this._evalArgNames[i]),null},e}(sd),cd=function(){function t(){this.strictStyling=!0}return t.prototype.shimCssText=function(t,e,n){void 0===n&&(n="");var r=Cr(t);return t=Mr(t),t=this._insertDirectives(t),this._scopeCssText(t,e,n)+r},t.prototype._insertDirectives=function(t){return t=this._insertPolyfillDirectivesInCssText(t),this._insertPolyfillRulesInCssText(t)},t.prototype._insertPolyfillDirectivesInCssText=function(t){return Vr.replaceAllMapped(t,ld,function(t){return t[1]+"{"})},t.prototype._insertPolyfillRulesInCssText=function(t){return Vr.replaceAllMapped(t,hd,function(t){var e=t[0];return e=Vr.replace(e,t[1],""),e=Vr.replace(e,t[2],""),t[3]+e})},t.prototype._scopeCssText=function(t,e,n){var i=this._extractUnscopedRulesFromCssText(t);return t=this._insertPolyfillHostInCssText(t),t=this._convertColonHost(t),t=this._convertColonHostContext(t),t=this._convertShadowDOMSelectors(t),r(e)&&(t=this._scopeSelectors(t,e,n)),t=t+"\n"+i,t.trim()},t.prototype._extractUnscopedRulesFromCssText=function(t){var e,n="";for(pd.lastIndex=0;null!==(e=pd.exec(t));){var r=e[0];r=Vr.replace(r,e[2],""),r=Vr.replace(r,e[1],e[3]),n+=r+"\n\n"}return n},t.prototype._convertColonHost=function(t){return this._convertColonRule(t,md,this._colonHostPartReplacer)},t.prototype._convertColonHostContext=function(t){return this._convertColonRule(t,yd,this._colonHostContextPartReplacer)},t.prototype._convertColonRule=function(t,e,n){return Vr.replaceAllMapped(t,e,function(t){if(r(t[2])){for(var e=t[2].split(","),o=[],s=0;s<e.length;s++){var a=e[s];if(i(a))break;a=a.trim(),o.push(n(gd,a,t[3]))}return o.join(",")}return gd+t[3]})},t.prototype._colonHostContextPartReplacer=function(t,e,n){return Vr.contains(e,fd)?this._colonHostPartReplacer(t,e,n):t+e+n+", "+e+" "+t+n},t.prototype._colonHostPartReplacer=function(t,e,n){return t+Vr.replace(e,fd,"")+n},t.prototype._convertShadowDOMSelectors=function(t){return bd.reduce(function(t,e){return Vr.replaceAll(t,e," ")},t)},t.prototype._scopeSelectors=function(t,e,n){var r=this;return Ar(t,function(t){var i=t.selector,o=t.content;return"@"!=t.selector[0]||t.selector.startsWith("@page")?i=r._scopeSelector(t.selector,e,n,r.strictStyling):(t.selector.startsWith("@media")||t.selector.startsWith("@supports"))&&(o=r._scopeSelectors(t.content,e,n)),new Id(i,o)})},t.prototype._scopeSelector=function(t,e,n,r){var i=this;return t.split(",").map(function(t){return t.trim().split(_d)}).map(function(t){var o=t[0],s=t.slice(1),a=function(t){return i._selectorNeedsScoping(t,e)?r?i._applyStrictSelectorScope(t,e,n):i._applySelectorScope(t,e,n):t};return[a(o)].concat(s).join(" ")}).join(", ")},t.prototype._selectorNeedsScoping=function(t,e){var n=this._makeScopeMatcher(e);return!n.test(t)},t.prototype._makeScopeMatcher=function(t){var e=/\[/g,n=/\]/g;return t=Vr.replaceAll(t,e,"\\["),t=Vr.replaceAll(t,n,"\\]"),new RegExp("^("+t+")"+wd,"m")},t.prototype._applySelectorScope=function(t,e,n){return this._applySimpleSelectorScope(t,e,n)},t.prototype._applySimpleSelectorScope=function(t,e,n){if(xd.lastIndex=0,xd.test(t)){var r=this.strictStyling?"["+n+"]":e;return t=Vr.replace(t,gd,r),Vr.replaceAll(t,xd,r+" ")}return e+" "+t},t.prototype._applyStrictSelectorScope=function(t,e,n){var r=this,i=/\[is=([^\]]*)\]/g;e=e.replace(i,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e[0]});for(var o,s="["+e+"]",a=function(t){var i=t.trim();if(0==i.length)return"";if(t.indexOf(gd)>-1)i=r._applySimpleSelectorScope(t,e,n);else{var o=t.replace(xd,"");if(o.length>0){var a=o.match(/([^:]*)(:*)(.*)/);null!==a&&(i=a[1]+s+a[2]+a[3])}}return i},u=/( |>|\+|~)\s*/g,c=t.indexOf(gd),l="",h=0;null!==(o=u.exec(t));){var p=o[1],f=t.slice(h,o.index).trim(),d=h>=c?a(f):f;l+=d+" "+p+" ",h=u.lastIndex}return l+a(t.substring(h))},t.prototype._insertPolyfillHostInCssText=function(t){return t.replace(Sd,dd).replace(Ed,fd)},t}(),ld=/polyfill-next-selector[^}]*content:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,hd=/(polyfill-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,pd=/(polyfill-unscoped-rule)[^}]*(content:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,fd="-shadowcsshost",dd="-shadowcsscontext",vd=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",md=new RegExp("("+fd+vd,"gim"),yd=new RegExp("("+dd+vd,"gim"),gd=fd+"-no-combinator",bd=[/::shadow/g,/::content/g,/\/shadow-deep\//g,/\/shadow\//g],_d=/(?:>>>)|(?:\/deep\/)/g,wd="([>\\s~+[.,{:][\\s\\S]*)?$",xd=/-shadowcsshost/gim,Ed=/:host/gim,Sd=/:host-context/gim,Td=/\/\*\s*[\s\S]*?\*\//g,Md=/[\s\S]*(\/\*\s*#\s*sourceMappingURL=[\s\S]+?\*\/)\s*$/,Cd=/(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g,Ad=/([{}])/g,Od="{",Pd="}",Rd="%BLOCK%",Id=function(){function t(t,e){this.selector=t,this.content=e}return t}(),Nd=function(){function t(t,e){this.escapedString=t,this.blocks=e}return t}(),Ld="%COMP%",kd="_nghost-"+Ld,Dd="_ngcontent-"+Ld,jd=function(){function t(t,e,n){this.moduleUrl=t,this.isShimmed=e,this.valuePlaceholder=n}return t}(),Fd=function(){function t(t,e){this.componentStylesheet=t,this.externalStylesheets=e}return t}(),Ud=function(){function t(t,e,n,r,i){this.statements=t,this.stylesVar=e,this.dependencies=n,this.isShimmed=r,this.meta=i}return t}(),Vd=function(){function t(t){this._urlResolver=t,this._shadowCss=new cd}return t.prototype.compileComponent=function(t){var e=this,n=[],r=this._compileStyles(t,new Zo({styles:t.template.styles,styleUrls:t.template.styleUrls,moduleUrl:t.type.moduleUrl}),!0);return t.template.externalStylesheets.forEach(function(r){var i=e._compileStyles(t,r,!1);n.push(i)}),new Fd(r,n)},t.prototype._compileStyles=function(t,e,r){for(var i=this,o=t.template.encapsulation===n.ViewEncapsulation.Emulated,s=e.styles.map(function(t){return C(i._shimIfNeeded(t,o))}),a=[],u=0;u<e.styleUrls.length;u++){var c=new zo({name:Pr(null)});a.push(new jd(e.styleUrls[u],o,c)),s.push(new Wi(c))}var l=Pr(r?t:null),h=_(l).set(E(s,new Mi(Ai,[ni.Const]))).toDeclStmt(null,[Vi.Final]);return new Ud([h],l,a,o,e)},t.prototype._shimIfNeeded=function(t,e){return e?this._shadowCss.shimCssText(t,Dd,kd):t},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Tf}],t}(),Bd=function(){function t(t,e,n,r,i,o,s,a){this._injector=t,this._metadataResolver=e,this._templateNormalizer=n,this._templateParser=r,this._styleCompiler=i,this._viewCompiler=o,this._ngModuleCompiler=s,this._compilerConfig=a,this._compiledTemplateCache=new Map,this._compiledHostTemplateCache=new Map,this._compiledNgModuleCache=new Map}return Object.defineProperty(t.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),t.prototype.compileModuleSync=function(t){return this._compileModuleAndComponents(t,!0).syncResult},t.prototype.compileModuleAsync=function(t){return this._compileModuleAndComponents(t,!1).asyncResult},t.prototype.compileModuleAndAllComponentsSync=function(t){return this._compileModuleAndAllComponents(t,!0).syncResult},t.prototype.compileModuleAndAllComponentsAsync=function(t){return this._compileModuleAndAllComponents(t,!1).asyncResult},t.prototype._compileModuleAndComponents=function(t,e){var n=this._compileComponents(t,e),r=this._compileModule(t);return new Co(r,n.then(function(){return r}))},t.prototype._compileModuleAndAllComponents=function(t,e){var r=this,i=this._compileComponents(t,e),o=this._compileModule(t),s=this._metadataResolver.getNgModuleMetadata(t),a=[],u=new Set;s.transitiveModule.modules.forEach(function(t){t.declaredDirectives.forEach(function(t){if(t.isComponent){var e=r._createCompiledHostTemplate(t.type.reference);u.add(e),a.push(e.proxyComponentFactory)}})});var c=new n.ModuleWithComponentFactories(o,a),l=function(){return u.forEach(function(t){r._compileTemplate(t)}),c},h=e?Promise.resolve(l()):i.then(l);return new Co(c,h)},t.prototype._compileModule=function(t){var e=this,r=this._compiledNgModuleCache.get(t);if(!r){var i=this._metadataResolver.getNgModuleMetadata(t),o=[this._metadataResolver.getProviderMetadata(new es(n.Compiler,{useFactory:function(){return new Hd(e,i.type.reference)}}))],s=this._ngModuleCompiler.compile(i,o);s.dependencies.forEach(function(t){t.placeholder.reference=e._assertComponentKnown(t.comp.reference,!0).proxyComponentFactory,t.placeholder.name="compFactory_"+t.comp.name}),r=this._compilerConfig.useJit?Tr(i.type.name+".ngfactory.js",s.statements,s.ngModuleFactoryVar):wr(s.statements,s.ngModuleFactoryVar),this._compiledNgModuleCache.set(i.type.reference,r)}return r},t.prototype._compileComponents=function(t,e){var n=this,r=new Set,i=[],o=this._metadataResolver.getNgModuleMetadata(t);o.transitiveModule.modules.forEach(function(t){t.declaredDirectives.forEach(function(e){e.isComponent&&(r.add(n._createCompiledTemplate(e,t)),e.entryComponents.forEach(function(t){r.add(n._createCompiledHostTemplate(t.reference))}))}),t.entryComponents.forEach(function(t){r.add(n._createCompiledHostTemplate(t.reference))})}),r.forEach(function(t){if(t.loading){if(e)throw new Sl(t.compType.reference);i.push(t.loading)}});var s=function(){r.forEach(function(t){n._compileTemplate(t)})};return e?(s(),Promise.resolve(null)):Promise.all(i).then(s)},t.prototype.clearCacheFor=function(t){this._compiledNgModuleCache.delete(t),this._metadataResolver.clearCacheFor(t),this._compiledHostTemplateCache.delete(t);var e=this._compiledTemplateCache.get(t);e&&(this._templateNormalizer.clearCacheFor(e.normalizedCompMeta),this._compiledTemplateCache.delete(t))},t.prototype.clearCache=function(){this._metadataResolver.clearCache(),this._compiledTemplateCache.clear(),this._compiledHostTemplateCache.clear(),this._templateNormalizer.clearCache(),this._compiledNgModuleCache.clear()},t.prototype._createCompiledHostTemplate=function(t){var e=this._compiledHostTemplateCache.get(t);if(i(e)){var n=this._metadataResolver.getDirectiveMetadata(t);Rr(n);var r=k(n);e=new zd((!0),n.selector,n.type,[n],[],[],this._templateNormalizer.normalizeDirective(r)),this._compiledHostTemplateCache.set(t,e)}return e},t.prototype._createCompiledTemplate=function(t,e){var n=this._compiledTemplateCache.get(t.type.reference);return i(n)&&(Rr(t),n=new zd((!1),t.selector,t.type,e.transitiveModule.directives,e.transitiveModule.pipes,e.schemas,this._templateNormalizer.normalizeDirective(t)),this._compiledTemplateCache.set(t.type.reference,n)),n},t.prototype._assertComponentKnown=function(t,e){var n=e?this._compiledHostTemplateCache.get(t):this._compiledTemplateCache.get(t);if(!n)throw e?new Error("Illegal state: Compiled view for component "+c(t)+" does not exist!"):new Error("Component "+c(t)+" is not part of any NgModule or the module has not been imported into your module.");return n},t.prototype._assertComponentLoaded=function(t,e){var n=this._assertComponentKnown(t,e);if(n.loading)throw new Error("Illegal state: CompiledTemplate for "+c(t)+" (isHost: "+e+") is still loading!");return n},t.prototype._compileTemplate=function(t){var e=this;if(!t.isCompiled){var n=t.normalizedCompMeta,r=new Map,i=this._styleCompiler.compileComponent(n);i.externalStylesheets.forEach(function(t){r.set(t.meta.moduleUrl,t)}),this._resolveStylesCompileResult(i.componentStylesheet,r);var o=t.viewComponentTypes.map(function(t){return e._assertComponentLoaded(t,!1).normalizedCompMeta}),s=this._templateParser.parse(n,n.template.template,t.viewDirectives.concat(o),t.viewPipes,t.schemas,n.type.name),a=this._viewCompiler.compileComponent(n,s,_(i.componentStylesheet.stylesVar),t.viewPipes);a.dependencies.forEach(function(t){var n;if(t instanceof df){var r=t;n=e._assertComponentLoaded(r.comp.reference,!1),r.placeholder.reference=n.proxyViewFactory,r.placeholder.name="viewFactory_"+r.comp.name}else if(t instanceof vf){var i=t;n=e._assertComponentLoaded(i.comp.reference,!0),i.placeholder.reference=n.proxyComponentFactory,i.placeholder.name="compFactory_"+i.comp.name}});var u,c=i.componentStylesheet.statements.concat(a.statements);u=this._compilerConfig.useJit?Tr(""+t.compType.name+(t.isHost?"_Host":"")+".ngfactory.js",c,a.viewFactoryVar):wr(c,a.viewFactoryVar),t.compiled(u)}},t.prototype._resolveStylesCompileResult=function(t,e){var n=this;t.dependencies.forEach(function(t,r){var i=e.get(t.moduleUrl),o=n._resolveAndEvalStylesCompileResult(i,e);t.valuePlaceholder.reference=o,t.valuePlaceholder.name="importedStyles"+r})},t.prototype._resolveAndEvalStylesCompileResult=function(t,e){return this._resolveStylesCompileResult(t,e),this._compilerConfig.useJit?Tr(t.meta.moduleUrl+".css.js",t.statements,t.stylesVar):wr(t.statements,t.stylesVar)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:n.Injector},{type:kf},{type:Cf},{type:Oh},{type:Vd},{type:gf},{type:Uf},{type:Fh}],t}(),zd=function(){function t(t,e,r,i,o,s,a){var u=this;this.isHost=t,this.compType=r,this.viewPipes=o,this.schemas=s,this._viewFactory=null,this.loading=null,this._normalizedCompMeta=null,this.isCompiled=!1,this.isCompiledWithDeps=!1,this.viewComponentTypes=[],this.viewDirectives=[],i.forEach(function(t){t.isComponent?u.viewComponentTypes.push(t.type.reference):u.viewDirectives.push(t)}),this.proxyViewFactory=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(!u._viewFactory)throw new Error("Illegal state: CompiledTemplate for "+c(u.compType)+" is not compiled yet!");return u._viewFactory.apply(null,t)},this.proxyComponentFactory=t?new n.ComponentFactory(e,this.proxyViewFactory,r.reference):null,a.syncResult?this._normalizedCompMeta=a.syncResult:this.loading=a.asyncResult.then(function(t){u._normalizedCompMeta=t,u.loading=null})}return Object.defineProperty(t.prototype,"normalizedCompMeta",{get:function(){if(this.loading)throw new Error("Template is still loading for "+this.compType.name+"!");return this._normalizedCompMeta},enumerable:!0,configurable:!0}),t.prototype.compiled=function(t){this._viewFactory=t,this.isCompiled=!0},t.prototype.depsCompiled=function(){this.isCompiledWithDeps=!0},t}(),Hd=function(){function t(t,e){this._delegate=t,this._ngModule=e}return Object.defineProperty(t.prototype,"_injector",{get:function(){return this._delegate.injector},enumerable:!0,configurable:!0}),t.prototype.compileModuleSync=function(t){return this._delegate.compileModuleSync(t)},t.prototype.compileModuleAsync=function(t){return this._delegate.compileModuleAsync(t)},t.prototype.compileModuleAndAllComponentsSync=function(t){return this._delegate.compileModuleAndAllComponentsSync(t)},t.prototype.compileModuleAndAllComponentsAsync=function(t){return this._delegate.compileModuleAndAllComponentsAsync(t)},t.prototype.clearCache=function(){this._delegate.clearCache()},t.prototype.clearCacheFor=function(t){this._delegate.clearCacheFor(t)},t}(),Gd={};Ir(n.SecurityContext.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),Ir(n.SecurityContext.STYLE,["*|style"]),Ir(n.SecurityContext.URL,["*|formAction","area|href","area|ping","audio|src","a|href","a|ping","blockquote|cite","body|background","del|cite","form|action","img|src","img|srcset","input|src","ins|cite","q|cite","source|src","source|srcset","track|src","video|poster","video|src"]),Ir(n.SecurityContext.RESOURCE_URL,["applet|code","applet|codebase","base|href","embed|src","frame|src","head|profile","html|manifest","iframe|src","link|href","media|src","object|codebase","object|data","script|src"]);var Wd=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},qd="boolean",Xd="number",Yd="string",Zd="object",Kd=["*|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop","abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^*|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","media^abbr|!autoplay,!controls,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,#playbackRate,preload,src,%srcObject,#volume",":svg:^abbr|*abort,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex",":svg:graphics^:svg:|",":svg:animation^:svg:|*begin,*end,*repeat",":svg:geometry^:svg:|",":svg:componentTransferFunction^:svg:|",":svg:gradient^:svg:|",":svg:textContent^:svg:graphics|",":svg:textPositioning^:svg:textContent|","abbr^*|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*beforecopy,*beforecut,*beforepaste,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*copy,*cuechange,*cut,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*message,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*paste,*pause,*play,*playing,*progress,*ratechange,*reset,*resize,*scroll,*search,*seeked,*seeking,*select,*selectstart,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerText,!spellcheck,%style,#tabIndex,title,!translate","a^abbr|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username","area^abbr|alt,coords,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,search,shape,target,username","audio^media|","br^abbr|clear","base^abbr|href,target","body^abbr|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink","button^abbr|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value","canvas^abbr|#height,#width","content^abbr|select","dl^abbr|!compact","datalist^abbr|","details^abbr|!open","dialog^abbr|!open,returnValue","dir^abbr|!compact","div^abbr|align","embed^abbr|align,height,name,src,type,width","fieldset^abbr|!disabled,name","font^abbr|color,face,size","form^abbr|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target","frame^abbr|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src","frameset^abbr|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows","hr^abbr|align,color,!noShade,size,width","head^abbr|","h1,h2,h3,h4,h5,h6^abbr|align","html^abbr|version","iframe^abbr|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width","img^abbr|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width","input^abbr|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width","keygen^abbr|!autofocus,challenge,!disabled,keytype,name","li^abbr|type,#value","label^abbr|htmlFor","legend^abbr|align","link^abbr|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,rel,%relList,rev,%sizes,target,type","map^abbr|name","marquee^abbr|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width","menu^abbr|!compact","meta^abbr|content,httpEquiv,name,scheme","meter^abbr|#high,#low,#max,#min,#optimum,#value","ins,del^abbr|cite,dateTime","ol^abbr|!compact,!reversed,#start,type","object^abbr|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width","optgroup^abbr|!disabled,label","option^abbr|!defaultSelected,!disabled,label,!selected,text,value","output^abbr|defaultValue,%htmlFor,name,value","p^abbr|align","param^abbr|name,type,value,valueType","picture^abbr|","pre^abbr|#width","progress^abbr|#max,#value","q,blockquote,cite^abbr|","script^abbr|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type","select^abbr|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value","shadow^abbr|","source^abbr|media,sizes,src,srcset,type","span^abbr|","style^abbr|!disabled,media,type","caption^abbr|align","th,td^abbr|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width","col,colgroup^abbr|align,ch,chOff,#span,vAlign,width","table^abbr|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width","tr^abbr|align,bgColor,ch,chOff,vAlign","tfoot,thead,tbody^abbr|align,ch,chOff,vAlign","template^abbr|","textarea^abbr|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap","title^abbr|text","track^abbr|!default,kind,label,src,srclang","ul^abbr|!compact,type","unknown^abbr|","video^media|#height,poster,#width",":svg:a^:svg:graphics|",":svg:animate^:svg:animation|",":svg:animateMotion^:svg:animation|",":svg:animateTransform^:svg:animation|",":svg:circle^:svg:geometry|",":svg:clipPath^:svg:graphics|",":svg:cursor^:svg:|",":svg:defs^:svg:graphics|",":svg:desc^:svg:|",":svg:discard^:svg:|",":svg:ellipse^:svg:geometry|",":svg:feBlend^:svg:|",":svg:feColorMatrix^:svg:|",":svg:feComponentTransfer^:svg:|",":svg:feComposite^:svg:|",":svg:feConvolveMatrix^:svg:|",":svg:feDiffuseLighting^:svg:|",":svg:feDisplacementMap^:svg:|",":svg:feDistantLight^:svg:|",":svg:feDropShadow^:svg:|",":svg:feFlood^:svg:|",":svg:feFuncA^:svg:componentTransferFunction|",":svg:feFuncB^:svg:componentTransferFunction|",":svg:feFuncG^:svg:componentTransferFunction|",":svg:feFuncR^:svg:componentTransferFunction|",":svg:feGaussianBlur^:svg:|",":svg:feImage^:svg:|",":svg:feMerge^:svg:|",":svg:feMergeNode^:svg:|",":svg:feMorphology^:svg:|",":svg:feOffset^:svg:|",":svg:fePointLight^:svg:|",":svg:feSpecularLighting^:svg:|",":svg:feSpotLight^:svg:|",":svg:feTile^:svg:|",":svg:feTurbulence^:svg:|",":svg:filter^:svg:|",":svg:foreignObject^:svg:graphics|",":svg:g^:svg:graphics|",":svg:image^:svg:graphics|",":svg:line^:svg:geometry|",":svg:linearGradient^:svg:gradient|",":svg:mpath^:svg:|",":svg:marker^:svg:|",":svg:mask^:svg:|",":svg:metadata^:svg:|",":svg:path^:svg:geometry|",":svg:pattern^:svg:|",":svg:polygon^:svg:geometry|",":svg:polyline^:svg:geometry|",":svg:radialGradient^:svg:gradient|",":svg:rect^:svg:geometry|",":svg:svg^:svg:graphics|#currentScale,#zoomAndPan",":svg:script^:svg:|type",":svg:set^:svg:animation|",":svg:stop^:svg:|",":svg:style^:svg:|!disabled,media,title,type",":svg:switch^:svg:graphics|",":svg:symbol^:svg:|",":svg:tspan^:svg:textPositioning|",":svg:text^:svg:textPositioning|",":svg:textPath^:svg:textContent|",":svg:title^:svg:|",":svg:use^:svg:graphics|",":svg:view^:svg:|#zoomAndPan"],Qd={"class":"className",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Jd=function(t){function e(){var e=this;t.call(this),this._schema={},Kd.forEach(function(t){var n=t.split("|"),r=n[0],i=n[1],o=i.split(","),s=r.split("^"),a=s[0],u=s[1],c={};a.split(",").forEach(function(t){return e._schema[t.toLowerCase()]=c});var l=e._schema[u];l&&Object.keys(l).forEach(function(t){c[t]=l[t]}),o.forEach(function(t){if(t.length>0)switch(t[0]){case"*":break;case"!":c[t.substring(1)]=qd;break;case"#":c[t.substring(1)]=Xd;break;case"%":c[t.substring(1)]=Zd;break;default:c[t]=Yd}})})}return Wd(e,t),e.prototype.hasProperty=function(t,e,r){if(r.some(function(t){return t.name===n.NO_ERRORS_SCHEMA.name}))return!0;if(t.indexOf("-")>-1){if("ng-container"===t||"ng-content"===t)return!1;if(r.some(function(t){return t.name===n.CUSTOM_ELEMENTS_SCHEMA.name}))return!0}var i=this._schema[t.toLowerCase()]||this._schema.unknown;return!!i[e]},e.prototype.hasElement=function(t,e){if(e.some(function(t){return t.name===n.NO_ERRORS_SCHEMA.name}))return!0;if(t.indexOf("-")>-1){if("ng-container"===t||"ng-content"===t)return!0;if(e.some(function(t){return t.name===n.CUSTOM_ELEMENTS_SCHEMA.name}))return!0}return!!this._schema[t.toLowerCase()]},e.prototype.securityContext=function(t,e){t=t.toLowerCase(),e=e.toLowerCase();var r=Gd[t+"|"+e];return r?r:(r=Gd["*|"+e],r?r:n.SecurityContext.NONE)},e.prototype.getMappedPropName=function(t){return Qd[t]||t},e.prototype.getDefaultComponentElementName=function(){return"ng-component"},e.decorators=[{type:n.Injectable}],e.ctorParameters=[],e}(zl),$d={get:function(t){throw new Error("No ResourceLoader implementation has been provided. Can't read the url \""+t+'"')}},tv=[{provide:al,useValue:sl},{provide:Ac,useExisting:al},{provide:xf,useValue:$d},ol,ka,Ba,Rl,{provide:Ec,useFactory:function(t,e,n){return new Ec(t,e,n)},deps:[Rl,[new n.OptionalMetadata,new n.Inject(n.TRANSLATIONS)],[new n.OptionalMetadata,new n.Inject(n.TRANSLATIONS_FORMAT)]]},Oh,Cf,kf,Sf,Vd,gf,Uf,{provide:Fh,useValue:new Fh},Bd,{provide:n.Compiler,useExisting:Bd},Jd,{provide:zl,useExisting:Jd},Tf,Of,Nf,If],ev=function(){function t(t){this._defaultOptions=[{
useDebug:n.isDevMode(),useJit:!0,defaultEncapsulation:n.ViewEncapsulation.Emulated}].concat(t)}return t.prototype.createCompiler=function(t){void 0===t&&(t=[]);var e=Lr(this._defaultOptions.concat(t)),r=n.ReflectiveInjector.resolveAndCreate([tv,{provide:Fh,useFactory:function(){return new Fh({genDebugInfo:e.useDebug,useJit:e.useJit,defaultEncapsulation:e.defaultEncapsulation,logBindingUpdate:e.useDebug})},deps:[]},e.providers]);return r.get(n.Compiler)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:Array,decorators:[{type:n.Inject,args:[n.COMPILER_OPTIONS]}]}],t}(),nv=n.createPlatformFactory(n.platformCore,"coreDynamic",[{provide:n.COMPILER_OPTIONS,useValue:{},multi:!0},{provide:n.CompilerFactory,useClass:ev},{provide:n.PLATFORM_INITIALIZER,useValue:Nr,multi:!0}]),rv=/asset:([^\/]+)\/([^\/]+)\/(.+)/,iv=function(){function t(){}return t.parseAssetUrl=function(t){return ov.parse(t)},t}(),ov=function(){function t(t,e,n){this.packageName=t,this.firstLevelDir=e,this.modulePath=n}return t.parse=function(e,n){void 0===n&&(n=!0);var r=e.match(rv);if(null!==r)return new t(r[1],r[2],r[3]);if(n)return null;throw new Error("Url "+e+" is not a valid asset: url")},t}(),sv={SelectorMatcher:yi,CssSelector:mi,AssetUrl:ov,ImportGenerator:iv,CompileMetadataResolver:kf,HtmlParser:Rl,InterpolationConfig:Ra,DirectiveNormalizer:Cf,Lexer:ka,Parser:Ba,ParseLocation:Ga,ParseError:Ya,ParseErrorLevel:Na,ParseSourceFile:Wa,ParseSourceSpan:qa,TemplateParser:Oh,DomElementSchemaRegistry:Jd,StyleCompiler:Vd,ViewCompiler:gf,NgModuleCompiler:Uf,TypeScriptEmitter:Jf};e.COMPILER_PROVIDERS=tv,e.CompileDiDependencyMetadata=Ho,e.CompileDirectiveMetadata=Qo,e.CompileFactoryMetadata=Wo,e.CompileIdentifierMetadata=zo,e.CompileMetadataWithIdentifier=Po,e.CompilePipeMetadata=Jo,e.CompileProviderMetadata=Go,e.CompileQueryMetadata=Yo,e.CompileTemplateMetadata=Ko,e.CompileTokenMetadata=qo,e.CompileTypeMetadata=Xo,e.CompilerConfig=Fh,e.DEFAULT_PACKAGE_URL_PROVIDER=Sf,e.DirectiveResolver=Of,e.NgModuleResolver=If,e.OfflineCompiler=wf,e.PipeResolver=Nf,e.RenderTypes=Uh,e.ResourceLoader=xf,e.RuntimeCompiler=Bd,e.SourceModule=bf,e.TEMPLATE_TRANSFORMS=Mh,e.UrlResolver=Tf,e.createOfflineCompileUrlResolver=tr,e.platformCoreDynamic=nv,e.DEFAULT_INTERPOLATION_CONFIG=Ia,e.InterpolationConfig=Ra,e.ElementSchemaRegistry=zl,e.I18NHtmlParser=Ec,e.MessageBundle=Bu,e.Xliff=ac,e.Xmb=vc,e.Xtb=_c,e.TextAst=Hr,e.BoundTextAst=Gr,e.AttrAst=Wr,e.BoundElementPropertyAst=qr,e.BoundEventAst=Xr,e.ReferenceAst=Yr,e.VariableAst=Zr,e.ElementAst=Kr,e.EmbeddedTemplateAst=Qr,e.BoundDirectivePropertyAst=Jr,e.DirectiveAst=$r,e.ProviderAst=ti,e.NgContentAst=ei,e.templateVisitAll=m,e.__compiler_private__=sv})}).call(e,function(){return this}())},function(t,e,n){(function(t){!function(t,r){r(e,n(4),n(5))}(this,function(e,n,r){"use strict";function i(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function o(t){return t.name?t.name:typeof t}function s(t){return void 0!==t&&null!==t}function a(t){return void 0===t||null===t}function u(t){return"string"==typeof t}function c(t){return"function"==typeof t}function l(t){return s(t)&&c(t.then)}function h(t){return Array.isArray(t)}function p(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.overriddenName)return t.overriddenName;if(t.name)return t.name;var e=t.toString(),n=e.indexOf("\n");return n===-1?e:e.substring(0,n)}function f(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function d(t){return t}function v(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function m(t){console.log(t)}function y(t){console.warn(t)}function g(){if(a(ae))if(s(ne.Symbol)&&s(Symbol.iterator))ae=Symbol.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),e=0;e<t.length;++e){var n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ae=n)}return ae}function b(t){return!v(t)}function _(t){return t.__forward_ref__=_,t.toString=function(){return p(this())},t}function w(t){return c(t)&&t.hasOwnProperty("__forward_ref__")&&t.__forward_ref__===_?t():t}function x(t){return c(t)&&t.hasOwnProperty("annotation")&&(t=t.annotation),t}function E(t,e){if(t===Object||t===String||t===Function||t===Number||t===Array)throw new Error("Can not use native "+p(t)+" as constructor");if(c(t))return t;if(t instanceof Array){var n=t,r=n.length-1,i=t[r];if(!c(i))throw new Error("Last position of Class method array must be Function in key "+e+" was '"+p(i)+"'");if(r!=i.length)throw new Error("Number of annotations ("+r+") does not match number of arguments ("+i.length+") in the function: "+p(i));for(var o=[],s=0,a=n.length-1;s<a;s++){var u=[];o.push(u);var l=n[s];if(l instanceof Array)for(var h=0;h<l.length;h++)u.push(x(l[h]));else c(l)?u.push(x(l)):u.push(l)}return me.defineMetadata("parameters",o,i),i}throw new Error("Only Function or Array is supported in Class definition for key '"+e+"' is '"+p(t)+"'")}function S(t){var e=E(t.hasOwnProperty("constructor")?t.constructor:void 0,"constructor"),n=e.prototype;if(t.hasOwnProperty("extends")){if(!c(t.extends))throw new Error("Class definition 'extends' property must be a constructor function was: "+p(t.extends));e.prototype=n=Object.create(t.extends.prototype)}for(var r in t)"extends"!=r&&"prototype"!=r&&t.hasOwnProperty(r)&&(n[r]=E(t[r],r));this&&this.annotations instanceof Array&&me.defineMetadata("annotations",this.annotations,e);var i=e.name;return i&&"constructor"!==i||(e.overriddenName="class"+ve++),e}function T(t,e){function n(n){if(!me||!me.getMetadata)throw"reflect-metadata shim is required when using class decorators";var r=new t(n);if(this instanceof t)return r;var i=c(this)&&this.annotations instanceof Array?this.annotations:[];i.push(r);var o=function(t){var e=me.getOwnMetadata("annotations",t)||[];return e.push(r),me.defineMetadata("annotations",e,t),t};return o.annotations=i,o.Class=S,e&&e(o),o}return void 0===e&&(e=null),n.prototype=Object.create(t.prototype),n.annotationCls=t,n}function M(t){function e(){function e(t,e,n){for(var r=me.getMetadata("parameters",t)||[];r.length<=n;)r.push(null);r[n]=r[n]||[];var o=r[n];return o.push(i),me.defineMetadata("parameters",r,t),t}for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var i=Object.create(t.prototype);return t.apply(i,n),this instanceof t?i:(e.annotation=i,e)}return e.prototype=Object.create(t.prototype),e.annotationCls=t,e}function C(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=Object.create(t.prototype);return t.apply(r,e),this instanceof t?r:function(t,e){var n=me.getOwnMetadata("propMetadata",t.constructor)||{};n[e]=n[e]||[],n[e].unshift(r),me.defineMetadata("propMetadata",n,t.constructor)}}return e.prototype=Object.create(t.prototype),e.annotationCls=t,e}function A(t){return a(t)||t===e.ChangeDetectionStrategy.Default}function O(){throw new Error("unimplemented")}function P(t,e){if(s(t))for(var n=0;n<t.length;n++){var r=t[n];h(r)?P(r,e):e.push(r)}return e}function R(t){return!!v(t)&&(h(t)||!(t instanceof He)&&g()in t)}function I(t,e,n){for(var r=t[g()](),i=e[g()]();;){var o=r.next(),s=i.next();if(o.done&&s.done)return!0;if(o.done||s.done)return!1;if(!n(o.value,s.value))return!1}}function N(t,e){if(h(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[g()]();!(r=i.next()).done;)e(r.value)}function L(t){for(var e=[],n=0;n<t.length;++n){if(Qe.contains(e,t[n]))return e.push(t[n]),e;e.push(t[n])}return e}function k(t){if(t.length>1){var e=L(Qe.reversed(t)),n=e.map(function(t){return p(t.token)});return" ("+n.join(" -> ")+")"}return""}function D(t){return t?t.map(function(t){var e=t.type,n=e.annotationCls,r=t.args?t.args:[],i=Object.create(n.prototype);return n.apply(i,r),i}):[]}function j(t,e){Ke.forEach(e,function(e,n){return t.set(n,e)})}function F(t){var e,n;if(s(t.useClass)){var r=w(t.useClass);e=gn.factory(r),n=G(r)}else s(t.useExisting)?(e=function(t){return t},n=[bn.fromKey(ln.get(t.useExisting))]):s(t.useFactory)?(e=t.useFactory,n=H(t.useFactory,t.deps)):(e=function(){return t.useValue},n=_n);return new xn(e,n)}function U(t){return new wn(ln.get(t.provide),[F(t)],t.multi)}function V(t){var e=z(t,[]),n=e.map(U);return Ze.values(B(n,new Map))}function B(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e.get(r.key.id);if(s(i)){if(r.multiProvider!==i.multiProvider)throw new cn(i,r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else e.set(r.key.id,r)}else{var a;a=r.multiProvider?new wn(r.key,Qe.clone(r.resolvedFactories),r.multiProvider):r,e.set(r.key.id,a)}}return e}function z(t,e){return t.forEach(function(t){if(t instanceof fn)e.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)e.push(t);else{if(!(t instanceof Array))throw new sn(t);z(t,e)}}),e}function H(t,e){if(a(e))return G(t);var n=e.map(function(t){return[t]});return e.map(function(e){return W(t,e,n)})}function G(t){var e=gn.parameters(t);if(a(e))return[];if(e.some(a))throw new an(t,e);return e.map(function(n){return W(t,n,e)})}function W(t,e,n){var r=[],i=null,o=!1;if(!h(e))return e instanceof ue?q(e.token,o,null,null,r):q(e,o,null,null,r);for(var a=null,u=null,c=0;c<e.length;++c){var l=e[c];l instanceof fn?i=l:l instanceof ue?i=l.token:l instanceof ce?o=!0:l instanceof pe?u=l:l instanceof de?u=l:l instanceof fe?a=l:l instanceof le&&(s(l.token)&&(i=l.token),r.push(l))}if(i=w(i),s(i))return q(i,o,a,u,r);throw new an(t,n)}function q(t,e,n,r,i){return new bn(ln.get(t),e,n,r,i)}function X(t,e){for(var n=new Array(t._proto.numberOfProviders),r=0;r<t._proto.numberOfProviders;++r)n[r]=e(t._proto.getProviderAtIndex(r));return n}function Y(){return""+Z()+Z()+Z()}function Z(){return oe.fromCharCode(97+ie.floor(25*ie.random()))}function K(){throw new Error("Runtime compiler is not loaded")}function Q(t,e,n){var r=t.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function J(t,e){return R(t)&&R(e)?I(t,e,J):!(R(t)||b(t)||R(e)||b(e))||f(t,e)}function $(){var t=re.wtf;return!(!t||!(ti=t.trace))&&(ei=ti.events,!0)}function tt(t,e){return void 0===e&&(e=null),ei.createScope(t,e)}function et(t,e){return ti.leaveScope(t,e),e}function nt(t,e){return ti.beginTimeRange(t,e)}function rt(t){ti.endTimeRange(t)}function it(t,e){return null}function ot(t){return st(t,[])}function st(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof fi){var i=r;if(e.push(i.nativeElement),s(i.nestedViews))for(var o=0;o<i.nestedViews.length;o++)st(i.nestedViews[o].rootNodesOrAppElements,e)}else e.push(r)}return e}function at(t,e){var n;if(a(t))n=bi;else if(t.length<e){var r=t.length;n=Qe.createFixedSize(e);for(var i=0;i<e;i++)n[i]=i<r?t[i]:bi}else n=t;return n}function ut(t,e,n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g,b){switch(t){case 1:return e+ct(n)+r;case 2:return e+ct(n)+r+ct(i)+o;case 3:return e+ct(n)+r+ct(i)+o+ct(s)+a;case 4:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c;case 5:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c+ct(l)+h;case 6:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c+ct(l)+h+ct(p)+f;case 7:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c+ct(l)+h+ct(p)+f+ct(d)+v;case 8:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c+ct(l)+h+ct(p)+f+ct(d)+v+ct(m)+y;case 9:return e+ct(n)+r+ct(i)+o+ct(s)+a+ct(u)+c+ct(l)+h+ct(p)+f+ct(d)+v+ct(m)+y+ct(g)+b;default:throw new Error("Does not support more than 9 expressions")}}function ct(t){return null!=t?t.toString():""}function lt(t,e,n){if(t){if(!J(e,n))throw new vi(e,n);return!1}return!f(e,n)}function ht(t,e){return t}function pt(t){var e,n=Br;return function(r){return f(n,r)||(n=r,e=t(r)),e}}function ft(t){var e,n=Br,r=Br;return function(i,o){return f(n,i)&&f(r,o)||(n=i,r=o,e=t(i,o)),e}}function dt(t){var e,n=Br,r=Br,i=Br;return function(o,s,a){return f(n,o)&&f(r,s)&&f(i,a)||(n=o,r=s,i=a,e=t(o,s,a)),e}}function vt(t){var e,n,r,i,o;return n=r=i=o=Br,function(s,a,u,c){return f(n,s)&&f(r,a)&&f(i,u)&&f(o,c)||(n=s,r=a,i=u,o=c,e=t(s,a,u,c)),e}}function mt(t){var e,n,r,i,o,s;return n=r=i=o=s=Br,function(a,u,c,l,h){return f(n,a)&&f(r,u)&&f(i,c)&&f(o,l)&&f(s,h)||(n=a,r=u,i=c,o=l,s=h,e=t(a,u,c,l,h)),e}}function yt(t){var e,n,r,i,o,s,a;return n=r=i=o=s=a=Br,function(u,c,l,h,p,d){return f(n,u)&&f(r,c)&&f(i,l)&&f(o,h)&&f(s,p)&&f(a,d)||(n=u,r=c,i=l,o=h,s=p,a=d,e=t(u,c,l,h,p,d)),e}}function gt(t){var e,n,r,i,o,s,a,u;return n=r=i=o=s=a=u=Br,function(c,l,h,p,d,v,m){return f(n,c)&&f(r,l)&&f(i,h)&&f(o,p)&&f(s,d)&&f(a,v)&&f(u,m)||(n=c,r=l,i=h,o=p,s=d,a=v,u=m,e=t(c,l,h,p,d,v,m)),e}}function bt(t){var e,n,r,i,o,s,a,u,c;return n=r=i=o=s=a=u=c=Br,function(l,h,p,d,v,m,y,g){return f(n,l)&&f(r,h)&&f(i,p)&&f(o,d)&&f(s,v)&&f(a,m)&&f(u,y)&&f(c,g)||(n=l,r=h,i=p,o=d,s=v,a=m,u=y,c=g,e=t(l,h,p,d,v,m,y,g)),e}}function _t(t){var e,n,r,i,o,s,a,u,c,l;return n=r=i=o=s=a=u=c=l=Br,function(h,p,d,v,m,y,g,b,_){return f(n,h)&&f(r,p)&&f(i,d)&&f(o,v)&&f(s,m)&&f(a,y)&&f(u,g)&&f(c,b)&&f(l,_)||(n=h,r=p,i=d,o=v,s=m,a=y,u=g,c=b,l=_,e=t(h,p,d,v,m,y,g,b,_)),e}}function wt(t){var e,n,r,i,o,s,a,u,c,l,h;return n=r=i=o=s=a=u=c=l=h=Br,function(p,d,v,m,y,g,b,_,w,x){return f(n,p)&&f(r,d)&&f(i,v)&&f(o,m)&&f(s,y)&&f(a,g)&&f(u,b)&&f(c,_)&&f(l,w)&&f(h,x)||(n=p,r=d,i=v,o=m,s=y,a=g,u=b,c=_,l=w,h=x,e=t(p,d,v,m,y,g,b,_,w,x)),e}}function xt(t){Vi=t}function Et(){if(Hi)throw new Error("Cannot enable prod mode after platform setup.");zi=!1}function St(){return Hi=!0,zi}function Tt(t){if(s(pi)&&!pi.destroyed)throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pi=t.get(Gi);var e=t.get(_r,null);return s(e)&&e.forEach(function(t){return t()}),pi}function Mt(t,e,n){void 0===n&&(n=[]);var r=new Ee("Platform: "+e);return function(e){return void 0===e&&(e=[]),Ot()||(t?t(n.concat(e).concat({provide:r,useValue:!0})):Tt(Pn.resolveAndCreate(n.concat(e).concat({provide:r,useValue:!0})))),Ct(r)}}function Ct(t){var e=Ot();if(a(e))throw new Error("No platform exists!");if(s(e)&&a(e.injector.get(t,null)))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}function At(){s(pi)&&!pi.destroyed&&pi.destroy()}function Ot(){return s(pi)&&!pi.destroyed?pi:null}function Pt(t,e){try{var n=e();return l(n)?n.catch(function(e){throw t.handleError(e),e}):n}catch(r){throw t.handleError(r),r}}function Rt(t,e,n){if(!t)throw new Error("Cannot find '"+n+"' in '"+e+"'");return t}function It(t){return t.map(function(t){return t.nativeElement})}function Nt(t,e,n){t.childNodes.forEach(function(t){t instanceof yo&&(e(t)&&n.push(t),Nt(t,e,n))})}function Lt(t,e,n){t instanceof yo&&t.childNodes.forEach(function(t){e(t)&&n.push(t),t instanceof yo&&Lt(t,e,n)})}function kt(t){return go.get(t)}function Dt(t){go.set(t.nativeNode,t)}function jt(t){go.delete(t.nativeNode)}function Ft(){return gn}function Ut(){return Yr}function Vt(){return Zr}function Bt(t,e){void 0===e&&(e=null);var n=e;if(!s(n)){var r={};n=new Go([r],1)}return new Wo(t,n)}function zt(t){return new Yo(t)}function Ht(t){return new Xo(t)}function Gt(t){var e,n=null;return u(t)?e=[t]:(e=h(t)?t:[t],e.forEach(function(t){var e=t.offset;s(e)&&(n=null==n?se.parseFloat(e):n)})),new Go(e,n)}function Wt(t,e){return new Vo(t,e)}function qt(t){return new Ho(t)}function Xt(t,e){var n=h(e)?new Xo(e):e;return new Bo(t,n)}function Yt(t,e){return new Fo(t,e)}function Zt(t,e,n){void 0===n&&(n=null);var r={};return Ke.forEach(e,function(t,e){r[e]=t==jo?n:t.toString()}),Ke.forEach(t,function(t,e){s(r[e])||(r[e]=n)}),r}function Kt(t,e,n){var r=n.length-1,i=n[0],o=te(i.styles.styles),a={},u=!1;Ke.forEach(t,function(t,e){o[e]||(o[e]=t,a[e]=t,u=!0)});var c=Ke.merge({},o),l=n[r];Qe.insert(l.styles.styles,0,e);var h=te(l.styles.styles),p={},f=!1;return Ke.forEach(c,function(t,e){s(h[e])||(p[e]=jo,f=!0)}),f&&l.styles.styles.push(p),Ke.forEach(h,function(t,e){s(o[e])||(a[e]=jo,u=!0)}),u&&i.styles.styles.push(a),n}function Qt(t){var e={};return Ke.keys(t).forEach(function(t){e[t]=null}),e}function Jt(t,e){return e.map(function(e){var n={};return Ke.forEach(e,function(e,r){e==To&&(e=t[r],s(e)||(e=jo)),t[r]=e,n[r]=e}),n})}function $t(t,e,n){Ke.forEach(n,function(n,r){e.setElementStyle(t,r,n)})}function te(t){var e={};return t.forEach(function(t){Ke.forEach(t,function(t,n){e[n]=t})}),e}function ee(t){var e;if(t instanceof fi){var n=t;if(e=n.nativeElement,s(n.nestedViews))for(var r=n.nestedViews.length-1;r>=0;r--){var i=n.nestedViews[r];i.rootNodesOrAppElements.length>0&&(e=ee(i.rootNodesOrAppElements[i.rootNodesOrAppElements.length-1]))}}else e=t;return e}var ne;ne="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var re=ne,ie=re.Math;re.assert=function(t){};var oe=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return t.indexOf(e)!=-1},t.compare=function(t,e){return t<e?-1:t>e?1:0},t}(),se=function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),ae=null,ue=function(){function t(t){this.token=t}return t.prototype.toString=function(){return"@Inject("+p(this.token)+")"},t}(),ce=function(){function t(){}return t.prototype.toString=function(){return"@Optional()"},t}(),le=function(){function t(){}return Object.defineProperty(t.prototype,"token",{get:function(){return null},enumerable:!0,configurable:!0}),t}(),he=function(){function t(){}return t}(),pe=function(){function t(){}return t.prototype.toString=function(){return"@Self()"},t}(),fe=function(){function t(){}return t.prototype.toString=function(){return"@SkipSelf()"},t}(),de=function(){function t(){}return t.prototype.toString=function(){return"@Host()"},t}(),ve=0,me=re.Reflect,ye=M(ue),ge=M(ce),be=T(he),_e=M(pe),we=M(de),xe=M(fe),Ee=function(){function t(t){this._desc=t}return t.prototype.toString=function(){return"Token "+this._desc},t.decorators=[{type:be}],t.ctorParameters=[null],t}(),Se=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Te=new Ee("AnalyzeForEntryComponents"),Me=function(t){function e(e){t.call(this),this.attributeName=e}return Se(e,t),Object.defineProperty(e.prototype,"token",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"@Attribute("+p(this.attributeName)+")"},e}(le),Ce=function(t){function e(e,n){var r=void 0===n?{}:n,i=r.descendants,o=void 0!==i&&i,s=r.first,a=void 0!==s&&s,u=r.read,c=void 0===u?null:u;t.call(this),this._selector=e,this.descendants=o,this.first=a,this.read=c}return Se(e,t),Object.defineProperty(e.prototype,"isViewQuery",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return w(this._selector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVarBindingQuery",{get:function(){return u(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"varBindings",{get:function(){return oe.split(this.selector,/\s*,\s*/g)},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"@Query("+p(this.selector)+")"},e}(le),Ae=function(t){function e(e,n){var r=void 0===n?{}:n,i=r.descendants,o=void 0!==i&&i,s=r.read,a=void 0===s?null:s;t.call(this,e,{descendants:o,read:a})}return Se(e,t),e}(Ce),Oe=function(t){function e(e,n){var r=(void 0===n?{}:n).read,i=void 0===r?null:r;t.call(this,e,{descendants:!0,first:!0,read:i})}return Se(e,t),e}(Ce),Pe=function(t){function e(e,n){var r=void 0===n?{}:n,i=r.descendants,o=void 0!==i&&i,s=r.first,a=void 0!==s&&s,u=r.read,c=void 0===u?null:u;t.call(this,e,{descendants:o,first:a,read:c})}return Se(e,t),Object.defineProperty(e.prototype,"isViewQuery",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(Ce),Re=function(t){function e(e,n){var r=(void 0===n?{}:n).read,i=void 0===r?null:r;t.call(this,e,{descendants:!0,read:i})}return Se(e,t),e.prototype.toString=function(){return"@ViewChildren("+p(this.selector)+")"},e}(Pe),Ie=function(t){function e(e,n){var r=(void 0===n?{}:n).read,i=void 0===r?null:r;t.call(this,e,{descendants:!0,first:!0,read:i})}return Se(e,t),e}(Pe);e.ChangeDetectionStrategy,function(t){t[t.OnPush=0]="OnPush",t[t.Default=1]="Default"}(e.ChangeDetectionStrategy||(e.ChangeDetectionStrategy={}));var Ne;!function(t){t[t.CheckOnce=0]="CheckOnce",t[t.Checked=1]="Checked",t[t.CheckAlways=2]="CheckAlways",t[t.Detached=3]="Detached",t[t.Errored=4]="Errored",t[t.Destroyed=5]="Destroyed"}(Ne||(Ne={}));var Le,ke=[e.ChangeDetectionStrategy.OnPush,e.ChangeDetectionStrategy.Default],De=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},je=function(t){function e(e){var n=t.call(this,e);this._nativeError=n}return De(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._nativeError.message},set:function(t){this._nativeError.message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(t){this._nativeError.stack=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._nativeError.toString()},e}(Error),Fe=function(t){function e(e,n){t.call(this,e+" caused by: "+(n instanceof Error?n.message:n)),this.originalError=n}return De(e,t),Object.defineProperty(e.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),e}(je),Ue=new Object,Ve=Ue,Be=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=Ue),e===Ue)throw new Error("No provider for "+p(t)+"!");return e},t}(),ze=function(){function t(){}return t.prototype.get=function(t,e){return O()},t.THROW_IF_NOT_FOUND=Ue,t.NULL=new Be,t}(),He=re.Map,Ge=re.Set,We=function(){try{if(1===new He([[1,2]]).size)return function(t){return new He(t)}}catch(t){}return function(t){for(var e=new He,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),qe=function(){try{if(new He(new He))return function(t){return new He(t)}}catch(t){}return function(t){var e=new He;return t.forEach(function(t,n){e.set(n,t)}),e}}(),Xe=function(){return(new He).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),Ye=function(){try{if((new He).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=Qe.createFixedSize(t.size),r=0;return t.forEach(function(t,i){n[r]=e?t:i,r++}),n}}(),Ze=function(){function t(){}return t.clone=function(t){return qe(t)},t.createFromStringMap=function(t){var e=new He;for(var n in t)e.set(n,t[n]);return e},t.toStringMap=function(t){var e={};return t.forEach(function(t,n){return e[n]=t}),e},t.createFromPairs=function(t){return We(t)},t.clearValues=function(t){Xe(t)},t.iterable=function(t){return t},t.keys=function(t){return Ye(t,!1)},t.values=function(t){return Ye(t,!0)},t}(),Ke=function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.isEmpty=function(t){for(var e in t)return!1;return!0},t.delete=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(t[i],i)}},t.merge=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=t[o]}for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];n[o]=e[o]}return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},t}(),Qe=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return t.indexOf(e)!==-1},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){s(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),i=0;i<t.length;i++){var o=t[i];if(!a(o)){var s=e(o);s>r&&(n=o,r=s)}}return n},t.flatten=function(t){var e=[];return P(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),Je=function(){var t=new Ge([1,2,3]);return 3===t.size?function(t){return new Ge(t)}:function(t){var e=new Ge(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),$e=function(){function t(){}return t.createFromList=function(t){return Je(t)},t.has=function(t,e){return t.has(e)},t.delete=function(t,e){t.delete(e)},t}(),tn=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},en=function(t){function e(e,n,r){t.call(this,"DI Error"),this.keys=[n],this.injectors=[e],this.constructResolvingMessage=r,this.message=this.constructResolvingMessage(this.keys)}return tn(e,t),e.prototype.addKey=function(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)},e}(je),nn=function(t){function e(e,n){t.call(this,e,n,function(t){var e=p(Qe.first(t).token);return"No provider for "+e+"!"+k(t)})}return tn(e,t),e}(en),rn=function(t){function e(e,n){t.call(this,e,n,function(t){return"Cannot instantiate cyclic dependency!"+k(t)})}return tn(e,t),e}(en),on=function(t){function e(e,n,r,i){t.call(this,"DI Error",n),this.keys=[i],this.injectors=[e]}return tn(e,t),e.prototype.addKey=function(t,e){this.injectors.push(t),this.keys.push(e)},Object.defineProperty(e.prototype,"message",{get:function(){var t=p(Qe.first(this.keys).token);return this.originalError.message+": Error during instantiation of "+t+"!"+k(this.keys)+"."},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"causeKey",{get:function(){return this.keys[0]},enumerable:!0,configurable:!0}),e}(Fe),sn=function(t){function e(e){t.call(this,"Invalid provider - only instances of Provider and Type are allowed, got: "+e)}return tn(e,t),e}(je),an=function(t){function e(n,r){t.call(this,e._genMessage(n,r))}return tn(e,t),e._genMessage=function(t,e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];a(o)||0==o.length?n.push("?"):n.push(o.map(p).join(" "))}return"Cannot resolve all parameters for '"+p(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+p(t)+"' is decorated with Injectable."},e}(je),un=function(t){function e(e){t.call(this,"Index "+e+" is out-of-bounds.")}return tn(e,t),e}(je),cn=function(t){function e(e,n){t.call(this,"Cannot mix multi providers and regular providers, got: "+e.toString()+" "+n.toString())}return tn(e,t),e}(je),ln=function(){function t(t,e){if(this.token=t,this.id=e,a(t))throw new Error("Token must be defined!")}return Object.defineProperty(t.prototype,"displayName",{get:function(){return p(this.token)},enumerable:!0,configurable:!0}),t.get=function(t){return pn.get(w(t))},Object.defineProperty(t,"numberOfKeys",{get:function(){return pn.numberOfKeys},enumerable:!0,configurable:!0}),t}(),hn=function(){function t(){this._allKeys=new Map}return t.prototype.get=function(t){if(t instanceof ln)return t;if(this._allKeys.has(t))return this._allKeys.get(t);var e=new ln(t,ln.numberOfKeys);return this._allKeys.set(t,e),e},Object.defineProperty(t.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),t}(),pn=new hn,fn=Function,dn=function(){function t(t){this._reflect=t||re.Reflect}return t.prototype.isReflectionEnabled=function(){return!0},t.prototype.factory=function(t){var e=t.prototype;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var i=Object.create(e);return t.apply(i,n),i}},t.prototype._zipTypesAndAnnotations=function(t,e){var n;n="undefined"==typeof t?new Array(e.length):new Array(t.length);for(var r=0;r<n.length;r++)"undefined"==typeof t?n[r]=[]:t[r]!=Object?n[r]=[t[r]]:n[r]=[],s(e)&&s(e[r])&&(n[r]=n[r].concat(e[r]));return n},t.prototype.parameters=function(t){if(s(t.parameters))return t.parameters;if(s(t.ctorParameters)){var e=t.ctorParameters,n=e.map(function(t){return t&&t.type}),r=e.map(function(t){return t&&D(t.decorators)});return this._zipTypesAndAnnotations(n,r)}if(s(this._reflect)&&s(this._reflect.getMetadata)){var i=this._reflect.getMetadata("parameters",t),o=this._reflect.getMetadata("design:paramtypes",t);if(s(o)||s(i))return this._zipTypesAndAnnotations(o,i)}var a=new Array(t.length);return a.fill(void 0),a},t.prototype.annotations=function(t){if(s(t.annotations)){var e=t.annotations;return c(e)&&e.annotations&&(e=e.annotations),e}if(s(t.decorators))return D(t.decorators);if(s(this._reflect)&&s(this._reflect.getMetadata)){var e=this._reflect.getMetadata("annotations",t);if(s(e))return e}return[]},t.prototype.propMetadata=function(t){if(s(t.propMetadata)){var e=t.propMetadata;return c(e)&&e.propMetadata&&(e=e.propMetadata),e}if(s(t.propDecorators)){var n=t.propDecorators,r={};return Object.keys(n).forEach(function(t){r[t]=D(n[t])}),r;
}if(s(this._reflect)&&s(this._reflect.getMetadata)){var e=this._reflect.getMetadata("propMetadata",t);if(s(e))return e}return{}},t.prototype.interfaces=function(t){return[]},t.prototype.hasLifecycleHook=function(t,e,n){if(!(t instanceof fn))return!1;var r=t.prototype;return!!r[n]},t.prototype.getter=function(t){return new Function("o","return o."+t+";")},t.prototype.setter=function(t){return new Function("o","v","return o."+t+" = v;")},t.prototype.method=function(t){var e="if (!o."+t+") throw new Error('\""+t+"\" is undefined');\n        return o."+t+".apply(o, args);";return new Function("o","args",e)},t.prototype.importUri=function(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+p(t)},t.prototype.resolveIdentifier=function(t,e,n){return n},t.prototype.resolveEnum=function(t,e){return t[e]},t}(),vn=function(){function t(){}return t}(),mn=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},yn=function(t){function e(e){t.call(this),this._injectableInfo=new He,this._getters=new He,this._setters=new He,this._methods=new He,this._usedKeys=null,this.reflectionCapabilities=e}return mn(e,t),e.prototype.updateCapabilities=function(t){this.reflectionCapabilities=t},e.prototype.isReflectionEnabled=function(){return this.reflectionCapabilities.isReflectionEnabled()},e.prototype.trackUsage=function(){this._usedKeys=new Ge},e.prototype.listUnusedKeys=function(){var t=this;if(null==this._usedKeys)throw new Error("Usage tracking is disabled");var e=Ze.keys(this._injectableInfo);return e.filter(function(e){return!$e.has(t._usedKeys,e)})},e.prototype.registerFunction=function(t,e){this._injectableInfo.set(t,e)},e.prototype.registerType=function(t,e){this._injectableInfo.set(t,e)},e.prototype.registerGetters=function(t){j(this._getters,t)},e.prototype.registerSetters=function(t){j(this._setters,t)},e.prototype.registerMethods=function(t){j(this._methods,t)},e.prototype.factory=function(t){if(this._containsReflectionInfo(t)){var e=this._getReflectionInfo(t).factory;return s(e)?e:null}return this.reflectionCapabilities.factory(t)},e.prototype.parameters=function(t){if(this._injectableInfo.has(t)){var e=this._getReflectionInfo(t).parameters;return s(e)?e:[]}return this.reflectionCapabilities.parameters(t)},e.prototype.annotations=function(t){if(this._injectableInfo.has(t)){var e=this._getReflectionInfo(t).annotations;return s(e)?e:[]}return this.reflectionCapabilities.annotations(t)},e.prototype.propMetadata=function(t){if(this._injectableInfo.has(t)){var e=this._getReflectionInfo(t).propMetadata;return s(e)?e:{}}return this.reflectionCapabilities.propMetadata(t)},e.prototype.interfaces=function(t){if(this._injectableInfo.has(t)){var e=this._getReflectionInfo(t).interfaces;return s(e)?e:[]}return this.reflectionCapabilities.interfaces(t)},e.prototype.hasLifecycleHook=function(t,e,n){var r=this.interfaces(t);return r.indexOf(e)!==-1||this.reflectionCapabilities.hasLifecycleHook(t,e,n)},e.prototype.getter=function(t){return this._getters.has(t)?this._getters.get(t):this.reflectionCapabilities.getter(t)},e.prototype.setter=function(t){return this._setters.has(t)?this._setters.get(t):this.reflectionCapabilities.setter(t)},e.prototype.method=function(t){return this._methods.has(t)?this._methods.get(t):this.reflectionCapabilities.method(t)},e.prototype._getReflectionInfo=function(t){return s(this._usedKeys)&&this._usedKeys.add(t),this._injectableInfo.get(t)},e.prototype._containsReflectionInfo=function(t){return this._injectableInfo.has(t)},e.prototype.importUri=function(t){return this.reflectionCapabilities.importUri(t)},e.prototype.resolveIdentifier=function(t,e,n){return this.reflectionCapabilities.resolveIdentifier(t,e,n)},e.prototype.resolveEnum=function(t,e){return this.reflectionCapabilities.resolveEnum(t,e)},e}(vn),gn=new yn(new dn),bn=function(){function t(t,e,n,r,i){this.key=t,this.optional=e,this.lowerBoundVisibility=n,this.upperBoundVisibility=r,this.properties=i}return t.fromKey=function(e){return new t(e,(!1),null,null,[])},t}(),_n=[],wn=function(){function t(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n}return Object.defineProperty(t.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),t}(),xn=function(){function t(t,e){this.factory=t,this.dependencies=e}return t}(),En=10,Sn=new Object,Tn=function(){function t(t,e){this.provider0=null,this.provider1=null,this.provider2=null,this.provider3=null,this.provider4=null,this.provider5=null,this.provider6=null,this.provider7=null,this.provider8=null,this.provider9=null,this.keyId0=null,this.keyId1=null,this.keyId2=null,this.keyId3=null,this.keyId4=null,this.keyId5=null,this.keyId6=null,this.keyId7=null,this.keyId8=null,this.keyId9=null;var n=e.length;n>0&&(this.provider0=e[0],this.keyId0=e[0].key.id),n>1&&(this.provider1=e[1],this.keyId1=e[1].key.id),n>2&&(this.provider2=e[2],this.keyId2=e[2].key.id),n>3&&(this.provider3=e[3],this.keyId3=e[3].key.id),n>4&&(this.provider4=e[4],this.keyId4=e[4].key.id),n>5&&(this.provider5=e[5],this.keyId5=e[5].key.id),n>6&&(this.provider6=e[6],this.keyId6=e[6].key.id),n>7&&(this.provider7=e[7],this.keyId7=e[7].key.id),n>8&&(this.provider8=e[8],this.keyId8=e[8].key.id),n>9&&(this.provider9=e[9],this.keyId9=e[9].key.id)}return t.prototype.getProviderAtIndex=function(t){if(0==t)return this.provider0;if(1==t)return this.provider1;if(2==t)return this.provider2;if(3==t)return this.provider3;if(4==t)return this.provider4;if(5==t)return this.provider5;if(6==t)return this.provider6;if(7==t)return this.provider7;if(8==t)return this.provider8;if(9==t)return this.provider9;throw new un(t)},t.prototype.createInjectorStrategy=function(t){return new An(t,this)},t}(),Mn=function(){function t(t,e){this.providers=e;var n=e.length;this.keyIds=Qe.createFixedSize(n);for(var r=0;r<n;r++)this.keyIds[r]=e[r].key.id}return t.prototype.getProviderAtIndex=function(t){if(t<0||t>=this.providers.length)throw new un(t);return this.providers[t]},t.prototype.createInjectorStrategy=function(t){return new On(this,t)},t}(),Cn=function(){function t(t){this.numberOfProviders=t.length,this._strategy=t.length>En?new Mn(this,t):new Tn(this,t)}return t.fromResolvedProviders=function(e){return new t(e)},t.prototype.getProviderAtIndex=function(t){return this._strategy.getProviderAtIndex(t)},t}(),An=function(){function t(t,e){this.injector=t,this.protoStrategy=e,this.obj0=Sn,this.obj1=Sn,this.obj2=Sn,this.obj3=Sn,this.obj4=Sn,this.obj5=Sn,this.obj6=Sn,this.obj7=Sn,this.obj8=Sn,this.obj9=Sn}return t.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},t.prototype.instantiateProvider=function(t){return this.injector._new(t)},t.prototype.getObjByKeyId=function(t){var e=this.protoStrategy,n=this.injector;return e.keyId0===t?(this.obj0===Sn&&(this.obj0=n._new(e.provider0)),this.obj0):e.keyId1===t?(this.obj1===Sn&&(this.obj1=n._new(e.provider1)),this.obj1):e.keyId2===t?(this.obj2===Sn&&(this.obj2=n._new(e.provider2)),this.obj2):e.keyId3===t?(this.obj3===Sn&&(this.obj3=n._new(e.provider3)),this.obj3):e.keyId4===t?(this.obj4===Sn&&(this.obj4=n._new(e.provider4)),this.obj4):e.keyId5===t?(this.obj5===Sn&&(this.obj5=n._new(e.provider5)),this.obj5):e.keyId6===t?(this.obj6===Sn&&(this.obj6=n._new(e.provider6)),this.obj6):e.keyId7===t?(this.obj7===Sn&&(this.obj7=n._new(e.provider7)),this.obj7):e.keyId8===t?(this.obj8===Sn&&(this.obj8=n._new(e.provider8)),this.obj8):e.keyId9===t?(this.obj9===Sn&&(this.obj9=n._new(e.provider9)),this.obj9):Sn},t.prototype.getObjAtIndex=function(t){if(0==t)return this.obj0;if(1==t)return this.obj1;if(2==t)return this.obj2;if(3==t)return this.obj3;if(4==t)return this.obj4;if(5==t)return this.obj5;if(6==t)return this.obj6;if(7==t)return this.obj7;if(8==t)return this.obj8;if(9==t)return this.obj9;throw new un(t)},t.prototype.getMaxNumberOfObjects=function(){return En},t}(),On=function(){function t(t,e){this.protoStrategy=t,this.injector=e,this.objs=Qe.createFixedSize(t.providers.length),Qe.fill(this.objs,Sn)}return t.prototype.resetConstructionCounter=function(){this.injector._constructionCounter=0},t.prototype.instantiateProvider=function(t){return this.injector._new(t)},t.prototype.getObjByKeyId=function(t){for(var e=this.protoStrategy,n=0;n<e.keyIds.length;n++)if(e.keyIds[n]===t)return this.objs[n]===Sn&&(this.objs[n]=this.injector._new(e.providers[n])),this.objs[n];return Sn},t.prototype.getObjAtIndex=function(t){if(t<0||t>=this.objs.length)throw new un(t);return this.objs[t]},t.prototype.getMaxNumberOfObjects=function(){return this.objs.length},t}(),Pn=function(){function t(){}return t.resolve=function(t){return V(t)},t.resolveAndCreate=function(e,n){void 0===n&&(n=null);var r=t.resolve(e);return t.fromResolvedProviders(r,n)},t.fromResolvedProviders=function(t,e){return void 0===e&&(e=null),new Rn(Cn.fromResolvedProviders(t),e)},Object.defineProperty(t.prototype,"parent",{get:function(){return O()},enumerable:!0,configurable:!0}),t.prototype.resolveAndCreateChild=function(t){return O()},t.prototype.createChildFromResolved=function(t){return O()},t.prototype.resolveAndInstantiate=function(t){return O()},t.prototype.instantiateResolved=function(t){return O()},t}(),Rn=function(){function t(t,e){void 0===e&&(e=null),this._constructionCounter=0,this._proto=t,this._parent=e,this._strategy=t._strategy.createInjectorStrategy(this)}return t.prototype.get=function(t,e){return void 0===e&&(e=Ve),this._getByKey(ln.get(t),null,null,e)},t.prototype.getAt=function(t){return this._strategy.getObjAtIndex(t)},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"internalStrategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),t.prototype.resolveAndCreateChild=function(t){var e=Pn.resolve(t);return this.createChildFromResolved(e)},t.prototype.createChildFromResolved=function(e){var n=new Cn(e),r=new t(n);return r._parent=this,r},t.prototype.resolveAndInstantiate=function(t){return this.instantiateResolved(Pn.resolve([t])[0])},t.prototype.instantiateResolved=function(t){return this._instantiateProvider(t)},t.prototype._new=function(t){if(this._constructionCounter++>this._strategy.getMaxNumberOfObjects())throw new rn(this,t.key);return this._instantiateProvider(t)},t.prototype._instantiateProvider=function(t){if(t.multiProvider){for(var e=Qe.createFixedSize(t.resolvedFactories.length),n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])},t.prototype._instantiate=function(t,e){var n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g,b,_,w,x=e.factory,E=e.dependencies,S=E.length;try{n=S>0?this._getByReflectiveDependency(t,E[0]):null,r=S>1?this._getByReflectiveDependency(t,E[1]):null,i=S>2?this._getByReflectiveDependency(t,E[2]):null,o=S>3?this._getByReflectiveDependency(t,E[3]):null,s=S>4?this._getByReflectiveDependency(t,E[4]):null,a=S>5?this._getByReflectiveDependency(t,E[5]):null,u=S>6?this._getByReflectiveDependency(t,E[6]):null,c=S>7?this._getByReflectiveDependency(t,E[7]):null,l=S>8?this._getByReflectiveDependency(t,E[8]):null,h=S>9?this._getByReflectiveDependency(t,E[9]):null,p=S>10?this._getByReflectiveDependency(t,E[10]):null,f=S>11?this._getByReflectiveDependency(t,E[11]):null,d=S>12?this._getByReflectiveDependency(t,E[12]):null,v=S>13?this._getByReflectiveDependency(t,E[13]):null,m=S>14?this._getByReflectiveDependency(t,E[14]):null,y=S>15?this._getByReflectiveDependency(t,E[15]):null,g=S>16?this._getByReflectiveDependency(t,E[16]):null,b=S>17?this._getByReflectiveDependency(t,E[17]):null,_=S>18?this._getByReflectiveDependency(t,E[18]):null,w=S>19?this._getByReflectiveDependency(t,E[19]):null}catch(T){throw(T instanceof en||T instanceof on)&&T.addKey(this,t.key),T}var M;try{switch(S){case 0:M=x();break;case 1:M=x(n);break;case 2:M=x(n,r);break;case 3:M=x(n,r,i);break;case 4:M=x(n,r,i,o);break;case 5:M=x(n,r,i,o,s);break;case 6:M=x(n,r,i,o,s,a);break;case 7:M=x(n,r,i,o,s,a,u);break;case 8:M=x(n,r,i,o,s,a,u,c);break;case 9:M=x(n,r,i,o,s,a,u,c,l);break;case 10:M=x(n,r,i,o,s,a,u,c,l,h);break;case 11:M=x(n,r,i,o,s,a,u,c,l,h,p);break;case 12:M=x(n,r,i,o,s,a,u,c,l,h,p,f);break;case 13:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d);break;case 14:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v);break;case 15:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m);break;case 16:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y);break;case 17:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g);break;case 18:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g,b);break;case 19:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g,b,_);break;case 20:M=x(n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g,b,_,w);break;default:throw new Error("Cannot instantiate '"+t.key.displayName+"' because it has more than 20 dependencies")}}catch(T){throw new on(this,T,T.stack,t.key)}return M},t.prototype._getByReflectiveDependency=function(t,e){return this._getByKey(e.key,e.lowerBoundVisibility,e.upperBoundVisibility,e.optional?null:Ve)},t.prototype._getByKey=function(t,e,n,r){return t===In?this:n instanceof pe?this._getByKeySelf(t,r):this._getByKeyDefault(t,r,e)},t.prototype._throwOrNull=function(t,e){if(e!==Ve)return e;throw new nn(this,t)},t.prototype._getByKeySelf=function(t,e){var n=this._strategy.getObjByKeyId(t.id);return n!==Sn?n:this._throwOrNull(t,e)},t.prototype._getByKeyDefault=function(e,n,r){var i;for(i=r instanceof fe?this._parent:this;i instanceof t;){var o=i,s=o._strategy.getObjByKeyId(e.id);if(s!==Sn)return s;i=o._parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)},Object.defineProperty(t.prototype,"displayName",{get:function(){var t=X(this,function(t){return' "'+t.key.displayName+'" '}).join(", ");return"ReflectiveInjector(providers: ["+t+"])"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.displayName},t}(),In=ln.get(ze),Nn=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ln=function(t){function e(e){var n=void 0===e?{}:e,r=n.selector,i=n.inputs,o=n.outputs,s=n.host,a=n.providers,u=n.exportAs,c=n.queries;t.call(this),this.selector=r,this._inputs=i,this._outputs=o,this.host=s,this.exportAs=u,this.queries=c,this._providers=a}return Nn(e,t),Object.defineProperty(e.prototype,"inputs",{get:function(){return this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),e}(he),kn=function(t){function n(n){var r=void 0===n?{}:n,i=r.selector,o=r.inputs,s=r.outputs,a=r.host,u=r.exportAs,c=r.moduleId,l=r.providers,h=r.viewProviders,p=r.changeDetection,f=void 0===p?e.ChangeDetectionStrategy.Default:p,d=r.queries,v=r.templateUrl,m=r.template,y=r.styleUrls,g=r.styles,b=r.animations,_=r.encapsulation,w=r.interpolation,x=r.entryComponents;t.call(this,{selector:i,inputs:o,outputs:s,host:a,exportAs:u,providers:l,queries:d}),this.changeDetection=f,this._viewProviders=h,this.templateUrl=v,this.template=m,this.styleUrls=y,this.styles=g,this.encapsulation=_,this.moduleId=c,this.animations=b,this.interpolation=w,this.entryComponents=x}return Nn(n,t),Object.defineProperty(n.prototype,"viewProviders",{get:function(){return this._viewProviders},enumerable:!0,configurable:!0}),n}(Ln),Dn=function(t){function e(e){var n=e.name,r=e.pure;t.call(this),this.name=n,this._pure=r}return Nn(e,t),Object.defineProperty(e.prototype,"pure",{get:function(){return!s(this._pure)||this._pure},enumerable:!0,configurable:!0}),e}(he),jn=function(){function t(t){this.bindingPropertyName=t}return t}(),Fn=function(){function t(t){this.bindingPropertyName=t}return t}(),Un=function(){function t(t){this.hostPropertyName=t}return t}(),Vn=function(){function t(t,e){this.eventName=t,this.args=e}return t}(),Bn=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},zn={name:"custom-elements"},Hn={name:"no-errors-schema"},Gn=function(t){function e(e){void 0===e&&(e={}),t.call(this),this._providers=e.providers,this.declarations=e.declarations,this.imports=e.imports,this.exports=e.exports,this.entryComponents=e.entryComponents,this.bootstrap=e.bootstrap,this.schemas=e.schemas}return Bn(e,t),Object.defineProperty(e.prototype,"providers",{get:function(){return this._providers},enumerable:!0,configurable:!0}),e}(he);!function(t){t[t.OnInit=0]="OnInit",t[t.OnDestroy=1]="OnDestroy",t[t.DoCheck=2]="DoCheck",t[t.OnChanges=3]="OnChanges",t[t.AfterContentInit=4]="AfterContentInit",t[t.AfterContentChecked=5]="AfterContentChecked",t[t.AfterViewInit=6]="AfterViewInit",t[t.AfterViewChecked=7]="AfterViewChecked"}(Le||(Le={}));var Wn=[Le.OnInit,Le.OnDestroy,Le.DoCheck,Le.OnChanges,Le.AfterContentInit,Le.AfterContentChecked,Le.AfterViewInit,Le.AfterViewChecked],qn=function(){function t(){}return t}(),Xn=function(){function t(){}return t}(),Yn=function(){function t(){}return t}(),Zn=function(){function t(){}return t}(),Kn=function(){function t(){}return t}(),Qn=function(){function t(){}return t}(),Jn=function(){function t(){}return t}(),$n=function(){function t(){}return t}();e.ViewEncapsulation,function(t){t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None"}(e.ViewEncapsulation||(e.ViewEncapsulation={}));var tr=[e.ViewEncapsulation.Emulated,e.ViewEncapsulation.Native,e.ViewEncapsulation.None],er=function(){function t(t){var e=void 0===t?{}:t,n=e.templateUrl,r=e.template,i=e.encapsulation,o=e.styles,s=e.styleUrls,a=e.animations,u=e.interpolation;this.templateUrl=n,this.template=r,this.styleUrls=s,this.styles=o,this.encapsulation=i,this.animations=a,this.interpolation=u}return t}(),nr=T(kn),rr=T(Ln),ir=M(Me),or=C(Ae),sr=C(Oe),ar=C(Re),ur=C(Ie),cr=T(Dn),lr=C(jn),hr=C(Fn),pr=C(Un),fr=C(Vn),dr=T(Gn),vr=function(){function t(t){void 0===t&&(t=!0),this._console=console,this.rethrowError=t}return t.prototype.handleError=function(t){var e=this._findOriginalError(t),n=this._findOriginalStack(t),r=this._findContext(t);if(this._console.error("EXCEPTION: "+this._extractMessage(t)),e&&this._console.error("ORIGINAL EXCEPTION: "+this._extractMessage(e)),n&&(this._console.error("ORIGINAL STACKTRACE:"),this._console.error(n)),r&&(this._console.error("ERROR CONTEXT:"),this._console.error(r)),this.rethrowError)throw t},t.prototype._extractMessage=function(t){return t instanceof Error?t.message:t.toString()},t.prototype._findContext=function(t){return t?t.context?t.context:this._findContext(t.originalError):null},t.prototype._findOriginalError=function(t){for(var e=t.originalError;e&&e.originalError;)e=e.originalError;return e},t.prototype._findOriginalStack=function(t){if(!(t instanceof Error))return null;for(var e=t,n=e.stack;e instanceof Error&&e.originalError;)e=e.originalError,e instanceof Error&&e.stack&&(n=e.stack);return n},t}(),mr=new Ee("Application Initializer"),yr=function(){function t(t){var e=this;this._done=!1;var n=[];if(t)for(var r=0;r<t.length;r++){var i=t[r]();l(i)&&n.push(i)}this._donePromise=Promise.all(n).then(function(){e._done=!0}),0===n.length&&(this._done=!0)}return Object.defineProperty(t.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"donePromise",{get:function(){return this._donePromise},enumerable:!0,configurable:!0}),t.decorators=[{type:be}],t.ctorParameters=[{type:Array,decorators:[{type:ye,args:[mr]},{type:ge}]}],t}(),gr=new Ee("AppId"),br={provide:gr,useFactory:Y,deps:[]},_r=new Ee("Platform Initializer"),wr=new Ee("appBootstrapListener"),xr=new Ee("Application Packages Root URL"),Er=function(){function t(){}return t.prototype.log=function(t){m(t)},t.prototype.warn=function(t){y(t)},t.decorators=[{type:be}],t.ctorParameters=[],t}(),Sr=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Tr=function(t){function e(e){t.call(this,"Can't compile synchronously as "+p(e)+" is still being loaded!"),this.compType=e}return Sr(e,t),e}(je),Mr=function(){function t(t,e){this.ngModuleFactory=t,this.componentFactories=e}return t}(),Cr=function(){function t(){}return t.prototype.compileModuleSync=function(t){throw K()},t.prototype.compileModuleAsync=function(t){throw K()},t.prototype.compileModuleAndAllComponentsSync=function(t){throw K()},t.prototype.compileModuleAndAllComponentsAsync=function(t){throw K()},t.prototype.clearCache=function(){},t.prototype.clearCacheFor=function(t){},t}(),Ar=new Ee("compilerOptions"),Or=function(){function t(){}return t}(),Pr=function(){function t(){}return t.prototype.supports=function(t){return R(t)},t.prototype.create=function(t,e){return new Ir(e)},t}(),Rr=function(t,e){return e},Ir=function(){function t(t){this._trackByFn=t,this._length=null,this._collection=null,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s(this._trackByFn)?this._trackByFn:Rr}return Object.defineProperty(t.prototype,"collection",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._itHead;null!==e;e=e._next)t(e)},t.prototype.forEachOperation=function(t){for(var e=this._itHead,n=this._removalsHead,r=0,i=null;e||n;){var o=!n||e&&e.currentIndex<Q(n,r,i)?e:n,s=Q(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);var u=s-r,c=a-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,p=h+l;c<=p&&p<u&&(i[l]=h+1)}var f=o.previousIndex;i[f]=c-u}}s!==a&&t(o,s,a)}},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachMovedItem=function(t){var e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.forEachIdentityChange=function(t){var e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)},t.prototype.diff=function(t){if(a(t)&&(t=[]),!R(t))throw new Error("Error trying to diff '"+t+"'");return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n,r,i,o=this._itHead,s=!1;if(h(t)){var a=t;for(this._length=t.length,n=0;n<this._length;n++)r=a[n],i=this._trackByFn(n,r),null!==o&&f(o.trackById,i)?(s&&(o=this._verifyReinsertion(o,r,i,n)),f(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,n),s=!0),o=o._next}else n=0,N(t,function(t){i=e._trackByFn(n,t),null!==o&&f(o.trackById,i)?(s&&(o=e._verifyReinsertion(o,t,i,n)),f(o.item,t)||e._addIdentityChange(o,t)):(o=e._mismatch(o,t,i,n),s=!0),o=o._next,n++}),this._length=n;return this._truncate(o),this._collection=t,this.isDirty},Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),t.prototype._reset=function(){if(this.isDirty){var t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},t.prototype._mismatch=function(t,e,n,r){var i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),t=null===this._linkedRecords?null:this._linkedRecords.get(n,r),null!==t?(f(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n),null!==t?(f(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Nr(e,n),i,r)),t},t.prototype._verifyReinsertion=function(t,e,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t},t.prototype._truncate=function(t){for(;null!==t;){var e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},t.prototype._reinsertAfter=function(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);var r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._moveAfter=function(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t},t.prototype._addAfter=function(t,e,n){return this._insertAfter(t,e,n),null===this._additionsTail?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t},t.prototype._insertAfter=function(t,e,n){var r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new kr),this._linkedRecords.put(t),t.currentIndex=n,t},t.prototype._remove=function(t){return this._addToRemovals(this._unlink(t))},t.prototype._unlink=function(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);var e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t},t.prototype._addToMoves=function(t,e){return t.previousIndex===e?t:(null===this._movesTail?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t,t)},t.prototype._addToRemovals=function(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kr),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t},t.prototype._addIdentityChange=function(t,e){return t.item=e,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t},t.prototype.toString=function(){var t=[];this.forEachItem(function(e){return t.push(e)});var e=[];this.forEachPreviousItem(function(t){return e.push(t)});var n=[];this.forEachAddedItem(function(t){return n.push(t)});var r=[];this.forEachMovedItem(function(t){return r.push(t)});var i=[];this.forEachRemovedItem(function(t){return i.push(t)});var o=[];return this.forEachIdentityChange(function(t){return o.push(t)}),"collection: "+t.join(", ")+"\nprevious: "+e.join(", ")+"\nadditions: "+n.join(", ")+"\nmoves: "+r.join(", ")+"\nremovals: "+i.join(", ")+"\nidentityChanges: "+o.join(", ")+"\n"},t}(),Nr=function(){function t(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}return t.prototype.toString=function(){return this.previousIndex===this.currentIndex?p(this.item):p(this.item)+"["+p(this.previousIndex)+"->"+p(this.currentIndex)+"]"},t}(),Lr=function(){function t(){this._head=null,this._tail=null}return t.prototype.add=function(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)},t.prototype.get=function(t,e){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<n.currentIndex)&&f(n.trackById,t))return n;return null},t.prototype.remove=function(t){var e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head},t}(),kr=function(){function t(){this.map=new Map}return t.prototype.put=function(t){var e=d(t.trackById),n=this.map.get(e);s(n)||(n=new Lr,this.map.set(e,n)),n.add(t)},t.prototype.get=function(t,e){void 0===e&&(e=null);var n=d(t),r=this.map.get(n);return a(r)?null:r.get(t,e)},t.prototype.remove=function(t){var e=d(t.trackById),n=this.map.get(e);return n.remove(t)&&this.map.delete(e),t},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.map.clear()},t.prototype.toString=function(){return"_DuplicateMap("+p(this.map)+")"},t}(),Dr=function(){function t(){}return t.prototype.supports=function(t){return t instanceof Map||v(t)},t.prototype.create=function(t){return new jr},t}(),jr=function(){function t(){this._records=new Map,this._mapHead=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(t.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),t.prototype.forEachItem=function(t){var e;for(e=this._mapHead;null!==e;e=e._next)t(e)},t.prototype.forEachPreviousItem=function(t){var e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)},t.prototype.forEachChangedItem=function(t){var e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)},t.prototype.forEachAddedItem=function(t){var e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)},t.prototype.forEachRemovedItem=function(t){var e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)},t.prototype.diff=function(t){if(t){if(!(t instanceof Map||v(t)))throw new Error("Error trying to diff '"+t+"'")}else t=new Map;return this.check(t)?this:null},t.prototype.onDestroy=function(){},t.prototype.check=function(t){var e=this;this._reset();var n=this._records,r=this._mapHead,i=null,o=null,s=!1;return this._forEach(t,function(t,a){var u;r&&a===r.key?(u=r,e._maybeAddToChanges(u,t)):(s=!0,null!==r&&(e._removeFromSeq(i,r),e._addToRemovals(r)),n.has(a)?(u=n.get(a),e._maybeAddToChanges(u,t)):(u=new Fr(a),n.set(a,u),u.currentValue=t,e._addToAdditions(u))),s&&(e._isInRemovals(u)&&e._removeFromRemovals(u),null==o?e._mapHead=u:o._next=u),i=r,o=u,r=r&&r._next}),this._truncate(i,r),this.isDirty},t.prototype._reset=function(){if(this.isDirty){var t=void 0;for(t=this._previousMapHead=this._mapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=this._removalsTail=null}},t.prototype._truncate=function(t,e){for(;null!==e;){null===t?this._mapHead=null:t._next=null;var n=e._next;this._addToRemovals(e),t=e,e=n}for(var r=this._removalsHead;null!==r;r=r._nextRemoved)r.previousValue=r.currentValue,
r.currentValue=null,this._records.delete(r.key)},t.prototype._maybeAddToChanges=function(t,e){f(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))},t.prototype._isInRemovals=function(t){return t===this._removalsHead||null!==t._nextRemoved||null!==t._prevRemoved},t.prototype._addToRemovals=function(t){null===this._removalsHead?this._removalsHead=this._removalsTail=t:(this._removalsTail._nextRemoved=t,t._prevRemoved=this._removalsTail,this._removalsTail=t)},t.prototype._removeFromSeq=function(t,e){var n=e._next;null===t?this._mapHead=n:t._next=n,e._next=null},t.prototype._removeFromRemovals=function(t){var e=t._prevRemoved,n=t._nextRemoved;null===e?this._removalsHead=n:e._nextRemoved=n,null===n?this._removalsTail=e:n._prevRemoved=e,t._prevRemoved=t._nextRemoved=null},t.prototype._addToAdditions=function(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)},t.prototype._addToChanges=function(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)},t.prototype.toString=function(){var t,e=[],n=[],r=[],i=[],o=[];for(t=this._mapHead;null!==t;t=t._next)e.push(p(t));for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n.push(p(t));for(t=this._changesHead;null!==t;t=t._nextChanged)r.push(p(t));for(t=this._additionsHead;null!==t;t=t._nextAdded)i.push(p(t));for(t=this._removalsHead;null!==t;t=t._nextRemoved)o.push(p(t));return"map: "+e.join(", ")+"\nprevious: "+n.join(", ")+"\nadditions: "+i.join(", ")+"\nchanges: "+r.join(", ")+"\nremovals: "+o.join(", ")+"\n"},t.prototype._forEach=function(t,e){t instanceof Map?t.forEach(e):Ke.forEach(t,e)},t}(),Fr=function(){function t(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._nextAdded=null,this._nextRemoved=null,this._prevRemoved=null,this._nextChanged=null}return t.prototype.toString=function(){return f(this.previousValue,this.currentValue)?p(this.key):p(this.key)+"["+p(this.previousValue)+"->"+p(this.currentValue)+"]"},t}(),Ur=function(){function t(t){this.factories=t}return t.create=function(e,n){if(s(n)){var r=Qe.clone(n.factories);return e=e.concat(r),new t(e)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(a(n))throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new fe,new ce]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(s(e))return e;throw new Error("Cannot find a differ supporting object '"+t+"' of type '"+o(t)+"'")},t}(),Vr=function(){function t(t){this.factories=t}return t.create=function(e,n){if(s(n)){var r=Qe.clone(n.factories);return e=e.concat(r),new t(e)}return new t(e)},t.extend=function(e){return{provide:t,useFactory:function(n){if(a(n))throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new fe,new ce]]}},t.prototype.find=function(t){var e=this.factories.find(function(e){return e.supports(t)});if(s(e))return e;throw new Error("Cannot find a differ supporting object '"+t+"'")},t}(),Br={toString:function(){return"CD_INIT_VALUE"}},zr=function(){function t(t){this.wrapped=t}return t.wrap=function(e){return new t(e)},t}(),Hr=function(){function t(){this.hasWrappedValue=!1}return t.prototype.unwrap=function(t){return t instanceof zr?(this.hasWrappedValue=!0,t.wrapped):t},t.prototype.reset=function(){this.hasWrappedValue=!1},t}(),Gr=function(){function t(t,e){this.previousValue=t,this.currentValue=e}return t.prototype.isFirstChange=function(){return this.previousValue===Br},t}(),Wr=function(){function t(){}return t}(),qr=[new Dr],Xr=[new Pr],Yr=new Ur(Xr),Zr=new Vr(qr),Kr=function(){function t(t,e,n,r,i,o){this.id=t,this.templateUrl=e,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o}return t}(),Qr=function(){function t(){}return Object.defineProperty(t.prototype,"injector",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return O()},enumerable:!0,configurable:!0}),t}(),Jr=function(){function t(){}return t}(),$r=function(){function t(){}return t}();e.SecurityContext,function(t){t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL"}(e.SecurityContext||(e.SecurityContext={}));var ti,ei,ni,ri=function(){function t(){}return t}(),ii=function(){function t(t){this.nativeElement=t}return t}(),oi=$(),si=oi?tt:function(t,e){return it},ai=oi?et:function(t,e){return e},ui=oi?nt:function(t,e){return null},ci=oi?rt:function(t){return null},li=function(){function t(){}return Object.defineProperty(t.prototype,"element",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return O()},enumerable:!0,configurable:!0}),t}(),hi=function(){function t(t){this._element=t,this._createComponentInContainerScope=si("ViewContainerRef#createComponent()"),this._insertScope=si("ViewContainerRef#insert()"),this._removeScope=si("ViewContainerRef#remove()"),this._detachScope=si("ViewContainerRef#detach()")}return t.prototype.get=function(t){return this._element.nestedViews[t].ref},Object.defineProperty(t.prototype,"length",{get:function(){var t=this._element.nestedViews;return s(t)?t.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return this._element.injector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentInjector",{get:function(){return this._element.parentInjector},enumerable:!0,configurable:!0}),t.prototype.createEmbeddedView=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=-1);var r=t.createEmbeddedView(e);return this.insert(r,n),r},t.prototype.createComponent=function(t,e,n,r){void 0===e&&(e=-1),void 0===n&&(n=null),void 0===r&&(r=null);var i=this._createComponentInContainerScope(),o=s(n)?n:this._element.parentInjector,a=t.create(o,r);return this.insert(a.hostView,e),ai(i,a)},t.prototype.insert=function(t,e){void 0===e&&(e=-1);var n=this._insertScope();e==-1&&(e=this.length);var r=t;return this._element.attachView(r.internalView,e),ai(n,r)},t.prototype.move=function(t,e){var n=this._insertScope();if(e!=-1){var r=t;return this._element.moveView(r.internalView,e),ai(n,r)}},t.prototype.indexOf=function(t){return Qe.indexOf(this._element.nestedViews,t.internalView)},t.prototype.remove=function(t){void 0===t&&(t=-1);var e=this._removeScope();t==-1&&(t=this.length-1);var n=this._element.detachView(t);n.destroy(),ai(e)},t.prototype.detach=function(t){void 0===t&&(t=-1);var e=this._detachScope();t==-1&&(t=this.length-1);var n=this._element.detachView(t);return ai(e,n.ref)},t.prototype.clear=function(){for(var t=this.length-1;t>=0;t--)this.remove(t)},t}();!function(t){t[t.HOST=0]="HOST",t[t.COMPONENT=1]="COMPONENT",t[t.EMBEDDED=2]="EMBEDDED"}(ni||(ni={}));var pi,fi=function(){function t(t,e,n,r){this.index=t,this.parentIndex=e,this.parentView=n,this.nativeElement=r,this.nestedViews=null,this.componentView=null}return Object.defineProperty(t.prototype,"elementRef",{get:function(){return new ii(this.nativeElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vcRef",{get:function(){return new hi(this)},enumerable:!0,configurable:!0}),t.prototype.initComponent=function(t,e,n){this.component=t,this.componentConstructorViewQueries=e,this.componentView=n},Object.defineProperty(t.prototype,"parentInjector",{get:function(){return this.parentView.injector(this.parentIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return this.parentView.injector(this.index)},enumerable:!0,configurable:!0}),t.prototype.mapNestedViews=function(t,e){var n=[];return s(this.nestedViews)&&this.nestedViews.forEach(function(r){r.clazz===t&&n.push(e(r))}),n},t.prototype.moveView=function(t,e){var n=this.nestedViews.indexOf(t);if(t.type===ni.COMPONENT)throw new Error("Component views can't be moved!");var r=this.nestedViews;null==r&&(r=[],this.nestedViews=r),Qe.removeAt(r,n),Qe.insert(r,e,t);var i;if(e>0){var o=r[e-1];i=o.lastRootNode}else i=this.nativeElement;s(i)&&t.renderer.attachViewAfter(i,t.flatRootNodes),t.markContentChildAsMoved(this)},t.prototype.attachView=function(t,e){if(t.type===ni.COMPONENT)throw new Error("Component views can't be moved!");var n=this.nestedViews;null==n&&(n=[],this.nestedViews=n),Qe.insert(n,e,t);var r;if(e>0){var i=n[e-1];r=i.lastRootNode}else r=this.nativeElement;s(r)&&t.renderer.attachViewAfter(r,t.flatRootNodes),t.addToContentChildren(this)},t.prototype.detachView=function(t){var e=Qe.removeAt(this.nestedViews,t);if(e.type===ni.COMPONENT)throw new Error("Component views can't be moved!");return e.detach(),e.removeFromContentChildren(this),e},t}(),di=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},vi=function(t){function e(e,n){var r="Expression has changed after it was checked. Previous value: '"+e+"'. Current value: '"+n+"'.";e===Br&&(r+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),t.call(this,r)}return di(e,t),e}(je),mi=function(t){function e(e,n){t.call(this,"Error in "+n.source,e),this.context=n}return di(e,t),e}(Fe),yi=function(t){function e(e){t.call(this,"Attempt to use a destroyed view: "+e)}return di(e,t),e}(je),gi=function(){function t(t,e,n){this._renderer=t,this._appId=e,this._nextCompTypeId=0,this.sanitizer=n}return t.prototype.createRenderComponentType=function(t,e,n,r,i){return new Kr(this._appId+"-"+this._nextCompTypeId++,t,e,n,r,i)},t.prototype.renderComponent=function(t){return this._renderer.renderComponent(t)},t.decorators=[{type:be}],t.ctorParameters=[{type:$r},{type:void 0,decorators:[{type:ye,args:[gr]}]},{type:ri}],t}(),bi=[],_i=9,wi=[],xi={},Ei=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Si=function(){function t(){}return Object.defineProperty(t.prototype,"location",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instance",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostView",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeDetectorRef",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return O()},enumerable:!0,configurable:!0}),t}(),Ti=function(t){function e(e,n){t.call(this),this._hostElement=e,this._componentType=n}return Ei(e,t),Object.defineProperty(e.prototype,"location",{get:function(){return this._hostElement.elementRef},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return this._hostElement.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){return this._hostElement.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hostView",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeDetectorRef",{get:function(){return this._hostElement.parentView.ref},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._hostElement.parentView.destroy()},e.prototype.onDestroy=function(t){this.hostView.onDestroy(t)},e}(Si),Mi=new Object,Ci=function(){function t(t,e,n){this.selector=t,this._viewFactory=e,this._componentType=n}return Object.defineProperty(t.prototype,"componentType",{get:function(){return this._componentType},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=t.get(gi);a(e)&&(e=[]);var i=this._viewFactory(r,t,null),o=i.create(Mi,e,n);return new Ti(o,this._componentType)},t}(),Ai=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Oi=function(t){function e(e){t.call(this,"No component factory found for "+p(e)),this.component=e}return Ai(e,t),e}(je),Pi=function(){function t(){}return t.prototype.resolveComponentFactory=function(t){throw new Oi(t)},t}(),Ri=function(){function t(){}return t.NULL=new Pi,t}(),Ii=function(){function t(t,e){this._parent=e,this._factories=new Map;for(var n=0;n<t.length;n++){var r=t[n];this._factories.set(r.componentType,r)}}return t.prototype.resolveComponentFactory=function(t){var e=this._factories.get(t);return e||(e=this._parent.resolveComponentFactory(t)),e},t}(),Ni=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Li=function(t){function e(e){void 0===e&&(e=!1),t.call(this),this.__isAsync=e}return Ni(e,t),e.prototype.emit=function(e){t.prototype.next.call(this,e)},e.prototype.subscribe=function(e,n,r){var i,o=function(t){return null},s=function(){return null};return e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(s=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(o=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),t.prototype.subscribe.call(this,i,o,s)},e}(n.Subject),ki=function(){function t(t){var e=this,n=t.trace,r=t.onEnter,i=t.onLeave,o=t.setMicrotask,s=t.setMacrotask,a=t.onError;if(this.onEnter=r,this.onLeave=i,this.setMicrotask=o,this.setMacrotask=s,this.onError=a,!Zone)throw new Error("Angular requires Zone.js polyfill.");this.outer=this.inner=Zone.current,Zone.wtfZoneSpec&&(this.inner=this.inner.fork(Zone.wtfZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(this.inner=this.inner.fork(Zone.longStackTraceZoneSpec)),this.inner=this.inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(t,n,r,i,o,s){try{return e.onEnter(),t.invokeTask(r,i,o,s)}finally{e.onLeave()}},onInvoke:function(t,n,r,i,o,s,a){try{return e.onEnter(),t.invoke(r,i,o,s,a)}finally{e.onLeave()}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n==r&&("microTask"==i.change?e.setMicrotask(i.microTask):"macroTask"==i.change&&e.setMacrotask(i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.onError(i),!1}})}return t.isInAngularZone=function(){return Zone.current.get("isAngularZone")===!0},t.prototype.runInner=function(t){return this.inner.run(t)},t.prototype.runInnerGuarded=function(t){return this.inner.runGuarded(t)},t.prototype.runOuter=function(t){return this.outer.run(t)},t}(),Di=function(){function t(t){var e=this,n=t.enableLongStackTrace,r=void 0!==n&&n;this._hasPendingMicrotasks=!1,this._hasPendingMacrotasks=!1,this._isStable=!0,this._nesting=0,this._onUnstable=new Li((!1)),this._onMicrotaskEmpty=new Li((!1)),this._onStable=new Li((!1)),this._onErrorEvents=new Li((!1)),this._zoneImpl=new ki({trace:r,onEnter:function(){e._nesting++,e._isStable&&(e._isStable=!1,e._onUnstable.emit(null))},onLeave:function(){e._nesting--,e._checkStable()},setMicrotask:function(t){e._hasPendingMicrotasks=t,e._checkStable()},setMacrotask:function(t){e._hasPendingMacrotasks=t},onError:function(t){return e._onErrorEvents.emit(t)}})}return t.isInAngularZone=function(){return ki.isInAngularZone()},t.assertInAngularZone=function(){if(!ki.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},t.assertNotInAngularZone=function(){if(ki.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},t.prototype._checkStable=function(){var t=this;if(0==this._nesting&&!this._hasPendingMicrotasks&&!this._isStable)try{this._nesting++,this._onMicrotaskEmpty.emit(null)}finally{if(this._nesting--,!this._hasPendingMicrotasks)try{this.runOutsideAngular(function(){return t._onStable.emit(null)})}finally{this._isStable=!0}}},Object.defineProperty(t.prototype,"onUnstable",{get:function(){return this._onUnstable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onMicrotaskEmpty",{get:function(){return this._onMicrotaskEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onStable",{get:function(){return this._onStable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onError",{get:function(){return this._onErrorEvents},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStable",{get:function(){return this._isStable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingMicrotasks",{get:function(){return this._hasPendingMicrotasks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingMacrotasks",{get:function(){return this._hasPendingMacrotasks},enumerable:!0,configurable:!0}),t.prototype.run=function(t){return this._zoneImpl.runInner(t)},t.prototype.runGuarded=function(t){return this._zoneImpl.runInnerGuarded(t)},t.prototype.runOutsideAngular=function(t){return this._zoneImpl.runOuter(t)},t}(),ji=function(){function t(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this._watchAngularEvents()}return t.prototype._watchAngularEvents=function(){var t=this;this._ngZone.onUnstable.subscribe({next:function(){t._didWork=!0,t._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){t._ngZone.onStable.subscribe({next:function(){Di.assertNotInAngularZone(),i(function(){t._isZoneStable=!0,t._runCallbacksIfReady()})}})})},t.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},t.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},t.prototype.isStable=function(){return this._isZoneStable&&0==this._pendingCount&&!this._ngZone.hasPendingMacrotasks},t.prototype._runCallbacksIfReady=function(){var t=this;this.isStable()?i(function(){for(;0!==t._callbacks.length;)t._callbacks.pop()(t._didWork);t._didWork=!1}):this._didWork=!0},t.prototype.whenStable=function(t){this._callbacks.push(t),this._runCallbacksIfReady()},t.prototype.getPendingRequestCount=function(){return this._pendingCount},t.prototype.findBindings=function(t,e,n){return[]},t.prototype.findProviders=function(t,e,n){return[]},t.decorators=[{type:be}],t.ctorParameters=[{type:Di}],t}(),Fi=function(){function t(){this._applications=new He,Vi.addToWindow(this)}return t.prototype.registerApplication=function(t,e){this._applications.set(t,e)},t.prototype.getTestability=function(t){return this._applications.get(t)},t.prototype.getAllTestabilities=function(){return Ze.values(this._applications)},t.prototype.getAllRootElements=function(){return Ze.keys(this._applications)},t.prototype.findTestabilityInTree=function(t,e){return void 0===e&&(e=!0),Vi.findTestabilityInTree(this,t,e)},t.decorators=[{type:be}],t.ctorParameters=[],t}(),Ui=function(){function t(){}return t.prototype.addToWindow=function(t){},t.prototype.findTestabilityInTree=function(t,e,n){return null},t}(),Vi=new Ui,Bi=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},zi=!0,Hi=!1,Gi=function(){function t(){}return t.prototype.bootstrapModuleFactory=function(t){throw O()},t.prototype.bootstrapModule=function(t,e){throw void 0===e&&(e=[]),O()},Object.defineProperty(t.prototype,"injector",{get:function(){throw O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){throw O()},enumerable:!0,configurable:!0}),t}(),Wi=function(t){function e(e){t.call(this),this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return Bi(e,t),e.prototype.onDestroy=function(t){this._destroyListeners.push(t)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");Qe.clone(this._modules).forEach(function(t){return t.destroy()}),this._destroyListeners.forEach(function(t){return t()}),this._destroyed=!0},e.prototype.bootstrapModuleFactory=function(t){return this._bootstrapModuleFactoryWithZone(t,null)},e.prototype._bootstrapModuleFactoryWithZone=function(t,e){var n=this;return e||(e=new Di({enableLongStackTrace:St()})),e.run(function(){var r=Pn.resolveAndCreate([{provide:Di,useValue:e}],n.injector),i=t.create(r),o=i.injector.get(vr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(function(){return Qe.remove(n._modules,i)}),e.onError.subscribe({next:function(t){o.handleError(t)}}),Pt(o,function(){var t=i.injector.get(yr);return t.donePromise.then(function(){return n._moduleDoBootstrap(i),i})})})},e.prototype.bootstrapModule=function(t,e){return void 0===e&&(e=[]),this._bootstrapModuleWithZone(t,e,null)},e.prototype._bootstrapModuleWithZone=function(t,e,n,r){var i=this;void 0===e&&(e=[]);var o=this.injector.get(Or),s=o.createCompiler(e instanceof Array?e:[e]);return r?s.compileModuleAndAllComponentsAsync(t).then(function(t){var e=t.ngModuleFactory,o=t.componentFactories;return r(o),i._bootstrapModuleFactoryWithZone(e,n)}):s.compileModuleAsync(t).then(function(t){return i._bootstrapModuleFactoryWithZone(t,n)})},e.prototype._moduleDoBootstrap=function(t){var e=t.injector.get(qi);if(t.bootstrapFactories.length>0)t.bootstrapFactories.forEach(function(t){return e.bootstrap(t)});else{if(!t.instance.ngDoBootstrap)throw new Error("The module "+p(t.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');t.instance.ngDoBootstrap(e)}},e.decorators=[{type:be}],e.ctorParameters=[{type:ze}],e}(Gi),qi=function(){function t(){}return Object.defineProperty(t.prototype,"componentTypes",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"components",{get:function(){return O()},enumerable:!0,configurable:!0}),t}(),Xi=function(t){function e(e,n,r,i,o,s,a,u){var c=this;t.call(this),this._zone=e,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=s,this._testabilityRegistry=a,this._testability=u,this._bootstrapListeners=[],this._rootComponents=[],this._rootComponentTypes=[],this._changeDetectorRefs=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._enforceNoNewChanges=St(),this._zone.onMicrotaskEmpty.subscribe({next:function(){c._zone.run(function(){c.tick()})}})}return Bi(e,t),e.prototype.registerChangeDetector=function(t){this._changeDetectorRefs.push(t)},e.prototype.unregisterChangeDetector=function(t){Qe.remove(this._changeDetectorRefs,t)},e.prototype.bootstrap=function(t){var e=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");var n;n=t instanceof Ci?t:this._componentFactoryResolver.resolveComponentFactory(t),this._rootComponentTypes.push(n.componentType);var r=n.create(this._injector,[],n.selector);r.onDestroy(function(){e._unloadComponent(r)});var i=r.injector.get(ji,null);return s(i)&&r.injector.get(Fi).registerApplication(r.location.nativeElement,i),this._loadComponent(r),St()&&this._console.log("Angular 2 is running in the development mode. Call enableProdMode() to enable the production mode."),r},e.prototype._loadComponent=function(t){this._changeDetectorRefs.push(t.changeDetectorRef),this.tick(),this._rootComponents.push(t);var e=this._injector.get(wr,[]).concat(this._bootstrapListeners);e.forEach(function(e){return e(t)})},e.prototype._unloadComponent=function(t){Qe.contains(this._rootComponents,t)&&(this.unregisterChangeDetector(t.changeDetectorRef),Qe.remove(this._rootComponents,t))},e.prototype.tick=function(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var t=e._tickScope();try{this._runningTick=!0,this._changeDetectorRefs.forEach(function(t){return t.detectChanges()}),this._enforceNoNewChanges&&this._changeDetectorRefs.forEach(function(t){return t.checkNoChanges()})}finally{this._runningTick=!1,ai(t)}},e.prototype.ngOnDestroy=function(){Qe.clone(this._rootComponents).forEach(function(t){return t.destroy()})},Object.defineProperty(e.prototype,"componentTypes",{get:function(){return this._rootComponentTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"components",{get:function(){return this._rootComponents},enumerable:!0,configurable:!0}),e._tickScope=si("ApplicationRef#tick()"),e.decorators=[{type:be}],e.ctorParameters=[{type:Di},{type:Er},{type:ze},{type:vr},{type:Ri},{type:yr},{type:Fi,decorators:[{type:ge}]},{type:ji,decorators:[{type:ge}]}],e}(qi),Yi=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Zi=function(){function t(){}return Object.defineProperty(t.prototype,"injector",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"instance",{get:function(){return O()},enumerable:!0,configurable:!0}),t}(),Ki=function(){function t(t,e){this._injectorClass=t,this._moduleType=e}return Object.defineProperty(t.prototype,"moduleType",{get:function(){return this._moduleType},enumerable:!0,configurable:!0}),t.prototype.create=function(t){t||(t=ze.NULL);var e=new this._injectorClass(t);return e.create(),e},t}(),Qi=new Object,Ji=function(t){function e(e,n,r){t.call(this,n,e.get(Ri,Ri.NULL)),this.parent=e,this.bootstrapFactories=r,this._destroyListeners=[],this._destroyed=!1}return Yi(e,t),e.prototype.create=function(){this.instance=this.createInternal()},e.prototype.get=function(t,e){if(void 0===e&&(e=Ve),t===ze||t===Ri)return this;var n=this.getInternal(t,Qi);return n===Qi?this.parent.get(t,e):n},Object.defineProperty(e.prototype,"injector",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+p(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,this.destroyInternal(),this._destroyListeners.forEach(function(t){return t()})},e.prototype.onDestroy=function(t){this._destroyListeners.push(t)},e}(Ii),$i=function(){function t(){}return t}(),to=function(){function t(){this._dirty=!0,this._results=[],this._emitter=new Li}return Object.defineProperty(t.prototype,"changes",{get:function(){return this._emitter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._results.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._results[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._results[this.length-1]},enumerable:!0,configurable:!0}),t.prototype.map=function(t){return this._results.map(t)},t.prototype.filter=function(t){return this._results.filter(t)},t.prototype.reduce=function(t,e){return this._results.reduce(t,e)},t.prototype.forEach=function(t){this._results.forEach(t)},t.prototype.some=function(t){return this._results.some(t)},t.prototype.toArray=function(){return this._results.slice()},t.prototype[g()]=function(){return this._results[g()]()},t.prototype.toString=function(){return this._results.toString()},t.prototype.reset=function(t){this._results=Qe.flatten(t),this._dirty=!1},t.prototype.notifyOnChanges=function(){this._emitter.emit(this)},t.prototype.setDirty=function(){this._dirty=!0},Object.defineProperty(t.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),t}(),eo="#",no="NgFactory",ro=function(){function t(){}return t}(),io={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},oo=function(){function t(t,e){this._compiler=t,this._system=function(){return System},this._config=e||io}return t.prototype.load=function(t){var e=this._compiler instanceof Cr;return e?this.loadFactory(t):this.loadAndCompile(t)},t.prototype.loadAndCompile=function(t){var e=this,n=t.split(eo),r=n[0],i=n[1];return void 0===i&&(i="default"),this._system().import(r).then(function(t){return t[i]}).then(function(t){return Rt(t,r,i)}).then(function(t){return e._compiler.compileModuleAsync(t)})},t.prototype.loadFactory=function(t){var e=t.split(eo),n=e[0],r=e[1],i=no;return void 0===r&&(r="default",i=""),this._system().import(this._config.factoryPathPrefix+n+this._config.factoryPathSuffix).then(function(t){return t[r+i]}).then(function(t){return Rt(t,n,r)})},t.decorators=[{type:be}],t.ctorParameters=[{type:Cr},{type:ro,decorators:[{type:ge}]}],t}(),so=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ao=function(){function t(){}return Object.defineProperty(t.prototype,"elementRef",{get:function(){return null},enumerable:!0,configurable:!0}),t}(),uo=function(t){function e(e,n){t.call(this),this._appElement=e,this._viewFactory=n}return so(e,t),e.prototype.createEmbeddedView=function(t){var e=this._viewFactory(this._appElement.parentView.viewUtils,this._appElement.parentInjector,this._appElement);return e.create(t||{},null,null),e.ref},Object.defineProperty(e.prototype,"elementRef",{get:function(){return this._appElement.elementRef},enumerable:!0,configurable:!0}),e}(ao),co=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},lo=function(){function t(){}return Object.defineProperty(t.prototype,"destroyed",{
get:function(){return O()},enumerable:!0,configurable:!0}),t}(),ho=function(t){function e(){t.apply(this,arguments)}return co(e,t),Object.defineProperty(e.prototype,"context",{get:function(){return O()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootNodes",{get:function(){return O()},enumerable:!0,configurable:!0}),e}(lo),po=function(){function t(t){this._view=t,this._view=t,this._originalMode=this._view.cdMode}return Object.defineProperty(t.prototype,"internalView",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootNodes",{get:function(){return this._view.flatRootNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._view.destroyed},enumerable:!0,configurable:!0}),t.prototype.markForCheck=function(){this._view.markPathToRootAsCheckOnce()},t.prototype.detach=function(){this._view.cdMode=Ne.Detached},t.prototype.detectChanges=function(){this._view.detectChanges(!1)},t.prototype.checkNoChanges=function(){this._view.detectChanges(!0)},t.prototype.reattach=function(){this._view.cdMode=this._originalMode,this.markForCheck()},t.prototype.onDestroy=function(t){this._view.disposables.push(t)},t.prototype.destroy=function(){this._view.destroy()},t}(),fo=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},vo=function(){function t(t,e){this.name=t,this.callback=e}return t}(),mo=function(){function t(t,e,n){this._debugInfo=n,this.nativeNode=t,s(e)&&e instanceof yo?e.addChild(this):this.parent=null,this.listeners=[]}return Object.defineProperty(t.prototype,"injector",{get:function(){return s(this._debugInfo)?this._debugInfo.injector:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentInstance",{get:function(){return s(this._debugInfo)?this._debugInfo.component:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return s(this._debugInfo)?this._debugInfo.context:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){return s(this._debugInfo)?this._debugInfo.references:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){return s(this._debugInfo)?this._debugInfo.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return s(this._debugInfo)?this._debugInfo.source:null},enumerable:!0,configurable:!0}),t}(),yo=function(t){function e(e,n,r){t.call(this,e,n,r),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=e}return fo(e,t),e.prototype.addChild=function(t){s(t)&&(this.childNodes.push(t),t.parent=this)},e.prototype.removeChild=function(t){var e=this.childNodes.indexOf(t);e!==-1&&(t.parent=null,this.childNodes.splice(e,1))},e.prototype.insertChildrenAfter=function(t,e){var n=this.childNodes.indexOf(t);if(n!==-1){var r=this.childNodes.slice(0,n+1),i=this.childNodes.slice(n+1);this.childNodes=Qe.concat(Qe.concat(r,e),i);for(var o=0;o<e.length;++o){var a=e[o];s(a.parent)&&a.parent.removeChild(a),a.parent=this}}},e.prototype.query=function(t){var e=this.queryAll(t);return e.length>0?e[0]:null},e.prototype.queryAll=function(t){var e=[];return Nt(this,t,e),e},e.prototype.queryAllNodes=function(t){var e=[];return Lt(this,t,e),e},Object.defineProperty(e.prototype,"children",{get:function(){var t=[];return this.childNodes.forEach(function(n){n instanceof e&&t.push(n)}),t},enumerable:!0,configurable:!0}),e.prototype.triggerEventHandler=function(t,e){this.listeners.forEach(function(n){n.name==t&&n.callback(e)})},e}(mo),go=new Map,bo=[Wi,{provide:Gi,useExisting:Wi},{provide:yn,useFactory:Ft,deps:[]},{provide:vn,useExisting:yn},Fi,Er],_o=Mt(null,"core",bo),wo=new Ee("LocaleId"),xo=new Ee("Translations"),Eo=new Ee("TranslationsFormat"),So=function(){function t(){}return t.decorators=[{type:dr,args:[{providers:[Xi,{provide:qi,useExisting:Xi},yr,Cr,br,gi,{provide:Ur,useFactory:Ut},{provide:Vr,useFactory:Vt},{provide:wo,useValue:"en-US"}]}]}],t.ctorParameters=[],t}(),To="true",Mo="*",Co="*",Ao="void",Oo=re.Math,Po=function(){function t(t){var e=this;this._players=t,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this.parentPlayer=null;var n=0,r=this._players.length;0==r?i(function(){return e._onFinish()}):this._players.forEach(function(t){t.parentPlayer=e,t.onDone(function(){++n>=r&&e._onFinish()})})}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,s(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){s(this.parentPlayer)||this.init(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this._players.forEach(function(t){return t.play()})},t.prototype.pause=function(){this._players.forEach(function(t){return t.pause()})},t.prototype.restart=function(){this._players.forEach(function(t){return t.restart()})},t.prototype.finish=function(){this._onFinish(),this._players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(t){return t.destroy()})},t.prototype.reset=function(){this._players.forEach(function(t){return t.reset()})},t.prototype.setPosition=function(t){this._players.forEach(function(e){e.setPosition(t)})},t.prototype.getPosition=function(){var t=0;return this._players.forEach(function(e){var n=e.getPosition();t=Oo.min(n,t)}),t},t}(),Ro=function(){function t(t,e){this.offset=t,this.styles=e}return t}(),Io=function(){function t(t,e,n){this.name=t,this.phase=e,this.fullPropertyName=n}return t}(),No=function(){function t(){}return Object.defineProperty(t.prototype,"parentPlayer",{get:function(){throw new Error("NOT IMPLEMENTED: Base Class")},set:function(t){throw new Error("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),t}(),Lo=function(){function t(){var t=this;this._onDoneFns=[],this._onStartFns=[],this._started=!1,this.parentPlayer=null,i(function(){return t._onFinish()})}return t.prototype._onFinish=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.init=function(){},t.prototype.play=function(){this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]),this._started=!0},t.prototype.pause=function(){},t.prototype.restart=function(){},t.prototype.finish=function(){this._onFinish()},t.prototype.destroy=function(){},t.prototype.reset=function(){},t.prototype.setPosition=function(t){},t.prototype.getPosition=function(){return 0},t}(),ko=function(){function t(t){var e=this;this._players=t,this._currentIndex=0,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this.parentPlayer=null,this._players.forEach(function(t){t.parentPlayer=e}),this._onNext(!1)}return t.prototype._onNext=function(t){var e=this;if(!this._finished)if(0==this._players.length)this._activePlayer=new Lo,i(function(){return e._onFinish()});else if(this._currentIndex>=this._players.length)this._activePlayer=new Lo,this._onFinish();else{var n=this._players[this._currentIndex++];n.onDone(function(){return e._onNext(!0)}),this._activePlayer=n,t&&n.play()}},t.prototype._onFinish=function(){this._finished||(this._finished=!0,s(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){this._players.forEach(function(t){return t.init()})},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.hasStarted=function(){return this._started},t.prototype.play=function(){s(this.parentPlayer)||this.init(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this._activePlayer.play()},t.prototype.pause=function(){this._activePlayer.pause()},t.prototype.restart=function(){this._players.length>0&&(this.reset(),this._players[0].restart())},t.prototype.reset=function(){this._players.forEach(function(t){return t.reset()})},t.prototype.finish=function(){this._onFinish(),this._players.forEach(function(t){return t.finish()})},t.prototype.destroy=function(){this._onFinish(),this._players.forEach(function(t){return t.destroy()})},t.prototype.setPosition=function(t){this._players[0].setPosition(t)},t.prototype.getPosition=function(){return this._players[0].getPosition()},t}(),Do=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},jo="*",Fo=function(){function t(t,e){this.name=t,this.definitions=e}return t}(),Uo=function(){function t(){}return t}(),Vo=function(t){function e(e,n){t.call(this),this.stateNameExpr=e,this.styles=n}return Do(e,t),e}(Uo),Bo=function(t){function e(e,n){t.call(this),this.stateChangeExpr=e,this.steps=n}return Do(e,t),e}(Uo),zo=function(){function t(){}return t}(),Ho=function(t){function e(e){t.call(this),this.steps=e}return Do(e,t),e}(zo),Go=function(t){function e(e,n){void 0===n&&(n=null),t.call(this),this.styles=e,this.offset=n}return Do(e,t),e}(zo),Wo=function(t){function e(e,n){t.call(this),this.timings=e,this.styles=n}return Do(e,t),e}(zo),qo=function(t){function e(){t.call(this)}return Do(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){throw new Error("NOT IMPLEMENTED: Base Class")},enumerable:!0,configurable:!0}),e}(zo),Xo=function(t){function e(e){t.call(this),this._steps=e}return Do(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),e}(qo),Yo=function(t){function e(e){t.call(this),this._steps=e}return Do(e,t),Object.defineProperty(e.prototype,"steps",{get:function(){return this._steps},enumerable:!0,configurable:!0}),e}(qo),Zo=function(){function t(t){this.styles=t}return t}(),Ko=function(){function t(t){this._delegate=t}return t.prototype.renderComponent=function(t){return new Qo(this._delegate.renderComponent(t))},t}(),Qo=function(){function t(t){this._delegate=t}return t.prototype.selectRootElement=function(t,e){var n=this._delegate.selectRootElement(t,e),r=new yo(n,null,e);return Dt(r),n},t.prototype.createElement=function(t,e,n){var r=this._delegate.createElement(t,e,n),i=new yo(r,kt(t),n);return i.name=e,Dt(i),r},t.prototype.createViewRoot=function(t){return this._delegate.createViewRoot(t)},t.prototype.createTemplateAnchor=function(t,e){var n=this._delegate.createTemplateAnchor(t,e),r=new mo(n,kt(t),e);return Dt(r),n},t.prototype.createText=function(t,e,n){var r=this._delegate.createText(t,e,n),i=new mo(r,kt(t),n);return Dt(i),r},t.prototype.projectNodes=function(t,e){var n=kt(t);if(s(n)&&n instanceof yo){var r=n;e.forEach(function(t){r.addChild(kt(t))})}this._delegate.projectNodes(t,e)},t.prototype.attachViewAfter=function(t,e){var n=kt(t);if(s(n)){var r=n.parent;if(e.length>0&&s(r)){var i=[];e.forEach(function(t){return i.push(kt(t))}),r.insertChildrenAfter(n,i)}}this._delegate.attachViewAfter(t,e)},t.prototype.detachView=function(t){t.forEach(function(t){var e=kt(t);s(e)&&s(e.parent)&&e.parent.removeChild(e)}),this._delegate.detachView(t)},t.prototype.destroyView=function(t,e){e.forEach(function(t){jt(kt(t))}),this._delegate.destroyView(t,e)},t.prototype.listen=function(t,e,n){var r=kt(t);return s(r)&&r.listeners.push(new vo(e,n)),this._delegate.listen(t,e,n)},t.prototype.listenGlobal=function(t,e,n){return this._delegate.listenGlobal(t,e,n)},t.prototype.setElementProperty=function(t,e,n){var r=kt(t);s(r)&&r instanceof yo&&(r.properties[e]=n),this._delegate.setElementProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r=kt(t);s(r)&&r instanceof yo&&(r.attributes[e]=n),this._delegate.setElementAttribute(t,e,n)},t.prototype.setBindingDebugInfo=function(t,e,n){this._delegate.setBindingDebugInfo(t,e,n)},t.prototype.setElementClass=function(t,e,n){var r=kt(t);s(r)&&r instanceof yo&&(r.classes[e]=n),this._delegate.setElementClass(t,e,n)},t.prototype.setElementStyle=function(t,e,n){var r=kt(t);s(r)&&r instanceof yo&&(r.styles[e]=n),this._delegate.setElementStyle(t,e,n)},t.prototype.invokeElementMethod=function(t,e,n){this._delegate.invokeElementMethod(t,e,n)},t.prototype.setText=function(t,e){this._delegate.setText(t,e)},t.prototype.animate=function(t,e,n,r,i,o){return this._delegate.animate(t,e,n,r,i,o)},t}(),Jo=function(){function t(t,e,n){this.providerTokens=t,this.componentToken=e,this.refTokens=n}return t}(),$o=function(){function t(t,e,n,r){this._view=t,this._nodeIndex=e,this._tplRow=n,this._tplCol=r}return Object.defineProperty(t.prototype,"_staticNodeInfo",{get:function(){return s(this._nodeIndex)?this._view.staticNodeDebugInfos[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){var t=this._staticNodeInfo;return s(t)&&s(t.componentToken)?this.injector.get(t.componentToken):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentRenderElement",{get:function(){for(var t=this._view;s(t.declarationAppElement)&&t.type!==ni.COMPONENT;)t=t.declarationAppElement.parentView;return s(t.declarationAppElement)?t.declarationAppElement.nativeElement:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return this._view.injector(this._nodeIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderNode",{get:function(){return s(this._nodeIndex)&&this._view.allNodes?this._view.allNodes[this._nodeIndex]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"providerTokens",{get:function(){var t=this._staticNodeInfo;return s(t)?t.providerTokens:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._view.componentType.templateUrl+":"+this._tplRow+":"+this._tplCol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"references",{get:function(){var t=this,e={},n=this._staticNodeInfo;if(s(n)){var r=n.refTokens;Ke.forEach(r,function(n,r){var i;i=a(n)?t._view.allNodes?t._view.allNodes[t._nodeIndex]:null:t._view.injectorGet(n,t._nodeIndex,null),e[r]=i})}return e},enumerable:!0,configurable:!0}),t}(),ts=function(){function t(t){var e=t.fromState,n=t.toState,r=t.totalTime;this.fromState=e,this.toState=n,this.totalTime=r}return t}(),es=function(){function t(){this._map=new He,this._allPlayers=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.getAllPlayers().length},enumerable:!0,configurable:!0}),t.prototype.find=function(t,e){var n=this._map.get(t);if(s(n))return n[e]},t.prototype.findAllPlayersByElement=function(t){var e=this._map.get(t);return e?Ke.values(e):[]},t.prototype.set=function(t,e,n){var r=this._map.get(t);s(r)||(r={});var i=r[e];s(i)&&this.remove(t,e),r[e]=n,this._allPlayers.push(n),this._map.set(t,r)},t.prototype.getAllPlayers=function(){return this._allPlayers},t.prototype.remove=function(t,e){var n=this._map.get(t);if(s(n)){var r=n[e];delete n[e];var i=this._allPlayers.indexOf(r);Qe.removeAt(this._allPlayers,i),Ke.isEmpty(n)&&this._map.delete(t)}},t}(),ns=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},rs=new Object,is=function(t){function e(e,n){t.call(this),this._view=e,this._nodeIndex=n}return ns(e,t),e.prototype.get=function(t,e){void 0===e&&(e=Ve);var n=rs;return n===rs&&(n=this._view.injectorGet(t,this._nodeIndex,rs)),n===rs&&(n=this._view.parentInjector.get(t,e)),n},e}(ze),os=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ss=si("AppView#check(ascii id)"),as=function(){function t(t,e,n,r,i,o,s){this.clazz=t,this.componentType=e,this.type=n,this.viewUtils=r,this.parentInjector=i,this.declarationAppElement=o,this.cdMode=s,this.contentChildren=[],this.viewChildren=[],this.viewContainerElement=null,this.numberOfChecks=0,this.animationPlayers=new es,this._animationListeners=new Map,this.ref=new po(this),n===ni.COMPONENT||n===ni.HOST?this.renderer=r.renderComponent(e):this.renderer=o.parentView.renderer}return Object.defineProperty(t.prototype,"destroyed",{get:function(){return this.cdMode===Ne.Destroyed},enumerable:!0,configurable:!0}),t.prototype.cancelActiveAnimation=function(t,e,n){if(void 0===n&&(n=!1),n)this.animationPlayers.findAllPlayersByElement(t).forEach(function(t){return t.destroy()});else{var r=this.animationPlayers.find(t,e);s(r)&&r.destroy()}},t.prototype.queueAnimation=function(t,e,n,r,i,o){var s=this,a=new ts({fromState:i,toState:o,totalTime:r});this.animationPlayers.set(t,e,n),n.onDone(function(){s.triggerAnimationOutput(t,e,"done",a),s.animationPlayers.remove(t,e)}),n.onStart(function(){s.triggerAnimationOutput(t,e,"start",a)})},t.prototype.triggerQueuedAnimations=function(){this.animationPlayers.getAllPlayers().forEach(function(t){t.hasStarted()||t.play()})},t.prototype.triggerAnimationOutput=function(t,e,n,r){var i=this._animationListeners.get(t);if(s(i)&&i.length)for(var o=0;o<i.length;o++){var a=i[o];if(a.output.name==e&&a.output.phase==n){a.handler(r);break}}},t.prototype.registerAnimationOutput=function(t,e,n){var r=new cs(e,n),i=this._animationListeners.get(t);s(i)||this._animationListeners.set(t,i=[]),i.push(r)},t.prototype.create=function(t,e,n){this.context=t;var r;switch(this.type){case ni.COMPONENT:r=at(e,this.componentType.slotCount);break;case ni.EMBEDDED:r=this.declarationAppElement.parentView.projectableNodes;break;case ni.HOST:r=e}return this._hasExternalHostElement=s(n),this.projectableNodes=r,this.createInternal(n)},t.prototype.createInternal=function(t){return null},t.prototype.init=function(t,e,n,r){this.rootNodesOrAppElements=t,this.allNodes=e,this.disposables=n,this.subscriptions=r,this.type===ni.COMPONENT&&(this.declarationAppElement.parentView.viewChildren.push(this),this.dirtyParentQueriesInternal())},t.prototype.selectOrCreateHostElement=function(t,e,n){var r;return r=s(e)?this.renderer.selectRootElement(e,n):this.renderer.createElement(null,t,n)},t.prototype.injectorGet=function(t,e,n){return this.injectorGetInternal(t,e,n)},t.prototype.injectorGetInternal=function(t,e,n){return n},t.prototype.injector=function(t){return s(t)?new is(this,t):this.parentInjector},t.prototype.destroy=function(){this._hasExternalHostElement?this.renderer.detachView(this.flatRootNodes):s(this.viewContainerElement)&&this.viewContainerElement.detachView(this.viewContainerElement.nestedViews.indexOf(this)),this._destroyRecurse()},t.prototype._destroyRecurse=function(){if(this.cdMode!==Ne.Destroyed){for(var t=this.contentChildren,e=0;e<t.length;e++)t[e]._destroyRecurse();t=this.viewChildren;for(var e=0;e<t.length;e++)t[e]._destroyRecurse();this.destroyLocal(),this.cdMode=Ne.Destroyed}},t.prototype.destroyLocal=function(){for(var t=this,e=this.type===ni.COMPONENT?this.declarationAppElement.nativeElement:null,n=0;n<this.disposables.length;n++)this.disposables[n]();for(var n=0;n<this.subscriptions.length;n++)this.subscriptions[n].unsubscribe();if(this.destroyInternal(),this.dirtyParentQueriesInternal(),0==this.animationPlayers.length)this.renderer.destroyView(e,this.allNodes);else{var r=new Po(this.animationPlayers.getAllPlayers());r.onDone(function(){t.renderer.destroyView(e,t.allNodes)})}},t.prototype.destroyInternal=function(){},t.prototype.detachInternal=function(){},t.prototype.detach=function(){var t=this;if(this.detachInternal(),0==this.animationPlayers.length)this.renderer.detachView(this.flatRootNodes);else{var e=new Po(this.animationPlayers.getAllPlayers());e.onDone(function(){t.renderer.detachView(t.flatRootNodes)})}},Object.defineProperty(t.prototype,"changeDetectorRef",{get:function(){return this.ref},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return s(this.declarationAppElement)?this.declarationAppElement.parentView:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flatRootNodes",{get:function(){return ot(this.rootNodesOrAppElements)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastRootNode",{get:function(){var t=this.rootNodesOrAppElements.length>0?this.rootNodesOrAppElements[this.rootNodesOrAppElements.length-1]:null;return ee(t)},enumerable:!0,configurable:!0}),t.prototype.dirtyParentQueriesInternal=function(){},t.prototype.detectChanges=function(t){var e=ss(this.clazz);this.cdMode!==Ne.Checked&&this.cdMode!==Ne.Errored&&(this.cdMode===Ne.Destroyed&&this.throwDestroyedError("detectChanges"),this.detectChangesInternal(t),this.cdMode===Ne.CheckOnce&&(this.cdMode=Ne.Checked),this.numberOfChecks++,ai(e))},t.prototype.detectChangesInternal=function(t){this.detectContentChildrenChanges(t),this.detectViewChildrenChanges(t)},t.prototype.detectContentChildrenChanges=function(t){for(var e=0;e<this.contentChildren.length;++e){var n=this.contentChildren[e];n.cdMode!==Ne.Detached&&n.detectChanges(t)}},t.prototype.detectViewChildrenChanges=function(t){for(var e=0;e<this.viewChildren.length;++e){var n=this.viewChildren[e];n.cdMode!==Ne.Detached&&n.detectChanges(t)}},t.prototype.markContentChildAsMoved=function(t){this.dirtyParentQueriesInternal()},t.prototype.addToContentChildren=function(t){t.parentView.contentChildren.push(this),this.viewContainerElement=t,this.dirtyParentQueriesInternal()},t.prototype.removeFromContentChildren=function(t){Qe.remove(t.parentView.contentChildren,this),this.dirtyParentQueriesInternal(),this.viewContainerElement=null},t.prototype.markAsCheckOnce=function(){this.cdMode=Ne.CheckOnce},t.prototype.markPathToRootAsCheckOnce=function(){for(var t=this;s(t)&&t.cdMode!==Ne.Detached;){t.cdMode===Ne.Checked&&(t.cdMode=Ne.CheckOnce);var e=t.type===ni.COMPONENT?t.declarationAppElement:t.viewContainerElement;t=s(e)?e.parentView:null}},t.prototype.eventHandler=function(t){return t},t.prototype.throwDestroyedError=function(t){throw new yi(t)},t}(),us=function(t){function e(e,n,r,i,o,s,a,u){t.call(this,e,n,r,i,o,s,a),this.staticNodeDebugInfos=u,this._currentDebugContext=null}return os(e,t),e.prototype.create=function(e,n,r){this._resetDebug();try{return t.prototype.create.call(this,e,n,r)}catch(i){throw this._rethrowWithContext(i),i}},e.prototype.injectorGet=function(e,n,r){this._resetDebug();try{return t.prototype.injectorGet.call(this,e,n,r)}catch(i){throw this._rethrowWithContext(i),i}},e.prototype.detach=function(){this._resetDebug();try{t.prototype.detach.call(this)}catch(e){throw this._rethrowWithContext(e),e}},e.prototype.destroyLocal=function(){this._resetDebug();try{t.prototype.destroyLocal.call(this)}catch(e){throw this._rethrowWithContext(e),e}},e.prototype.detectChanges=function(e){this._resetDebug();try{t.prototype.detectChanges.call(this,e)}catch(n){throw this._rethrowWithContext(n),n}},e.prototype._resetDebug=function(){this._currentDebugContext=null},e.prototype.debug=function(t,e,n){return this._currentDebugContext=new $o(this,t,e,n)},e.prototype._rethrowWithContext=function(t){if(!(t instanceof mi)&&(t instanceof vi||(this.cdMode=Ne.Errored),s(this._currentDebugContext)))throw new mi(t,this._currentDebugContext)},e.prototype.eventHandler=function(e){var n=this,r=t.prototype.eventHandler.call(this,e);return function(t){n._resetDebug();try{return r(t)}catch(e){throw n._rethrowWithContext(e),e}}},e}(as),cs=function(){function t(t,e){this.output=t,this.handler=e}return t}(),ls={isDefaultChangeDetectionStrategy:A,ChangeDetectorStatus:Ne,CHANGE_DETECTION_STRATEGY_VALUES:ke,constructDependencies:H,LifecycleHooks:Le,LIFECYCLE_HOOKS_VALUES:Wn,ReflectorReader:vn,CodegenComponentFactoryResolver:Ii,AppElement:fi,AppView:as,DebugAppView:us,NgModuleInjector:Ji,ViewType:ni,MAX_INTERPOLATION_VALUES:_i,checkBinding:lt,flattenNestedViewRenderNodes:ot,interpolate:ut,ViewUtils:gi,VIEW_ENCAPSULATION_VALUES:tr,ViewMetadata:er,DebugContext:$o,StaticNodeDebugInfo:Jo,devModeEqual:J,UNINITIALIZED:Br,ValueUnwrapper:Hr,RenderDebugInfo:Qr,TemplateRef_:uo,ReflectionCapabilities:dn,makeDecorator:T,DebugDomRootRenderer:Ko,EMPTY_ARRAY:wi,EMPTY_MAP:xi,pureProxy1:pt,pureProxy2:ft,pureProxy3:dt,pureProxy4:vt,pureProxy5:mt,pureProxy6:yt,pureProxy7:gt,pureProxy8:bt,pureProxy9:_t,pureProxy10:wt,castByValue:ht,Console:Er,reflector:gn,Reflector:yn,NoOpAnimationPlayer:Lo,AnimationPlayer:No,AnimationSequencePlayer:ko,AnimationGroupPlayer:Po,AnimationKeyframe:Ro,prepareFinalAnimationStyles:Zt,balanceAnimationKeyframes:Kt,flattenStyles:te,clearStyles:Qt,renderStyles:$t,collectAndResolveStyles:Jt,AnimationStyles:Zo,AnimationOutput:Io,ANY_STATE:Mo,DEFAULT_STATE:Co,EMPTY_STATE:Ao,FILL_STYLE_FLAG:To,ComponentStillLoadingError:Tr};e.createPlatform=Tt,e.assertPlatform=Ct,e.destroyPlatform=At,e.getPlatform=Ot,e.PlatformRef=Gi,e.ApplicationRef=qi,e.enableProdMode=Et,e.isDevMode=St,e.createPlatformFactory=Mt,e.APP_ID=gr,e.PACKAGE_ROOT_URL=xr,e.PLATFORM_INITIALIZER=_r,e.APP_BOOTSTRAP_LISTENER=wr,e.APP_INITIALIZER=mr,e.ApplicationInitStatus=yr,e.DebugElement=yo,e.DebugNode=mo,e.asNativeElements=It,e.getDebugNode=kt,e.Testability=ji,e.TestabilityRegistry=Fi,e.setTestabilityGetter=xt,e.TRANSLATIONS=xo,e.TRANSLATIONS_FORMAT=Eo,e.LOCALE_ID=wo,e.ApplicationModule=So,e.wtfCreateScope=si,e.wtfLeave=ai,e.wtfStartTimeRange=ui,e.wtfEndTimeRange=ci,e.Type=fn,e.EventEmitter=Li,e.ErrorHandler=vr,e.AnimationTransitionEvent=ts,e.AnimationPlayer=No,e.Sanitizer=ri,e.Component=nr,e.Directive=rr,e.Attribute=ir,e.ContentChildren=or,e.ContentChild=sr,e.ViewChildren=ar,e.ViewChild=ur,e.Pipe=cr,e.Input=lr,e.Output=hr,e.HostBinding=pr,e.HostListener=fr,e.NgModule=dr,e.ANALYZE_FOR_ENTRY_COMPONENTS=Te,e.AttributeMetadata=Me,e.ContentChildMetadata=Oe,e.ContentChildrenMetadata=Ae,e.QueryMetadata=Ce,e.ViewChildMetadata=Ie,e.ViewChildrenMetadata=Re,e.ViewQueryMetadata=Pe,e.ComponentMetadata=kn,e.DirectiveMetadata=Ln,e.HostBindingMetadata=Un,e.HostListenerMetadata=Vn,e.InputMetadata=jn,e.OutputMetadata=Fn,e.PipeMetadata=Dn,e.AfterContentChecked=Qn,e.AfterContentInit=Kn,e.AfterViewChecked=$n,e.AfterViewInit=Jn,e.DoCheck=Yn,e.OnChanges=qn,e.OnDestroy=Zn,e.OnInit=Xn,e.CUSTOM_ELEMENTS_SCHEMA=zn,e.NO_ERRORS_SCHEMA=Hn,e.NgModuleMetadata=Gn,e.Class=S,e.HostMetadata=de,e.InjectMetadata=ue,e.InjectableMetadata=he,e.OptionalMetadata=ce,e.SelfMetadata=pe,e.SkipSelfMetadata=fe,e.forwardRef=_,e.resolveForwardRef=w,e.Injector=ze,e.ReflectiveInjector=Pn,e.ResolvedReflectiveFactory=xn,e.ReflectiveKey=ln,e.OpaqueToken=Ee,e.Inject=ye,e.Optional=ge,e.Injectable=be,e.Self=_e,e.Host=we,e.SkipSelf=xe,e.NgZone=Di,e.RenderComponentType=Kr,e.Renderer=Jr,e.RootRenderer=$r,e.COMPILER_OPTIONS=Ar,e.Compiler=Cr,e.CompilerFactory=Or,e.ModuleWithComponentFactories=Mr,e.ComponentFactory=Ci,e.ComponentRef=Si,e.ComponentFactoryResolver=Ri,e.ElementRef=ii,e.NgModuleFactory=Ki,e.NgModuleRef=Zi,e.NgModuleFactoryLoader=$i,e.QueryList=to,e.SystemJsNgModuleLoader=oo,e.SystemJsNgModuleLoaderConfig=ro,e.TemplateRef=ao,e.ViewContainerRef=li,e.EmbeddedViewRef=ho,e.ViewRef=lo,e.ChangeDetectorRef=Wr,e.CollectionChangeRecord=Nr,e.DefaultIterableDiffer=Ir,e.IterableDiffers=Ur,e.KeyValueChangeRecord=Fr,e.KeyValueDiffers=Vr,e.SimpleChange=Gr,e.WrappedValue=zr,e.platformCore=_o,e.__core_private__=ls,e.AUTO_STYLE=jo,e.AnimationEntryMetadata=Fo,e.AnimationStateMetadata=Uo,e.AnimationStateDeclarationMetadata=Vo,e.AnimationStateTransitionMetadata=Bo,e.AnimationMetadata=zo,e.AnimationKeyframesSequenceMetadata=Ho,e.AnimationStyleMetadata=Go,e.AnimationAnimateMetadata=Wo,e.AnimationWithStepsMetadata=qo,e.AnimationSequenceMetadata=Xo,e.AnimationGroupMetadata=Yo,e.animate=Bt,e.group=zt,e.sequence=Ht,e.style=Gt,e.state=Wt,e.keyframes=qt,e.transition=Xt,e.trigger=Yt})}).call(e,function(){return this}())},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(9),s=n(11),a=n(20),u=n(21),c=n(18),l=function(t){function e(e){t.call(this,e),this.destination=e}return r(e,t),e}(o.Subscriber);e.SubjectSubscriber=l;var h=function(t){function e(){t.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(e,t),e.prototype[c.$$rxSubscriber]=function(){return new l(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(i.Observable);e.Subject=h;var p=function(t){function e(e,n){t.call(this),this.destination=e,this.source=n}return r(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var e=this.source;return e?this.source.subscribe(t):s.Subscription.EMPTY},e}(h);e.AnonymousSubject=p},function(t,e,n){"use strict";var r=n(6),i=n(8),o=n(19),s=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=i.toSubscriber(t,e,n);if(r?r.call(o,this):o.add(this._subscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype.forEach=function(t,e){var n=this;if(e||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?e=r.root.Rx.config.Promise:r.root.Promise&&(e=r.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var i=n.subscribe(function(e){if(i)try{t(e)}catch(n){r(n),i.unsubscribe()}else t(e)},r,e)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[o.$$observable]=function(){return this},t.create=function(e){return new t(e)},t}();e.Observable=s},function(t,e,n){(function(t,n){"use strict";var r={"boolean":!1,
"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.root=r[typeof self]&&self||r[typeof window]&&window;var i=(r[typeof e]&&e&&!e.nodeType&&e,r[typeof t]&&t&&!t.nodeType&&t,r[typeof n]&&n);!i||i.global!==i&&i.window!==i||(e.root=i)}).call(e,n(7)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e,n){if(t){if(t instanceof i.Subscriber)return t;if(t[o.$$rxSubscriber])return t[o.$$rxSubscriber]()}return t||e||n?new i.Subscriber(t,e,n):new i.Subscriber}var i=n(9),o=n(18);e.toSubscriber=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(10),o=n(11),s=n(17),a=n(18),u=function(t){function e(n,r,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.empty;break;case 1:if(!n){this.destination=s.empty;break}if("object"==typeof n){n instanceof e?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(e,t),e.prototype[a.$$rxSubscriber]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e}(o.Subscription);e.Subscriber=u;var c=function(t){function e(e,n,r,o){t.call(this),this._parent=e;var s,a=this;i.isFunction(n)?s=n:n&&(a=n,s=n.next,r=n.error,o=n.complete,i.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this)),this._context=a,this._next=s,this._error=r,this._complete=o}return r(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parent;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parent;if(this._error)e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},e.prototype.complete=function(){if(!this.isStopped){var t=this._parent;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(n){throw this.unsubscribe(),n}},e.prototype.__tryOrSetError=function(t,e,n){try{e.call(this._context,n)}catch(r){return t.syncErrorValue=r,t.syncErrorThrown=!0,!0}return!1},e.prototype._unsubscribe=function(){var t=this._parent;this._context=null,this._parent=null,t.unsubscribe()},e}(u)},function(t,e){"use strict";function n(t){return"function"==typeof t}e.isFunction=n},function(t,e,n){"use strict";var r=n(12),i=n(13),o=n(10),s=n(14),a=n(15),u=n(16),c=function(){function t(t){this.closed=!1,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){this.closed=!0;var n=this,c=n._unsubscribe,l=n._subscriptions;if(this._subscriptions=null,o.isFunction(c)){var h=s.tryCatch(c).call(this);h===a.errorObject&&(e=!0,(t=t||[]).push(a.errorObject.e))}if(r.isArray(l))for(var p=-1,f=l.length;++p<f;){var d=l[p];if(i.isObject(d)){var h=s.tryCatch(d.unsubscribe).call(d);if(h===a.errorObject){e=!0,t=t||[];var v=a.errorObject.e;v instanceof u.UnsubscriptionError?t=t.concat(v.errors):t.push(v)}}}if(e)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)break;this.closed?n.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(n);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return n},t.prototype.remove=function(e){if(null!=e&&e!==this&&e!==t.EMPTY){var n=this._subscriptions;if(n){var r=n.indexOf(e);r!==-1&&n.splice(r,1)}}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();e.Subscription=c},function(t,e){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e){"use strict";function n(t){return null!=t&&"object"==typeof t}e.isObject=n},function(t,e,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(t){return s.errorObject.e=t,s.errorObject}}function i(t){return o=t,r}var o,s=n(15);e.tryCatch=i},function(t,e){"use strict";e.errorObject={e:{}}},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(e){t.call(this),this.errors=e;var n=Error.call(this,e?e.length+" errors occurred during unsubscription:\n  "+e.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(e,t),e}(Error);e.UnsubscriptionError=r},function(t,e){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,n){"use strict";var r=n(6),i=r.root.Symbol;e.$$rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber"},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var i=n(6);e.getSymbolObservable=r,e.$$observable=r(i.root)},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"object unsubscribed");this.name=e.name="ObjectUnsubscribedError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.ObjectUnsubscribedError=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(11),o=function(t){function e(e,n){t.call(this),this.subject=e,this.subscriber=n,this.closed=!1}return r(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);n!==-1&&e.splice(n,1)}}},e}(i.Subscription);e.SubjectSubscription=o},function(t,e,n){(function(t){!function(t,r){r(e,n(23),n(3))}(this,function(e,n,r){"use strict";function i(t){return void 0!==t&&null!==t}function o(t){return void 0===t||null===t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"function"==typeof t}function c(t){return Array.isArray(t)}function l(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.overriddenName)return t.overriddenName;if(t.name)return t.name;var e=t.toString(),n=e.indexOf("\n");return n===-1?e:e.substring(0,n)}function h(t,e,n){for(var r=e.split("."),o=t;r.length>1;){var s=r.shift();o=o.hasOwnProperty(s)&&i(o[s])?o[s]:o[s]={}}void 0!==o&&null!==o||(o={}),o[r.shift()]=n}function p(t,e){if(i(t))for(var n=0;n<t.length;n++){var r=t[n];c(r)?p(r,e):e.push(r)}return e}function f(t){return st.replaceAllMapped(t,dt,function(t){return"-"+t[1].toLowerCase()})}function d(t){return st.replaceAllMapped(t,vt,function(t){return t[1].toUpperCase()})}function v(){return mt}function m(t){o(mt)&&(mt=t)}function y(t,e){return v().getComputedStyle(t)[e]}function g(t,e,n){var o={};return e.styles.forEach(function(t){pt.forEach(t,function(t,e){var n=d(e);o[n]=t==r.AUTO_STYLE?t:t.toString()+b(t,e,n)})}),pt.forEach(n,function(t,e){i(o[e])||(o[e]=t)}),o}function b(t,e,n){var r="";if(w(n)&&0!=t&&"0"!=t)if(s(t))r="px";else if(0==_(t.toString()).length)throw new Error("Please provide a CSS unit value for "+e+":"+t);return r}function _(t){for(var e=0;e<t.length;e++){var n=st.charCodeAt(t,e);if(!(n>=_t&&n<=wt||n==xt))return t.substring(e,t.length)}return""}function w(t){switch(t){case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":case"left":case"top":case"bottom":case"right":case"fontSize":case"outlineWidth":case"outlineOffset":case"paddingTop":case"paddingLeft":case"paddingBottom":case"paddingRight":case"marginTop":case"marginLeft":case"marginBottom":case"marginRight":case"borderRadius":case"borderWidth":case"borderTopWidth":case"borderLeftWidth":case"borderRightWidth":case"borderBottomWidth":case"textIndent":return!0;default:return!1}}function x(){return o(Rt)&&(Rt=document.querySelector("base"),o(Rt))?null:Rt.getAttribute("href")}function E(t){return o(It)&&(It=document.createElement("a")),It.setAttribute("href",t),"/"===It.pathname.charAt(0)?It.pathname:"/"+It.pathname}function S(t,e){e=encodeURIComponent(e);for(var n=0,r=t.split(";");n<r.length;n++){var i=r[n],o=i.indexOf("="),s=o==-1?[i,""]:[i.slice(0,o),i.slice(o+1)],a=s[0],u=s[1];if(a.trim()===e)return decodeURIComponent(u)}return null}function T(){return!!window.history.pushState}function M(t,e){var n=v().parentElement(t);if(e.length>0&&i(n)){var r=v().nextSibling(t);if(i(r))for(var o=0;o<e.length;o++)v().insertBefore(r,e[o]);else for(var o=0;o<e.length;o++)v().appendChild(n,e[o])}}function C(t,e){for(var n=0;n<e.length;n++)v().appendChild(t,e[n])}function A(t){return function(e){var n=t(e);n===!1&&v().preventDefault(e)}}function O(t){return st.replaceAll($t,Kt,t)}function P(t){return st.replaceAll(Jt,Kt,t)}function R(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];c(i)?R(t,i,n):(i=st.replaceAll(i,Kt,t),n.push(i))}return n}function I(t){if(":"!=t[0])return[null,t];var e=t.match(te);return[e[1],e[2]]}function N(t){return r.getDebugNode(t)}function L(t,e){return r.isDevMode()?k(t,e):t}function k(t,e){return v().setGlobalVar(ne,N),v().setGlobalVar(re,pt.merge(ee,D(e||[]))),new tt(t)}function D(t){return t.reduce(function(t,e){return t[e.name]=e.token,t},{})}function j(t){return t=String(t),t.match(be)||t.match(_e)?t:(r.isDevMode()&&v().log("WARNING: sanitizing unsafe URL value "+t+" (see http://g.co/ng/security#xss)"),"unsafe:"+t)}function F(t){return t=String(t),t.split(",").map(function(t){return j(t.trim())}).join(", ")}function U(){if(we)return we;xe=v();var t=xe.createElement("template");if("content"in t)return t;var e=xe.createHtmlDocument();if(we=xe.querySelector(e,"body"),null==we){var n=xe.createElement("html",e);we=xe.createElement("body",e),xe.appendChild(n,we),xe.appendChild(e,n)}return we}function V(t){for(var e={},n=0,r=t.split(",");n<r.length;n++){var i=r[n];e[i]=!0}return e}function B(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];for(var s in o)o.hasOwnProperty(s)&&(n[s]=!0)}return n}function z(t){return t.replace(/&/g,"&amp;").replace(ke,function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return"&#"+(1024*(e-55296)+(n-56320)+65536)+";"}).replace(De,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function H(t){xe.attributeMap(t).forEach(function(e,n){"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||xe.removeAttribute(t,n)});for(var e=0,n=xe.childNodesAsList(t);e<n.length;e++){var r=n[e];xe.isElementNode(r)&&H(r)}}function G(t){try{var e=U(),n=t?String(t):"",i=5,o=n;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,n=o,xe.setInnerHTML(e,n),xe.defaultDoc().documentMode&&H(e),o=xe.getInnerHTML(e)}while(n!==o);for(var s=new Le,a=s.sanitizeChildren(xe.getTemplateContent(e)||e),u=xe.getTemplateContent(e)||e,c=0,l=xe.childNodesAsList(u);c<l.length;c++){var h=l[c];xe.removeChild(u,h)}return r.isDevMode()&&s.sanitizedSomething&&xe.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),a}catch(p){throw we=null,p}}function W(t){for(var e=!0,n=!0,r=0;r<t.length;r++){var i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}function q(t){if(t=String(t).trim(),!t)return"";var e=t.match(ze);return e&&j(e[1])===e[1]||t.match(Be)&&W(t)?t:(r.isDevMode()&&v().log("WARNING: sanitizing unsafe style value "+t+" (see http://g.co/ng/security#xss)."),"unsafe")}function X(){Pt.makeCurrent(),kt.init()}function Y(){return new r.ErrorHandler}function Z(){return v().defaultDoc()}function K(){return v().supportsWebAnimation()?new bt:rt.NOOP}function Q(t){return un.ng=new sn(t),t}function J(){delete un.ng}var $,tt=r.__core_private__.DebugDomRootRenderer,et=r.__core_private__.NoOpAnimationPlayer,nt=function(){function t(){}return t.prototype.animate=function(t,e,n,r,i,o){return new et},t}(),rt=function(){function t(){}return t.NOOP=new nt,t}();$="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var it=$,ot=it.Date;it.assert=function(t){};var st=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return t.indexOf(e)!=-1},t.compare=function(t,e){return t<e?-1:t>e?1:0},t}(),at=function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),ut=function(){function t(){}return t.parse=function(t){return it.JSON.parse(t)},t.stringify=function(t){return it.JSON.stringify(t,null,2)},t}(),ct=function(){function t(){}return t.create=function(t,e,n,r,i,o,s){return void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),new ot(t,e-1,n,r,i,o,s)},t.fromISOString=function(t){return new ot(t)},t.fromMillis=function(t){return new ot(t)},t.toMillis=function(t){return t.getTime()},t.now=function(){return new ot},t.toJson=function(t){return t.toJSON()},t}(),lt=it.Map,ht=it.Set,pt=(function(){try{if(1===new lt([[1,2]]).size)return function(t){return new lt(t)}}catch(t){}return function(t){for(var e=new lt,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),function(){try{if(new lt(new lt))return function(t){return new lt(t)}}catch(t){}return function(t){var e=new lt;return t.forEach(function(t,n){e.set(n,t)}),e}}(),function(){return(new lt).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),function(){try{if((new lt).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=ft.createFixedSize(t.size),r=0;return t.forEach(function(t,i){n[r]=e?t:i,r++}),n}}(),function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.isEmpty=function(t){for(var e in t)return!1;return!0},t.delete=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(t[i],i)}},t.merge=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=t[o]}for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];n[o]=e[o]}return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},t}()),ft=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return t.indexOf(e)!==-1},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){i(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),i=0;i<t.length;i++){var s=t[i];if(!o(s)){var a=e(s);a>r&&(n=s,r=a)}}return n},t.flatten=function(t){var e=[];return p(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),dt=(function(){var t=new ht([1,2,3]);return 3===t.size?function(t){return new ht(t)}:function(t){var e=new ht(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),/([A-Z])/g),vt=/-([a-z])/g,mt=null,yt=function(){function t(){this.resourceLoaderType=null}return Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(t){this._attrToPropMap=t},enumerable:!0,configurable:!0}),t}(),gt=function(){function t(t,e,n){this.element=t,this.keyframes=e,this.options=n,this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._initialized=!1,this._started=!1,this.parentPlayer=null,this._duration=n.duration}return t.prototype._onFinish=function(){this._finished||(this._finished=!0,i(this.parentPlayer)||this.destroy(),this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},t.prototype.init=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes.map(function(e){var n={};return pt.forEach(e,function(e,i){n[i]=e==r.AUTO_STYLE?y(t.element,i):e}),n});this._player=this._triggerWebAnimation(this.element,e,this.options),this.reset(),this._player.onfinish=function(){return t._onFinish()}}},t.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},t.prototype.onStart=function(t){this._onStartFns.push(t)},t.prototype.onDone=function(t){this._onDoneFns.push(t)},t.prototype.play=function(){this.init(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0),this._player.play()},t.prototype.pause=function(){this.init(),this._player.pause()},t.prototype.finish=function(){this.init(),this._onFinish(),this._player.finish()},t.prototype.reset=function(){this._player.cancel()},t.prototype.restart=function(){this.reset(),this.play()},t.prototype.hasStarted=function(){return this._started},t.prototype.destroy=function(){this.reset(),this._onFinish()},Object.defineProperty(t.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t){this._player.currentTime=t*this.totalTime},t.prototype.getPosition=function(){return this._player.currentTime/this.totalTime},t}(),bt=function(){function t(){}return t.prototype.animate=function(t,e,n,r,o,s){var a=[],u={};if(i(e)&&e.styles.length>0&&(u=g(t,e,{}),u.offset=0,a.push(u)),n.forEach(function(e){var n=g(t,e.styles,u);n.offset=e.offset,a.push(n)}),1==a.length){var c=a[0];c.offset=null,a=[c,c]}var l={duration:r,delay:o,fill:"both"};return s&&(l.easing=s),new gt(t,a,l)},t}(),_t=48,wt=57,xt=46,Et=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},St=function(t){function e(){var e=this;t.call(this),this._animationPrefix=null,this._transitionEnd=null;try{var n=this.createElement("div",this.defaultDoc());if(i(this.getStyle(n,"animationName")))this._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],o=0;o<r.length;o++)if(i(this.getStyle(n,r[o]+"AnimationName"))){this._animationPrefix="-"+r[o].toLowerCase()+"-";break}var s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};pt.forEach(s,function(t,r){i(e.getStyle(n,r))&&(e._transitionEnd=t)})}catch(a){this._animationPrefix=null,this._transitionEnd=null}}return Et(e,t),e.prototype.getDistributedNodes=function(t){return t.getDistributedNodes()},e.prototype.resolveAndSetHref=function(t,e,n){t.href=null==n?e:e+"/../"+n},e.prototype.supportsDOMEvents=function(){return!0},e.prototype.supportsNativeShadowDOM=function(){return u(this.defaultDoc().body.createShadowRoot)},e.prototype.getAnimationPrefix=function(){return i(this._animationPrefix)?this._animationPrefix:""},e.prototype.getTransitionEnd=function(){return i(this._transitionEnd)?this._transitionEnd:""},e.prototype.supportsAnimation=function(){return i(this._animationPrefix)&&i(this._transitionEnd)},e}(yt),Tt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Mt={"class":"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},Ct=3,At={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ot={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},Pt=function(t){function e(){t.apply(this,arguments)}return Tt(e,t),e.prototype.parse=function(t){throw new Error("parse not implemented")},e.makeCurrent=function(){m(new e)},e.prototype.hasProperty=function(t,e){return e in t},e.prototype.setProperty=function(t,e,n){t[e]=n},e.prototype.getProperty=function(t,e){return t[e]},e.prototype.invoke=function(t,e,n){t[e].apply(t,n)},e.prototype.logError=function(t){window.console.error?window.console.error(t):window.console.log(t)},e.prototype.log=function(t){window.console.log(t)},e.prototype.logGroup=function(t){window.console.group?(window.console.group(t),this.logError(t)):window.console.log(t)},e.prototype.logGroupEnd=function(){window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return Mt},enumerable:!0,configurable:!0}),e.prototype.query=function(t){return document.querySelector(t)},e.prototype.querySelector=function(t,e){return t.querySelector(e)},e.prototype.querySelectorAll=function(t,e){return t.querySelectorAll(e)},e.prototype.on=function(t,e,n){t.addEventListener(e,n,!1)},e.prototype.onAndCancel=function(t,e,n){return t.addEventListener(e,n,!1),function(){t.removeEventListener(e,n,!1)}},e.prototype.dispatchEvent=function(t,e){t.dispatchEvent(e)},e.prototype.createMouseEvent=function(t){var e=document.createEvent("MouseEvent");return e.initEvent(t,!0,!0),e},e.prototype.createEvent=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e},e.prototype.preventDefault=function(t){t.preventDefault(),t.returnValue=!1},e.prototype.isPrevented=function(t){return t.defaultPrevented||i(t.returnValue)&&!t.returnValue},e.prototype.getInnerHTML=function(t){return t.innerHTML},e.prototype.getTemplateContent=function(t){return"content"in t&&t instanceof HTMLTemplateElement?t.content:null},e.prototype.getOuterHTML=function(t){return t.outerHTML},e.prototype.nodeName=function(t){return t.nodeName},e.prototype.nodeValue=function(t){return t.nodeValue},e.prototype.type=function(t){return t.type},e.prototype.content=function(t){return this.hasProperty(t,"content")?t.content:t},e.prototype.firstChild=function(t){return t.firstChild},e.prototype.nextSibling=function(t){return t.nextSibling},e.prototype.parentElement=function(t){return t.parentNode},e.prototype.childNodes=function(t){return t.childNodes},e.prototype.childNodesAsList=function(t){for(var e=t.childNodes,n=ft.createFixedSize(e.length),r=0;r<e.length;r++)n[r]=e[r];return n},e.prototype.clearNodes=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},e.prototype.appendChild=function(t,e){t.appendChild(e)},e.prototype.removeChild=function(t,e){t.removeChild(e)},e.prototype.replaceChild=function(t,e,n){t.replaceChild(e,n)},e.prototype.remove=function(t){return t.parentNode&&t.parentNode.removeChild(t),t},e.prototype.insertBefore=function(t,e){t.parentNode.insertBefore(e,t)},e.prototype.insertAllBefore=function(t,e){e.forEach(function(e){return t.parentNode.insertBefore(e,t)})},e.prototype.insertAfter=function(t,e){t.parentNode.insertBefore(e,t.nextSibling)},e.prototype.setInnerHTML=function(t,e){t.innerHTML=e},e.prototype.getText=function(t){return t.textContent},e.prototype.setText=function(t,e){t.textContent=e},e.prototype.getValue=function(t){return t.value},e.prototype.setValue=function(t,e){t.value=e},e.prototype.getChecked=function(t){return t.checked},e.prototype.setChecked=function(t,e){t.checked=e},e.prototype.createComment=function(t){return document.createComment(t)},e.prototype.createTemplate=function(t){var e=document.createElement("template");return e.innerHTML=t,e},e.prototype.createElement=function(t,e){return void 0===e&&(e=document),e.createElement(t)},e.prototype.createElementNS=function(t,e,n){return void 0===n&&(n=document),n.createElementNS(t,e)},e.prototype.createTextNode=function(t,e){return void 0===e&&(e=document),e.createTextNode(t)},e.prototype.createScriptTag=function(t,e,n){void 0===n&&(n=document);var r=n.createElement("SCRIPT");return r.setAttribute(t,e),r},e.prototype.createStyleElement=function(t,e){void 0===e&&(e=document);var n=e.createElement("style");return this.appendChild(n,this.createTextNode(t)),n},e.prototype.createShadowRoot=function(t){return t.createShadowRoot()},e.prototype.getShadowRoot=function(t){return t.shadowRoot},e.prototype.getHost=function(t){return t.host},e.prototype.clone=function(t){return t.cloneNode(!0)},e.prototype.getElementsByClassName=function(t,e){return t.getElementsByClassName(e)},e.prototype.getElementsByTagName=function(t,e){return t.getElementsByTagName(e)},e.prototype.classList=function(t){return Array.prototype.slice.call(t.classList,0)},e.prototype.addClass=function(t,e){t.classList.add(e)},e.prototype.removeClass=function(t,e){t.classList.remove(e)},e.prototype.hasClass=function(t,e){return t.classList.contains(e)},e.prototype.setStyle=function(t,e,n){t.style[e]=n},e.prototype.removeStyle=function(t,e){t.style[e]=null},e.prototype.getStyle=function(t,e){return t.style[e]},e.prototype.hasStyle=function(t,e,n){void 0===n&&(n=null);var r=this.getStyle(t,e)||"";return n?r==n:r.length>0},e.prototype.tagName=function(t){return t.tagName},e.prototype.attributeMap=function(t){for(var e=new Map,n=t.attributes,r=0;r<n.length;r++){var i=n[r];e.set(i.name,i.value)}return e},e.prototype.hasAttribute=function(t,e){return t.hasAttribute(e)},e.prototype.hasAttributeNS=function(t,e,n){return t.hasAttributeNS(e,n)},e.prototype.getAttribute=function(t,e){return t.getAttribute(e)},e.prototype.getAttributeNS=function(t,e,n){return t.getAttributeNS(e,n)},e.prototype.setAttribute=function(t,e,n){t.setAttribute(e,n)},e.prototype.setAttributeNS=function(t,e,n,r){t.setAttributeNS(e,n,r)},e.prototype.removeAttribute=function(t,e){t.removeAttribute(e)},e.prototype.removeAttributeNS=function(t,e,n){t.removeAttributeNS(e,n)},e.prototype.templateAwareRoot=function(t){return this.isTemplateElement(t)?this.content(t):t},e.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},e.prototype.defaultDoc=function(){return document},e.prototype.getBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},e.prototype.getTitle=function(){return document.title},e.prototype.setTitle=function(t){document.title=t||""},e.prototype.elementMatches=function(t,e){var n=!1;return t instanceof HTMLElement&&(t.matches?n=t.matches(e):t.msMatchesSelector?n=t.msMatchesSelector(e):t.webkitMatchesSelector&&(n=t.webkitMatchesSelector(e))),n},e.prototype.isTemplateElement=function(t){return t instanceof HTMLElement&&"TEMPLATE"==t.nodeName},e.prototype.isTextNode=function(t){return t.nodeType===Node.TEXT_NODE},e.prototype.isCommentNode=function(t){return t.nodeType===Node.COMMENT_NODE},e.prototype.isElementNode=function(t){return t.nodeType===Node.ELEMENT_NODE},e.prototype.hasShadowRoot=function(t){return i(t.shadowRoot)&&t instanceof HTMLElement},e.prototype.isShadowRoot=function(t){return t instanceof DocumentFragment},e.prototype.importIntoDoc=function(t){var e=t;return this.isTemplateElement(t)&&(e=this.content(t)),document.importNode(e,!0)},e.prototype.adoptNode=function(t){return document.adoptNode(t)},e.prototype.getHref=function(t){return t.href},e.prototype.getEventKey=function(t){var e=t.key;if(o(e)){if(e=t.keyIdentifier,o(e))return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),t.location===Ct&&Ot.hasOwnProperty(e)&&(e=Ot[e]))}return At.hasOwnProperty(e)&&(e=At[e]),e},e.prototype.getGlobalEventTarget=function(t){return"window"==t?window:"document"==t?document:"body"==t?document.body:void 0},e.prototype.getHistory=function(){return window.history},e.prototype.getLocation=function(){return window.location},e.prototype.getBaseHref=function(){var t=x();return o(t)?null:E(t)},e.prototype.resetBaseElement=function(){Rt=null},
e.prototype.getUserAgent=function(){return window.navigator.userAgent},e.prototype.setData=function(t,e,n){this.setAttribute(t,"data-"+e,n)},e.prototype.getData=function(t,e){return this.getAttribute(t,"data-"+e)},e.prototype.getComputedStyle=function(t){return getComputedStyle(t)},e.prototype.setGlobalVar=function(t,e){h(it,t,e)},e.prototype.supportsWebAnimation=function(){return u(Element.prototype.animate)},e.prototype.performanceNow=function(){return i(window.performance)&&i(window.performance.now)?window.performance.now():ct.toMillis(ct.now())},e.prototype.supportsCookies=function(){return!0},e.prototype.getCookie=function(t){return S(document.cookie,t)},e.prototype.setCookie=function(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)},e}(St),Rt=null,It=null,Nt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Lt=function(t){function e(){t.call(this),this._init()}return Nt(e,t),e.prototype._init=function(){this._location=v().getLocation(),this._history=v().getHistory()},Object.defineProperty(e.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),e.prototype.getBaseHrefFromDOM=function(){return v().getBaseHref()},e.prototype.onPopState=function(t){v().getGlobalEventTarget("window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){v().getGlobalEventTarget("window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this._location.pathname},set:function(t){this._location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,n){T()?this._history.pushState(t,e,n):this._location.hash=n},e.prototype.replaceState=function(t,e,n){T()?this._history.replaceState(t,e,n):this._location.hash=n},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e.decorators=[{type:r.Injectable}],e.ctorParameters=[],e}(n.PlatformLocation),kt=function(){function t(){}return t.init=function(){r.setTestabilityGetter(new t)},t.prototype.addToWindow=function(t){it.getAngularTestability=function(e,n){void 0===n&&(n=!0);var r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},it.getAllAngularTestabilities=function(){return t.getAllTestabilities()},it.getAllAngularRootElements=function(){return t.getAllRootElements()};var e=function(t){var e=it.getAllAngularTestabilities(),n=e.length,r=!1,i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})};it.frameworkStabilizers||(it.frameworkStabilizers=ft.createGrowableSize(0)),it.frameworkStabilizers.push(e)},t.prototype.findTestabilityInTree=function(t,e,n){if(null==e)return null;var r=t.getTestability(e);return i(r)?r:n?v().isShadowRoot(e)?this.findTestabilityInTree(t,v().getHost(e),!0):this.findTestabilityInTree(t,v().parentElement(e),!0):null},t}(),Dt=new r.OpaqueToken("DocumentToken"),jt=new r.OpaqueToken("EventManagerPlugins"),Ft=function(){function t(t,e){var n=this;this._zone=e,t.forEach(function(t){return t.manager=n}),this._plugins=ft.reversed(t)}return t.prototype.addEventListener=function(t,e,n){var r=this._findPluginFor(e);return r.addEventListener(t,e,n)},t.prototype.addGlobalEventListener=function(t,e,n){var r=this._findPluginFor(e);return r.addGlobalEventListener(t,e,n)},t.prototype.getZone=function(){return this._zone},t.prototype._findPluginFor=function(t){for(var e=this._plugins,n=0;n<e.length;n++){var r=e[n];if(r.supports(t))return r}throw new Error("No event manager plugin found for event "+t)},t.decorators=[{type:r.Injectable}],t.ctorParameters=[{type:Array,decorators:[{type:r.Inject,args:[jt]}]},{type:r.NgZone}],t}(),Ut=function(){function t(){}return t.prototype.supports=function(t){return!1},t.prototype.addEventListener=function(t,e,n){throw"not implemented"},t.prototype.addGlobalEventListener=function(t,e,n){throw"not implemented"},t}(),Vt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Bt=function(){function t(){this._styles=[],this._stylesSet=new Set}return t.prototype.addStyles=function(t){var e=this,n=[];t.forEach(function(t){e._stylesSet.has(t)||(e._stylesSet.add(t),e._styles.push(t),n.push(t))}),this.onStylesAdded(n)},t.prototype.onStylesAdded=function(t){},t.prototype.getAllStyles=function(){return this._styles},t.decorators=[{type:r.Injectable}],t.ctorParameters=[],t}(),zt=function(t){function e(e){t.call(this),this._hostNodes=new Set,this._hostNodes.add(e.head)}return Vt(e,t),e.prototype._addStylesToHost=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];v().appendChild(e,v().createStyleElement(r))}},e.prototype.addHost=function(t){this._addStylesToHost(this._styles,t),this._hostNodes.add(t)},e.prototype.removeHost=function(t){this._hostNodes.delete(t)},e.prototype.onStylesAdded=function(t){var e=this;this._hostNodes.forEach(function(n){e._addStylesToHost(t,n)})},e.decorators=[{type:r.Injectable}],e.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[Dt]}]}],e}(Bt),Ht=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Gt={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},Wt="template bindings={}",qt=/^template bindings=(.*)$/,Xt=function(){function t(t,e,n,r){this.document=t,this.eventManager=e,this.sharedStylesHost=n,this.animationDriver=r,this.registeredComponents=new Map}return t.prototype.renderComponent=function(t){var e=this.registeredComponents.get(t.id);return o(e)&&(e=new Zt(this,t,this.animationDriver),this.registeredComponents.set(t.id,e)),e},t}(),Yt=function(t){function e(e,n,r,i){t.call(this,e,n,r,i)}return Ht(e,t),e.decorators=[{type:r.Injectable}],e.ctorParameters=[{type:void 0,decorators:[{type:r.Inject,args:[Dt]}]},{type:Ft},{type:zt},{type:rt}],e}(Xt),Zt=function(){function t(t,e,n){this._rootRenderer=t,this.componentProto=e,this._animationDriver=n,this._styles=R(e.id,e.styles,[]),e.encapsulation!==r.ViewEncapsulation.Native&&this._rootRenderer.sharedStylesHost.addStyles(this._styles),this.componentProto.encapsulation===r.ViewEncapsulation.Emulated?(this._contentAttr=O(e.id),this._hostAttr=P(e.id)):(this._contentAttr=null,this._hostAttr=null)}return t.prototype.selectRootElement=function(t,e){var n;if(a(t)){if(n=v().querySelector(this._rootRenderer.document,t),o(n))throw new Error('The selector "'+t+'" did not match any elements')}else n=t;return v().clearNodes(n),n},t.prototype.createElement=function(t,e,n){var r=I(e),o=i(r[0])?v().createElementNS(Gt[r[0]],r[1]):v().createElement(r[1]);return i(this._contentAttr)&&v().setAttribute(o,this._contentAttr,""),i(t)&&v().appendChild(t,o),o},t.prototype.createViewRoot=function(t){var e;if(this.componentProto.encapsulation===r.ViewEncapsulation.Native){e=v().createShadowRoot(t),this._rootRenderer.sharedStylesHost.addHost(e);for(var n=0;n<this._styles.length;n++)v().appendChild(e,v().createStyleElement(this._styles[n]))}else i(this._hostAttr)&&v().setAttribute(t,this._hostAttr,""),e=t;return e},t.prototype.createTemplateAnchor=function(t,e){var n=v().createComment(Wt);return i(t)&&v().appendChild(t,n),n},t.prototype.createText=function(t,e,n){var r=v().createTextNode(e);return i(t)&&v().appendChild(t,r),r},t.prototype.projectNodes=function(t,e){o(t)||C(t,e)},t.prototype.attachViewAfter=function(t,e){M(t,e)},t.prototype.detachView=function(t){for(var e=0;e<t.length;e++)v().remove(t[e])},t.prototype.destroyView=function(t,e){this.componentProto.encapsulation===r.ViewEncapsulation.Native&&i(t)&&this._rootRenderer.sharedStylesHost.removeHost(v().getShadowRoot(t))},t.prototype.listen=function(t,e,n){return this._rootRenderer.eventManager.addEventListener(t,e,A(n))},t.prototype.listenGlobal=function(t,e,n){return this._rootRenderer.eventManager.addGlobalEventListener(t,e,A(n))},t.prototype.setElementProperty=function(t,e,n){v().setProperty(t,e,n)},t.prototype.setElementAttribute=function(t,e,n){var r,o=I(e);i(o[0])&&(e=o[0]+":"+o[1],r=Gt[o[0]]),i(n)?i(r)?v().setAttributeNS(t,r,e,n):v().setAttribute(t,e,n):i(r)?v().removeAttributeNS(t,r,o[1]):v().removeAttribute(t,e)},t.prototype.setBindingDebugInfo=function(t,e,n){var r=f(e);if(v().isCommentNode(t)){var i=st.replaceAll(v().getText(t),/\n/g,"").match(qt),o=ut.parse(i[1]);o[r]=n,v().setText(t,st.replace(Wt,"{}",ut.stringify(o)))}else this.setElementAttribute(t,e,n)},t.prototype.setElementClass=function(t,e,n){n?v().addClass(t,e):v().removeClass(t,e)},t.prototype.setElementStyle=function(t,e,n){i(n)?v().setStyle(t,e,l(n)):v().removeStyle(t,e)},t.prototype.invokeElementMethod=function(t,e,n){v().invoke(t,e,n)},t.prototype.setText=function(t,e){v().setText(t,e)},t.prototype.animate=function(t,e,n,r,i,o){return this._animationDriver.animate(t,e,n,r,i,o)},t}(),Kt=/%COMP%/g,Qt="%COMP%",Jt="_nghost-"+Qt,$t="_ngcontent-"+Qt,te=/^:([^:]+):(.+)$/,ee={ApplicationRef:r.ApplicationRef,NgZone:r.NgZone},ne="ng.probe",re="ng.coreTokens",ie=function(){function t(t,e){this.name=t,this.token=e}return t}(),oe=[{provide:r.RootRenderer,useFactory:L,deps:[Xt,[ie,new r.Optional]]}],se=([{provide:r.RootRenderer,useFactory:k,deps:[Xt,[ie,new r.Optional]]}],this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ae=function(t){function e(){t.apply(this,arguments)}return se(e,t),e.prototype.supports=function(t){return!0},e.prototype.addEventListener=function(t,e,n){var r=this.manager.getZone(),i=function(t){return r.runGuarded(function(){return n(t)})};return this.manager.getZone().runOutsideAngular(function(){return v().onAndCancel(t,e,i)})},e.prototype.addGlobalEventListener=function(t,e,n){var r=v().getGlobalEventTarget(t),i=this.manager.getZone(),o=function(t){return i.runGuarded(function(){return n(t)})};return this.manager.getZone().runOutsideAngular(function(){return v().onAndCancel(r,e,o)})},e.decorators=[{type:r.Injectable}],e.ctorParameters=[],e}(Ut),ue=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ce={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},le=function(t){function e(){t.call(this)}return ue(e,t),e.prototype.supports=function(t){return t=t.toLowerCase(),pt.contains(ce,t)},e}(Ut),he=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},pe=new r.OpaqueToken("HammerGestureConfig"),fe=function(){function t(){this.events=[],this.overrides={}}return t.prototype.buildHammer=function(t){var e=new Hammer(t);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(var n in this.overrides)e.get(n).set(this.overrides[n]);return e},t.decorators=[{type:r.Injectable}],t.ctorParameters=[],t}(),de=function(t){function e(e){t.call(this),this._config=e}return he(e,t),e.prototype.supports=function(e){if(!t.prototype.supports.call(this,e)&&!this.isCustomEvent(e))return!1;if(!i(window.Hammer))throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},e.prototype.addEventListener=function(t,e,n){var r=this,i=this.manager.getZone();return e=e.toLowerCase(),i.runOutsideAngular(function(){var o=r._config.buildHammer(t),s=function(t){i.runGuarded(function(){n(t)})};return o.on(e,s),function(){o.off(e,s)}})},e.prototype.isCustomEvent=function(t){return this._config.events.indexOf(t)>-1},e.decorators=[{type:r.Injectable}],e.ctorParameters=[{type:fe,decorators:[{type:r.Inject,args:[pe]}]}],e}(le),ve=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},me=["alt","control","meta","shift"],ye={alt:function(t){return t.altKey},control:function(t){return t.ctrlKey},meta:function(t){return t.metaKey},shift:function(t){return t.shiftKey}},ge=function(t){function e(){t.call(this)}return ve(e,t),e.prototype.supports=function(t){return i(e.parseEventName(t))},e.prototype.addEventListener=function(t,n,r){var i=e.parseEventName(n),o=e.eventCallback(t,pt.get(i,"fullKey"),r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return v().onAndCancel(t,pt.get(i,"domEventName"),o)})},e.parseEventName=function(t){var n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||!st.equals(r,"keydown")&&!st.equals(r,"keyup"))return null;var i=e._normalizeKey(n.pop()),o="";if(me.forEach(function(t){ft.contains(n,t)&&(ft.remove(n,t),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;var s=pt.create();return pt.set(s,"domEventName",r),pt.set(s,"fullKey",o),s},e.getEventFullKey=function(t){var e="",n=v().getEventKey(t);return n=n.toLowerCase(),st.equals(n," ")?n="space":st.equals(n,".")&&(n="dot"),me.forEach(function(r){if(r!=n){var i=pt.get(ye,r);i(t)&&(e+=r+".")}}),e+=n},e.eventCallback=function(t,n,r,i){return function(t){st.equals(e.getEventFullKey(t),n)&&i.runGuarded(function(){return r(t)})}},e._normalizeKey=function(t){switch(t){case"esc":return"escape";default:return t}},e.decorators=[{type:r.Injectable}],e.ctorParameters=[],e}(Ut),be=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,_e=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,we=null,xe=null,Ee=V("area,br,col,hr,img,wbr"),Se=V("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Te=V("rp,rt"),Me=B(Te,Se),Ce=B(Se,V("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ae=B(Te,V("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Oe=B(Ee,Ce,Ae,Me),Pe=V("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Re=V("srcset"),Ie=V("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ne=B(Pe,Re,Ie),Le=function(){function t(){this.sanitizedSomething=!1,this.buf=[]}return t.prototype.sanitizeChildren=function(t){for(var e=t.firstChild;e;)if(xe.isElementNode(e)?this.startElement(e):xe.isTextNode(e)?this.chars(xe.nodeValue(e)):this.sanitizedSomething=!0,xe.firstChild(e))e=xe.firstChild(e);else for(;e;){if(xe.isElementNode(e)&&this.endElement(e),xe.nextSibling(e)){e=xe.nextSibling(e);break}e=xe.parentElement(e)}return this.buf.join("")},t.prototype.startElement=function(t){var e=this,n=xe.nodeName(t).toLowerCase();return Oe.hasOwnProperty(n)?(this.buf.push("<"),this.buf.push(n),xe.attributeMap(t).forEach(function(t,n){var r=n.toLowerCase();return Ne.hasOwnProperty(r)?(Pe[r]&&(t=j(t)),Re[r]&&(t=F(t)),e.buf.push(" "),e.buf.push(n),e.buf.push('="'),e.buf.push(z(t)),void e.buf.push('"')):void(e.sanitizedSomething=!0)}),void this.buf.push(">")):void(this.sanitizedSomething=!0)},t.prototype.endElement=function(t){var e=xe.nodeName(t).toLowerCase();Oe.hasOwnProperty(e)&&!Ee.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},t.prototype.chars=function(t){this.buf.push(z(t))},t}(),ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,De=/([^\#-~ |!])/g,je="[-,.\"'%_!# a-zA-Z0-9]+",Fe="(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?",Ue="(?:rgb|hsl)a?",Ve="\\([-0-9.%, a-zA-Z]+\\)",Be=new RegExp("^("+je+"|(?:"+Fe+"|"+Ue+")"+Ve+")$","g"),ze=/^url\(([^)]+)\)$/,He=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ge=function(){function t(){}return t}(),We=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.sanitize=function(t,e){if(null==e)return null;switch(t){case r.SecurityContext.NONE:return e;case r.SecurityContext.HTML:return e instanceof Xe?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),G(String(e)));case r.SecurityContext.STYLE:return e instanceof Ye?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),q(e));case r.SecurityContext.SCRIPT:if(e instanceof Ze)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.SecurityContext.URL:return e instanceof Qe||e instanceof Ke?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),j(String(e)));case r.SecurityContext.RESOURCE_URL:if(e instanceof Qe)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+t+" (see http://g.co/ng/security#xss)")}},e.prototype.checkNotSafeValue=function(t,e){if(t instanceof qe)throw new Error("Required a safe "+e+", got a "+t.getTypeName()+" (see http://g.co/ng/security#xss)")},e.prototype.bypassSecurityTrustHtml=function(t){return new Xe(t)},e.prototype.bypassSecurityTrustStyle=function(t){return new Ye(t)},e.prototype.bypassSecurityTrustScript=function(t){return new Ze(t)},e.prototype.bypassSecurityTrustUrl=function(t){return new Ke(t)},e.prototype.bypassSecurityTrustResourceUrl=function(t){return new Qe(t)},e.decorators=[{type:r.Injectable}],e.ctorParameters=[],e}(Ge),qe=function(){function t(t){this.changingThisBreaksApplicationSecurity=t}return t.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},t}(),Xe=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.getTypeName=function(){return"HTML"},e}(qe),Ye=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.getTypeName=function(){return"Style"},e}(qe),Ze=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.getTypeName=function(){return"Script"},e}(qe),Ke=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.getTypeName=function(){return"URL"},e}(qe),Qe=function(t){function e(){t.apply(this,arguments)}return He(e,t),e.prototype.getTypeName=function(){return"ResourceURL"},e}(qe),Je=[{provide:r.PLATFORM_INITIALIZER,useValue:X,multi:!0},{provide:n.PlatformLocation,useClass:Lt}],$e=[{provide:r.Sanitizer,useExisting:Ge},{provide:Ge,useClass:We}],tn=r.createPlatformFactory(r.platformCore,"browser",Je),en=function(){function t(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return t.decorators=[{type:r.NgModule,args:[{providers:[$e,{provide:r.ErrorHandler,useFactory:Y,deps:[]},{provide:Dt,useFactory:Z,deps:[]},{provide:jt,useClass:ae,multi:!0},{provide:jt,useClass:ge,multi:!0},{provide:jt,useClass:de,multi:!0},{provide:pe,useClass:fe},{provide:Xt,useClass:Yt},{provide:r.RootRenderer,useExisting:Xt},{provide:Bt,useExisting:zt},{provide:rt,useFactory:K},zt,r.Testability,Ft,oe],exports:[n.CommonModule,r.ApplicationModule]}]}],t.ctorParameters=[{type:t,decorators:[{type:r.Optional},{type:r.SkipSelf}]}],t}(),nn=function(){function t(){}return t.prototype.getTitle=function(){return v().getTitle()},t.prototype.setTitle=function(t){v().setTitle(t)},t}(),rn="undefined"!=typeof window&&window||{},on=function(){function t(t,e){this.msPerTick=t,this.numTicks=e}return t}(),sn=function(){function t(t){this.profiler=new an(t)}return t}(),an=function(){function t(t){this.appRef=t.injector.get(r.ApplicationRef)}return t.prototype.timeChangeDetection=function(t){var e=i(t)&&t.record,n="Change Detection",r=i(rn.console.profile);e&&r&&rn.console.profile(n);for(var o=v().performanceNow(),s=0;s<5||v().performanceNow()-o<500;)this.appRef.tick(),s++;var a=v().performanceNow();e&&r&&rn.console.profileEnd(n);var u=(a-o)/s;return rn.console.log("ran "+s+" change detection cycles"),rn.console.log(at.toFixed(u,2)+" ms per check"),new on(u,s)},t}(),un=it,cn=function(){function t(){}return t.all=function(){return function(t){return!0}},t.css=function(t){return function(e){return!!i(e.nativeElement)&&v().elementMatches(e.nativeElement,t)}},t.directive=function(t){return function(e){return e.providerTokens.indexOf(t)!==-1}},t}(),ln={BrowserPlatformLocation:Lt,DomAdapter:yt,BrowserDomAdapter:Pt,BrowserGetTestability:kt,getDOM:v,setRootDomAdapter:m,DomRootRenderer_:Yt,DomRootRenderer:Xt,DomSharedStylesHost:zt,SharedStylesHost:Bt,ELEMENT_PROBE_PROVIDERS:oe,DomEventsPlugin:ae,KeyEventsPlugin:ge,HammerGesturesPlugin:de,initDomAdapter:X,INTERNAL_BROWSER_PLATFORM_PROVIDERS:Je,BROWSER_SANITIZATION_PROVIDERS:$e};e.BrowserModule=en,e.platformBrowser=tn,e.Title=nn,e.disableDebugTools=J,e.enableDebugTools=Q,e.AnimationDriver=rt,e.By=cn,e.NgProbeToken=ie,e.DOCUMENT=Dt,e.EVENT_MANAGER_PLUGINS=jt,e.EventManager=Ft,e.HAMMER_GESTURE_CONFIG=pe,e.HammerGestureConfig=fe,e.DomSanitizer=Ge,e.__platform_browser_private__=ln})}).call(e,function(){return this}())},function(t,e,n){(function(t){!function(t,r){r(e,n(3))}(this,function(e,n){"use strict";function r(t){return t.name?t.name:typeof t}function i(t){return void 0!==t&&null!==t}function o(t){return void 0===t||null===t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"function"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return i(t)&&u(t.then)}function h(t){return Array.isArray(t)}function p(t){return t instanceof F&&!isNaN(t.valueOf())}function f(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.overriddenName)return t.overriddenName;if(t.name)return t.name;var e=t.toString(),n=e.indexOf("\n");return n===-1?e:e.substring(0,n)}function d(t){return o(t)?null:t}function v(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function m(){if(o(G))if(i(D.Symbol)&&i(Symbol.iterator))G=Symbol.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),e=0;e<t.length;++e){var n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(G=n)}return G}function y(t,e){if(i(t))for(var n=0;n<t.length;n++){var r=t[n];h(r)?y(r,e):e.push(r)}return e}function g(t){return!!v(t)&&(h(t)||!(t instanceof tt)&&m()in t)}function b(t){return function(e,n){var r=t(e,n);return 1==r.length?"0"+r:r}}function _(t){return function(e,n){var r=t(e,n);return r.split(" ")[1]}}function w(t){return function(e,n){var r=t(e,n);return r.split(" ")[0]}}function x(t,e,n){return new Intl.DateTimeFormat(e,n).format(t).replace(/[\u200e\u200f]/g,"")}function E(t){var e={hour:"2-digit",hour12:!1,timeZoneName:t};return function(t,n){var r=x(t,n,e);return r?r.substring(3):""}}function S(t,e){return t.hour12=e,t}function T(t,e){var n={};return n[t]=2==e?"2-digit":"numeric",n}function M(t,e){var n={};return n[t]=e<4?"short":"long",n}function C(t){var e={};return t.forEach(function(t){Object.assign(e,t)}),e}function A(t){return function(e,n){return x(e,n,t)}}function O(t,e,n){var r,i,o="",s=[];if(at[t])return at[t](e,n);if(ct.has(t))s=ct.get(t);else{for(st.exec(t);t;)r=st.exec(t),r?(s=P(s,r,1),t=s.pop()):(s.push(t),t=null);ct.set(t,s)}return s.forEach(function(t){i=ut[t],o+=i?i(e,n):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),o}function P(t,e,n){return t.concat(lt.call(e,n))}function R(t,e,n){var r="="+t;return e.indexOf(r)>-1?r:n.getPluralCategory(t)}function I(t,e){"string"==typeof e&&(e=parseInt(e,10));var n=e,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),o=r.length,s=parseInt(r,10),a=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0,u=t.split("_")[0].toLowerCase();switch(u){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?it.One:it.Other;case"agq":case"bas":case"cu":case"dav":case"dje":case"dua":case"dyo":case"ebu":case"ewo":case"guz":case"kam":case"khq":case"ki":case"kln":case"kok":case"ksf":case"lrc":case"lu":case"luo":case"luy":case"mer":case"mfe":case"mgh":case"mua":case"mzn":case"nmg":case"nus":case"qu":case"rn":case"rw":case"sbp":case"twq":case"vai":case"yav":case"yue":case"zgh":case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?it.One:it.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?it.One:it.Other;case"ar":return 0===n?it.Zero:1===n?it.One:2===n?it.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?it.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?it.Many:it.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===o?it.One:it.Other;case"be":return n%10===1&&n%100!==11?it.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?it.Few:n%10===0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?it.Many:it.Other;case"br":return n%10===1&&n%100!==11&&n%100!==71&&n%100!==91?it.One:n%10===2&&n%100!==12&&n%100!==72&&n%100!==92?it.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10===9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?it.Few:0!==n&&n%1e6===0?it.Many:it.Other;case"bs":case"hr":case"sr":return 0===o&&i%10===1&&i%100!==11||s%10===1&&s%100!==11?it.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||s%10===Math.floor(s%10)&&s%10>=2&&s%10<=4&&!(s%100>=12&&s%100<=14)?it.Few:it.Other;case"cs":case"sk":return 1===i&&0===o?it.One:i===Math.floor(i)&&i>=2&&i<=4&&0===o?it.Few:0!==o?it.Many:it.Other;case"cy":return 0===n?it.Zero:1===n?it.One:2===n?it.Two:3===n?it.Few:6===n?it.Many:it.Other;case"da":return 1===n||0!==a&&(0===i||1===i)?it.One:it.Other;case"dsb":case"hsb":return 0===o&&i%100===1||s%100===1?it.One:0===o&&i%100===2||s%100===2?it.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||s%100===Math.floor(s%100)&&s%100>=3&&s%100<=4?it.Few:it.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?it.One:it.Other;case"fil":return 0===o&&(1===i||2===i||3===i)||0===o&&i%10!==4&&i%10!==6&&i%10!==9||0!==o&&s%10!==4&&s%10!==6&&s%10!==9?it.One:it.Other;case"ga":return 1===n?it.One:2===n?it.Two:n===Math.floor(n)&&n>=3&&n<=6?it.Few:n===Math.floor(n)&&n>=7&&n<=10?it.Many:it.Other;case"gd":return 1===n||11===n?it.One:2===n||12===n?it.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?it.Few:it.Other;case"gv":return 0===o&&i%10===1?it.One:0===o&&i%10===2?it.Two:0!==o||i%100!==0&&i%100!==20&&i%100!==40&&i%100!==60&&i%100!==80?0!==o?it.Many:it.Other:it.Few;case"he":return 1===i&&0===o?it.One:2===i&&0===o?it.Two:0!==o||n>=0&&n<=10||n%10!==0?it.Other:it.Many;case"is":return 0===a&&i%10===1&&i%100!==11||0!==a?it.One:it.Other;case"ksh":return 0===n?it.Zero:1===n?it.One:it.Other;case"kw":case"naq":case"se":case"smn":return 1===n?it.One:2===n?it.Two:it.Other;case"lag":return 0===n?it.Zero:0!==i&&1!==i||0===n?it.Other:it.One;case"lt":return n%10!==1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?it.Few:0!==s?it.Many:it.Other:it.One;case"lv":case"prg":return n%10===0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&s%100===Math.floor(s%100)&&s%100>=11&&s%100<=19?it.Zero:n%10===1&&n%100!==11||2===o&&s%10===1&&s%100!==11||2!==o&&s%10===1?it.One:it.Other;case"mk":return 0===o&&i%10===1||s%10===1?it.One:it.Other;case"mt":return 1===n?it.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?it.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?it.Many:it.Other;case"pl":return 1===i&&0===o?it.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?it.Few:0===o&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?it.Many:it.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?it.One:it.Other;case"ro":return 1===i&&0===o?it.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?it.Few:it.Other;case"ru":case"uk":return 0===o&&i%10===1&&i%100!==11?it.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?it.Few:0===o&&i%10===0||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?it.Many:it.Other;case"shi":return 0===i||1===n?it.One:n===Math.floor(n)&&n>=2&&n<=10?it.Few:it.Other;case"si":return 0===n||1===n||0===i&&1===s?it.One:it.Other;case"sl":return 0===o&&i%100===1?it.One:0===o&&i%100===2?it.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==o?it.Few:it.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?it.One:it.Other;default:return it.Other}}function N(t,e,n,r,u,c,l){if(void 0===c&&(c=null),void 0===l&&(l=!1),o(n))return null;if(n=a(n)&&B.isNumeric(n)?+n:n,!s(n))throw new Y(t,n);var h,p,f;if(r!==U.Currency&&(h=1,p=0,f=3),i(u)){var d=u.match(wt);if(null===d)throw new Error(u+" is not a valid digit info for number pipes");i(d[1])&&(h=B.parseIntAutoRadix(d[1])),i(d[3])&&(p=B.parseIntAutoRadix(d[3])),i(d[5])&&(f=B.parseIntAutoRadix(d[5]))}return ot.format(n,e,r,{minimumIntegerDigits:h,minimumFractionDigits:p,maximumFractionDigits:f,currency:c,currencyAsSymbol:l})}function L(t,e){return t.length>0&&e.startsWith(t)?e.substring(t.length):e}function k(t){return/\/index.html$/g.test(t)?t.substring(0,t.length-11):t}var D;D="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var j=D,F=j.Date;j.assert=function(t){};var U,V=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){
return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return t.indexOf(e)!=-1},t.compare=function(t,e){return t<e?-1:t>e?1:0},t}(),B=function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),z=function(){function t(){}return t.parse=function(t){return j.JSON.parse(t)},t.stringify=function(t){return j.JSON.stringify(t,null,2)},t}(),H=function(){function t(){}return t.create=function(t,e,n,r,i,o,s){return void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),new F(t,e-1,n,r,i,o,s)},t.fromISOString=function(t){return new F(t)},t.fromMillis=function(t){return new F(t)},t.toMillis=function(t){return t.getTime()},t.now=function(){return new F},t.toJson=function(t){return t.toJSON()},t}(),G=null,W=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},q=function(t){function e(e){var n=t.call(this,e);this._nativeError=n}return W(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._nativeError.message},set:function(t){this._nativeError.message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(t){this._nativeError.stack=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._nativeError.toString()},e}(Error),X=(function(t){function e(e,n){t.call(this,e+" caused by: "+(n instanceof Error?n.message:n)),this.originalError=n}return W(e,t),Object.defineProperty(e.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),e}(q),this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Y=function(t){function e(e,n){t.call(this,"Invalid argument '"+n+"' for pipe '"+f(e)+"'")}return X(e,t),e}(q),Z=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.subscribe({next:e,error:function(t){throw t}})},t.prototype.dispose=function(t){t.unsubscribe()},t.prototype.onDestroy=function(t){t.unsubscribe()},t}(),K=function(){function t(){}return t.prototype.createSubscription=function(t,e){return t.then(e,function(t){throw t})},t.prototype.dispose=function(t){},t.prototype.onDestroy=function(t){},t}(),Q=new K,J=new Z,$=function(){function t(t){this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}return t.prototype.ngOnDestroy=function(){i(this._subscription)&&this._dispose()},t.prototype.transform=function(t){return o(this._obj)?(i(t)&&this._subscribe(t),this._latestReturnedValue=this._latestValue,this._latestValue):t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue===this._latestReturnedValue?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,n.WrappedValue.wrap(this._latestValue))},t.prototype._subscribe=function(t){var e=this;this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,function(n){return e._updateLatestValue(t,n)})},t.prototype._selectStrategy=function(e){if(l(e))return Q;if(e.subscribe)return J;throw new Y(t,e)},t.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},t.prototype._updateLatestValue=function(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())},t.decorators=[{type:n.Pipe,args:[{name:"async",pure:!1}]}],t.ctorParameters=[{type:n.ChangeDetectorRef}],t}(),tt=j.Map,et=j.Set,nt=(function(){try{if(1===new tt([[1,2]]).size)return function(t){return new tt(t)}}catch(t){}return function(t){for(var e=new tt,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),function(){try{if(new tt(new tt))return function(t){return new tt(t)}}catch(t){}return function(t){var e=new tt;return t.forEach(function(t,n){e.set(n,t)}),e}}(),function(){return(new tt).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),function(){try{if((new tt).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=rt.createFixedSize(t.size),r=0;return t.forEach(function(t,i){n[r]=e?t:i,r++}),n}}(),function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.isEmpty=function(t){for(var e in t)return!1;return!0},t.delete=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(t[i],i)}},t.merge=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=t[o]}for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];n[o]=e[o]}return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},t}()),rt=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return t.indexOf(e)!==-1},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){i(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),i=0;i<t.length;i++){var s=t[i];if(!o(s)){var a=e(s);a>r&&(n=s,r=a)}}return n},t.flatten=function(t){var e=[];return y(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}();(function(){var t=new et([1,2,3]);return 3===t.size?function(t){return new et(t)}:function(t){var e=new et(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}})();!function(t){t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency"}(U||(U={}));var it,ot=function(){function t(){}return t.format=function(t,e,n,r){var i=void 0===r?{}:r,o=i.minimumIntegerDigits,s=i.minimumFractionDigits,a=i.maximumFractionDigits,u=i.currency,c=i.currencyAsSymbol,l=void 0!==c&&c,h={minimumIntegerDigits:o,minimumFractionDigits:s,maximumFractionDigits:a,style:U[n].toLowerCase()};return n==U.Currency&&(h.currency=u,h.currencyDisplay=l?"symbol":"code"),new Intl.NumberFormat(e,h).format(t)},t}(),st=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,at={yMMMdjms:A(C([T("year",1),M("month",3),T("day",1),T("hour",1),T("minute",1),T("second",1)])),yMdjm:A(C([T("year",1),T("month",1),T("day",1),T("hour",1),T("minute",1)])),yMMMMEEEEd:A(C([T("year",1),M("month",4),M("weekday",4),T("day",1)])),yMMMMd:A(C([T("year",1),M("month",4),T("day",1)])),yMMMd:A(C([T("year",1),M("month",3),T("day",1)])),yMd:A(C([T("year",1),T("month",1),T("day",1)])),jms:A(C([T("hour",1),T("second",1),T("minute",1)])),jm:A(C([T("hour",1),T("minute",1)]))},ut={yyyy:A(T("year",4)),yy:A(T("year",2)),y:A(T("year",1)),MMMM:A(M("month",4)),MMM:A(M("month",3)),MM:A(T("month",2)),M:A(T("month",1)),LLLL:A(M("month",4)),dd:A(T("day",2)),d:A(T("day",1)),HH:b(w(A(S(T("hour",2),!1)))),H:w(A(S(T("hour",1),!1))),hh:b(w(A(S(T("hour",2),!0)))),h:w(A(S(T("hour",1),!0))),jj:A(T("hour",2)),j:A(T("hour",1)),mm:b(A(T("minute",2))),m:A(T("minute",1)),ss:b(A(T("second",2))),s:A(T("second",1)),sss:A(T("second",3)),EEEE:A(M("weekday",4)),EEE:A(M("weekday",3)),EE:A(M("weekday",2)),E:A(M("weekday",1)),a:_(A(S(T("hour",1),!0))),Z:E("short"),z:E("long"),ww:A({}),w:A({}),G:A(M("era",1)),GG:A(M("era",2)),GGG:A(M("era",3)),GGGG:A(M("era",4))},ct=new Map,lt=[].slice,ht=function(){function t(){}return t.format=function(t,e,n){return O(n,t,e)},t}(),pt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){if(void 0===n&&(n="mediumDate"),o(e))return null;if(!this.supports(e))throw new Y(t,e);return B.isNumeric(e)?e=H.fromMillis(parseFloat(e)):a(e)&&(e=H.fromISOString(e)),nt.contains(t._ALIASES,n)&&(n=nt.get(t._ALIASES,n)),ht.format(e,this._locale,n)},t.prototype.supports=function(t){return!(!p(t)&&!B.isNumeric(t))||!(!a(t)||!p(H.fromISOString(t)))},t._ALIASES={medium:"yMMMdjms","short":"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},t.decorators=[{type:n.Pipe,args:[{name:"date",pure:!0}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.LOCALE_ID]}]}],t}(),ft=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},dt=function(){function t(){}return t}(),vt=function(t){function e(e){t.call(this),this._locale=e}return ft(e,t),e.prototype.getPluralCategory=function(t){var e=I(this._locale,t);switch(e){case it.Zero:return"zero";case it.One:return"one";case it.Two:return"two";case it.Few:return"few";case it.Many:return"many";default:return"other"}},e.decorators=[{type:n.Injectable}],e.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.LOCALE_ID]}]}],e}(dt);!function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other"}(it||(it={}));var mt=/#/g,yt=function(){function t(t){this._localization=t}return t.prototype.transform=function(e,n){if(o(e))return"";if(!c(n))throw new Y(t,n);var r=R(e,Object.keys(n),this._localization);return V.replaceAll(n[r],mt,e.toString())},t.decorators=[{type:n.Pipe,args:[{name:"i18nPlural",pure:!0}]}],t.ctorParameters=[{type:dt}],t}(),gt=function(){function t(){}return t.prototype.transform=function(e,n){if(o(e))return"";if(!c(n))throw new Y(t,n);return n.hasOwnProperty(e)?n[e]:""},t.decorators=[{type:n.Pipe,args:[{name:"i18nSelect",pure:!0}]}],t.ctorParameters=[],t}(),bt=function(){function t(){}return t.prototype.transform=function(t){return z.stringify(t)},t.decorators=[{type:n.Pipe,args:[{name:"json",pure:!1}]}],t.ctorParameters=[],t}(),_t=function(){function t(){}return t.prototype.transform=function(e){if(o(e))return e;if(!a(e))throw new Y(t,e);return e.toLowerCase()},t.decorators=[{type:n.Pipe,args:[{name:"lowercase"}]}],t.ctorParameters=[],t}(),wt=/^(\d+)?\.((\d+)(\-(\d+))?)?$/,xt=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return void 0===n&&(n=null),N(t,this._locale,e,U.Decimal,n)},t.decorators=[{type:n.Pipe,args:[{name:"number"}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.LOCALE_ID]}]}],t}(),Et=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n){return void 0===n&&(n=null),N(t,this._locale,e,U.Percent,n)},t.decorators=[{type:n.Pipe,args:[{name:"percent"}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.LOCALE_ID]}]}],t}(),St=function(){function t(t){this._locale=t}return t.prototype.transform=function(e,n,r,i){return void 0===n&&(n="USD"),void 0===r&&(r=!1),void 0===i&&(i=null),N(t,this._locale,e,U.Currency,i,n,r)},t.decorators=[{type:n.Pipe,args:[{name:"currency"}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Inject,args:[n.LOCALE_ID]}]}],t}(),Tt=function(){function t(){}return t.prototype.transform=function(e,n,r){if(void 0===r&&(r=null),o(e))return e;if(!this.supports(e))throw new Y(t,e);return a(e)?V.slice(e,n,r):rt.slice(e,n,r)},t.prototype.supports=function(t){return a(t)||h(t)},t.decorators=[{type:n.Pipe,args:[{name:"slice",pure:!1}]}],t.ctorParameters=[],t}(),Mt=function(){function t(){}return t.prototype.transform=function(e){if(o(e))return e;if(!a(e))throw new Y(t,e);return e.toUpperCase()},t.decorators=[{type:n.Pipe,args:[{name:"uppercase"}]}],t.ctorParameters=[],t}(),Ct=function(){function t(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return Object.defineProperty(t.prototype,"initialClasses",{set:function(t){this._applyInitialClasses(!0),this._initialClasses=i(t)&&a(t)?t.split(" "):[],this._applyInitialClasses(!1),this._applyClasses(this._rawClass,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(t){this._cleanupClasses(this._rawClass),a(t)&&(t=t.split(" ")),this._rawClass=t,this._iterableDiffer=null,this._keyValueDiffer=null,i(t)&&(g(t)?this._iterableDiffer=this._iterableDiffers.find(t).create(null):this._keyValueDiffer=this._keyValueDiffers.find(t).create(null))},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(i(this._iterableDiffer)){var t=this._iterableDiffer.diff(this._rawClass);i(t)&&this._applyIterableChanges(t)}if(i(this._keyValueDiffer)){var t=this._keyValueDiffer.diff(this._rawClass);i(t)&&this._applyKeyValueChanges(t)}},t.prototype._cleanupClasses=function(t){this._applyClasses(t,!0),this._applyInitialClasses(!1)},t.prototype._applyKeyValueChanges=function(t){var e=this;t.forEachAddedItem(function(t){e._toggleClass(t.key,t.currentValue)}),t.forEachChangedItem(function(t){e._toggleClass(t.key,t.currentValue)}),t.forEachRemovedItem(function(t){t.previousValue&&e._toggleClass(t.key,!1)})},t.prototype._applyIterableChanges=function(t){var e=this;t.forEachAddedItem(function(t){e._toggleClass(t.item,!0)}),t.forEachRemovedItem(function(t){e._toggleClass(t.item,!1)})},t.prototype._applyInitialClasses=function(t){var e=this;this._initialClasses.forEach(function(n){return e._toggleClass(n,!t)})},t.prototype._applyClasses=function(t,e){var n=this;i(t)&&(h(t)?t.forEach(function(t){return n._toggleClass(t,!e)}):t instanceof Set?t.forEach(function(t){return n._toggleClass(t,!e)}):nt.forEach(t,function(t,r){i(t)&&n._toggleClass(r,!e)}))},t.prototype._toggleClass=function(t,e){if(t=t.trim(),t.length>0)if(t.indexOf(" ")>-1)for(var n=t.split(/\s+/g),r=0,i=n.length;r<i;r++)this._renderer.setElementClass(this._ngEl.nativeElement,n[r],e);else this._renderer.setElementClass(this._ngEl.nativeElement,t,e)},t.decorators=[{type:n.Directive,args:[{selector:"[ngClass]"}]}],t.ctorParameters=[{type:n.IterableDiffers},{type:n.KeyValueDiffers},{type:n.ElementRef},{type:n.Renderer}],t.propDecorators={initialClasses:[{type:n.Input,args:["class"]}],ngClass:[{type:n.Input}]},t}(),At=function(){function t(t,e,n){this.$implicit=t,this.index=e,this.count=n}return Object.defineProperty(t.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"even",{get:function(){return this.index%2===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),t}(),Ot=function(){function t(t,e,n,r){this._viewContainer=t,this._templateRef=e,this._iterableDiffers=n,this._cdr=r}return Object.defineProperty(t.prototype,"ngForTemplate",{set:function(t){i(t)&&(this._templateRef=t)},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){if("ngForOf"in t){var e=t.ngForOf.currentValue;if(o(this._differ)&&i(e))try{this._differ=this._iterableDiffers.find(e).create(this._cdr,this.ngForTrackBy)}catch(n){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+r(e)+"'. NgFor only supports binding to Iterables such as Arrays.")}}},t.prototype.ngDoCheck=function(){if(i(this._differ)){var t=this._differ.diff(this.ngForOf);i(t)&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this,n=[];t.forEachOperation(function(t,r,i){if(null==t.previousIndex){var o=e._viewContainer.createEmbeddedView(e._templateRef,new At(null,null,null),i),s=new Pt(t,o);n.push(s)}else if(null==i)e._viewContainer.remove(r);else{var o=e._viewContainer.get(r);e._viewContainer.move(o,i);var s=new Pt(t,o);n.push(s)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var r=0,i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i}t.forEachIdentityChange(function(t){var n=e._viewContainer.get(t.currentIndex);n.context.$implicit=t.item})},t.prototype._perViewChange=function(t,e){t.context.$implicit=e.item},t.decorators=[{type:n.Directive,args:[{selector:"[ngFor][ngForOf]"}]}],t.ctorParameters=[{type:n.ViewContainerRef},{type:n.TemplateRef},{type:n.IterableDiffers},{type:n.ChangeDetectorRef}],t.propDecorators={ngForOf:[{type:n.Input}],ngForTrackBy:[{type:n.Input}],ngForTemplate:[{type:n.Input}]},t}(),Pt=function(){function t(t,e){this.record=t,this.view=e}return t}(),Rt=function(){function t(t,e){this._viewContainer=t,this._templateRef=e,this._prevCondition=null}return Object.defineProperty(t.prototype,"ngIf",{set:function(t){!t||!o(this._prevCondition)&&this._prevCondition?t||!o(this._prevCondition)&&!this._prevCondition||(this._prevCondition=!1,this._viewContainer.clear()):(this._prevCondition=!0,this._viewContainer.createEmbeddedView(this._templateRef))},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Directive,args:[{selector:"[ngIf]"}]}],t.ctorParameters=[{type:n.ViewContainerRef},{type:n.TemplateRef}],t.propDecorators={ngIf:[{type:n.Input}]},t}(),It=new Object,Nt=function(){function t(t,e){this._viewContainerRef=t,this._templateRef=e}return t.prototype.create=function(){this._viewContainerRef.createEmbeddedView(this._templateRef)},t.prototype.destroy=function(){this._viewContainerRef.clear()},t}(),Lt=function(){function t(){this._useDefault=!1,this._valueViews=new Map,this._activeViews=[]}return Object.defineProperty(t.prototype,"ngSwitch",{set:function(t){this._emptyAllActiveViews(),this._useDefault=!1;var e=this._valueViews.get(t);o(e)&&(this._useDefault=!0,e=d(this._valueViews.get(It))),this._activateViews(e),this._switchValue=t},enumerable:!0,configurable:!0}),t.prototype._onCaseValueChanged=function(t,e,n){this._deregisterView(t,n),this._registerView(e,n),t===this._switchValue?(n.destroy(),rt.remove(this._activeViews,n)):e===this._switchValue&&(this._useDefault&&(this._useDefault=!1,this._emptyAllActiveViews()),n.create(),this._activeViews.push(n)),0!==this._activeViews.length||this._useDefault||(this._useDefault=!0,this._activateViews(this._valueViews.get(It)))},t.prototype._emptyAllActiveViews=function(){for(var t=this._activeViews,e=0;e<t.length;e++)t[e].destroy();this._activeViews=[]},t.prototype._activateViews=function(t){if(i(t)){for(var e=0;e<t.length;e++)t[e].create();this._activeViews=t}},t.prototype._registerView=function(t,e){var n=this._valueViews.get(t);o(n)&&(n=[],this._valueViews.set(t,n)),n.push(e)},t.prototype._deregisterView=function(t,e){if(t!==It){var n=this._valueViews.get(t);1==n.length?this._valueViews.delete(t):rt.remove(n,e)}},t.decorators=[{type:n.Directive,args:[{selector:"[ngSwitch]"}]}],t.ctorParameters=[],t.propDecorators={ngSwitch:[{type:n.Input}]},t}(),kt=function(){function t(t,e,n){this._value=It,this._switch=n,this._view=new Nt(t,e)}return Object.defineProperty(t.prototype,"ngSwitchCase",{set:function(t){this._switch._onCaseValueChanged(this._value,t,this._view),this._value=t},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Directive,args:[{selector:"[ngSwitchCase]"}]}],t.ctorParameters=[{type:n.ViewContainerRef},{type:n.TemplateRef},{type:Lt,decorators:[{type:n.Host}]}],t.propDecorators={ngSwitchCase:[{type:n.Input}]},t}(),Dt=function(){function t(t,e,n){n._registerView(It,new Nt(t,e))}return t.decorators=[{type:n.Directive,args:[{selector:"[ngSwitchDefault]"}]}],t.ctorParameters=[{type:n.ViewContainerRef},{type:n.TemplateRef},{type:Lt,decorators:[{type:n.Host}]}],t}(),jt=function(){function t(t){this._localization=t,this._caseViews={}}return Object.defineProperty(t.prototype,"ngPlural",{set:function(t){this._switchValue=t,this._updateView()},enumerable:!0,configurable:!0}),t.prototype.addCase=function(t,e){this._caseViews[t]=e},t.prototype._updateView=function(){this._clearViews();var t=R(this._switchValue,Object.keys(this._caseViews),this._localization);this._activateView(this._caseViews[t])},t.prototype._clearViews=function(){i(this._activeView)&&this._activeView.destroy()},t.prototype._activateView=function(t){i(t)&&(this._activeView=t,this._activeView.create())},t.decorators=[{type:n.Directive,args:[{selector:"[ngPlural]"}]}],t.ctorParameters=[{type:dt}],t.propDecorators={ngPlural:[{type:n.Input}]},t}(),Ft=function(){function t(t,e,n,r){this.value=t,r.addCase(t,new Nt(n,e))}return t.decorators=[{type:n.Directive,args:[{selector:"[ngPluralCase]"}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Attribute,args:["ngPluralCase"]}]},{type:n.TemplateRef},{type:n.ViewContainerRef},{type:jt,decorators:[{type:n.Host}]}],t}(),Ut=function(){function t(t,e,n){this._differs=t,this._ngEl=e,this._renderer=n}return Object.defineProperty(t.prototype,"ngStyle",{set:function(t){this._ngStyle=t,o(this._differ)&&i(t)&&(this._differ=this._differs.find(this._ngStyle).create(null))},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){if(i(this._differ)){var t=this._differ.diff(this._ngStyle);i(t)&&this._applyChanges(t)}},t.prototype._applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){e._setStyle(t.key,null)}),t.forEachAddedItem(function(t){e._setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){e._setStyle(t.key,t.currentValue)})},t.prototype._setStyle=function(t,e){var n=t.split("."),r=n[0],o=i(e)&&2===n.length?""+e+n[1]:e;this._renderer.setElementStyle(this._ngEl.nativeElement,r,o)},t.decorators=[{type:n.Directive,args:[{selector:"[ngStyle]"}]}],t.ctorParameters=[{type:n.KeyValueDiffers},{type:n.ElementRef},{type:n.Renderer}],t.propDecorators={ngStyle:[{type:n.Input}]},t}(),Vt=function(){function t(t){this._viewContainerRef=t}return Object.defineProperty(t.prototype,"ngOutletContext",{set:function(t){this._context=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngTemplateOutlet",{set:function(t){this._templateRef=t},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this._templateRef&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this._templateRef,this._context))},t.decorators=[{type:n.Directive,args:[{selector:"[ngTemplateOutlet]"}]}],t.ctorParameters=[{type:n.ViewContainerRef}],t.propDecorators={ngOutletContext:[{type:n.Input}],ngTemplateOutlet:[{type:n.Input}]},t}(),Bt=function(){function t(){}return Object.defineProperty(t.prototype,"pathname",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return null},enumerable:!0,configurable:!0}),t}(),zt=function(){function t(){}return t}(),Ht=new n.OpaqueToken("appBaseHref"),Gt=function(){function t(e){var r=this;this._subject=new n.EventEmitter,this._platformStrategy=e;var i=this._platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(k(i)),this._platformStrategy.onPopState(function(t){r._subject.emit({url:r.path(!0),pop:!0,type:t.type})})}return t.prototype.path=function(t){return void 0===t&&(t=!1),this.normalize(this._platformStrategy.path(t))},t.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},t.prototype.normalize=function(e){return t.stripTrailingSlash(L(this._baseHref,k(e)))},t.prototype.prepareExternalUrl=function(t){return t.length>0&&!t.startsWith("/")&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this._platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this._platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this._platformStrategy.forward()},t.prototype.back=function(){this._platformStrategy.back()},t.prototype.subscribe=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),this._subject.subscribe({next:t,error:e,complete:n})},t.normalizeQueryParams=function(t){return t.length>0&&"?"!=t.substring(0,1)?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e},t.stripTrailingSlash=function(t){return/\/$/g.test(t)&&(t=t.substring(0,t.length-1)),t},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:zt}],t}(),Wt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},qt=function(t){function e(e,n){t.call(this),this._platformLocation=e,this._baseHref="",i(n)&&(this._baseHref=n)}return Wt(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.hash;return i(e)||(e="#"),e.length>0?e.substring(1):e},e.prototype.prepareExternalUrl=function(t){var e=Gt.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gt.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gt.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e.decorators=[{type:n.Injectable}],e.ctorParameters=[{type:Bt},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[Ht]}]}],e}(zt),Xt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Yt=function(t){function e(e,n){if(t.call(this),this._platformLocation=e,o(n)&&(n=this._platformLocation.getBaseHrefFromDOM()),o(n))throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}return Xt(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return Gt.joinWithSlash(this._baseHref,t)},e.prototype.path=function(t){void 0===t&&(t=!1);var e=this._platformLocation.pathname+Gt.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?""+e+n:e},e.prototype.pushState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gt.normalizeQueryParams(r));this._platformLocation.pushState(t,e,i)},e.prototype.replaceState=function(t,e,n,r){var i=this.prepareExternalUrl(n+Gt.normalizeQueryParams(r));this._platformLocation.replaceState(t,e,i)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e.decorators=[{type:n.Injectable}],e.ctorParameters=[{type:Bt},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[Ht]}]}],e}(zt),Zt=[Ct,Ot,Rt,Vt,Ut,Lt,kt,Dt,jt,Ft],Kt=Zt,Qt=[$,Mt,_t,bt,Tt,xt,Et,St,pt,yt,gt],Jt=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[Kt,Qt],exports:[Kt,Qt],providers:[{provide:dt,useClass:vt}]}]}],t.ctorParameters=[],t}();e.NgLocalization=dt,e.CommonModule=Jt,e.AsyncPipe=$,e.DatePipe=pt,e.I18nPluralPipe=yt,e.I18nSelectPipe=gt,e.JsonPipe=bt,e.LowerCasePipe=_t,e.CurrencyPipe=St,e.DecimalPipe=xt,e.PercentPipe=Et,e.SlicePipe=Tt,e.UpperCasePipe=Mt,e.NgClass=Ct,e.NgFor=Ot,e.NgIf=Rt,e.NgPlural=jt,e.NgPluralCase=Ft,e.NgStyle=Ut,e.NgSwitch=Lt,e.NgSwitchCase=kt,e.NgSwitchDefault=Dt,e.NgTemplateOutlet=Vt,e.PlatformLocation=Bt,e.LocationStrategy=zt,e.APP_BASE_HREF=Ht,e.HashLocationStrategy=qt,e.PathLocationStrategy=Yt,e.Location=Gt})}).call(e,function(){return this}())},,function(t,e,n){(function(t){!function(t,r){r(e,n(3),n(5),n(22))}(this,function(e,n,r,i){"use strict";function o(t){return void 0!==t&&null!==t}function s(t){return void 0===t||null===t}function a(t){return"string"==typeof t}function u(t){return Array.isArray(t)}function c(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function l(){if(s(R))if(o(M.Symbol)&&o(Symbol.iterator))R=Symbol.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),e=0;e<t.length;++e){var n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(R=n)}return R}function h(t,e){if(o(t))for(var n=0;n<t.length;n++){var r=t[n];u(r)?h(r,e):e.push(r)}return e}function p(t){return!!c(t)&&(u(t)||!(t instanceof N)&&l()in t)}function f(t,e){if(u(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var r,i=t[l()]();!(r=i.next()).done;)e(r.value)}function d(t){return t.toLowerCase()}function v(t){if(a(t)){var n=t;if(t=t.replace(/(\w)(\w*)/g,function(t,e,n){return e.toUpperCase()+n.toLowerCase()}),t=e.RequestMethod[t],"number"!=typeof t)throw new Error('Invalid request method. The method "'+n+'" is not supported.')}return t}function m(t){return"responseURL"in t?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):void 0}function y(t){for(var e=new Uint16Array(t.length),n=0,r=t.length;n<r;n++)e[n]=t.charCodeAt(n);
return e.buffer}function g(t){void 0===t&&(t="");var e=new N;if(t.length>0){var n=t.split("&");n.forEach(function(t){var n=t.indexOf("="),r=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)],i=r[0],o=r[1],s=e.get(i)||[];s.push(o),e.set(i,s)})}return e}function b(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function _(){return null===rt&&(rt=A[nt]={}),rt}function w(t,e){return t.createConnection(e).response}function x(t,e,n,r){var i=t;return o(e)?i.merge(new yt({method:e.method||n,url:e.url||r,search:e.search,headers:e.headers,body:e.body,withCredentials:e.withCredentials,responseType:e.responseType})):o(n)?i.merge(new yt({method:n,url:r})):i.merge(new yt({url:r}))}function E(){return new dt}function S(t,e){return new Ct(t,e)}function T(t,e){return new At(t,e)}var M,C=function(){function t(){}return t.prototype.build=function(){return new XMLHttpRequest},t.decorators=[{type:n.Injectable}],t.ctorParameters=[],t}();M="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window;var A=M;A.assert=function(t){};var O=function(){function t(){}return t.fromCharCode=function(t){return String.fromCharCode(t)},t.charCodeAt=function(t,e){return t.charCodeAt(e)},t.split=function(t,e){return t.split(e)},t.equals=function(t,e){return t===e},t.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},t.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},t.replace=function(t,e,n){return t.replace(e,n)},t.replaceAll=function(t,e,n){return t.replace(e,n)},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},t.contains=function(t,e){return t.indexOf(e)!=-1},t.compare=function(t,e){return t<e?-1:t>e?1:0},t}(),P=(function(){function t(){}return t.toFixed=function(t,e){return t.toFixed(e)},t.equal=function(t,e){return t===e},t.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e},t.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+t+" in base "+e)},t.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(t,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),t.isNumeric=function(t){return!isNaN(t-parseFloat(t))},t.isNaN=function(t){return isNaN(t)},t.isInteger=function(t){return Number.isInteger(t)},t}(),function(){function t(){}return t.parse=function(t){return A.JSON.parse(t)},t.stringify=function(t){return A.JSON.stringify(t,null,2)},t}()),R=null;e.RequestMethod,function(t){t[t.Get=0]="Get",t[t.Post=1]="Post",t[t.Put=2]="Put",t[t.Delete=3]="Delete",t[t.Options=4]="Options",t[t.Head=5]="Head",t[t.Patch=6]="Patch"}(e.RequestMethod||(e.RequestMethod={})),e.ReadyState,function(t){t[t.Unsent=0]="Unsent",t[t.Open=1]="Open",t[t.HeadersReceived=2]="HeadersReceived",t[t.Loading=3]="Loading",t[t.Done=4]="Done",t[t.Cancelled=5]="Cancelled"}(e.ReadyState||(e.ReadyState={})),e.ResponseType,function(t){t[t.Basic=0]="Basic",t[t.Cors=1]="Cors",t[t.Default=2]="Default",t[t.Error=3]="Error",t[t.Opaque=4]="Opaque"}(e.ResponseType||(e.ResponseType={}));var I;!function(t){t[t.NONE=0]="NONE",t[t.JSON=1]="JSON",t[t.FORM=2]="FORM",t[t.FORM_DATA=3]="FORM_DATA",t[t.TEXT=4]="TEXT",t[t.BLOB=5]="BLOB",t[t.ARRAY_BUFFER=6]="ARRAY_BUFFER"}(I||(I={})),e.ResponseContentType,function(t){t[t.Text=0]="Text",t[t.Json=1]="Json",t[t.ArrayBuffer=2]="ArrayBuffer",t[t.Blob=3]="Blob"}(e.ResponseContentType||(e.ResponseContentType={}));var N=A.Map,L=A.Set,k=function(){try{if(1===new N([[1,2]]).size)return function(t){return new N(t)}}catch(t){}return function(t){for(var e=new N,n=0;n<t.length;n++){var r=t[n];e.set(r[0],r[1])}return e}}(),D=function(){try{if(new N(new N))return function(t){return new N(t)}}catch(t){}return function(t){var e=new N;return t.forEach(function(t,n){e.set(n,t)}),e}}(),j=function(){return(new N).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),F=function(){try{if((new N).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=B.createFixedSize(t.size),r=0;return t.forEach(function(t,i){n[r]=e?t:i,r++}),n}}(),U=function(){function t(){}return t.clone=function(t){return D(t)},t.createFromStringMap=function(t){var e=new N;for(var n in t)e.set(n,t[n]);return e},t.toStringMap=function(t){var e={};return t.forEach(function(t,n){return e[n]=t}),e},t.createFromPairs=function(t){return k(t)},t.clearValues=function(t){j(t)},t.iterable=function(t){return t},t.keys=function(t){return F(t,!1)},t.values=function(t){return F(t,!0)},t}(),V=function(){function t(){}return t.create=function(){return{}},t.contains=function(t,e){return t.hasOwnProperty(e)},t.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},t.set=function(t,e,n){t[e]=n},t.keys=function(t){return Object.keys(t)},t.values=function(t){return Object.keys(t).map(function(e){return t[e]})},t.isEmpty=function(t){for(var e in t)return!1;return!0},t.delete=function(t,e){delete t[e]},t.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];e(t[i],i)}},t.merge=function(t,e){for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var o=i[r];n[o]=t[o]}for(var s=0,a=Object.keys(e);s<a.length;s++){var o=a[s];n[o]=e[o]}return n},t.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0},t}(),B=function(){function t(){}return t.createFixedSize=function(t){return new Array(t)},t.createGrowableSize=function(t){return new Array(t)},t.clone=function(t){return t.slice(0)},t.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},t.first=function(t){return t?t[0]:null},t.last=function(t){return t&&0!=t.length?t[t.length-1]:null},t.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},t.contains=function(t,e){return t.indexOf(e)!==-1},t.reversed=function(e){var n=t.clone(e);return n.reverse()},t.concat=function(t,e){return t.concat(e)},t.insert=function(t,e,n){t.splice(e,0,n)},t.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},t.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},t.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},t.clear=function(t){t.length=0},t.isEmpty=function(t){return 0==t.length},t.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},t.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},t.splice=function(t,e,n){return t.splice(e,n)},t.sort=function(t,e){o(e)?t.sort(e):t.sort()},t.toString=function(t){return t.toString()},t.toJSON=function(t){return JSON.stringify(t)},t.maximum=function(t,e){if(0==t.length)return null;for(var n=null,r=-(1/0),i=0;i<t.length;i++){var o=t[i];if(!s(o)){var a=e(o);a>r&&(n=o,r=a)}}return n},t.flatten=function(t){var e=[];return h(t,e),e},t.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},t}(),z=(function(){var t=new L([1,2,3]);return 3===t.size?function(t){return new L(t)}:function(t){var e=new L(t);if(e.size!==t.length)for(var n=0;n<t.length;n++)e.add(t[n]);return e}}(),function(){function t(e){var n=this;return e instanceof t?void(this._headersMap=new N(e._headersMap)):(this._headersMap=new N,void(s(e)||V.forEach(e,function(t,e){n._headersMap.set(d(e),p(t)?t:[t])})))}return t.fromResponseHeaderString=function(e){var n=new t;return e.split("\n").forEach(function(t){var e=t.indexOf(":");if(e>0){var r=t.substring(0,e),i=t.substring(e+1).trim();n.set(r,i)}}),n},t.prototype.append=function(t,e){t=d(t);var n=this._headersMap.get(t),r=p(n)?n:[];r.push(e),this._headersMap.set(t,r)},t.prototype.delete=function(t){this._headersMap.delete(d(t))},t.prototype.forEach=function(t){this._headersMap.forEach(t)},t.prototype.get=function(t){return B.first(this._headersMap.get(d(t)))},t.prototype.has=function(t){return this._headersMap.has(d(t))},t.prototype.keys=function(){return U.keys(this._headersMap)},t.prototype.set=function(t,e){var n=[];if(p(e)){var r=e.join(",");n.push(r)}else n.push(e);this._headersMap.set(d(t),n)},t.prototype.values=function(){return U.values(this._headersMap)},t.prototype.toJSON=function(){var t={};return this._headersMap.forEach(function(e,n){var r=[];f(e,function(t){return r=B.concat(r,t.split(","))}),t[d(n)]=r}),t},t.prototype.getAll=function(t){var e=this._headersMap.get(d(t));return p(e)?e:[]},t.prototype.entries=function(){throw new Error('"entries" method is not implemented on Headers class')},t}()),H=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},G=function(){function t(t){var e=void 0===t?{}:t,n=e.body,r=e.status,i=e.headers,s=e.statusText,a=e.type,u=e.url;this.body=o(n)?n:null,this.status=o(r)?r:null,this.headers=o(i)?i:null,this.statusText=o(s)?s:null,this.type=o(a)?a:null,this.url=o(u)?u:null}return t.prototype.merge=function(e){return new t({body:o(e)&&o(e.body)?e.body:this.body,status:o(e)&&o(e.status)?e.status:this.status,headers:o(e)&&o(e.headers)?e.headers:this.headers,statusText:o(e)&&o(e.statusText)?e.statusText:this.statusText,type:o(e)&&o(e.type)?e.type:this.type,url:o(e)&&o(e.url)?e.url:this.url})},t}(),W=function(t){function r(){t.call(this,{status:200,statusText:"Ok",type:e.ResponseType.Default,headers:new z})}return H(r,t),r.decorators=[{type:n.Injectable}],r.ctorParameters=[],r}(G),q=function(){function t(){}return t}(),X=function(){function t(){}return t}(),Y=function(){function t(){}return t}(),Z=function(t){return t>=200&&t<300},K=function(){function t(){}return t.prototype.encodeKey=function(t){return b(t)},t.prototype.encodeValue=function(t){return b(t)},t}(),Q=function(){function t(t,e){void 0===t&&(t=""),void 0===e&&(e=new K),this.rawParams=t,this.queryEncoder=e,this.paramsMap=g(t)}return t.prototype.clone=function(){var e=new t("",this.queryEncoder);return e.appendAll(this),e},t.prototype.has=function(t){return this.paramsMap.has(t)},t.prototype.get=function(t){var e=this.paramsMap.get(t);return p(e)?B.first(e):null},t.prototype.getAll=function(t){var e=this.paramsMap.get(t);return o(e)?e:[]},t.prototype.set=function(t,e){var n=this.paramsMap.get(t),r=o(n)?n:[];B.clear(r),r.push(e),this.paramsMap.set(t,r)},t.prototype.setAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n),i=o(r)?r:[];B.clear(i),i.push(t[0]),e.paramsMap.set(n,i)})},t.prototype.append=function(t,e){var n=this.paramsMap.get(t),r=o(n)?n:[];r.push(e),this.paramsMap.set(t,r)},t.prototype.appendAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){for(var r=e.paramsMap.get(n),i=o(r)?r:[],s=0;s<t.length;++s)i.push(t[s]);e.paramsMap.set(n,i)})},t.prototype.replaceAll=function(t){var e=this;t.paramsMap.forEach(function(t,n){var r=e.paramsMap.get(n),i=o(r)?r:[];B.clear(i);for(var s=0;s<t.length;++s)i.push(t[s]);e.paramsMap.set(n,i)})},t.prototype.toString=function(){var t=this,e=[];return this.paramsMap.forEach(function(n,r){n.forEach(function(n){return e.push(t.queryEncoder.encodeKey(r)+"="+t.queryEncoder.encodeValue(n))})}),e.join("&")},t.prototype.delete=function(t){this.paramsMap.delete(t)},t}(),J=function(){function t(){}return t.prototype.json=function(){return a(this._body)?P.parse(this._body):this._body instanceof ArrayBuffer?P.parse(this.text()):this._body},t.prototype.text=function(){return this._body instanceof Q?this._body.toString():this._body instanceof ArrayBuffer?String.fromCharCode.apply(null,new Uint16Array(this._body)):null===this._body?"":c(this._body)?P.stringify(this._body):this._body.toString()},t.prototype.arrayBuffer=function(){return this._body instanceof ArrayBuffer?this._body:y(this.text())},t.prototype.blob=function(){if(this._body instanceof Blob)return this._body;if(this._body instanceof ArrayBuffer)return new Blob([this._body]);throw new Error("The request body isn't either a blob or an array buffer")},t}(),$=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},tt=function(t){function e(e){t.call(this),this._body=e.body,this.status=e.status,this.ok=this.status>=200&&this.status<=299,this.statusText=e.statusText,this.headers=e.headers,this.type=e.type,this.url=e.url}return $(e,t),e.prototype.toString=function(){return"Response with status: "+this.status+" "+this.statusText+" for URL: "+this.url},e}(J),et=0,nt="__ng_jsonp__",rt=null,it=function(){function t(){}return t.prototype.build=function(t){var e=document.createElement("script");return e.src=t,e},t.prototype.nextRequestID=function(){return"__req"+et++},t.prototype.requestCallback=function(t){return nt+"."+t+".finished"},t.prototype.exposeConnection=function(t,e){var n=_();n[t]=e},t.prototype.removeConnection=function(t){var e=_();e[t]=null},t.prototype.send=function(t){document.body.appendChild(t)},t.prototype.cleanup=function(t){t.parentNode&&t.parentNode.removeChild(t)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[],t}(),ot=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},st="JSONP injected script did not invoke callback.",at="JSONP requests must use GET request method.",ut=function(){function t(){}return t}(),ct=function(t){function n(n,i,s){var a=this;if(t.call(this),this._dom=i,this.baseResponseOptions=s,this._finished=!1,n.method!==e.RequestMethod.Get)throw new TypeError(at);this.request=n,this.response=new r.Observable(function(t){a.readyState=e.ReadyState.Loading;var r=a._id=i.nextRequestID();i.exposeConnection(r,a);var u=i.requestCallback(a._id),c=n.url;c.indexOf("=JSONP_CALLBACK&")>-1?c=O.replace(c,"=JSONP_CALLBACK&","="+u+"&"):c.lastIndexOf("=JSONP_CALLBACK")===c.length-"=JSONP_CALLBACK".length&&(c=c.substring(0,c.length-"=JSONP_CALLBACK".length)+("="+u));var l=a._script=i.build(c),h=function(n){if(a.readyState!==e.ReadyState.Cancelled){if(a.readyState=e.ReadyState.Done,i.cleanup(l),!a._finished){var r=new G({body:st,type:e.ResponseType.Error,url:c});return o(s)&&(r=s.merge(r)),void t.error(new tt(r))}var u=new G({body:a._responseData,url:c});o(a.baseResponseOptions)&&(u=a.baseResponseOptions.merge(u)),t.next(new tt(u)),t.complete()}},p=function(n){if(a.readyState!==e.ReadyState.Cancelled){a.readyState=e.ReadyState.Done,i.cleanup(l);var r=new G({body:n.message,type:e.ResponseType.Error});o(s)&&(r=s.merge(r)),t.error(new tt(r))}};return l.addEventListener("load",h),l.addEventListener("error",p),i.send(l),function(){a.readyState=e.ReadyState.Cancelled,l.removeEventListener("load",h),l.removeEventListener("error",p),o(l)&&a._dom.cleanup(l)}})}return ot(n,t),n.prototype.finished=function(t){this._finished=!0,this._dom.removeConnection(this._id),this.readyState!==e.ReadyState.Cancelled&&(this._responseData=t)},n}(ut),lt=function(t){function e(){t.apply(this,arguments)}return ot(e,t),e}(q),ht=function(t){function e(e,n){t.call(this),this._browserJSONP=e,this._baseResponseOptions=n}return ot(e,t),e.prototype.createConnection=function(t){return new ct(t,this._browserJSONP,this._baseResponseOptions)},e.decorators=[{type:n.Injectable}],e.ctorParameters=[{type:it},{type:G}],e}(lt),pt=/^\)\]\}',?\n/,ft=function(){function t(t,n,i){var s=this;this.request=t,this.response=new r.Observable(function(r){var u=n.build();u.open(e.RequestMethod[t.method].toUpperCase(),t.url),o(t.withCredentials)&&(u.withCredentials=t.withCredentials);var c=function(){var t=o(u.response)?u.response:u.responseText;a(t)&&(t=t.replace(pt,""));var e=z.fromResponseHeaderString(u.getAllResponseHeaders()),n=m(u),s=1223===u.status?204:u.status;0===s&&(s=t?200:0);var c=u.statusText||"OK",l=new G({body:t,status:s,headers:e,statusText:c,url:n});o(i)&&(l=i.merge(l));var h=new tt(l);return h.ok=Z(s),h.ok?(r.next(h),void r.complete()):void r.error(h)},l=function(t){var n=new G({body:t,type:e.ResponseType.Error,status:u.status,statusText:u.statusText});o(i)&&(n=i.merge(n)),r.error(new tt(n))};if(s.setDetectedContentType(t,u),o(t.headers)&&t.headers.forEach(function(t,e){return u.setRequestHeader(e,t.join(","))}),o(t.responseType)&&o(u.responseType))switch(t.responseType){case e.ResponseContentType.ArrayBuffer:u.responseType="arraybuffer";break;case e.ResponseContentType.Json:u.responseType="json";break;case e.ResponseContentType.Text:u.responseType="text";break;case e.ResponseContentType.Blob:u.responseType="blob";break;default:throw new Error("The selected responseType is not supported")}return u.addEventListener("load",c),u.addEventListener("error",l),u.send(s.request.getBody()),function(){u.removeEventListener("load",c),u.removeEventListener("error",l),u.abort()}})}return t.prototype.setDetectedContentType=function(t,e){if(!o(t.headers)||!o(t.headers.get("Content-Type")))switch(t.contentType){case I.NONE:break;case I.JSON:e.setRequestHeader("content-type","application/json");break;case I.FORM:e.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8");break;case I.TEXT:e.setRequestHeader("content-type","text/plain");break;case I.BLOB:var n=t.blob();n.type&&e.setRequestHeader("content-type",n.type)}},t}(),dt=function(){function t(t,e){void 0===t&&(t="XSRF-TOKEN"),void 0===e&&(e="X-XSRF-TOKEN"),this._cookieName=t,this._headerName=e}return t.prototype.configureRequest=function(t){var e=i.__platform_browser_private__.getDOM().getCookie(this._cookieName);e&&!t.headers.has(this._headerName)&&t.headers.set(this._headerName,e)},t}(),vt=function(){function t(t,e,n){this._browserXHR=t,this._baseResponseOptions=e,this._xsrfStrategy=n}return t.prototype.createConnection=function(t){return this._xsrfStrategy.configureRequest(t),new ft(t,this._browserXHR,this._baseResponseOptions)},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:C},{type:G},{type:Y}],t}(),mt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},yt=function(){function t(t){var e=void 0===t?{}:t,n=e.method,r=e.headers,i=e.body,s=e.url,u=e.search,c=e.withCredentials,l=e.responseType;this.method=o(n)?v(n):null,this.headers=o(r)?r:null,this.body=o(i)?i:null,this.url=o(s)?s:null,this.search=o(u)?a(u)?new Q(u):u:null,this.withCredentials=o(c)?c:null,this.responseType=o(l)?l:null}return t.prototype.merge=function(e){return new t({method:o(e)&&o(e.method)?e.method:this.method,headers:o(e)&&o(e.headers)?e.headers:this.headers,body:o(e)&&o(e.body)?e.body:this.body,url:o(e)&&o(e.url)?e.url:this.url,search:o(e)&&o(e.search)?a(e.search)?new Q(e.search):e.search.clone():this.search,withCredentials:o(e)&&o(e.withCredentials)?e.withCredentials:this.withCredentials,responseType:o(e)&&o(e.responseType)?e.responseType:this.responseType})},t}(),gt=function(t){function r(){t.call(this,{method:e.RequestMethod.Get,headers:new z})}return mt(r,t),r.decorators=[{type:n.Injectable}],r.ctorParameters=[],r}(yt),bt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},_t=function(t){function e(e){t.call(this);var n=e.url;if(this.url=e.url,o(e.search)){var r=e.search.toString();if(r.length>0){var i="?";O.contains(this.url,"?")&&(i="&"==this.url[this.url.length-1]?"":"&"),this.url=n+i+r}}this._body=e.body,this.method=v(e.method),this.headers=new z(e.headers),this.contentType=this.detectContentType(),this.withCredentials=e.withCredentials,this.responseType=e.responseType}return bt(e,t),e.prototype.detectContentType=function(){switch(this.headers.get("content-type")){case"application/json":return I.JSON;case"application/x-www-form-urlencoded":return I.FORM;case"multipart/form-data":return I.FORM_DATA;case"text/plain":case"text/html":return I.TEXT;case"application/octet-stream":return I.BLOB;default:return this.detectContentTypeFromBody()}},e.prototype.detectContentTypeFromBody=function(){return null==this._body?I.NONE:this._body instanceof Q?I.FORM:this._body instanceof Et?I.FORM_DATA:this._body instanceof St?I.BLOB:this._body instanceof Tt?I.ARRAY_BUFFER:this._body&&"object"==typeof this._body?I.JSON:I.TEXT},e.prototype.getBody=function(){switch(this.contentType){case I.JSON:return this.text();case I.FORM:return this.text();case I.FORM_DATA:return this._body;case I.TEXT:return this.text();case I.BLOB:return this.blob();case I.ARRAY_BUFFER:return this.arrayBuffer();default:return null}},e}(J),wt=function(){},xt="object"==typeof window?window:wt,Et=xt.FormData||wt,St=xt.Blob||wt,Tt=xt.ArrayBuffer||wt,Mt=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ct=function(){function t(t,e){this._backend=t,this._defaultOptions=e}return t.prototype.request=function(t,n){var r;if(a(t))r=w(this._backend,new _t(x(this._defaultOptions,n,e.RequestMethod.Get,t)));else{if(!(t instanceof _t))throw new Error("First argument must be a url string or Request instance.");r=w(this._backend,t)}return r},t.prototype.get=function(t,n){return w(this._backend,new _t(x(this._defaultOptions,n,e.RequestMethod.Get,t)))},t.prototype.post=function(t,n,r){return w(this._backend,new _t(x(this._defaultOptions.merge(new yt({body:n})),r,e.RequestMethod.Post,t)))},t.prototype.put=function(t,n,r){return w(this._backend,new _t(x(this._defaultOptions.merge(new yt({body:n})),r,e.RequestMethod.Put,t)))},t.prototype.delete=function(t,n){return w(this._backend,new _t(x(this._defaultOptions,n,e.RequestMethod.Delete,t)))},t.prototype.patch=function(t,n,r){return w(this._backend,new _t(x(this._defaultOptions.merge(new yt({body:n})),r,e.RequestMethod.Patch,t)))},t.prototype.head=function(t,n){return w(this._backend,new _t(x(this._defaultOptions,n,e.RequestMethod.Head,t)))},t.prototype.options=function(t,n){return w(this._backend,new _t(x(this._defaultOptions,n,e.RequestMethod.Options,t)))},t.decorators=[{type:n.Injectable}],t.ctorParameters=[{type:q},{type:yt}],t}(),At=function(t){function r(e,n){t.call(this,e,n)}return Mt(r,t),r.prototype.request=function(t,n){var r;if(a(t)&&(t=new _t(x(this._defaultOptions,n,e.RequestMethod.Get,t))),!(t instanceof _t))throw new Error("First argument must be a url string or Request instance.");if(t.method!==e.RequestMethod.Get)throw new Error("JSONP requests must use GET request method.");return r=w(this._backend,t)},r.decorators=[{type:n.Injectable}],r.ctorParameters=[{type:q},{type:yt}],r}(Ct),Ot=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{providers:[{provide:Ct,useFactory:S,deps:[vt,yt]},C,{provide:yt,useClass:gt},{provide:G,useClass:W},vt,{provide:Y,useFactory:E}]}]}],t.ctorParameters=[],t}(),Pt=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{providers:[{provide:At,useFactory:T,deps:[lt,yt]},it,{provide:yt,useClass:gt},{provide:G,useClass:W},{provide:lt,useClass:ht}]}]}],t.ctorParameters=[],t}();e.BrowserXhr=C,e.JSONPBackend=lt,e.JSONPConnection=ut,e.CookieXSRFStrategy=dt,e.XHRBackend=vt,e.XHRConnection=ft,e.BaseRequestOptions=gt,e.RequestOptions=yt,e.BaseResponseOptions=W,e.ResponseOptions=G,e.Headers=z,e.Http=Ct,e.Jsonp=At,e.HttpModule=Ot,e.JsonpModule=Pt,e.Connection=X,e.ConnectionBackend=q,e.XSRFStrategy=Y,e.Request=_t,e.Response=tt,e.QueryEncoder=K,e.URLSearchParams=Q})}).call(e,function(){return this}())},function(t,e,n){!function(t,r){r(e,n(23),n(3),n(4),n(27),n(40),n(41),n(42),n(43),n(47),n(48),n(5),n(49),n(50),n(51),n(52),n(53),n(54),n(55))}(this,function(t,e,n,r,i,o,s,a,u,c,l,h,p,f,d,v,m,y,g){"use strict";function b(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!_(t[n],e[n]))return!1;return!0}function _(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i,o=0;o<n.length;o++)if(i=n[o],t[i]!==e[i])return!1;return!0}function w(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}function x(t){return t.length>0?t[t.length-1]:null}function E(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function S(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}function T(t,e){var n=[],r={};if(S(t,function(t,i){i===ge&&n.push(a.map.call(e(i,t),function(t){return r[i]=t,t}))}),S(t,function(t,i){i!==ge&&n.push(a.map.call(e(i,t),function(t){return r[i]=t,t}))}),n.length>0){var i=f.concatAll.call(o.of.apply(void 0,n)),s=y.last.call(i);return a.map.call(s,function(){return r})}return o.of(r)}function M(t){var e=u.mergeAll.call(t);return s.every.call(e,function(t){return t===!0})}function C(t){return t instanceof h.Observable?t:t instanceof Promise?m.fromPromise(t):o.of(t)}function A(){return new Ee(new Se([],{}),{},null)}function O(t,e,n){return n?P(t.root,e.root):R(t.root,e.root)}function P(t,e){if(!N(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(var n in e.children){if(!t.children[n])return!1;if(!P(t.children[n],e.children[n]))return!1}return!0}function R(t,e){return I(t,e,e.segments)}function I(t,e,n){if(t.segments.length>n.length){var r=t.segments.slice(0,n.length);return!!N(r,n)&&!e.hasChildren()}if(t.segments.length===n.length){if(!N(t.segments,n))return!1;for(var i in e.children){if(!t.children[i])return!1;if(!R(t.children[i],e.children[i]))return!1}return!0}var r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!N(t.segments,r)&&(!!t.children[ge]&&I(t.children[ge],e,o))}function N(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n].path!==e[n].path)return!1;return!0}function L(t,e){var n=[];return S(t.children,function(t,r){r===ge&&(n=n.concat(e(t,r)))}),S(t.children,function(t,r){r!==ge&&(n=n.concat(e(t,r)))}),n}function k(t){return t.segments.map(function(t){return U(t)}).join("/")}function D(t,e){if(t.hasChildren()&&e){var n=t.children[ge]?D(t.children[ge],!1):"",r=[];return S(t.children,function(t,e){e!==ge&&r.push(e+":"+D(t,!1))}),r.length>0?n+"("+r.join("//")+")":""+n}if(t.hasChildren()&&!e){var i=L(t,function(e,n){return n===ge?[D(t.children[ge],!1)]:[n+":"+D(e,!1)]});return k(t)+"/("+i.join("//")+")"}return k(t)}function j(t){return encodeURIComponent(t)}function F(t){return decodeURIComponent(t)}function U(t){return""+j(t.path)+V(t.parameters)}function V(t){return z(t).map(function(t){return";"+j(t.first)+"="+j(t.second)}).join("")}function B(t){var e=z(t).map(function(t){return j(t.first)+"="+j(t.second)});return e.length>0?"?"+e.join("&"):""}function z(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(new Ae(n,t[n]));return e}function H(t){Oe.lastIndex=0;var e=t.match(Oe);return e?e[0]:""}function G(t){Pe.lastIndex=0;var e=t.match(Oe);return e?e[0]:""}function W(t){Re.lastIndex=0;var e=t.match(Re);return e?e[0]:""}function q(t){return new h.Observable(function(e){return e.error(new Ne(t))})}function X(t){return new h.Observable(function(e){return e.error(new Le(t))})}function Y(t){return new h.Observable(function(e){return e.error(new be("Cannot load children because the guard of the route \"path: '"+t.path+"'\" returned false"))})}function Z(t,e,n,r){return new ke(t,e,n,r).apply()}function K(t,e){var n=e.canLoad;if(!n||0===n.length)return o.of(!0);var r=a.map.call(i.from(n),function(n){var r=t.get(n);return C(r.canLoad?r.canLoad(e):r(e))});return M(r)}function Q(t,e,n){var r={matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}};if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};for(var i=e.path,o=i.split("/"),s={},a=[],u=0,c=0;c<o.length;++c){if(u>=n.length)return r;var l=n[u],h=o[c],p=h.startsWith(":");if(!p&&h!==l.path)return r;p&&(s[h.substring(1)]=l),a.push(l),u++}return"full"===e.pathMatch&&(t.hasChildren()||u<n.length)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:a,lastChild:u,positionalParamSegments:s}}function J(t,e,n){var r=e.startsWith("/")?e.substring(1):e;return""===r?[]:$(e,r.split("/"),t,n)}function $(t,e,n,r){return e.map(function(e){return e.startsWith(":")?tt(e,r,t):et(e,n)})}function tt(t,e,n){var r=t.substring(1),i=e[r];if(!i)throw new Error("Cannot redirect to '"+n+"'. Cannot find '"+t+"'.");return i}function et(t,e){for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o.path===t)return e.splice(n),o;n++}return new Te(t,{})}function nt(t,e,n,r){if(n.length>0&&st(t,n,r)){var i=new Se(e,ot(r,new Se(n,t.children)));return{segmentGroup:rt(i),slicedSegments:[]}}if(0===n.length&&at(t,n,r)){var i=new Se(t.segments,it(t,n,r,t.children));return{segmentGroup:rt(i),slicedSegments:n}}return{segmentGroup:t,slicedSegments:n}}function rt(t){if(1===t.numberOfChildren&&t.children[ge]){var e=t.children[ge];return new Se(t.segments.concat(e.segments),e.children)}return t}function it(t,e,n,r){for(var i={},o=0,s=n;o<s.length;o++){var a=s[o];ut(t,e,a)&&!r[ct(a)]&&(i[ct(a)]=new Se([],{}))}return E(r,i)}function ot(t,e){var n={};n[ge]=e;for(var r=0,i=t;r<i.length;r++){var o=i[r];""===o.path&&ct(o)!==ge&&(n[ct(o)]=new Se([],{}))}return n}function st(t,e,n){return n.filter(function(n){return ut(t,e,n)&&ct(n)!==ge}).length>0}function at(t,e,n){return n.filter(function(n){return ut(t,e,n)}).length>0}function ut(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0!==n.redirectTo)}function ct(t){return t.outlet?t.outlet:ge}function lt(t){t.forEach(ht)}function ht(t){if(Array.isArray(t))throw new Error("Invalid route configuration: Array cannot be specified");if(t.redirectTo&&t.children)throw new Error("Invalid configuration of route '"+t.path+"': redirectTo and children cannot be used together");if(t.redirectTo&&t.loadChildren)throw new Error("Invalid configuration of route '"+t.path+"': redirectTo and loadChildren cannot be used together");if(t.children&&t.loadChildren)throw new Error("Invalid configuration of route '"+t.path+"': children and loadChildren cannot be used together");if(t.redirectTo&&t.component)throw new Error("Invalid configuration of route '"+t.path+"': redirectTo and component cannot be used together");if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error("Invalid configuration of route '"+t.path+"': one of the following must be provided (component or redirectTo or children or loadChildren)");if(void 0===t.path)throw new Error("Invalid route configuration: routes must have path specified");if(t.path.startsWith("/"))throw new Error("Invalid route configuration of route '"+t.path+"': path cannot start with a slash");if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch){var e="The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.";throw new Error("Invalid route configuration of route '{path: \""+t.path+'", redirectTo: "'+t.redirectTo+"\"}': please provide 'pathMatch'. "+e);
}if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error("Invalid configuration of route '"+t.path+"': pathMatch can only be set to 'prefix' or 'full'")}function pt(t,e){if(t===e.value)return e;for(var n=0,r=e.children;n<r.length;n++){var i=r[n],o=pt(t,i);if(o)return o}return null}function ft(t,e,n){if(n.push(e),t===e.value)return n;for(var r=0,i=e.children;r<i.length;r++){var o=i[r],s=n.slice(0),a=ft(t,o,s);if(a.length>0)return a}return[]}function dt(t,e){var n=vt(t,e),r=new g.BehaviorSubject([new Te("",{})]),i=new g.BehaviorSubject({}),o=new g.BehaviorSubject({}),s=new g.BehaviorSubject({}),a=new g.BehaviorSubject(""),u=new Ve(r,i,s,a,o,ge,e,n.root);return u.snapshot=n.root,new Ue(new je(u,[]),n)}function vt(t,e){var n={},r={},i={},o="",s=new ze([],n,i,o,r,ge,e,null,t.root,(-1),Be.empty);return new He("",new je(s,[]))}function mt(t,e){e.value._routerState=t,e.children.forEach(function(e){return mt(t,e)})}function yt(t){var e=t.children.length>0?" { "+t.children.map(yt).join(", ")+" } ":"";return""+t.value+e}function gt(t){t.snapshot?(_(t.snapshot.queryParams,t._futureSnapshot.queryParams)||t.queryParams.next(t._futureSnapshot.queryParams),t.snapshot.fragment!==t._futureSnapshot.fragment&&t.fragment.next(t._futureSnapshot.fragment),_(t.snapshot.params,t._futureSnapshot.params)||(t.params.next(t._futureSnapshot.params),t.data.next(t._futureSnapshot.data)),b(t.snapshot.url,t._futureSnapshot.url)||t.url.next(t._futureSnapshot.url),t.snapshot=t._futureSnapshot):(t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data))}function bt(t,e){var n=_t(t._root,e?e._root:void 0);return new Ue(n,t)}function _t(t,e){if(e&&Et(e.value.snapshot,t.value)){var n=e.value;n._futureSnapshot=t.value;var r=wt(t,e);return new je(n,r)}var n=xt(t.value),r=t.children.map(function(t){return _t(t)});return new je(n,r)}function wt(t,e){return t.children.map(function(t){for(var n=0,r=e.children;n<r.length;n++){var i=r[n];if(Et(i.value.snapshot,t.value))return _t(t,i)}return _t(t)})}function xt(t){return new Ve(new g.BehaviorSubject(t.url),new g.BehaviorSubject(t.params),new g.BehaviorSubject(t.queryParams),new g.BehaviorSubject(t.fragment),new g.BehaviorSubject(t.data),t.outlet,t.component,t)}function Et(t,e){return t._routeConfig===e._routeConfig}function St(t,e,n,r,i){if(0===n.length)return Ct(e.root,e.root,e,r,i);var o=Pt(n);if(Tt(o),Ot(o))return Ct(e.root,new Se([],{}),e,r,i);var s=Rt(o,e,t),a=s.processChildren?Dt(s.segmentGroup,s.index,o.commands):kt(s.segmentGroup,s.index,o.commands);return Ct(s.segmentGroup,a,e,r,i)}function Tt(t){if(t.isAbsolute&&t.commands.length>0&&Mt(t.commands[0]))throw new Error("Root segment cannot have matrix parameters");var e=t.commands.filter(function(t){return"object"==typeof t&&void 0!==t.outlets});if(e.length>0&&e[0]!==t.commands[t.commands.length-1])throw new Error("{outlets:{}} has to be the last command")}function Mt(t){return"object"==typeof t&&void 0===t.outlets&&void 0===t.segmentPath}function Ct(t,e,n,r,i){return n.root===t?new Ee(e,Vt(r),i):new Ee(At(n.root,t,e),Vt(r),i)}function At(t,e,n){var r={};return S(t.children,function(t,i){t===e?r[i]=n:r[i]=At(t,e,n)}),new Se(t.segments,r)}function Ot(t){return t.isAbsolute&&1===t.commands.length&&"/"==t.commands[0]}function Pt(t){if("string"==typeof t[0]&&1===t.length&&"/"==t[0])return new Ge((!0),0,t);for(var e=0,n=!1,r=[],i=function(i){var o=t[i];if("object"==typeof o&&void 0!==o.outlets){var s={};return S(o.outlets,function(t,e){"string"==typeof t?s[e]=t.split("/"):s[e]=t}),r.push({outlets:s}),"continue"}if("object"==typeof o&&void 0!==o.segmentPath)return r.push(o.segmentPath),"continue";if("string"!=typeof o)return r.push(o),"continue";if(0===i)for(var a=o.split("/"),u=0;u<a.length;++u){var c=a[u];0==u&&"."==c||(0==u&&""==c?n=!0:".."==c?e++:""!=c&&r.push(c))}else r.push(o)},o=0;o<t.length;++o)i(o);return new Ge(n,e,r)}function Rt(t,e,n){if(t.isAbsolute)return new We(e.root,(!0),0);if(n.snapshot._lastPathIndex===-1)return new We(n.snapshot._urlSegment,(!0),0);var r=Mt(t.commands[0])?0:1,i=n.snapshot._lastPathIndex+r;return It(n.snapshot._urlSegment,i,t.numberOfDoubleDots)}function It(t,e,n){for(var r=t,i=e,o=n;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new We(r,(!1),i-o)}function Nt(t){return""+t}function Lt(t){return"object"!=typeof t[0]?(e={},e[ge]=t,e):void 0===t[0].outlets?(n={},n[ge]=t,n):t[0].outlets;var e,n}function kt(t,e,n){if(t||(t=new Se([],{})),0===t.segments.length&&t.hasChildren())return Dt(t,e,n);var r=jt(t,e,n),i=n.slice(r.lastIndex);return r.match&&0===i.length?new Se(t.segments,{}):r.match&&!t.hasChildren()?Ft(t,e,n):r.match?Dt(t,0,i):Ft(t,e,n)}function Dt(t,e,n){if(0===n.length)return new Se(t.segments,{});var r=Lt(n),i={};return S(r,function(n,r){null!==n&&(i[r]=kt(t.children[r],e,n))}),S(t.children,function(t,e){void 0===r[e]&&(i[e]=t)}),new Se(t.segments,i)}function jt(t,e,n){for(var r=0,i=e,o={match:!1,lastIndex:0};i<t.segments.length;){if(r>=n.length)return o;var s=t.segments[i],a=Nt(n[r]),u=r<n.length-1?n[r+1]:null;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Bt(a,u,s))return o;r+=2}else{if(!Bt(a,{},s))return o;r++}i++}return{match:!0,lastIndex:r}}function Ft(t,e,n){for(var r=t.segments.slice(0,e),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=Ut(n[i].outlets);return new Se(r,o)}if(0===i&&Mt(n[0])){var s=t.segments[e];r.push(new Te(s.path,n[0])),i++}else{var a=Nt(n[i]),u=i<n.length-1?n[i+1]:null;a&&u&&Mt(u)?(r.push(new Te(a,Vt(u))),i+=2):(r.push(new Te(a,{})),i++)}}return new Se(r,{})}function Ut(t){var e={};return S(t,function(t,n){null!==t&&(e[n]=Ft(new Se([],{}),0,t))}),e}function Vt(t){var e={};return S(t,function(t,n){return e[n]=""+t}),e}function Bt(t,e,n){return t==n.path&&_(e,n.parameters)}function zt(t,e,n,r){return new Ye(t,e,n,r).recognize()}function Ht(t){t.sort(function(t,e){return t.value.outlet===ge?-1:e.value.outlet===ge?1:t.value.outlet.localeCompare(e.value.outlet)})}function Gt(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}function Wt(t,e,n,r){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new qe;var i=r?r.params:{};return{consumedSegments:[],lastChild:0,parameters:i}}for(var o=e.path,s=o.split("/"),a={},u=[],c=0,l=0;l<s.length;++l){if(c>=n.length)throw new qe;var h=n[c],p=s[l],f=p.startsWith(":");if(!f&&p!==h.path)throw new qe;f&&(a[p.substring(1)]=h.path),u.push(h),c++}if("full"===e.pathMatch&&(t.hasChildren()||c<n.length))throw new qe;var d=E(a,u[u.length-1].parameters);return{consumedSegments:u,lastChild:c,parameters:d}}function qt(t){var e={};t.forEach(function(t){var n=e[t.value.outlet];if(n){var r=n.url.map(function(t){return t.toString()}).join("/"),i=t.value.url.map(function(t){return t.toString()}).join("/");throw new Error("Two segments cannot have the same outlet name: '"+r+"' and '"+i+"'.")}e[t.value.outlet]=t.value})}function Xt(t){for(var e=t;e._sourceSegment;)e=e._sourceSegment;return e}function Yt(t){for(var e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Zt(t,e,n,r){if(n.length>0&&Jt(t,n,r)){var i=new Se(e,Qt(t,e,r,new Se(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&$t(t,n,r)){var i=new Se(t.segments,Kt(t,n,r,t.children));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}var i=new Se(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Kt(t,e,n,r){for(var i={},o=0,s=n;o<s.length;o++){var a=s[o];if(te(t,e,a)&&!r[ee(a)]){var u=new Se([],{});u._sourceSegment=t,u._segmentIndexShift=t.segments.length,i[ee(a)]=u}}return E(r,i)}function Qt(t,e,n,r){var i={};i[ge]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(var o=0,s=n;o<s.length;o++){var a=s[o];if(""===a.path&&ee(a)!==ge){var u=new Se([],{});u._sourceSegment=t,u._segmentIndexShift=e.length,i[ee(a)]=u}}return i}function Jt(t,e,n){return n.filter(function(n){return te(t,e,n)&&ee(n)!==ge}).length>0}function $t(t,e,n){return n.filter(function(n){return te(t,e,n)}).length>0}function te(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&(""===n.path&&void 0===n.redirectTo)}function ee(t){return t.outlet?t.outlet:ge}function ne(t){return t.data?t.data:{}}function re(t){return t.resolve?t.resolve:{}}function ie(t){throw t}function oe(t){for(var e=t.parent;e;){var n=e._routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null;e=e.parent}return null}function se(t){if(!t)return null;for(var e=t.parent;e;){var n=e._routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;e=e.parent}return null}function ae(t){return t?t.children.reduce(function(t,e){return t[e.value.outlet]=e,t},{}):{}}function ue(t,e){var n=t._outlets[e.outlet];if(!n){var r=e.component.name;throw e.outlet===ge?new Error("Cannot find primary outlet to load '"+r+"'"):new Error("Cannot find the outlet "+e.outlet+" to load '"+r+"'")}return n}function ce(t){return""===t||!!t}function le(t,n,r){return void 0===r&&(r={}),r.useHash?new e.HashLocationStrategy(t,n):new e.PathLocationStrategy(t,n)}function he(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function pe(t){return[{provide:n.ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:t},{provide:_e,multi:!0,useValue:t}]}function fe(t,e,n,r,i,o,s,a,u){if(void 0===u&&(u={}),0==t.componentTypes.length)throw new Error("Bootstrap at least one component before injecting Router.");var c=t.componentTypes[0],l=new en(c,e,n,r,i,o,s,w(a));return u.errorHandler&&(l.errorHandler=u.errorHandler),u.enableTracing&&l.events.subscribe(function(t){console.group("Router Event: "+t.constructor.name),console.log(t.toString()),console.log(t),console.groupEnd()}),l}function de(t){return t.routerState.root}function ve(t,e){return function(){e.initialNavigation===!1?t.setUpLocationChangeListener():t.initialNavigation()}}function me(){return{provide:n.APP_BOOTSTRAP_LISTENER,multi:!0,useFactory:ve,deps:[en,pn]}}var ye=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},ge="primary",be=function(t){function e(e){t.call(this,e),this.message=e,this.stack=new Error(e).stack}return ye(e,t),e.prototype.toString=function(){return this.message},e}(Error),_e=new n.OpaqueToken("ROUTES"),we=function(){function t(t,e,n){this.routes=t,this.injector=e,this.factoryResolver=n}return t}(),xe=function(){function t(t,e){this.loader=t,this.compiler=e}return t.prototype.load=function(t,e){return a.map.call(this.loadModuleFactory(e),function(e){var n=e.create(t);return new we(w(n.injector.get(_e)),n.injector,n.componentFactoryResolver)})},t.prototype.loadModuleFactory=function(t){var e=this;if("string"==typeof t)return m.fromPromise(this.loader.load(t));var r=this.compiler instanceof n.Compiler;return c.mergeMap.call(C(t()),function(t){return r?o.of(t):m.fromPromise(e.compiler.compileModuleAsync(t))})},t}(),Ee=function(){function t(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}return t.prototype.toString=function(){return(new Ce).serialize(this)},t}(),Se=function(){function t(t,e){var n=this;this.segments=t,this.children=e,this.parent=null,S(e,function(t,e){return t.parent=n})}return t.prototype.hasChildren=function(){return this.numberOfChildren>0},Object.defineProperty(t.prototype,"numberOfChildren",{get:function(){return Object.keys(this.children).length},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return k(this)},t}(),Te=function(){function t(t,e){this.path=t,this.parameters=e}return t.prototype.toString=function(){return U(this)},t}(),Me=function(){function t(){}return t}(),Ce=function(){function t(){}return t.prototype.parse=function(t){var e=new Ie(t);return new Ee(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())},t.prototype.serialize=function(t){var e="/"+D(t.root,!0),n=B(t.queryParams),r=null!==t.fragment&&void 0!==t.fragment?"#"+encodeURI(t.fragment):"";return""+e+n+r},t}(),Ae=function(){function t(t,e){this.first=t,this.second=e}return t}(),Oe=/^[^\/\(\)\?;=&#]+/,Pe=/^[^=\?&#]+/,Re=/^[^\?&#]+/,Ie=function(){function t(t){this.url=t,this.remaining=t}return t.prototype.peekStartsWith=function(t){return this.remaining.startsWith(t)},t.prototype.capture=function(t){if(!this.remaining.startsWith(t))throw new Error('Expected "'+t+'".');this.remaining=this.remaining.substring(t.length)},t.prototype.parseRootSegment=function(){return this.remaining.startsWith("/")&&this.capture("/"),""===this.remaining||this.remaining.startsWith("?")||this.remaining.startsWith("#")?new Se([],{}):new Se([],this.parseChildren())},t.prototype.parseChildren=function(){if(0==this.remaining.length)return{};this.peekStartsWith("/")&&this.capture("/");var t=[];for(this.peekStartsWith("(")||t.push(this.parseSegments());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegments());var e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[ge]=new Se(t,e)),n},t.prototype.parseSegments=function(){var t=H(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '"+this.remaining+"'.");this.capture(t);var e={};return this.peekStartsWith(";")&&(e=this.parseMatrixParams()),new Te(F(t),e)},t.prototype.parseQueryParams=function(){var t={};if(this.peekStartsWith("?"))for(this.capture("?"),this.parseQueryParam(t);this.remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},t.prototype.parseFragment=function(){return this.peekStartsWith("#")?decodeURI(this.remaining.substring(1)):null},t.prototype.parseMatrixParams=function(){for(var t={};this.remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=H(this.remaining);if(e){this.capture(e);var n="";if(this.peekStartsWith("=")){this.capture("=");var r=H(this.remaining);r&&(n=r,this.capture(n))}t[F(e)]=F(n)}},t.prototype.parseQueryParam=function(t){var e=G(this.remaining);if(e){this.capture(e);var n="";if(this.peekStartsWith("=")){this.capture("=");var r=W(this.remaining);r&&(n=r,this.capture(n))}t[F(e)]=F(n)}},t.prototype.parseParens=function(t){var e={};for(this.capture("(");!this.peekStartsWith(")")&&this.remaining.length>0;){var n=H(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '"+this.url+"'");var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=ge);var o=this.parseChildren();e[i]=1===Object.keys(o).length?o[ge]:new Se([],o),this.peekStartsWith("//")&&this.capture("//")}return this.capture(")"),e},t}(),Ne=function(){function t(t){void 0===t&&(t=null),this.segmentGroup=t}return t}(),Le=function(){function t(t){this.segments=t}return t}(),ke=function(){function t(t,e,n,r){this.injector=t,this.configLoader=e,this.urlTree=n,this.config=r,this.allowRedirects=!0}return t.prototype.apply=function(){var t=this,e=this.expandSegmentGroup(this.injector,this.config,this.urlTree.root,ge),n=a.map.call(e,function(e){return t.createUrlTree(e)});return p._catch.call(n,function(e){if(e instanceof Le){t.allowRedirects=!1;var n=new Se([],(r={},r[ge]=new Se(e.segments,{}),r));return t.match(n)}throw e instanceof Ne?t.noMatchError(e):e;var r})},t.prototype.match=function(t){var e=this,n=this.expandSegmentGroup(this.injector,this.config,t,ge),r=a.map.call(n,function(t){return e.createUrlTree(t)});return p._catch.call(r,function(t){throw t instanceof Ne?e.noMatchError(t):t})},t.prototype.noMatchError=function(t){return new Error("Cannot match any routes: '"+t.segmentGroup+"'")},t.prototype.createUrlTree=function(t){var e=t.segments.length>0?new Se([],(n={},n[ge]=t,n)):t;return new Ee(e,this.urlTree.queryParams,this.urlTree.fragment);var n},t.prototype.expandSegmentGroup=function(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?a.map.call(this.expandChildren(t,e,n),function(t){return new Se([],t)}):this.expandSegment(t,n,e,n.segments,r,!0)},t.prototype.expandChildren=function(t,e,n){var r=this;return T(n.children,function(n,i){return r.expandSegmentGroup(t,e,i,n)})},t.prototype.expandSegment=function(t,e,n,r,i,s){var u=this,c=o.of.apply(void 0,n),l=a.map.call(c,function(a){var c=u.expandSegmentAgainstRoute(t,e,n,a,r,i,s);return p._catch.call(c,function(t){if(t instanceof Ne)return o.of(null);throw t})}),h=f.concatAll.call(l),m=d.first.call(h,function(t){return!!t});return p._catch.call(m,function(t,n){throw t instanceof v.EmptyError?new Ne(e):t})},t.prototype.expandSegmentAgainstRoute=function(t,e,n,r,i,o,s){return ct(r)!==o?q(e):void 0===r.redirectTo||s&&this.allowRedirects?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):q(e)},t.prototype.expandSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)},t.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect=function(t){var e=J([],t.redirectTo,{});return t.redirectTo.startsWith("/")?X(e):o.of(new Se(e,{}))},t.prototype.expandRegularSegmentAgainstRouteUsingRedirect=function(t,e,n,r,i,o){var s=Q(e,r,i),a=s.matched,u=s.consumedSegments,c=s.lastChild,l=s.positionalParamSegments;if(!a)return q(e);var h=J(u,r.redirectTo,l);return r.redirectTo.startsWith("/")?X(h):this.expandSegment(t,e,n,h.concat(i.slice(c)),o,!1)},t.prototype.matchSegmentAgainstRoute=function(t,e,n,r){var i=this;if("**"===n.path)return o.of(new Se(r,{}));var s=Q(e,n,r),u=s.matched,l=s.consumedSegments,h=s.lastChild;if(!u)return q(e);var p=r.slice(h),f=this.getChildConfig(t,n);return c.mergeMap.call(f,function(t){var n=t.injector,r=t.routes,s=nt(e,l,p,r),u=s.segmentGroup,c=s.slicedSegments;if(0===c.length&&u.hasChildren()){var h=i.expandChildren(n,r,u);return a.map.call(h,function(t){return new Se(l,t)})}if(0===r.length&&0===c.length)return o.of(new Se(l,{}));var h=i.expandSegment(n,u,r,c,ge,!0);return a.map.call(h,function(t){return new Se(l.concat(t.segments),t.children)})})},t.prototype.getChildConfig=function(t,e){var n=this;return e.children?o.of(new we(e.children,t,null)):e.loadChildren?c.mergeMap.call(K(t,e),function(r){return r?e._loadedConfig?o.of(e._loadedConfig):a.map.call(n.configLoader.load(t,e.loadChildren),function(t){return e._loadedConfig=t,t}):Y(e)}):o.of(new we([],t,null))},t}(),De=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=pt(t,this._root);return e?e.children.map(function(t){return t.value}):[]},t.prototype.firstChild=function(t){var e=pt(t,this._root);return e&&e.children.length>0?e.children[0].value:null},t.prototype.siblings=function(t){var e=ft(t,this._root,[]);if(e.length<2)return[];var n=e[e.length-2].children.map(function(t){return t.value});return n.filter(function(e){return e!==t})},t.prototype.pathFromRoot=function(t){return ft(t,this._root,[]).map(function(t){return t.value})},t}(),je=function(){function t(t,e){this.value=t,this.children=e}return t.prototype.toString=function(){return"TreeNode("+this.value+")"},t}(),Fe=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},Ue=function(t){function e(e,n){t.call(this,e),this.snapshot=n,mt(this,e)}return Fe(e,t),e.prototype.toString=function(){return this.snapshot.toString()},e}(De),Ve=function(){function t(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._futureSnapshot.routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.snapshot?this.snapshot.toString():"Future("+this._futureSnapshot+")"},t}(),Be=function(){function t(t,e){this.parent=t,this.current=e,this.resolvedData={}}return Object.defineProperty(t.prototype,"flattenedResolvedData",{get:function(){return this.parent?E(this.parent.flattenedResolvedData,this.resolvedData):this.resolvedData},enumerable:!0,configurable:!0}),Object.defineProperty(t,"empty",{get:function(){return new t(null,{})},enumerable:!0,configurable:!0}),t}(),ze=function(){function t(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}return Object.defineProperty(t.prototype,"routeConfig",{get:function(){return this._routeConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._routerState.root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._routerState.parent(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._routerState.firstChild(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this._routerState.children(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathFromRoot",{get:function(){return this._routerState.pathFromRoot(this)},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var t=this.url.map(function(t){return t.toString()}).join("/"),e=this._routeConfig?this._routeConfig.path:"";return"Route(url:'"+t+"', path:'"+e+"')"},t}(),He=function(t){function e(e,n){t.call(this,n),this.url=e,mt(this,n)}return Fe(e,t),e.prototype.toString=function(){return yt(this._root)},e}(De),Ge=function(){function t(t,e,n){this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n}return t}(),We=function(){function t(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}return t}(),qe=function(){function t(){}return t}(),Xe=function(){function t(t,e,n,r,i){this.parent=t,this.snapshot=e,this.params=n,this.data=r,this.resolve=i}return Object.defineProperty(t.prototype,"allParams",{get:function(){return this.parent?E(this.parent.allParams,this.params):this.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allData",{get:function(){return this.parent?E(this.parent.allData,this.data):this.data},enumerable:!0,configurable:!0}),t.empty=function(e){return new t(null,e,{},{},new Be(null,{}))},t}(),Ye=function(){function t(t,e,n,r){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r}return t.prototype.recognize=function(){try{var t=Zt(this.urlTree.root,[],[],this.config).segmentGroup,e=this.processSegmentGroup(this.config,t,Xe.empty(null),ge),n=new ze([],Object.freeze({}),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,{},ge,this.rootComponentType,null,this.urlTree.root,(-1),Be.empty),r=new je(n,e);return o.of(new He(this.url,r))}catch(i){return new h.Observable(function(t){return t.error(i)})}},t.prototype.processSegmentGroup=function(t,e,n,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,0,e.segments,n,r)},t.prototype.processChildren=function(t,e,n){var r=this,i=L(e,function(e,i){return r.processSegmentGroup(t,e,n,i)});return qt(i),Ht(i),i},t.prototype.processSegment=function(t,e,n,r,i,o){for(var s=0,a=t;s<a.length;s++){var u=a[s];try{return this.processSegmentAgainstRoute(u,e,n,r,i,o)}catch(c){if(!(c instanceof qe))throw c}}throw new qe},t.prototype.processSegmentAgainstRoute=function(t,e,n,r,i,o){if(t.redirectTo)throw new qe;if((t.outlet?t.outlet:ge)!==o)throw new qe;var s=new Be(i.resolve,re(t));if("**"===t.path){var a=r.length>0?x(r).parameters:{},u=new ze(r,Object.freeze(E(i.allParams,a)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,E(i.allData,ne(t)),o,t.component,t,Xt(e),Yt(e)+r.length,s);return[new je(u,[])]}var c=Wt(e,t,r,i.snapshot),l=c.consumedSegments,h=c.parameters,p=c.lastChild,f=r.slice(p),d=Gt(t),v=Zt(e,l,f,d),m=v.segmentGroup,y=v.slicedSegments,g=new ze(l,Object.freeze(E(i.allParams,h)),Object.freeze(this.urlTree.queryParams),this.urlTree.fragment,E(i.allData,ne(t)),o,t.component,t,Xt(e),Yt(e)+l.length,s),b=t.component?Xe.empty(g):new Xe(i,g,h,ne(t),s);if(0===y.length&&m.hasChildren()){var _=this.processChildren(d,m,b);return[new je(g,_)]}if(0===d.length&&0===y.length)return[new je(g,[])];var _=this.processSegment(d,m,n+p,y,b,ge);return[new je(g,_)]},t}(),Ze=function(){function t(){this._outlets={}}return t.prototype.registerOutlet=function(t,e){this._outlets[t]=e},t.prototype.removeOutlet=function(t){this._outlets[t]=void 0},t}(),Ke=function(){function t(t,e){this.id=t,this.url=e}return t.prototype.toString=function(){return"NavigationStart(id: "+this.id+", url: '"+this.url+"')"},t}(),Qe=function(){function t(t,e,n){this.id=t,this.url=e,this.urlAfterRedirects=n}return t.prototype.toString=function(){return"NavigationEnd(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"')"},t}(),Je=function(){function t(t,e,n){this.id=t,this.url=e,this.reason=n}return t.prototype.toString=function(){return"NavigationCancel(id: "+this.id+", url: '"+this.url+"')"},t}(),$e=function(){function t(t,e,n){this.id=t,this.url=e,this.error=n}return t.prototype.toString=function(){return"NavigationError(id: "+this.id+", url: '"+this.url+"', error: "+this.error+")"},t}(),tn=function(){function t(t,e,n,r){this.id=t,this.url=e,this.urlAfterRedirects=n,this.state=r}return t.prototype.toString=function(){return"RoutesRecognized(id: "+this.id+", url: '"+this.url+"', urlAfterRedirects: '"+this.urlAfterRedirects+"', state: "+this.state+")"},t}(),en=function(){function t(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.outletMap=n,this.location=i,this.injector=o,this.config=u,this.navigationId=0,this.errorHandler=ie,this.navigated=!1,this.resetConfig(u),this.routerEvents=new r.Subject,this.currentUrlTree=A(),this.configLoader=new xe(s,a),this.currentRouterState=dt(this.currentUrlTree,this.rootComponentType)}return t.prototype.initialNavigation=function(){this.setUpLocationChangeListener(),this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})},t.prototype.setUpLocationChangeListener=function(){var t=this;this.locationSubscription=this.location.subscribe(Zone.current.wrap(function(e){var n=t.urlSerializer.parse(e.url);return t.currentUrlTree.toString()!==n.toString()?t.scheduleNavigation(n,{skipLocationChange:e.pop,replaceUrl:!0}):null}))},Object.defineProperty(t.prototype,"routerState",{get:function(){return this.currentRouterState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.serializeUrl(this.currentUrlTree)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){return this.routerEvents},enumerable:!0,configurable:!0}),t.prototype.resetConfig=function(t){lt(t),this.config=t},t.prototype.ngOnDestroy=function(){this.dispose()},t.prototype.dispose=function(){this.locationSubscription.unsubscribe()},t.prototype.createUrlTree=function(t,e){var n=void 0===e?{}:e,r=n.relativeTo,i=n.queryParams,o=n.fragment,s=n.preserveQueryParams,a=n.preserveFragment,u=r?r:this.routerState.root,c=s?this.currentUrlTree.queryParams:i,l=a?this.currentUrlTree.fragment:o;return St(u,this.currentUrlTree,t,c,l)},t.prototype.navigateByUrl=function(t,e){if(void 0===e&&(e={skipLocationChange:!1}),t instanceof Ee)return this.scheduleNavigation(t,e);var n=this.urlSerializer.parse(t);return this.scheduleNavigation(n,e)},t.prototype.navigate=function(t,e){return void 0===e&&(e={skipLocationChange:!1}),this.scheduleNavigation(this.createUrlTree(t,e),e)},t.prototype.serializeUrl=function(t){return this.urlSerializer.serialize(t)},t.prototype.parseUrl=function(t){return this.urlSerializer.parse(t)},t.prototype.isActive=function(t,e){if(t instanceof Ee)return O(this.currentUrlTree,t,e);var n=this.urlSerializer.parse(t);return O(this.currentUrlTree,n,e)},t.prototype.scheduleNavigation=function(t,e){var n=this,r=++this.navigationId;return this.routerEvents.next(new Ke(r,this.serializeUrl(t))),Promise.resolve().then(function(i){return n.runNavigate(t,e.skipLocationChange,e.replaceUrl,r)})},t.prototype.runNavigate=function(t,e,n,r){var i=this;return r!==this.navigationId?(this.location.go(this.urlSerializer.serialize(this.currentUrlTree)),this.routerEvents.next(new Je(r,this.serializeUrl(t),"Navigation ID "+r+" is not equal to the current navigation id "+this.navigationId)),Promise.resolve(!1)):new Promise(function(s,u){var l,h,p,f,d=i.currentRouterState,v=i.currentUrlTree,m=Z(i.injector,i.configLoader,t,i.config),y=c.mergeMap.call(m,function(t){return f=t,zt(i.rootComponentType,i.config,f,i.serializeUrl(f))}),g=a.map.call(y,function(e){return i.routerEvents.next(new tn(r,i.serializeUrl(t),i.serializeUrl(f),e)),e}),b=a.map.call(g,function(t){return bt(t,i.currentRouterState)}),_=a.map.call(b,function(t){l=t,p=new on(l.snapshot,i.currentRouterState.snapshot,i.injector),p.traverse(i.outletMap)}),w=c.mergeMap.call(_,function(){return p.checkGuards()}),x=c.mergeMap.call(w,function(t){return t?a.map.call(p.resolveData(),function(){return t}):o.of(t)});x.forEach(function(t){if(!t||r!==i.navigationId)return void(h=!1);if(i.currentUrlTree=f,i.currentRouterState=l,!e){var o=i.urlSerializer.serialize(f);i.location.isCurrentPathEqualTo(o)||n?i.location.replaceState(o):i.location.go(o)}new sn(l,d).activate(i.outletMap),h=!0}).then(function(){i.navigated=!0,h?(i.routerEvents.next(new Qe(r,i.serializeUrl(t),i.serializeUrl(f))),s(!0)):(i.routerEvents.next(new Je(r,i.serializeUrl(t),"")),s(!1))},function(e){if(e instanceof be)i.navigated=!0,i.routerEvents.next(new Je(r,i.serializeUrl(t),e.message)),s(!1);else{i.routerEvents.next(new $e(r,i.serializeUrl(t),e));try{s(i.errorHandler(e))}catch(n){u(n)}}r===i.navigationId&&(i.currentRouterState=d,i.currentUrlTree=v,i.location.replaceState(i.serializeUrl(v)))})})},t}(),nn=function(){function t(t){this.path=t}return Object.defineProperty(t.prototype,"route",{get:function(){return this.path[this.path.length-1]},enumerable:!0,configurable:!0}),t}(),rn=function(){function t(t,e){this.component=t,this.route=e}return t}(),on=function(){function t(t,e,n){this.future=t,this.curr=e,this.injector=n,this.checks=[]}return t.prototype.traverse=function(t){var e=this.future._root,n=this.curr?this.curr._root:null;this.traverseChildRoutes(e,n,t,[e.value])},t.prototype.checkGuards=function(){var t=this;if(0===this.checks.length)return o.of(!0);var e=i.from(this.checks),n=a.map.call(e,function(e){if(e instanceof nn)return M(i.from([t.runCanActivateChild(e.path),t.runCanActivate(e.route)]));
if(e instanceof rn){var n=e;return t.runCanDeactivate(n.component,n.route)}throw new Error("Cannot be reached")}),r=u.mergeAll.call(n);return s.every.call(r,function(t){return t===!0})},t.prototype.resolveData=function(){var t=this;if(0===this.checks.length)return o.of(null);var e=i.from(this.checks),n=c.mergeMap.call(e,function(e){return e instanceof nn?t.runResolve(e.route):o.of(null)});return l.reduce.call(n,function(t,e){return t})},t.prototype.traverseChildRoutes=function(t,e,n,r){var i=this,o=ae(e);t.children.forEach(function(t){i.traverseRoutes(t,o[t.value.outlet],n,r.concat([t.value])),delete o[t.value.outlet]}),S(o,function(t,e){return i.deactivateOutletAndItChildren(t,n._outlets[e])})},t.prototype.traverseRoutes=function(t,e,n,r){var i=t.value,o=e?e.value:null,s=n?n._outlets[t.value.outlet]:null;o&&i._routeConfig===o._routeConfig?(_(i.params,o.params)?i.data=o.data:this.checks.push(new rn(s.component,o),new nn(r)),i.component?this.traverseChildRoutes(t,e,s?s.outletMap:null,r):this.traverseChildRoutes(t,e,n,r)):(o&&(o.component?this.deactivateOutletAndItChildren(o,s):this.deactivateOutletMap(n)),this.checks.push(new nn(r)),i.component?this.traverseChildRoutes(t,null,s?s.outletMap:null,r):this.traverseChildRoutes(t,null,n,r))},t.prototype.deactivateOutletAndItChildren=function(t,e){e&&e.isActivated&&(this.deactivateOutletMap(e.outletMap),this.checks.push(new rn(e.component,t)))},t.prototype.deactivateOutletMap=function(t){var e=this;S(t._outlets,function(t){t.isActivated&&e.deactivateOutletAndItChildren(t.activatedRoute.snapshot,t)})},t.prototype.runCanActivate=function(t){var e=this,n=t._routeConfig?t._routeConfig.canActivate:null;if(!n||0===n.length)return o.of(!0);var r=a.map.call(i.from(n),function(n){var r=e.getToken(n,t);return C(r.canActivate?r.canActivate(t,e.future):r(t,e.future))});return M(r)},t.prototype.runCanActivateChild=function(t){var e=this,n=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(function(t){return e.extractCanActivateChild(t)}).filter(function(t){return null!==t});return M(a.map.call(i.from(r),function(t){var r=a.map.call(i.from(t.guards),function(t){var r=e.getToken(t,t.node);return C(r.canActivateChild?r.canActivateChild(n,e.future):r(n,e.future))});return M(r)}))},t.prototype.extractCanActivateChild=function(t){var e=t._routeConfig?t._routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null},t.prototype.runCanDeactivate=function(t,e){var n=this,r=e&&e._routeConfig?e._routeConfig.canDeactivate:null;if(!r||0===r.length)return o.of(!0);var c=a.map.call(i.from(r),function(r){var i=n.getToken(r,e);return C(i.canDeactivate?i.canDeactivate(t,e,n.curr):i(t,e,n.curr))}),l=u.mergeAll.call(c);return s.every.call(l,function(t){return t===!0})},t.prototype.runResolve=function(t){var e=t._resolve;return a.map.call(this.resolveNode(e.current,t),function(n){return e.resolvedData=n,t.data=E(t.data,e.flattenedResolvedData),null})},t.prototype.resolveNode=function(t,e){var n=this;return T(t,function(t,r){var i=n.getToken(r,e);return C(i.resolve?i.resolve(e,n.future):i(e,n.future))})},t.prototype.getToken=function(t,e){var n=se(e),r=n?n.injector:this.injector;return r.get(t)},t}(),sn=function(){function t(t,e){this.futureState=t,this.currState=e}return t.prototype.activate=function(t){var e=this.futureState._root,n=this.currState?this.currState._root:null;gt(this.futureState.root),this.activateChildRoutes(e,n,t)},t.prototype.activateChildRoutes=function(t,e,n){var r=this,i=ae(e);t.children.forEach(function(t){r.activateRoutes(t,i[t.value.outlet],n),delete i[t.value.outlet]}),S(i,function(t,e){return r.deactivateOutletAndItChildren(n._outlets[e])})},t.prototype.activateRoutes=function(t,e,n){var r=t.value,i=e?e.value:null;if(r===i)if(gt(r),r.component){var o=ue(n,t.value);this.activateChildRoutes(t,e,o.outletMap)}else this.activateChildRoutes(t,e,n);else{if(i)if(i.component){var o=ue(n,t.value);this.deactivateOutletAndItChildren(o)}else this.deactivateOutletMap(n);if(r.component){gt(r);var o=ue(n,t.value),s=new Ze;this.placeComponentIntoOutlet(s,r,o),this.activateChildRoutes(t,null,s)}else gt(r),this.activateChildRoutes(t,null,n)}},t.prototype.placeComponentIntoOutlet=function(t,e,r){var i=[{provide:Ve,useValue:e},{provide:Ze,useValue:t}],o=oe(e.snapshot),s=null,a=null;o&&(s=o.factoryResolver,a=o.injector,i.push({provide:n.ComponentFactoryResolver,useValue:s})),r.activate(e,s,a,n.ReflectiveInjector.resolve(i),t)},t.prototype.deactivateOutletAndItChildren=function(t){t&&t.isActivated&&(this.deactivateOutletMap(t.outletMap),t.deactivate())},t.prototype.deactivateOutletMap=function(t){var e=this;S(t._outlets,function(t){return e.deactivateOutletAndItChildren(t)})},t}(),an=function(){function t(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[]}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){Array.isArray(t)?this.commands=t:this.commands=[t]},enumerable:!0,configurable:!0}),t.prototype.onClick=function(t,e,n){return!(0===t&&!e&&!n)||(this.router.navigateByUrl(this.urlTree),!1)},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ce(this.preserveQueryParams),preserveFragment:ce(this.preserveFragment)})},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Directive,args:[{selector:":not(a)[routerLink]"}]}],t.ctorParameters=[{type:en},{type:Ve},{type:e.LocationStrategy}],t.propDecorators={queryParams:[{type:n.Input}],fragment:[{type:n.Input}],preserveQueryParams:[{type:n.Input}],preserveFragment:[{type:n.Input}],routerLink:[{type:n.Input}],onClick:[{type:n.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},t}(),un=function(){function t(t,e,n){var r=this;this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(function(t){t instanceof Qe&&r.updateTargetUrlAndHref()})}return Object.defineProperty(t.prototype,"routerLink",{set:function(t){Array.isArray(t)?this.commands=t:this.commands=[t]},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.updateTargetUrlAndHref()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onClick=function(t,e,n){return!(0===t&&!e&&!n)||("string"==typeof this.target&&"_self"!=this.target||(this.router.navigateByUrl(this.urlTree),!1))},t.prototype.updateTargetUrlAndHref=function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))},Object.defineProperty(t.prototype,"urlTree",{get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ce(this.preserveQueryParams),preserveFragment:ce(this.preserveFragment)})},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Directive,args:[{selector:"a[routerLink]"}]}],t.ctorParameters=[{type:en},{type:Ve},{type:e.LocationStrategy}],t.propDecorators={target:[{type:n.Input}],queryParams:[{type:n.Input}],fragment:[{type:n.Input}],routerLinkOptions:[{type:n.Input}],preserveQueryParams:[{type:n.Input}],preserveFragment:[{type:n.Input}],href:[{type:n.HostBinding}],routerLink:[{type:n.Input}],onClick:[{type:n.HostListener,args:["click",["$event.button","$event.ctrlKey","$event.metaKey"]]}]},t}(),cn=function(){function t(t,e,n){var r=this;this.router=t,this.element=e,this.renderer=n,this.classes=[],this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe(function(t){t instanceof Qe&&r.update()})}return t.prototype.ngAfterContentInit=function(){var t=this;this.links.changes.subscribe(function(e){return t.update()}),this.linksWithHrefs.changes.subscribe(function(e){return t.update()}),this.update()},Object.defineProperty(t.prototype,"routerLinkActive",{set:function(t){Array.isArray(t)?this.classes=t:this.classes=t.split(" ")},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.update()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.update=function(){var t=this;if(this.links&&this.linksWithHrefs&&this.router.navigated){var e=this.reduceList(this.links),n=this.reduceList(this.linksWithHrefs);this.classes.forEach(function(r){return t.renderer.setElementClass(t.element.nativeElement,r,e||n)})}},t.prototype.reduceList=function(t){var e=this;return t.reduce(function(t,n){return t||e.router.isActive(n.urlTree,e.routerLinkActiveOptions.exact)},!1)},t.decorators=[{type:n.Directive,args:[{selector:"[routerLinkActive]"}]}],t.ctorParameters=[{type:en},{type:n.ElementRef},{type:n.Renderer}],t.propDecorators={links:[{type:n.ContentChildren,args:[an,{descendants:!0}]}],linksWithHrefs:[{type:n.ContentChildren,args:[un,{descendants:!0}]}],routerLinkActiveOptions:[{type:n.Input}],routerLinkActive:[{type:n.Input}]},t}(),ln=function(){function t(t,e,r,i){this.parentOutletMap=t,this.location=e,this.resolver=r,this.name=i,this.activateEvents=new n.EventEmitter,this.deactivateEvents=new n.EventEmitter,t.registerOutlet(i?i:ge,this)}return t.prototype.ngOnDestroy=function(){this.parentOutletMap.removeOutlet(this.name?this.name:ge)},Object.defineProperty(t.prototype,"isActivated",{get:function(){return!!this.activated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activatedRoute",{get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute},enumerable:!0,configurable:!0}),t.prototype.deactivate=function(){if(this.activated){var t=this.component;this.activated.destroy(),this.activated=null,this.deactivateEvents.emit(t)}},t.prototype.activate=function(t,e,r,i,o){this.outletMap=o,this._activatedRoute=t;var s,a=t._futureSnapshot,u=a._routeConfig.component;s=e?e.resolveComponentFactory(u):this.resolver.resolveComponentFactory(u);var c=r?r:this.location.parentInjector,l=n.ReflectiveInjector.fromResolvedProviders(i,c);this.activated=this.location.createComponent(s,this.location.length,l,[]),this.activated.changeDetectorRef.detectChanges(),this.activateEvents.emit(this.activated.instance)},t.decorators=[{type:n.Directive,args:[{selector:"router-outlet"}]}],t.ctorParameters=[{type:Ze},{type:n.ViewContainerRef},{type:n.ComponentFactoryResolver},{type:void 0,decorators:[{type:n.Attribute,args:["name"]}]}],t.propDecorators={activateEvents:[{type:n.Output,args:["activate"]}],deactivateEvents:[{type:n.Output,args:["deactivate"]}]},t}(),hn=[ln,an,un,cn],pn=new n.OpaqueToken("ROUTER_CONFIGURATION"),fn=new n.OpaqueToken("ROUTER_FORROOT_GUARD"),dn=[e.Location,{provide:Me,useClass:Ce},{provide:en,useFactory:fe,deps:[n.ApplicationRef,Me,Ze,e.Location,n.Injector,n.NgModuleFactoryLoader,n.Compiler,_e,pn]},Ze,{provide:Ve,useFactory:de,deps:[en]},{provide:n.NgModuleFactoryLoader,useClass:n.SystemJsNgModuleLoader},{provide:pn,useValue:{enableTracing:!1}}],vn=function(){function t(t){}return t.forRoot=function(r,i){return{ngModule:t,providers:[dn,pe(r),{provide:fn,useFactory:he,deps:[[en,new n.Optional,new n.SkipSelf]]},{provide:pn,useValue:i?i:{}},{provide:e.LocationStrategy,useFactory:le,deps:[e.PlatformLocation,[new n.Inject(e.APP_BASE_HREF),new n.Optional],pn]},me()]}},t.forChild=function(e){return{ngModule:t,providers:[pe(e)]}},t.decorators=[{type:n.NgModule,args:[{declarations:hn,exports:hn}]}],t.ctorParameters=[{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[fn]}]}],t}(),mn={ROUTER_PROVIDERS:dn,ROUTES:_e,flatten:w};t.RouterLink=an,t.RouterLinkWithHref=un,t.RouterLinkActive=cn,t.RouterOutlet=ln,t.NavigationCancel=Je,t.NavigationEnd=Qe,t.NavigationError=$e,t.NavigationStart=Ke,t.Router=en,t.RoutesRecognized=tn,t.RouterModule=vn,t.provideRoutes=pe,t.RouterOutletMap=Ze,t.ActivatedRoute=Ve,t.ActivatedRouteSnapshot=ze,t.RouterState=Ue,t.RouterStateSnapshot=He,t.PRIMARY_OUTLET=ge,t.DefaultUrlSerializer=Ce,t.UrlSegment=Te,t.UrlSerializer=Me,t.UrlTree=Ee,t.__router_private__=mn})},function(t,e,n){"use strict";var r=n(28);e.from=r.FromObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(12),o=n(29),s=n(30),a=n(31),u=n(33),c=n(37),l=n(32),h=n(5),p=n(38),f=n(19),d=function(t){return t&&"number"==typeof t.length},v=function(t){function e(e,n){t.call(this,null),this.ish=e,this.scheduler=n}return r(e,t),e.create=function(t,n){if(null!=t){if("function"==typeof t[f.$$observable])return t instanceof h.Observable&&!n?t:new e(t,n);if(i.isArray(t))return new u.ArrayObservable(t,n);if(o.isPromise(t))return new s.PromiseObservable(t,n);if("function"==typeof t[l.$$iterator]||"string"==typeof t)return new a.IteratorObservable(t,n);if(d(t))return new c.ArrayLikeObservable(t,n)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},e.prototype._subscribe=function(t){var e=this.ish,n=this.scheduler;return null==n?e[f.$$observable]().subscribe(t):e[f.$$observable]().subscribe(new p.ObserveOnSubscriber(t,n,0))},e}(h.Observable);e.FromObservable=v},function(t,e){"use strict";function n(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.isPromise=n},function(t,e,n){"use strict";function r(t){var e=t.value,n=t.subscriber;n.closed||(n.next(e),n.complete())}function i(t){var e=t.err,n=t.subscriber;n.closed||n.error(e)}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(6),a=n(5),u=function(t){function e(e,n){t.call(this),this.promise=e,this.scheduler=n}return o(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=this.promise,o=this.scheduler;if(null==o)this._isScalar?t.closed||(t.next(this.value),t.complete()):n.then(function(n){e.value=n,e._isScalar=!0,t.closed||(t.next(n),t.complete())},function(e){t.closed||t.error(e)}).then(null,function(t){s.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!t.closed)return o.schedule(r,0,{value:this.value,subscriber:t})}else n.then(function(n){e.value=n,e._isScalar=!0,t.closed||t.add(o.schedule(r,0,{value:n,subscriber:t}))},function(e){t.closed||t.add(o.schedule(i,0,{err:e,subscriber:t}))}).then(null,function(t){s.root.setTimeout(function(){throw t})})},e}(a.Observable);e.PromiseObservable=u},function(t,e,n){"use strict";function r(t){var e=t[l.$$iterator];if(!e&&"string"==typeof t)return new p(t);if(!e&&void 0!==t.length)return new f(t);if(!e)throw new TypeError("object is not iterable");return t[l.$$iterator]()}function i(t){var e=+t.length;return isNaN(e)?0:0!==e&&o(e)?(e=s(e)*Math.floor(Math.abs(e)),e<=0?0:e>d?d:e):e}function o(t){return"number"==typeof t&&u.root.isFinite(t)}function s(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n(6),c=n(5),l=n(32),h=function(t){function e(e,n){if(t.call(this),this.scheduler=n,null==e)throw new Error("iterator cannot be null.");this.iterator=r(e)}return a(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.hasError,r=t.iterator,i=t.subscriber;if(n)return void i.error(t.error);var o=r.next();return o.done?void i.complete():(i.next(o.value),t.index=e+1,void(i.closed||this.schedule(t)))},e.prototype._subscribe=function(t){var n=0,r=this,i=r.iterator,o=r.scheduler;if(o)return o.schedule(e.dispatch,0,{index:n,iterator:i,subscriber:t});for(;;){var s=i.next();if(s.done){t.complete();break}if(t.next(s.value),t.closed)break}},e}(c.Observable);e.IteratorObservable=h;var p=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length),this.str=t,this.idx=e,this.len=n}return t.prototype[l.$$iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),f=function(){function t(t,e,n){void 0===e&&(e=0),void 0===n&&(n=i(t)),this.arr=t,this.idx=e,this.len=n}return t.prototype[l.$$iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}(),d=Math.pow(2,53)-1},function(t,e,n){"use strict";var r=n(6),i=r.root.Symbol;if("function"==typeof i)i.iterator?e.$$iterator=i.iterator:"function"==typeof i.for&&(e.$$iterator=i.for("iterator"));else if(r.root.Set&&"function"==typeof(new r.root.Set)["@@iterator"])e.$$iterator="@@iterator";else if(r.root.Map)for(var o=Object.getOwnPropertyNames(r.root.Map.prototype),s=0;s<o.length;++s){var a=o[s];if("entries"!==a&&"size"!==a&&r.root.Map.prototype[a]===r.root.Map.prototype.entries){e.$$iterator=a;break}}else e.$$iterator="@@iterator"},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(34),s=n(35),a=n(36),u=function(t){function e(e,n){t.call(this),this.array=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){return new e(t,n)},e.of=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=t[t.length-1];a.isScheduler(r)?t.pop():r=null;var i=t.length;return i>1?new e(t,r):1===i?new o.ScalarObservable(t[0],r):new s.EmptyObservable(r)},e.dispatch=function(t){var e=t.array,n=t.index,r=t.count,i=t.subscriber;return n>=r?void i.complete():(i.next(e[n]),void(i.closed||(t.index=n+1,this.schedule(t))))},e.prototype._subscribe=function(t){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{array:r,index:n,count:i,subscriber:t});for(var s=0;s<i&&!t.closed;s++)t.next(r[s]);t.complete()},e}(i.Observable);e.ArrayObservable=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=function(t){function e(e,n){t.call(this),this.value=e,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.done,n=t.value,r=t.subscriber;return e?void r.complete():(r.next(n),void(r.closed||(t.done=!0,this.schedule(t))))},e.prototype._subscribe=function(t){var n=this.value,r=this.scheduler;return r?r.schedule(e.dispatch,0,{done:!1,value:n,subscriber:t}):(t.next(n),void(t.closed||t.complete()))},e}(i.Observable);e.ScalarObservable=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=function(t){function e(e){t.call(this),this.scheduler=e}return r(e,t),e.create=function(t){return new e(t)},e.dispatch=function(t){var e=t.subscriber;e.complete()},e.prototype._subscribe=function(t){var n=this.scheduler;return n?n.schedule(e.dispatch,0,{subscriber:t}):void t.complete()},e}(i.Observable);e.EmptyObservable=o},function(t,e){"use strict";function n(t){return t&&"function"==typeof t.schedule}e.isScheduler=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(34),s=n(35),a=function(t){function e(e,n){t.call(this),this.arrayLike=e,this.scheduler=n,n||1!==e.length||(this._isScalar=!0,this.value=e[0])}return r(e,t),e.create=function(t,n){var r=t.length;return 0===r?new s.EmptyObservable:1===r?new o.ScalarObservable(t[0],n):new e(t,n)},e.dispatch=function(t){var e=t.arrayLike,n=t.index,r=t.length,i=t.subscriber;if(!i.closed){if(n>=r)return void i.complete();i.next(e[n]),t.index=n+1,this.schedule(t)}},e.prototype._subscribe=function(t){var n=0,r=this,i=r.arrayLike,o=r.scheduler,s=i.length;if(o)return o.schedule(e.dispatch,0,{arrayLike:i,index:n,length:s,subscriber:t});for(var a=0;a<s&&!t.closed;a++)t.next(i[a]);t.complete()},e}(i.Observable);e.ArrayLikeObservable=a},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(39);e.observeOn=r;var a=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=a;var u=function(t){function e(e,n,r){void 0===r&&(r=0),t.call(this,e),this.scheduler=n,this.delay=r}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n)},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete())},e}(o.Subscriber);e.ObserveOnSubscriber=u;var c=function(){function t(t,e){this.notification=t,this.destination=e}return t}();e.ObserveOnMessage=c},function(t,e,n){"use strict";var r=n(5),i=function(){function t(t,e,n){this.kind=t,this.value=e,this.exception=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.exception);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){var r=this.kind;switch(r){case"N":return t&&t(this.value);case"E":return e&&e(this.exception);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t=this.kind;switch(t){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.exception);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return"undefined"!=typeof e?new t("N",e):this.undefinedValueNotification},t.createError=function(e){return new t("E",(void 0),e)},t.createComplete=function(){return this.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",(void 0)),t}();e.Notification=i},function(t,e,n){"use strict";var r=n(33);e.of=r.ArrayObservable.of},function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.every=r;var s=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate,this.thisArg,this.source))},t}(),a=function(t){function e(e,n,r,i){t.call(this,e),this.predicate=n,this.thisArg=r,this.source=i,this.index=0,this.thisArg=r||this}return i(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.map=r;var s=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.project,this.thisArg))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.count=0,this.thisArg=r||this}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(o.Subscriber)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.mergeAll=r;var a=function(){function t(t){this.concurrent=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.concurrent))},t}();e.MergeAllOperator=a;var u=function(t){function e(e,n){t.call(this,e),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?(this.active++,this.add(s.subscribeToResult(this,t))):this.buffer.push(t)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeAllSubscriber=u},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i.Subscriber);e.OuterSubscriber=o},function(t,e,n){"use strict";function r(t,e,n,r){var h=new c.InnerSubscriber(t,n,r);if(h.closed)return null;if(e instanceof a.Observable)return e._isScalar?(h.next(e.value),h.complete(),null):e.subscribe(h);if(o.isArray(e)){for(var p=0,f=e.length;p<f&&!h.closed;p++)h.next(e[p]);h.closed||h.complete()}else{if(s.isPromise(e))return e.then(function(t){h.closed||(h.next(t),h.complete())},function(t){return h.error(t)}).then(null,function(t){i.root.setTimeout(function(){throw t})}),h;if("function"==typeof e[u.$$iterator])for(var d=e[u.$$iterator]();;){var v=d.next();if(v.done){h.complete();break}if(h.next(v.value),h.closed)break}else if("function"==typeof e[l.$$observable]){var m=e[l.$$observable]();if("function"==typeof m.subscribe)return m.subscribe(new c.InnerSubscriber(t,n,r));h.error(new Error("invalid observable"))}else h.error(new TypeError("unknown type returned"))}return null}var i=n(6),o=n(12),s=n(29),a=n(5),u=n(32),c=n(46),l=n(19);e.subscribeToResult=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(9),o=function(t){function e(e,n,r){t.call(this),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}return r(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i.Subscriber);e.InnerSubscriber=o},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),this.lift(new a(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(45),s=n(44);e.mergeMap=r;var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=a;var u=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.project=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(o.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._notifyResultSelector(t,e,n,r):this.destination.next(e)},e.prototype._notifyResultSelector=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(o){return void this.destination.error(o)}this.destination.next(i)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(s.OuterSubscriber);e.MergeMapSubscriber=u},function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.reduce=r;var s=function(){function t(t,e){this.accumulator=t,this.seed=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.accumulator,this.seed))},t}();e.ReduceOperator=s;var a=function(t){function e(e,n,r){t.call(this,e),this.accumulator=n,this.hasValue=!1,this.acc=r,this.accumulator=n,this.hasSeed="undefined"!=typeof r}return i(e,t),e.prototype._next=function(t){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(t):(this.acc=t,this.hasValue=!0)},e.prototype._tryReduce=function(t){var e;try{e=this.accumulator(this.acc,t)}catch(n){return void this.destination.error(n)}this.acc=e},e.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},e}(o.Subscriber);e.ReduceSubscriber=a},function(t,e,n){"use strict";function r(t){var e=new a(t),n=this.lift(e);return e.caught=n}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e._catch=r;var a=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.selector,this.caught))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.selector=n,this.caught=r}return i(e,t),e.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void this.destination.error(t)}this.unsubscribe(),this.destination.remove(this),s.subscribeToResult(this,e)}},e}(o.OuterSubscriber)},function(t,e,n){"use strict";function r(){return this.lift(new i.MergeAllOperator(1))}var i=n(43);e.concatAll=r},function(t,e,n){"use strict";function r(t,e,n){return this.lift(new a(t,e,n,this));
}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(52);e.first=r;var a=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),u=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1}return i(e,t),e.prototype._next=function(t){var e=this.index++;this.predicate?this._tryPredicate(t,e):this._emit(t,e)},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(r){return void this.destination.error(r)}n&&this._emit(t,e)},e.prototype._emit=function(t,e){return this.resultSelector?void this._tryResultSelector(t,e):void this._emitFinal(t)},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(r){return void this.destination.error(r)}this._emitFinal(n)},e.prototype._emitFinal=function(t){var e=this.destination;e.next(t),e.complete(),this.hasCompleted=!0},e.prototype._complete=function(){var t=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||t.error(new s.EmptyError):(t.next(this.defaultValue),t.complete())},e}(o.Subscriber)},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"no elements in sequence");this.name=e.name="EmptyError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.EmptyError=r},function(t,e,n){"use strict";var r=n(30);e.fromPromise=r.PromiseObservable.create},function(t,e,n){"use strict";function r(t,e,n){return this.lift(new a(t,e,n,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(52);e.last=r;var a=function(){function t(t,e,n,r){this.predicate=t,this.resultSelector=e,this.defaultValue=n,this.source=r}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.resultSelector,this.defaultValue,this.source))},t}(),u=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.resultSelector=r,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return i(e,t),e.prototype._next=function(t){var e=this.index++;if(this.predicate)this._tryPredicate(t,e);else{if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryPredicate=function(t,e){var n;try{n=this.predicate(t,e,this.source)}catch(r){return void this.destination.error(r)}if(n){if(this.resultSelector)return void this._tryResultSelector(t,e);this.lastValue=t,this.hasValue=!0}},e.prototype._tryResultSelector=function(t,e){var n;try{n=this.resultSelector(t,e)}catch(r){return void this.destination.error(r)}this.lastValue=n,this.hasValue=!0},e.prototype._complete=function(){var t=this.destination;this.hasValue?(t.next(this.lastValue),t.complete()):t.error(new s.EmptyError)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(20),s=function(t){function e(e){t.call(this),this._value=e}return r(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.Subject);e.BehaviorSubject=s},,,function(t,e,n){!function(t,n){n(e)}(this,function(t){"use strict";function e(){}function n(t,e){this.x=t||0,this.y=e||0}function r(e,o,s,a,u,c,l,h,p,f){Object.defineProperty(this,"id",{value:i()}),this.uuid=t.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==o?o:r.DEFAULT_MAPPING,this.wrapS=void 0!==s?s:wo,this.wrapT=void 0!==a?a:wo,this.magFilter=void 0!==u?u:Mo,this.minFilter=void 0!==c?c:Ao,this.anisotropy=void 0!==p?p:1,this.format=void 0!==l?l:Ho,this.type=void 0!==h?h:Oo,this.offset=new n(0,0),this.repeat=new n(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:ms,this.version=0,this.onUpdate=null}function i(){return Ms++}function o(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}function a(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function u(t,e){function n(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);u=d.createBuffer(),c=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,u),d.bufferData(d.ARRAY_BUFFER,t,d.STATIC_DRAW),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),d.bufferData(d.ELEMENT_ARRAY_BUFFER,e,d.STATIC_DRAW),l=i(),h={position:d.getAttribLocation(l,"position"),uv:d.getAttribLocation(l,"uv")},p={uvOffset:d.getUniformLocation(l,"uvOffset"),uvScale:d.getUniformLocation(l,"uvScale"),rotation:d.getUniformLocation(l,"rotation"),scale:d.getUniformLocation(l,"scale"),color:d.getUniformLocation(l,"color"),map:d.getUniformLocation(l,"map"),opacity:d.getUniformLocation(l,"opacity"),modelViewMatrix:d.getUniformLocation(l,"modelViewMatrix"),projectionMatrix:d.getUniformLocation(l,"projectionMatrix"),fogType:d.getUniformLocation(l,"fogType"),fogDensity:d.getUniformLocation(l,"fogDensity"),fogNear:d.getUniformLocation(l,"fogNear"),fogFar:d.getUniformLocation(l,"fogFar"),fogColor:d.getUniformLocation(l,"fogColor"),alphaTest:d.getUniformLocation(l,"alphaTest")};var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var o=n.getContext("2d");o.fillStyle="white",o.fillRect(0,0,8,8),f=new r(n),f.needsUpdate=!0}function i(){var e=d.createProgram(),n=d.createShader(d.VERTEX_SHADER),r=d.createShader(d.FRAGMENT_SHADER);return d.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),d.shaderSource(r,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),d.compileShader(n),d.compileShader(r),d.attachShader(e,n),d.attachShader(e,r),d.linkProgram(e),e}function o(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var u,c,l,h,p,f,d=t.context,v=t.state,m=new a,y=new s,g=new a;this.render=function(r,i){if(0!==e.length){void 0===l&&n(),d.useProgram(l),v.initAttributes(),v.enableAttribute(h.position),v.enableAttribute(h.uv),v.disableUnusedAttributes(),v.disable(d.CULL_FACE),v.enable(d.BLEND),d.bindBuffer(d.ARRAY_BUFFER,u),d.vertexAttribPointer(h.position,2,d.FLOAT,!1,16,0),d.vertexAttribPointer(h.uv,2,d.FLOAT,!1,16,8),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),d.uniformMatrix4fv(p.projectionMatrix,!1,i.projectionMatrix.elements),v.activeTexture(d.TEXTURE0),d.uniform1i(p.map,0);var s=0,a=0,b=r.fog;b?(d.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b&&b.isFog?(d.uniform1f(p.fogNear,b.near),d.uniform1f(p.fogFar,b.far),d.uniform1i(p.fogType,1),s=1,a=1):b&&b.isFogExp2&&(d.uniform1f(p.fogDensity,b.density),d.uniform1i(p.fogType,2),s=2,a=2)):(d.uniform1i(p.fogType,0),s=0,a=0);for(var _=0,w=e.length;_<w;_++){var x=e[_];x.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,x.matrixWorld),x.z=-x.modelViewMatrix.elements[14]}e.sort(o);for(var E=[],_=0,w=e.length;_<w;_++){var x=e[_],S=x.material;if(S.visible!==!1){d.uniform1f(p.alphaTest,S.alphaTest),d.uniformMatrix4fv(p.modelViewMatrix,!1,x.modelViewMatrix.elements),x.matrixWorld.decompose(m,y,g),E[0]=g.x,E[1]=g.y;var T=0;r.fog&&S.fog&&(T=a),s!==T&&(d.uniform1i(p.fogType,T),s=T),null!==S.map?(d.uniform2f(p.uvOffset,S.map.offset.x,S.map.offset.y),d.uniform2f(p.uvScale,S.map.repeat.x,S.map.repeat.y)):(d.uniform2f(p.uvOffset,0,0),d.uniform2f(p.uvScale,1,1)),d.uniform1f(p.opacity,S.opacity),d.uniform3f(p.color,S.color.r,S.color.g,S.color.b),d.uniform1f(p.rotation,S.rotation),d.uniform2fv(p.scale,E),v.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),v.setDepthTest(S.depthTest),v.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(f,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)}}v.enable(d.CULL_FACE),t.resetGLState()}}}function c(t,e){this.min=void 0!==t?t:new n((+(1/0)),(+(1/0))),this.max=void 0!==e?e:new n((-(1/0)),(-(1/0)))}function l(t,e){function r(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);o=v.createBuffer(),s=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,o),v.bufferData(v.ARRAY_BUFFER,t,v.STATIC_DRAW),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,s),v.bufferData(v.ELEMENT_ARRAY_BUFFER,e,v.STATIC_DRAW),f=v.createTexture(),d=v.createTexture(),m.bindTexture(v.TEXTURE_2D,f),v.texImage2D(v.TEXTURE_2D,0,v.RGB,16,16,0,v.RGB,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),m.bindTexture(v.TEXTURE_2D,d),v.texImage2D(v.TEXTURE_2D,0,v.RGBA,16,16,0,v.RGBA,v.UNSIGNED_BYTE,null),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),u={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=i(u),h={vertex:v.getAttribLocation(l,"position"),uv:v.getAttribLocation(l,"uv")},p={renderType:v.getUniformLocation(l,"renderType"),map:v.getUniformLocation(l,"map"),occlusionMap:v.getUniformLocation(l,"occlusionMap"),opacity:v.getUniformLocation(l,"opacity"),color:v.getUniformLocation(l,"color"),scale:v.getUniformLocation(l,"scale"),rotation:v.getUniformLocation(l,"rotation"),screenPosition:v.getUniformLocation(l,"screenPosition")}}function i(e){var n=v.createProgram(),r=v.createShader(v.FRAGMENT_SHADER),i=v.createShader(v.VERTEX_SHADER),o="precision "+t.getPrecision()+" float;\n";return v.shaderSource(r,o+e.fragmentShader),v.shaderSource(i,o+e.vertexShader),v.compileShader(r),v.compileShader(i),v.attachShader(n,r),v.attachShader(n,i),v.linkProgram(n),n}var o,s,u,l,h,p,f,d,v=t.context,m=t.state;this.render=function(i,u,y){if(0!==e.length){var g=new a,b=y.w/y.z,_=.5*y.z,w=.5*y.w,x=16/y.w,E=new n(x*b,x),S=new a(1,1,0),T=new n(1,1),M=new c;M.min.set(0,0),M.max.set(y.z-16,y.w-16),void 0===l&&r(),v.useProgram(l),m.initAttributes(),m.enableAttribute(h.vertex),m.enableAttribute(h.uv),m.disableUnusedAttributes(),v.uniform1i(p.occlusionMap,0),v.uniform1i(p.map,1),v.bindBuffer(v.ARRAY_BUFFER,o),v.vertexAttribPointer(h.vertex,2,v.FLOAT,!1,16,0),v.vertexAttribPointer(h.uv,2,v.FLOAT,!1,16,8),v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,s),m.disable(v.CULL_FACE),m.setDepthWrite(!1);for(var C=0,A=e.length;C<A;C++){x=16/y.w,E.set(x*b,x);var O=e[C];if(g.set(O.matrixWorld.elements[12],O.matrixWorld.elements[13],O.matrixWorld.elements[14]),g.applyMatrix4(u.matrixWorldInverse),g.applyProjection(u.projectionMatrix),S.copy(g),T.x=y.x+S.x*_+_-8,T.y=y.y+S.y*w+w-8,M.containsPoint(T)===!0){m.activeTexture(v.TEXTURE0),m.bindTexture(v.TEXTURE_2D,null),m.activeTexture(v.TEXTURE1),m.bindTexture(v.TEXTURE_2D,f),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGB,T.x,T.y,16,16,0),v.uniform1i(p.renderType,0),v.uniform2f(p.scale,E.x,E.y),v.uniform3f(p.screenPosition,S.x,S.y,S.z),m.disable(v.BLEND),m.enable(v.DEPTH_TEST),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),m.activeTexture(v.TEXTURE0),m.bindTexture(v.TEXTURE_2D,d),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGBA,T.x,T.y,16,16,0),v.uniform1i(p.renderType,1),m.disable(v.DEPTH_TEST),m.activeTexture(v.TEXTURE1),m.bindTexture(v.TEXTURE_2D,f),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0),O.positionScreen.copy(S),O.customUpdateCallback?O.customUpdateCallback(O):O.updateLensFlares(),v.uniform1i(p.renderType,2),m.enable(v.BLEND);for(var P=0,R=O.lensFlares.length;P<R;P++){var I=O.lensFlares[P];I.opacity>.001&&I.scale>.001&&(S.x=I.x,S.y=I.y,S.z=I.z,x=I.size*I.scale/y.w,E.x=x*b,E.y=x,v.uniform3f(p.screenPosition,S.x,S.y,S.z),v.uniform2f(p.scale,E.x,E.y),v.uniform1f(p.rotation,I.rotation),v.uniform1f(p.opacity,I.opacity),v.uniform3f(p.color,I.color.r,I.color.g,I.color.b),m.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),t.setTexture2D(I.texture,1),v.drawElements(v.TRIANGLES,6,v.UNSIGNED_SHORT,0))}}}m.enable(v.CULL_FACE),m.enable(v.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function h(t,e,n,i,o,s,a,u,c,l){t=void 0!==t?t:[],e=void 0!==e?e:po,r.call(this,t,e,n,i,o,s,a,u,c,l),this.flipY=!1}function p(){this.seq=[],this.map={}}function f(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=Os[i];if(void 0===o&&(o=new Float32Array(i),Os[i]=o),0!==e){r.toArray(o,0);for(var s=1,a=0;s!==e;++s)a+=n,t[s].toArray(o,a)}return o}function d(t,e){var n=Ps[e];void 0===n&&(n=new Int32Array(e),Ps[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocTextureUnit();return n}function v(t,e){t.uniform1f(this.addr,e)}function m(t,e){t.uniform1i(this.addr,e)}function y(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function g(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function b(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function _(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function w(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function x(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function E(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTexture2D(e||Cs,r)}function S(t,e,n){var r=n.allocTextureUnit();t.uniform1i(this.addr,r),n.setTextureCube(e||As,r)}function T(t,e){t.uniform2iv(this.addr,e)}function M(t,e){t.uniform3iv(this.addr,e)}function C(t,e){t.uniform4iv(this.addr,e)}function A(t){switch(t){case 5126:return v;case 35664:return y;case 35665:return g;case 35666:return b;case 35674:return _;case 35675:return w;case 35676:return x;case 35678:return E;case 35680:return S;case 5124:case 35670:return m;case 35667:case 35671:return T;case 35668:case 35672:return M;case 35669:case 35673:return C}}function O(t,e){t.uniform1fv(this.addr,e)}function P(t,e){t.uniform1iv(this.addr,e)}function R(t,e){t.uniform2fv(this.addr,f(e,this.size,2))}function I(t,e){t.uniform3fv(this.addr,f(e,this.size,3))}function N(t,e){t.uniform4fv(this.addr,f(e,this.size,4))}function L(t,e){t.uniformMatrix2fv(this.addr,!1,f(e,this.size,4))}function k(t,e){t.uniformMatrix3fv(this.addr,!1,f(e,this.size,9))}function D(t,e){t.uniformMatrix4fv(this.addr,!1,f(e,this.size,16))}function j(t,e,n){var r=e.length,i=d(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTexture2D(e[o]||Cs,i[o])}function F(t,e,n){var r=e.length,i=d(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.setTextureCube(e[o]||As,i[o])}function U(t){switch(t){case 5126:return O;case 35664:return R;case 35665:return I;case 35666:return N;case 35674:return L;case 35675:return k;case 35676:return D;case 35678:return j;case 35680:return F;case 5124:case 35670:return P;case 35667:case 35671:return T;case 35668:case 35672:return M;case 35669:case 35673:return C}}function V(t,e,n){this.id=t,this.addr=n,this.setValue=A(e.type)}function B(t,e,n){this.id=t,this.addr=n,this.size=e.size,this.setValue=U(e.type)}function z(t){this.id=t,p.call(this)}function H(t,e){t.seq.push(e),t.map[e.id]=e}function G(t,e,n){var r=t.name,i=r.length;for(Rs.lastIndex=0;;){var o=Rs.exec(r),s=Rs.lastIndex,a=o[1],u="]"===o[2],c=o[3];if(u&&(a=0|a),void 0===c||"["===c&&s+2===i){H(n,void 0===c?new V(a,t,e):new B(a,t,e));break}var l=n.map,h=l[a];void 0===h&&(h=new z(a),H(n,h)),n=h}}function W(t,e,n){p.call(this),this.renderer=n;for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i!==r;++i){var o=t.getActiveUniform(e,i),s=o.name,a=t.getUniformLocation(e,s);G(o,a,this)}}function q(e,n,r,i,o,s,a){function u(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n);var i=r.getContext("2d");return i.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+t.width+"x"+t.height+"). Resized to "+r.width+"x"+r.height,t),r}return t}function c(e){return t.Math.isPowerOfTwo(e.width)&&t.Math.isPowerOfTwo(e.height)}function l(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=t.Math.nearestPowerOfTwo(e.width),n.height=t.Math.nearestPowerOfTwo(e.height);var r=n.getContext("2d");return r.drawImage(e,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function h(t){return t.wrapS!==wo||t.wrapT!==wo||t.minFilter!==Eo&&t.minFilter!==Mo}function p(t){return t===Eo||t===So||t===To?e.NEAREST:e.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),v(e),A.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),m(e),A.textures--}function v(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.delete(t)}function m(t){var n=i.get(t),r=i.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t&&t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.delete(t.texture),i.delete(t)}}function y(t,n){var o=i.get(t);if(t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(s.complete!==!1)return void w(o,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function g(t,n){var a=i.get(t);if(6===t.image.length)if(t.version>0&&a.__version!==t.version){a.__image__webglTextureCube||(t.addEventListener("dispose",f),a.__image__webglTextureCube=e.createTexture(),A.textures++),r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,a.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,p=[],d=0;d<6;d++)l||h?p[d]=h?t.image[d].image:t.image[d]:p[d]=u(t.image[d],o.maxCubemapSize);var v=p[0],m=c(v),y=s(t.format),g=s(t.type);_(e.TEXTURE_CUBE_MAP,t,m);for(var d=0;d<6;d++)if(l)for(var b,w=p[d].mipmaps,x=0,E=w.length;x<E;x++)b=w[x],t.format!==Ho&&t.format!==zo?r.getCompressedTextureFormats().indexOf(y)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,x,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,x,y,b.width,b.height,0,y,g,b.data);else h?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,y,p[d].width,p[d].height,0,y,g,p[d].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,y,y,g,p[d]);t.generateMipmaps&&m&&e.generateMipmap(e.TEXTURE_CUBE_MAP),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,a.__image__webglTextureCube)}function b(t,n){r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function _(t,r,a){var u;if(a?(e.texParameteri(t,e.TEXTURE_WRAP_S,s(r.wrapS)),e.texParameteri(t,e.TEXTURE_WRAP_T,s(r.wrapT)),e.texParameteri(t,e.TEXTURE_MAG_FILTER,s(r.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,s(r.minFilter))):(e.texParameteri(t,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(t,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r.wrapS===wo&&r.wrapT===wo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",r),e.texParameteri(t,e.TEXTURE_MAG_FILTER,p(r.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,p(r.minFilter)),r.minFilter!==Eo&&r.minFilter!==Mo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",r)),u=n.get("EXT_texture_filter_anisotropic")){if(r.type===ko&&null===n.get("OES_texture_float_linear"))return;if(r.type===Do&&null===n.get("OES_texture_half_float_linear"))return;(r.anisotropy>1||i.get(r).__currentAnisotropy)&&(e.texParameterf(t,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),i.get(r).__currentAnisotropy=r.anisotropy)}}function w(t,n,i){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",f),t.__webglTexture=e.createTexture(),A.textures++),r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var a=u(n.image,o.maxTextureSize);h(n)&&c(a)===!1&&(a=l(a));var p=c(a),d=s(n.format),v=s(n.type);_(e.TEXTURE_2D,n,p);var m,y=n.mipmaps;if(n&&n.isDepthTexture){var g=e.DEPTH_COMPONENT;if(n.type===ko){if(!O)throw new Error("Float Depth Texture only supported in WebGL2.0");g=e.DEPTH_COMPONENT32F}else O&&(g=e.DEPTH_COMPONENT16);n.format===Yo&&(g=e.DEPTH_STENCIL),r.texImage2D(e.TEXTURE_2D,0,g,a.width,a.height,0,d,v,null)}else if(n&&n.isDataTexture)if(y.length>0&&p){for(var b=0,w=y.length;b<w;b++)m=y[b],r.texImage2D(e.TEXTURE_2D,b,d,m.width,m.height,0,d,v,m.data);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,d,a.width,a.height,0,d,v,a.data);else if(n&&n.isCompressedTexture)for(var b=0,w=y.length;b<w;b++)m=y[b],n.format!==Ho&&n.format!==zo?r.getCompressedTextureFormats().indexOf(d)>-1?r.compressedTexImage2D(e.TEXTURE_2D,b,d,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,b,d,m.width,m.height,0,d,v,m.data);else if(y.length>0&&p){for(var b=0,w=y.length;b<w;b++)m=y[b],r.texImage2D(e.TEXTURE_2D,b,d,d,v,m);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,d,d,v,a);n.generateMipmaps&&p&&e.generateMipmap(e.TEXTURE_2D),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(t,n,o,a){var u=s(n.texture.format),c=s(n.texture.type);r.texImage2D(a,0,u,n.width,n.height,0,u,c,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,a,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function E(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function S(t,n){var r=n&&n.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var o=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Xo)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(n.depthTexture.format!==Yo)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}function T(t){var n=i.get(t),r=t&&t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");S(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),E(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),E(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t){var n=i.get(t),o=i.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),A.textures++;var s=t&&t.isWebGLRenderTargetCube,a=c(t);if(s){n.__webglFramebuffer=[];for(var u=0;u<6;u++)n.__webglFramebuffer[u]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(s){r.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),_(e.TEXTURE_CUBE_MAP,t.texture,a);for(var u=0;u<6;u++)x(n.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&a&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,o.__webglTexture),_(e.TEXTURE_2D,t.texture,a),x(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&a&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&T(t)}function C(t){var n=t.texture;if(n.generateMipmaps&&c(t)&&n.minFilter!==Eo&&n.minFilter!==Mo){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=i.get(n).__webglTexture;r.bindTexture(o,s),e.generateMipmap(o),r.bindTexture(o,null)}}var A=a.memory,O="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=y,this.setTextureCube=g,this.setTextureCubeDynamic=b,this.setupRenderTarget=M,this.updateRenderTargetMipmap=C}function X(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Y(t,e,n){function r(){var e=!1,n=new X,r=null,i=new X;return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,s){n.set(e,r,o,s),i.equals(n)===!1&&(t.clearColor(e,r,o,s),i.copy(n))},reset:function(){e=!1,r=null,i.set(0,0,0,1)}}}function i(){var e=!1,n=null,r=null,i=null;return{setTest:function(e){e?p(t.DEPTH_TEST):f(t.DEPTH_TEST)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case Zi:t.depthFunc(t.NEVER);break;case Ki:t.depthFunc(t.ALWAYS);break;case Qi:t.depthFunc(t.LESS);break;case Ji:t.depthFunc(t.LEQUAL);break;case $i:t.depthFunc(t.EQUAL);break;case to:t.depthFunc(t.GEQUAL);break;case eo:t.depthFunc(t.GREATER);break;case no:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}}function o(){var e=!1,n=null,r=null,i=null,o=null,s=null,a=null,u=null,c=null;return{setTest:function(e){e?p(t.STENCIL_TEST):f(t.STENCIL_TEST)},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,s){r===e&&i===n&&o===s||(t.stencilFunc(e,n,s),r=e,i=n,o=s)},setOp:function(e,n,r){s===e&&a===n&&u===r||(t.stencilOp(e,n,r),s=e,a=n,u=r)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,s=null,a=null,u=null,c=null}}}function s(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);
for(var s=0;s<r;s++)t.texImage2D(n+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,i);return o}function a(){L(0,0,0,1),k(1),D(0),p(t.DEPTH_TEST),b(Ji),S(!1),T(hi),p(t.CULL_FACE),p(t.BLEND),v(Ai)}function u(){for(var t=0,e=G.length;t<e;t++)G[t]=0}function c(n){if(G[n]=1,0===W[n]&&(t.enableVertexAttribArray(n),W[n]=1),0!==q[n]){var r=e.get("ANGLE_instanced_arrays");r.vertexAttribDivisorANGLE(n,0),q[n]=0}}function l(e,n,r){G[e]=1,0===W[e]&&(t.enableVertexAttribArray(e),W[e]=1),q[e]!==n&&(r.vertexAttribDivisorANGLE(e,n),q[e]=n)}function h(){for(var e=0,n=W.length;e!==n;++e)W[e]!==G[e]&&(t.disableVertexAttribArray(e),W[e]=0)}function p(e){Y[e]!==!0&&(t.enable(e),Y[e]=!0)}function f(e){Y[e]!==!1&&(t.disable(e),Y[e]=!1)}function d(){if(null===Z&&(Z=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)Z.push(n[r]);return Z}function v(e,r,i,o,s,a,u,c){return e===Ci?(f(t.BLEND),void(K=e)):(p(t.BLEND),e===K&&c===rt||(e===Oi?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Pi?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Ri?c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):c?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),K=e,rt=c),void(e===Ii?(s=s||r,a=a||i,u=u||o,r===Q&&s===tt||(t.blendEquationSeparate(n(r),n(s)),Q=r,tt=s),i===J&&o===$&&a===et&&u===nt||(t.blendFuncSeparate(n(i),n(o),n(a),n(u)),J=i,$=o,et=a,nt=u)):(Q=null,J=null,$=null,tt=null,et=null,nt=null)))}function m(t){V.setMask(t)}function y(t){B.setTest(t)}function g(t){B.setMask(t)}function b(t){B.setFunc(t)}function _(t){z.setTest(t)}function w(t){z.setMask(t)}function x(t,e,n){z.setFunc(t,e,n)}function E(t,e,n){z.setOp(t,e,n)}function S(e){it!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),it=e)}function T(e){e!==li?(p(t.CULL_FACE),e!==ot&&(e===hi?t.cullFace(t.BACK):e===pi?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):f(t.CULL_FACE),ot=e}function M(e){e!==st&&(t.lineWidth(e),st=e)}function C(e,n,r){e?(p(t.POLYGON_OFFSET_FILL),at===n&&ut===r||(t.polygonOffset(n,r),at=n,ut=r)):f(t.POLYGON_OFFSET_FILL)}function A(){return ct}function O(e){ct=e,e?p(t.SCISSOR_TEST):f(t.SCISSOR_TEST)}function P(e){void 0===e&&(e=t.TEXTURE0+lt-1),ht!==e&&(t.activeTexture(e),ht=e)}function R(e,n){null===ht&&P();var r=pt[ht];void 0===r&&(r={type:void 0,texture:void 0},pt[ht]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||vt[e]),r.type=e,r.texture=n)}function I(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error(e)}}function N(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error(e)}}function L(t,e,n,r){V.setClear(t,e,n,r)}function k(t){B.setClear(t)}function D(t){z.setClear(t)}function j(e){ft.equals(e)===!1&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))}function F(e){dt.equals(e)===!1&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))}function U(){for(var e=0;e<W.length;e++)1===W[e]&&(t.disableVertexAttribArray(e),W[e]=0);Y={},Z=null,ht=null,pt={},K=null,it=null,ot=null,V.reset(),B.reset(),z.reset()}var V=new r,B=new i,z=new o,H=t.getParameter(t.MAX_VERTEX_ATTRIBS),G=new Uint8Array(H),W=new Uint8Array(H),q=new Uint8Array(H),Y={},Z=null,K=null,Q=null,J=null,$=null,tt=null,et=null,nt=null,rt=!1,it=null,ot=null,st=null,at=null,ut=null,ct=null,lt=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ht=null,pt={},ft=new X,dt=new X,vt={};return vt[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),vt[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:V,depth:B,stencil:z},init:a,initAttributes:u,enableAttribute:c,enableAttributeAndDivisor:l,disableUnusedAttributes:h,enable:p,disable:f,getCompressedTextureFormats:d,setBlending:v,setColorWrite:m,setDepthTest:y,setDepthWrite:g,setDepthFunc:b,setStencilTest:_,setStencilWrite:w,setStencilFunc:x,setStencilOp:E,setFlipSided:S,setCullFace:T,setLineWidth:M,setPolygonOffset:C,getScissorTest:A,setScissorTest:O,activeTexture:P,bindTexture:R,compressedTexImage2D:I,texImage2D:N,clearColor:L,clearDepth:k,clearStencil:D,scissor:j,viewport:F,reset:U}}function Z(e,n,i){this.uuid=t.Math.generateUUID(),this.width=e,this.height=n,this.scissor=new X(0,0,e,n),this.scissorTest=!1,this.viewport=new X(0,0,e,n),i=i||{},void 0===i.minFilter&&(i.minFilter=Mo),this.texture=new r((void 0),(void 0),i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function K(){Object.defineProperty(this,"id",{value:Q()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Ai,this.side=bi,this.shading=Ei,this.vertexColors=Si,this.opacity=1,this.transparent=!1,this.blendSrc=zi,this.blendDst=Hi,this.blendEquation=Ni,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ji,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Q(){return Is++}function J(t){K.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function $(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function tt(t){K.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ss,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function et(t,e){this.min=void 0!==t?t:new a((+(1/0)),(+(1/0)),(+(1/0))),this.max=void 0!==e?e:new a((-(1/0)),(-(1/0)),(-(1/0)))}function nt(t,e){this.center=void 0!==t?t:new a,this.radius=void 0!==e?e:0}function rt(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function it(t,e){this.normal=void 0!==t?t:new a(1,0,0),this.constant=void 0!==e?e:0}function ot(t,e,n,r,i,o){this.planes=[void 0!==t?t:new it,void 0!==e?e:new it,void 0!==n?n:new it,void 0!==r?r:new it,void 0!==i?i:new it,void 0!==o?o:new it]}function st(e,r,i,s){function u(t,n,r,i){var o=t.geometry,s=null,a=E,u=t.customDepthMaterial;if(r&&(a=S,u=t.customDistanceMaterial),u)s=u;else{var c=!1;n.morphTargets&&(o&&o.isBufferGeometry?c=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(c=o.morphTargets&&o.morphTargets.length>0));var l=t.isSkinnedMesh&&n.skinning,h=0;c&&(h|=_),l&&(h|=w),s=a[h]}if(e.localClippingEnabled&&n.clipShadows===!0&&0!==n.clippingPlanes.length){var p=s.uuid,f=n.uuid,d=T[p];void 0===d&&(d={},T[p]=d);var v=d[f];void 0===v&&(v=s.clone(),d[f]=v),s=v}s.visible=n.visible,s.wireframe=n.wireframe;var m=n.side;return j.renderSingleSided&&m==wi&&(m=bi),j.renderReverseSided&&(m===bi?m=_i:m===_i&&(m=bi)),s.side=m,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,r&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(i),s}function c(t,e,n){if(t.visible!==!1){var r=0!==(t.layers.mask&e.layers.mask);if(r&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(t.frustumCulled===!1||p.intersectsObject(t)===!0)){var i=t.material;i.visible===!0&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),b.push(t))}for(var o=t.children,s=0,a=o.length;s<a;s++)c(o[s],e,n)}}var l=e.context,h=e.state,p=new ot,f=new o,d=r.shadows,v=new n,m=new n(s.maxTextureSize,s.maxTextureSize),y=new a,g=new a,b=[],_=1,w=2,x=(_|w)+1,E=new Array(x),S=new Array(x),T={},M=[new a(1,0,0),new a((-1),0,0),new a(0,0,1),new a(0,0,(-1)),new a(0,1,0),new a(0,(-1),0)],C=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,(-1))],A=[new X,new X,new X,new X,new X,new X],O=new tt;O.depthPacking=Ts,O.clipping=!0;for(var P=Iu.distanceRGBA,R=t.UniformsUtils.clone(P.uniforms),I=0;I!==x;++I){var N=0!==(I&_),L=0!==(I&w),k=O.clone();k.morphTargets=N,k.skinning=L,E[I]=k;var D=new J({defines:{USE_SHADOWMAP:""},uniforms:R,vertexShader:P.vertexShader,fragmentShader:P.fragmentShader,morphTargets:N,skinning:L,clipping:!0});S[I]=D}var j=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yi,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n){if(j.enabled!==!1&&(j.autoUpdate!==!1||j.needsUpdate!==!1)&&0!==d.length){h.clearColor(1,1,1,1),h.disable(l.BLEND),h.setDepthTest(!0),h.setScissorTest(!1);for(var r,o,s=0,a=d.length;s<a;s++){var _=d[s],w=_.shadow;if(void 0!==w){var x=w.camera;if(v.copy(w.mapSize),v.min(m),_&&_.isPointLight){r=6,o=!0;var E=v.x,S=v.y;A[0].set(2*E,S,E,S),A[1].set(0,S,E,S),A[2].set(3*E,S,E,S),A[3].set(E,S,E,S),A[4].set(3*E,0,E,S),A[5].set(E,0,E,S),v.x*=4,v.y*=2}else r=1,o=!1;if(null===w.map){var T={minFilter:Eo,magFilter:Eo,format:Ho};w.map=new Z(v.x,v.y,T),x.updateProjectionMatrix()}w&&w.isSpotLightShadow&&w.update(_);var O=w.map,P=w.matrix;g.setFromMatrixPosition(_.matrixWorld),x.position.copy(g),e.setRenderTarget(O),e.clear();for(var R=0;R<r;R++){if(o){y.copy(x.position),y.add(M[R]),x.up.copy(C[R]),x.lookAt(y);var I=A[R];h.viewport(I)}else y.setFromMatrixPosition(_.target.matrixWorld),x.lookAt(y);x.updateMatrixWorld(),x.matrixWorldInverse.getInverse(x.matrixWorld),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(x.projectionMatrix),P.multiply(x.matrixWorldInverse),f.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),p.setFromMatrix(f),b.length=0,c(t,n,x);for(var N=0,L=b.length;N<L;N++){var k=b[N],D=i.update(k),F=k.material;if(F&&F.isMultiMaterial)for(var U=D.groups,V=F.materials,B=0,z=U.length;B<z;B++){var H=U[B],G=V[H.materialIndex];if(G.visible===!0){var W=u(k,G,o,g);e.renderBufferDirect(x,null,D,W,k,H)}}else{var W=u(k,F,o,g);e.renderBufferDirect(x,null,D,W,k,null)}}}}else console.warn("THREE.WebGLShadowMap:",_,"has no shadow.")}var q=e.getClearColor(),X=e.getClearAlpha();e.setClearColor(q,X),j.needsUpdate=!1}}}function at(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function ut(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",e===t.VERTEX_SHADER?"vertex":"fragment",t.getShaderInfoLog(r),at(n)),r}function ct(){var t={};return{get:function(e){var n=e.uuid,r=t[n];return void 0===r&&(r={},t[n]=r),r},"delete":function(e){delete t[e.uuid]},clear:function(){t={}}}}function lt(t){switch(t){case ms:return["Linear","( value )"];case ys:return["sRGB","( value )"];case bs:return["RGBE","( value )"];case ws:return["RGBM","( value, 7.0 )"];case xs:return["RGBM","( value, 16.0 )"];case Es:return["RGBD","( value, 256.0 )"];case gs:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function ht(t,e){var n=lt(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function pt(t,e){var n=lt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ft(t,e){var n;switch(e){case ao:n="Linear";break;case uo:n="Reinhard";break;case co:n="Uncharted2";break;case lo:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function dt(t,e,n){t=t||{};var r=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return r.filter(yt).join("\n")}function vt(t){var e=[];for(var n in t){var r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join("\n")}function mt(t,e,n){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var s=t.getActiveAttrib(e,o),a=s.name;r[a]=t.getAttribLocation(e,a)}return r}function yt(t){return""!==t}function gt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function bt(t){function e(t,e){var n=Pu[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return bt(n)}var n=/#include +<([\w\d.]+)>/g;return t.replace(n,e)}function _t(t){function e(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}var n=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function wt(t,e,n,r){var i=t.context,o=n.extensions,s=n.defines,a=n.__webglShader.vertexShader,u=n.__webglShader.fragmentShader,c="SHADOWMAP_TYPE_BASIC";r.shadowMapType===yi?c="SHADOWMAP_TYPE_PCF":r.shadowMapType===gi&&(c="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case po:case fo:l="ENVMAP_TYPE_CUBE";break;case go:case bo:l="ENVMAP_TYPE_CUBE_UV";break;case vo:case mo:l="ENVMAP_TYPE_EQUIREC";break;case yo:l="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case fo:case mo:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case ro:p="ENVMAP_BLENDING_MULTIPLY";break;case io:p="ENVMAP_BLENDING_MIX";break;case oo:p="ENVMAP_BLENDING_ADD"}}var f,d,v=t.gammaFactor>0?t.gammaFactor:1,m=dt(o,r,t.extensions),y=vt(s),g=i.createProgram();n.isRawShaderMaterial?(f=[y,"\n"].filter(yt).join("\n"),d=[m,y,"\n"].filter(yt).join("\n")):(f=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,y,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+v,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yt).join("\n"),d=[m,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,y,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+v,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+h:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==so?"#define TONE_MAPPING":"",r.toneMapping!==so?Pu.tonemapping_pars_fragment:"",r.toneMapping!==so?ft("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Pu.encodings_pars_fragment:"",r.mapEncoding?ht("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?ht("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?ht("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?pt("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(yt).join("\n")),a=bt(a,r),a=gt(a,r),u=bt(u,r),u=gt(u,r),n.isShaderMaterial||(a=_t(a),u=_t(u));var b=f+a,_=d+u,w=ut(i,i.VERTEX_SHADER,b),x=ut(i,i.FRAGMENT_SHADER,_);i.attachShader(g,w),i.attachShader(g,x),void 0!==n.index0AttributeName?i.bindAttribLocation(g,0,n.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);var E=i.getProgramInfoLog(g),S=i.getShaderInfoLog(w),T=i.getShaderInfoLog(x),M=!0,C=!0;i.getProgramParameter(g,i.LINK_STATUS)===!1?(M=!1,console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(g,i.VALIDATE_STATUS),"gl.getProgramInfoLog",E,S,T)):""!==E?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):""!==S&&""!==T||(C=!1),C&&(this.diagnostics={runnable:M,material:n,programLog:E,vertexShader:{log:S,prefix:f},fragmentShader:{log:T,prefix:d}}),i.deleteShader(w),i.deleteShader(x);var A;this.getUniforms=function(){return void 0===A&&(A=new W(i,g,t)),A};var O;return this.getAttributes=function(){return void 0===O&&(O=mt(i,g)),O},this.destroy=function(){i.deleteProgram(g),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Nu++,this.code=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=x,this}function xt(t,e){function n(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,r=Math.floor((n-20)/4),i=r;return void 0!==t&&t&&t.isSkinnedMesh&&(i=Math.min(t.skeleton.bones.length,i),i<t.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+t.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)")),i}function r(t,e){var n;return t?t&&t.isTexture?n=t.encoding:t&&t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=ms,n===ms&&e&&(n=gs),n}var i=[],o={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},s=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","depthPacking"];this.getParameters=function(i,s,a,u,c){var l=o[i.type],h=n(c),p=t.getPrecision();null!==i.precision&&(p=e.getMaxPrecision(i.precision),p!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",p,"instead."));var f=t.getCurrentRenderTarget(),d={shaderID:l,precision:p,supportsVertexTextures:e.vertexTextures,outputEncoding:r(f?f.texture:null,t.gammaOutput),map:!!i.map,mapEncoding:r(i.map,t.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:r(i.envMap,t.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===go||i.envMap.mapping===bo),lightMap:!!i.lightMap,aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:r(i.emissiveMap,t.gammaInput),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,combine:i.combine,vertexColors:i.vertexColors,fog:!!a,useFog:i.fog,fogExp:a&&a.isFogExp2,flatShading:i.shading===xi,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:i.skinning,maxBones:h,useVertexTexture:e.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numHemiLights:s.hemi.length,numClippingPlanes:u,shadowMapEnabled:t.shadowMap.enabled&&c.receiveShadow&&s.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===wi,flipSided:i.side===_i,depthPacking:void 0!==i.depthPacking&&i.depthPacking};return d},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var i=0;i<s.length;i++)n.push(e[s[i]]);return n.join()},this.acquireProgram=function(e,n,r){for(var o,s=0,a=i.length;s<a;s++){var u=i[s];if(u.code===r){o=u,++o.usedTimes;break}}return void 0===o&&(o=new wt(t,r,e,n),i.push(o)),o},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=i.indexOf(t);i[e]=i[i.length-1],i.pop(),t.destroy()}},this.programs=i}function Et(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=t.Math.generateUUID(),this.array=e,this.itemSize=n,this.normalized=r===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function St(t,e){return new Et(new Int8Array(t),e)}function Tt(t,e){return new Et(new Uint8Array(t),e)}function Mt(t,e){return new Et(new Uint8ClampedArray(t),e)}function Ct(t,e){return new Et(new Int16Array(t),e)}function At(t,e){return new Et(new Uint16Array(t),e)}function Ot(t,e){return new Et(new Int32Array(t),e)}function Pt(t,e){return new Et(new Uint32Array(t),e)}function Rt(t,e){return new Et(new Float32Array(t),e)}function It(t,e){return new Et(new Float64Array(t),e)}function Nt(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Et(t,e).setDynamic(!0)}function Lt(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new a,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new $,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function kt(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||kt.DefaultOrder}function Dt(){this.mask=1}function jt(){function e(){u.setFromEuler(i,!1)}function n(){i.setFromQuaternion(u,void 0,!1)}Object.defineProperty(this,"id",{value:Ft()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=jt.DefaultUp.clone();var r=new a,i=new kt,u=new s,c=new a(1,1,1);i.onChange(e),u.onChange(n),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:i},quaternion:{enumerable:!0,value:u},scale:{enumerable:!0,value:c},modelViewMatrix:{value:new o},normalMatrix:{value:new rt}}),this.matrix=new o,this.matrixWorld=new o,this.matrixAutoUpdate=jt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ft(){return Lu++}function Ut(){Object.defineProperty(this,"id",{value:Vt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Vt(){return ku++}function Bt(){Object.defineProperty(this,"id",{value:Vt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function zt(){Object.defineProperty(this,"id",{value:Vt()}),this.uuid=t.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ht(t,e,n){function r(t){var i=t.target,a=u[i.id];null!==a.index&&o(a.index),s(a.attributes),i.removeEventListener("dispose",r),delete u[i.id];var c=e.get(i);c.wireframe&&o(c.wireframe),e.delete(i);var l=e.get(a);l.wireframe&&o(l.wireframe),e.delete(a),n.memory.geometries--}function i(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function o(e){var n=i(e);void 0!==n&&(t.deleteBuffer(n),a(e))}function s(t){for(var e in t)o(t[e])}function a(t){t.isInterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var u={};return{get:function(t){var e=t.geometry;if(void 0!==u[e.id])return u[e.id];e.addEventListener("dispose",r);var i;return e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new zt).setFromObject(t)),i=e._bufferGeometry),u[e.id]=i,n.memory.geometries++,i}}}function Gt(t,e,n){function r(e){var n=l.get(e);e.geometry.isGeometry&&n.updateFromObject(e);var r=n.index,o=n.attributes;null!==r&&i(r,t.ELEMENT_ARRAY_BUFFER);for(var s in o)i(o[s],t.ARRAY_BUFFER);var a=n.morphAttributes;for(var s in a)for(var u=a[s],c=0,h=u.length;c<h;c++)i(u[c],t.ARRAY_BUFFER);return n}function i(t,n){var r=t.isInterleavedBufferAttribute?t.data:t,i=e.get(r);void 0===i.__webglBuffer?o(i,r,n):i.version!==r.version&&s(i,r,n)}function o(e,n,r){e.__webglBuffer=t.createBuffer(),t.bindBuffer(r,e.__webglBuffer);var i=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(r,n.array,i),e.version=n.version}function s(e,n,r){t.bindBuffer(r,e.__webglBuffer),n.dynamic===!1||n.updateRange.count===-1?t.bufferSubData(r,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}function a(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function u(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var o=[],s=n.index,a=n.attributes,u=a.position;if(null!==s)for(var l={},h=s.array,p=0,f=h.length;p<f;p+=3){var d=h[p+0],v=h[p+1],m=h[p+2];c(l,d,v)&&o.push(d,v),c(l,v,m)&&o.push(v,m),c(l,m,d)&&o.push(m,d)}else for(var h=a.position.array,p=0,f=h.length/3-1;p<f;p+=3){var d=p+0,v=p+1,m=p+2;o.push(d,v,v,m,m,d)}var y=u.count>65535?Uint32Array:Uint16Array,g=new Et(new y(o),1);return i(g,t.ELEMENT_ARRAY_BUFFER),r.wireframe=g,g}function c(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];return void 0===i?(t[e]=[n],!0):i.indexOf(n)===-1&&(i.push(n),!0)}var l=new Ht(t,e,n);return{getAttributeBuffer:a,getWireframeAttribute:u,update:r}}function Wt(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var r;switch(e.type){case"DirectionalLight":r={direction:new a,color:new $,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"SpotLight":r={position:new a,direction:new a,color:new $,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":r={position:new a,color:new $,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new n};break;case"HemisphereLight":
r={direction:new a,skyColor:new $,groundColor:new $}}return t[e.id]=r,r}}}function qt(t,e,n){function r(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o,s=void 0!==n.precision?n.precision:"highp",a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);var u=n.logarithmicDepthBuffer===!0&&!!e.get("EXT_frag_depth"),c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),p=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),f=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),v=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),y=l>0,g=!!e.get("OES_texture_float"),b=y&&g;return{getMaxAnisotropy:r,getMaxPrecision:i,precision:s,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:d,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:g,floatVertexTextures:b}}function Xt(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function Yt(t,e,n){function r(t){a=t}function i(n){n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(u=t.UNSIGNED_INT,c=4):(u=t.UNSIGNED_SHORT,c=2)}function o(e,r){t.drawElements(a,r,u,e*c),n.calls++,n.vertices+=r,a===t.TRIANGLES&&(n.faces+=r/3)}function s(r,i,o){var s=e.get("ANGLE_instanced_arrays");return null===s?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(s.drawElementsInstancedANGLE(a,o,u,i*c,r.maxInstancedCount),n.calls++,n.vertices+=o*r.maxInstancedCount,void(a===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*o/3)))}var a,u,c;return{setMode:r,setIndex:i,render:o,renderInstances:s}}function Zt(){function t(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),n.numPlanes=i}function e(t,e,r,i){var o=null!==t?t.length:0,s=null;if(0!==o){if(s=c.value,i!==!0||null===s){var l=r+4*o,h=e.matrixWorldInverse;u.getNormalMatrix(h),(null===s||s.length<l)&&(s=new Float32Array(l));for(var p=0,f=r;p!==o;++p,f+=4)a.copy(t[p]).applyMatrix4(h,u),a.normal.toArray(s,f),s[f+3]=a.constant}c.value=s,c.needsUpdate=!0}return n.numPlanes=o,s}var n=this,r=null,i=0,o=!1,s=!1,a=new it,u=new rt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.init=function(t,n,s){var a=0!==t.length||n||0!==i||o;return o=n,r=e(t,s,0),i=t.length,a},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,a,u,l,h){if(!o||null===n||0===n.length||s&&!a)s?e(null):t();else{var p=s?0:i,f=4*p,d=l.clippingState||null;c.value=d,d=e(n,u,f,h);for(var v=0;v!==f;++v)d[v]=r[v];l.clippingState=d,this.numPlanes+=p}}}function Kt(t,e,n){function r(t){s=t}function i(e,r){t.drawArrays(s,e,r),n.calls++,n.vertices+=r,s===t.TRIANGLES&&(n.faces+=r/3)}function o(r){var i=e.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var o=r.attributes.position,a=0;o&&o.isInterleavedBufferAttribute?(a=o.data.count,i.drawArraysInstancedANGLE(s,0,a,r.maxInstancedCount)):(a=o.count,i.drawArraysInstancedANGLE(s,0,a,r.maxInstancedCount)),n.calls++,n.vertices+=a*r.maxInstancedCount,s===t.TRIANGLES&&(n.faces+=r.maxInstancedCount*a/3)}var s;return{setMode:r,render:i,renderInstances:o}}function Qt(t,e,n){Z.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Jt(t,e,n,r,i,o){function s(t,e,n){var r=0;return r+=(t+1)*(e+1)*2,r+=(t+1)*(n+1)*2,r+=(n+1)*(e+1)*2}function u(t,e,n){var r=0;return r+=t*e*2,r+=t*n*2,r+=n*e*2,6*r}function c(t,e,n,r,i,o,s,u,c,h,p){for(var x=o/c,E=s/h,S=o/2,T=s/2,M=u/2,C=c+1,A=h+1,O=0,P=0,R=new a,I=0;I<A;I++)for(var N=I*E-T,L=0;L<C;L++){var k=L*x-S;R[t]=k*r,R[e]=N*i,R[n]=M,d[y]=R.x,d[y+1]=R.y,d[y+2]=R.z,R[t]=0,R[e]=0,R[n]=u>0?1:-1,v[y]=R.x,v[y+1]=R.y,v[y+2]=R.z,m[g]=L/c,m[g+1]=1-I/h,y+=3,g+=2,O+=1}for(I=0;I<h;I++)for(L=0;L<c;L++){var D=_+L+C*I,j=_+L+C*(I+1),F=_+(L+1)+C*(I+1),U=_+(L+1)+C*I;f[b]=D,f[b+1]=j,f[b+2]=U,f[b+3]=j,f[b+4]=F,f[b+5]=U,b+=6,P+=6}l.addGroup(w,P,p),w+=P,_+=O}zt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var l=this;r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var h=s(r,i,o),p=u(r,i,o),f=new(p>65535?Uint32Array:Uint16Array)(p),d=new Float32Array(3*h),v=new Float32Array(3*h),m=new Float32Array(2*h),y=0,g=0,b=0,_=0,w=0;c("z","y","x",-1,-1,n,e,t,o,i,0),c("z","y","x",1,-1,n,e,-t,o,i,1),c("x","z","y",1,1,t,n,e,r,o,2),c("x","z","y",1,-1,t,n,-e,r,o,3),c("x","y","z",1,-1,t,e,n,r,i,4),c("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(new Et(f,1)),this.addAttribute("position",new Et(d,3)),this.addAttribute("normal",new Et(v,3)),this.addAttribute("uv",new Et(m,2))}function $t(t,e){this.origin=void 0!==t?t:new a,this.direction=void 0!==e?e:new a}function te(t,e){this.start=void 0!==t?t:new a,this.end=void 0!==e?e:new a}function ee(t,e,n){this.a=void 0!==t?t:new a,this.b=void 0!==e?e:new a,this.c=void 0!==n?n:new a}function ne(t){K.call(this),this.type="MeshBasicMaterial",this.color=new $(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function re(t,e){jt.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new zt,this.material=void 0!==e?e:new ne({color:16777215*Math.random()}),this.drawMode=fs,this.updateMorphTargets()}function ie(t,e,n,r){zt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};for(var i=t/2,o=e/2,s=Math.floor(n)||1,a=Math.floor(r)||1,u=s+1,c=a+1,l=t/s,h=e/a,p=new Float32Array(u*c*3),f=new Float32Array(u*c*3),d=new Float32Array(u*c*2),v=0,m=0,y=0;y<c;y++)for(var g=y*h-o,b=0;b<u;b++){var _=b*l-i;p[v]=_,p[v+1]=-g,f[v+2]=1,d[m]=b/s,d[m+1]=1-y/a,v+=3,m+=2}v=0;for(var w=new(p.length/3>65535?Uint32Array:Uint16Array)(s*a*6),y=0;y<a;y++)for(var b=0;b<s;b++){var x=b+u*y,E=b+u*(y+1),S=b+1+u*(y+1),T=b+1+u*y;w[v]=x,w[v+1]=E,w[v+2]=T,w[v+3]=E,w[v+4]=S,w[v+5]=T,v+=6}this.setIndex(new Et(w,1)),this.addAttribute("position",new Et(p,3)),this.addAttribute("normal",new Et(f,3)),this.addAttribute("uv",new Et(d,2))}function oe(){jt.call(this),this.type="Camera",this.matrixWorldInverse=new o,this.projectionMatrix=new o}function se(t,e,n,r){oe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function ae(t,e,n,r,i,o){oe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function ue(e){function n(){return null===vt?Ot:1}function r(t,e,n,r){Q===!0&&(t*=r,e*=r,n*=r),oe.clearColor(t,e,n,r)}function i(){oe.init(),oe.scissor(_t.copy(Pt).multiplyScalar(Ot)),oe.viewport(Et.copy(It).multiplyScalar(Ot)),r(Tt.r,Tt.g,Tt.b,Mt)}function s(){dt=null,bt=null,gt="",yt=-1,oe.reset()}function c(t){t.preventDefault(),s(),i(),ue.clear()}function h(t){var e=t.target;e.removeEventListener("dispose",h),p(e)}function p(t){f(t),ue.delete(t)}function f(t){var e=ue.get(t).program;t.program=void 0,void 0!==e&&he.releaseProgram(e)}function d(t,e,n,r){var i;if(n&&n.isInstancedBufferGeometry&&(i=te.get("ANGLE_instanced_arrays"),null===i))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===r&&(r=0),oe.initAttributes();var o=n.attributes,s=e.getAttributes(),a=t.defaultAttributeValues;for(var u in s){var c=s[u];if(c>=0){var l=o[u];if(void 0!==l){var h=Ht.FLOAT,p=l.array,f=l.normalized;p instanceof Float32Array?h=Ht.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?h=Ht.UNSIGNED_SHORT:p instanceof Int16Array?h=Ht.SHORT:p instanceof Uint32Array?h=Ht.UNSIGNED_INT:p instanceof Int32Array?h=Ht.INT:p instanceof Int8Array?h=Ht.BYTE:p instanceof Uint8Array&&(h=Ht.UNSIGNED_BYTE);var d=l.itemSize,v=le.getAttributeBuffer(l);if(l&&l.isInterleavedBufferAttribute){var m=l.data,y=m.stride,g=l.offset;m&&m.isInstancedInterleavedBuffer?(oe.enableAttributeAndDivisor(c,m.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):oe.enableAttribute(c),Ht.bindBuffer(Ht.ARRAY_BUFFER,v),Ht.vertexAttribPointer(c,d,h,f,y*m.array.BYTES_PER_ELEMENT,(r*y+g)*m.array.BYTES_PER_ELEMENT)}else l&&l.isInstancedBufferAttribute?(oe.enableAttributeAndDivisor(c,l.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):oe.enableAttribute(c),Ht.bindBuffer(Ht.ARRAY_BUFFER,v),Ht.vertexAttribPointer(c,d,h,f,0,r*d*l.array.BYTES_PER_ELEMENT)}else if(void 0!==a){var b=a[u];if(void 0!==b)switch(b.length){case 2:Ht.vertexAttrib2fv(c,b);break;case 3:Ht.vertexAttrib3fv(c,b);break;case 4:Ht.vertexAttrib4fv(c,b);break;default:Ht.vertexAttrib1fv(c,b)}}}}oe.disableUnusedAttributes()}function v(t,e){return Math.abs(e[0])-Math.abs(t[0])}function m(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function y(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function g(t,e,n,r,i){var o,s;n.transparent?(o=at,s=++ut):(o=rt,s=++it);var a=o[s];void 0!==a?(a.id=t.id,a.object=t,a.geometry=e,a.material=n,a.z=Ut.z,a.group=i):(a={id:t.id,object:t,geometry:e,material:n,z:Ut.z,group:i},o.push(a))}function b(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),jt.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),w(jt)}function _(t){return jt.center.set(0,0,0),jt.radius=.7071067811865476,jt.applyMatrix4(t.matrixWorld),w(jt)}function w(t){if(!Nt.intersectsSphere(t))return!1;var e=Lt.numPlanes;if(0===e)return!0;var n=ft.clippingPlanes,r=t.center,i=-t.radius,o=0;do if(n[o].distanceToPoint(r)<i)return!1;while(++o!==e);return!0}function x(t,e){if(t.visible!==!1){var n=0!==(t.layers.mask&e.layers.mask);if(n)if(t.isLight)et.push(t);else if(t.isSprite)t.frustumCulled!==!1&&_(t)!==!0||ht.push(t);else if(t.isLensFlare)pt.push(t);else if(t.isImmediateRenderObject)ft.sortObjects===!0&&(Ut.setFromMatrixPosition(t.matrixWorld),Ut.applyProjection(Ft)),g(t,null,t.material,Ut.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),t.frustumCulled===!1||b(t)===!0)){var r=t.material;if(r.visible===!0){ft.sortObjects===!0&&(Ut.setFromMatrixPosition(t.matrixWorld),Ut.applyProjection(Ft));var i=le.update(t);if(r.isMultiMaterial)for(var o=i.groups,s=r.materials,a=0,u=o.length;a<u;a++){var c=o[a],l=s[c.materialIndex];l.visible===!0&&g(t,i,l,Ut.z,c)}else g(t,i,r,Ut.z,null)}}for(var h=t.children,a=0,u=h.length;a<u;a++)x(h[a],e)}}function E(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var s=t[i],a=s.object,u=s.geometry,c=void 0===r?s.material:r,l=s.group;if(a.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,a.matrixWorld),a.normalMatrix.getNormalMatrix(a.modelViewMatrix),a.isImmediateRenderObject){T(c);var h=M(e,n,c,a);gt="",a.render(function(t){ft.renderBufferImmediate(t,h,c)})}else ft.renderBufferDirect(e,n,u,c,a,l)}}function S(e,n,r){var i=ue.get(e),o=he.getParameters(e,Vt,n,Lt.numPlanes,r),s=he.getProgramCode(e,o),a=i.program,u=!0;if(void 0===a)e.addEventListener("dispose",h);else if(a.code!==s)f(e);else{if(void 0!==o.shaderID)return;u=!1}if(u){if(o.shaderID){var c=Iu[o.shaderID];i.__webglShader={name:e.type,uniforms:t.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else i.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=i.__webglShader,a=he.acquireProgram(e,o,s),i.program=a,e.program=a}var l=a.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<ft.maxMorphTargets;p++)l["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<ft.maxMorphNormals;p++)l["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var d=i.__webglShader.uniforms;!e.isShaderMaterial&&!e.isRawShaderMaterial|e.clipping===!0&&(i.numClippingPlanes=Lt.numPlanes,d.clippingPlanes=Lt.uniform),i.fog=n,i.lightsHash=Vt.hash,e.lights&&(d.ambientLightColor.value=Vt.ambient,d.directionalLights.value=Vt.directional,d.spotLights.value=Vt.spot,d.pointLights.value=Vt.point,d.hemisphereLights.value=Vt.hemi,d.directionalShadowMap.value=Vt.directionalShadowMap,d.directionalShadowMatrix.value=Vt.directionalShadowMatrix,d.spotShadowMap.value=Vt.spotShadowMap,d.spotShadowMatrix.value=Vt.spotShadowMatrix,d.pointShadowMap.value=Vt.pointShadowMap,d.pointShadowMatrix.value=Vt.pointShadowMatrix);var v=i.program.getUniforms(),m=W.seqWithValue(v.seq,d);i.uniformsList=m,i.dynamicUniforms=W.splitDynamic(m,d)}function T(t){t.side===wi?oe.disable(Ht.CULL_FACE):oe.enable(Ht.CULL_FACE),oe.setFlipSided(t.side===_i),t.transparent===!0?oe.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):oe.setBlending(Ci),oe.setDepthFunc(t.depthFunc),oe.setDepthTest(t.depthTest),oe.setDepthWrite(t.depthWrite),oe.setColorWrite(t.colorWrite),oe.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function M(t,e,n,r){St=0;var i=ue.get(n);if(kt&&(Dt||t!==bt)){var o=t===bt&&n.id===yt;Lt.setState(n.clippingPlanes,n.clipShadows,t,i,o)}n.needsUpdate===!1&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==e?n.needsUpdate=!0:n.lights&&i.lightsHash!==Vt.hash?n.needsUpdate=!0:void 0!==i.numClippingPlanes&&i.numClippingPlanes!==Lt.numPlanes&&(n.needsUpdate=!0)),n.needsUpdate&&(S(n,e,r),n.needsUpdate=!1);var s=!1,a=!1,u=!1,c=i.program,l=c.getUniforms(),h=i.__webglShader.uniforms;if(c.id!==dt&&(Ht.useProgram(c.program),dt=c.id,s=!0,a=!0,u=!0),n.id!==yt&&(yt=n.id,a=!0),s||t!==bt){if(l.set(Ht,t,"projectionMatrix"),ee.logarithmicDepthBuffer&&l.setValue(Ht,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==bt&&(bt=t,a=!0,u=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var p=l.map.cameraPosition;void 0!==p&&p.setValue(Ht,Ut.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&l.setValue(Ht,"viewMatrix",t.matrixWorldInverse),l.set(Ht,ft,"toneMappingExposure"),l.set(Ht,ft,"toneMappingWhitePoint")}if(n.skinning){l.setOptional(Ht,r,"bindMatrix"),l.setOptional(Ht,r,"bindMatrixInverse");var f=r.skeleton;f&&(ee.floatVertexTextures&&f.useVertexTexture?(l.set(Ht,f,"boneTexture"),l.set(Ht,f,"boneTextureWidth"),l.set(Ht,f,"boneTextureHeight")):l.setOptional(Ht,f,"boneMatrices"))}a&&(n.lights&&D(h,u),e&&n.fog&&R(h,e),(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshDepthMaterial)&&C(h,n),n.isLineBasicMaterial?A(h,n):n.isLineDashedMaterial?(A(h,n),O(h,n)):n.isPointsMaterial?P(h,n):n.isMeshLambertMaterial?I(h,n):n.isMeshPhongMaterial?N(h,n):n.isMeshPhysicalMaterial?k(h,n):n.isMeshStandardMaterial?L(h,n):n.isMeshDepthMaterial?n.displacementMap&&(h.displacementMap.value=n.displacementMap,h.displacementScale.value=n.displacementScale,h.displacementBias.value=n.displacementBias):n.isMeshNormalMaterial&&(h.opacity.value=n.opacity),W.upload(Ht,i.uniformsList,h,ft)),l.set(Ht,r,"modelViewMatrix"),l.set(Ht,r,"normalMatrix"),l.setValue(Ht,"modelMatrix",r.matrixWorld);var d=i.dynamicUniforms;return null!==d&&(W.evalDynamic(d,h,r,t),W.upload(Ht,d,h,ft)),c}function C(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var n;if(e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;t.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function A(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function O(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function P(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*Ot,t.scale.value=.5*B.clientHeight,t.map.value=e.map,null!==e.map){var n=e.map.offset,r=e.map.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function R(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function I(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function N(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function L(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function k(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,L(t,e)}function D(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function j(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];i.castShadow&&(Vt.shadows[e++]=i)}Vt.shadows.length=e}function F(t,e){var n,r,i,s,a,u,c,l=0,h=0,p=0,f=e.matrixWorldInverse,d=0,v=0,m=0,y=0;for(n=0,r=t.length;n<r;n++)if(i=t[n],s=i.color,a=i.intensity,u=i.distance,c=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)l+=s.r*a,h+=s.g*a,p+=s.b*a;else if(i.isDirectionalLight){var g=pe.get(i);g.color.copy(i.color).multiplyScalar(i.intensity),g.direction.setFromMatrixPosition(i.matrixWorld),Ut.setFromMatrixPosition(i.target.matrixWorld),g.direction.sub(Ut),g.direction.transformDirection(f),g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize),Vt.directionalShadowMap[d]=c,Vt.directionalShadowMatrix[d]=i.shadow.matrix,Vt.directional[d++]=g}else if(i.isSpotLight){var g=pe.get(i);g.position.setFromMatrixPosition(i.matrixWorld),g.position.applyMatrix4(f),g.color.copy(s).multiplyScalar(a),g.distance=u,g.direction.setFromMatrixPosition(i.matrixWorld),Ut.setFromMatrixPosition(i.target.matrixWorld),g.direction.sub(Ut),g.direction.transformDirection(f),g.coneCos=Math.cos(i.angle),g.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),g.decay=0===i.distance?0:i.decay,g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize),Vt.spotShadowMap[m]=c,Vt.spotShadowMatrix[m]=i.shadow.matrix,Vt.spot[m++]=g}else if(i.isPointLight){var g=pe.get(i);g.position.setFromMatrixPosition(i.matrixWorld),g.position.applyMatrix4(f),g.color.copy(i.color).multiplyScalar(i.intensity),g.distance=i.distance,g.decay=0===i.distance?0:i.decay,g.shadow=i.castShadow,i.castShadow&&(g.shadowBias=i.shadow.bias,g.shadowRadius=i.shadow.radius,g.shadowMapSize=i.shadow.mapSize),Vt.pointShadowMap[v]=c,void 0===Vt.pointShadowMatrix[v]&&(Vt.pointShadowMatrix[v]=new o),Ut.setFromMatrixPosition(i.matrixWorld).negate(),Vt.pointShadowMatrix[v].identity().setPosition(Ut),Vt.point[v++]=g}else if(i.isHemisphereLight){var g=pe.get(i);g.direction.setFromMatrixPosition(i.matrixWorld),g.direction.transformDirection(f),g.direction.normalize(),g.skyColor.copy(i.color).multiplyScalar(a),g.groundColor.copy(i.groundColor).multiplyScalar(a),Vt.hemi[y++]=g}Vt.ambient[0]=l,Vt.ambient[1]=h,Vt.ambient[2]=p,Vt.directional.length=d,Vt.spot.length=m,Vt.point.length=v,Vt.hemi.length=y,Vt.hash=d+","+v+","+m+","+y+","+Vt.shadows.length}function U(){var t=St;return t>=ee.maxTextures&&console.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+ee.maxTextures),St+=1,t}function V(t){var e;if(t===_o)return Ht.REPEAT;if(t===wo)return Ht.CLAMP_TO_EDGE;if(t===xo)return Ht.MIRRORED_REPEAT;if(t===Eo)return Ht.NEAREST;if(t===So)return Ht.NEAREST_MIPMAP_NEAREST;if(t===To)return Ht.NEAREST_MIPMAP_LINEAR;if(t===Mo)return Ht.LINEAR;if(t===Co)return Ht.LINEAR_MIPMAP_NEAREST;if(t===Ao)return Ht.LINEAR_MIPMAP_LINEAR;if(t===Oo)return Ht.UNSIGNED_BYTE;if(t===jo)return Ht.UNSIGNED_SHORT_4_4_4_4;if(t===Fo)return Ht.UNSIGNED_SHORT_5_5_5_1;if(t===Uo)return Ht.UNSIGNED_SHORT_5_6_5;if(t===Po)return Ht.BYTE;if(t===Ro)return Ht.SHORT;if(t===Io)return Ht.UNSIGNED_SHORT;if(t===No)return Ht.INT;if(t===Lo)return Ht.UNSIGNED_INT;if(t===ko)return Ht.FLOAT;if(e=te.get("OES_texture_half_float"),null!==e&&t===Do)return e.HALF_FLOAT_OES;if(t===Bo)return Ht.ALPHA;if(t===zo)return Ht.RGB;if(t===Ho)return Ht.RGBA;if(t===Go)return Ht.LUMINANCE;if(t===Wo)return Ht.LUMINANCE_ALPHA;if(t===Xo)return Ht.DEPTH_COMPONENT;if(t===Yo)return Ht.DEPTH_STENCIL;if(t===Ni)return Ht.FUNC_ADD;if(t===Li)return Ht.FUNC_SUBTRACT;if(t===ki)return Ht.FUNC_REVERSE_SUBTRACT;if(t===Fi)return Ht.ZERO;if(t===Ui)return Ht.ONE;if(t===Vi)return Ht.SRC_COLOR;if(t===Bi)return Ht.ONE_MINUS_SRC_COLOR;if(t===zi)return Ht.SRC_ALPHA;if(t===Hi)return Ht.ONE_MINUS_SRC_ALPHA;if(t===Gi)return Ht.DST_ALPHA;if(t===Wi)return Ht.ONE_MINUS_DST_ALPHA;if(t===qi)return Ht.DST_COLOR;if(t===Xi)return Ht.ONE_MINUS_DST_COLOR;if(t===Yi)return Ht.SRC_ALPHA_SATURATE;if(e=te.get("WEBGL_compressed_texture_s3tc"),null!==e){if(t===Zo)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ko)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Qo)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Jo)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e=te.get("WEBGL_compressed_texture_pvrtc"),null!==e){if(t===$o)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ts)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===es)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ns)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e=te.get("WEBGL_compressed_texture_etc1"),null!==e&&t===rs)return e.COMPRESSED_RGB_ETC1_WEBGL;if(e=te.get("EXT_blend_minmax"),null!==e){if(t===Di)return e.MIN_EXT;if(t===ji)return e.MAX_EXT}return e=te.get("WEBGL_depth_texture"),null!==e&&t===Vo?e.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",ui),e=e||{};var B=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),z=void 0!==e.context?e.context:null,H=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,Z=void 0===e.stencil||e.stencil,K=void 0!==e.antialias&&e.antialias,Q=void 0===e.premultipliedAlpha||e.premultipliedAlpha,tt=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,et=[],rt=[],it=-1,at=[],ut=-1,lt=new Float32Array(8),ht=[],pt=[];this.domElement=B,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ao,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ft=this,dt=null,vt=null,mt=null,yt=-1,gt="",bt=null,_t=new X,wt=null,Et=new X,St=0,Tt=new $(0),Mt=0,Ct=B.width,At=B.height,Ot=1,Pt=new X(0,0,Ct,At),Rt=!1,It=new X(0,0,Ct,At),Nt=new ot,Lt=new Zt,kt=!1,Dt=!1,jt=new nt,Ft=new o,Ut=new a,Vt={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Bt={calls:0,vertices:0,faces:0,points:0};this.info={render:Bt,memory:{geometries:0,textures:0},programs:null};var Ht;try{var Qt={alpha:H,depth:G,stencil:Z,antialias:K,premultipliedAlpha:Q,preserveDrawingBuffer:tt};if(Ht=z||B.getContext("webgl",Qt)||B.getContext("experimental-webgl",Qt),null===Ht)throw null!==B.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Ht.getShaderPrecisionFormat&&(Ht.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),B.addEventListener("webglcontextlost",c,!1)}catch($t){console.error("THREE.WebGLRenderer: "+$t)}var te=new Xt(Ht);te.get("WEBGL_depth_texture"),te.get("OES_texture_float"),te.get("OES_texture_float_linear"),te.get("OES_texture_half_float"),te.get("OES_texture_half_float_linear"),te.get("OES_standard_derivatives"),te.get("ANGLE_instanced_arrays"),te.get("OES_element_index_uint")&&(zt.MaxIndex=4294967296);var ee=new qt(Ht,te,e),oe=new Y(Ht,te,V),ue=new ct,ce=new q(Ht,te,oe,ue,ee,V,this.info),le=new Gt(Ht,ue,this.info),he=new xt(this,ee),pe=new Wt;this.info.programs=he.programs;var fe=new Kt(Ht,te,Bt),de=new Yt(Ht,te,Bt),ve=new ae((-1),1,1,(-1),0,1),me=new se,ye=new re(new ie(2,2),new ne({depthTest:!1,depthWrite:!1,fog:!1})),ge=Iu.cube,be=new re(new Jt(5,5,5),new J({uniforms:ge.uniforms,vertexShader:ge.vertexShader,fragmentShader:ge.fragmentShader,side:_i,depthTest:!1,depthWrite:!1,fog:!1}));i(),this.context=Ht,this.capabilities=ee,this.extensions=te,this.properties=ue,this.state=oe;var _e=new st(this,Vt,le,ee);this.shadowMap=_e;var we=new u(this,ht),xe=new l(this,pt);this.getContext=function(){return Ht},this.getContextAttributes=function(){return Ht.getContextAttributes()},this.forceContextLoss=function(){te.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return ee.getMaxAnisotropy()},this.getPrecision=function(){return ee.precision},this.getPixelRatio=function(){return Ot},this.setPixelRatio=function(t){void 0!==t&&(Ot=t,this.setSize(It.z,It.w,!1))},this.getSize=function(){return{width:Ct,height:At}},this.setSize=function(t,e,n){Ct=t,At=e,B.width=t*Ot,B.height=e*Ot,n!==!1&&(B.style.width=t+"px",B.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,n,r){oe.viewport(It.set(t,e,n,r))},this.setScissor=function(t,e,n,r){oe.scissor(Pt.set(t,e,n,r))},this.setScissorTest=function(t){oe.setScissorTest(Rt=t)},this.getClearColor=function(){return Tt},this.setClearColor=function(t,e){Tt.set(t),Mt=void 0!==e?e:1,r(Tt.r,Tt.g,Tt.b,Mt)},this.getClearAlpha=function(){return Mt},this.setClearAlpha=function(t){Mt=t,r(Tt.r,Tt.g,Tt.b,Mt)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=Ht.COLOR_BUFFER_BIT),(void 0===e||e)&&(r|=Ht.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Ht.STENCIL_BUFFER_BIT),Ht.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=s,this.dispose=function(){at=[],ut=-1,rt=[],it=-1,B.removeEventListener("webglcontextlost",c,!1)},this.renderBufferImmediate=function(t,e,n){oe.initAttributes();var r=ue.get(t);t.hasPositions&&!r.position&&(r.position=Ht.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=Ht.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=Ht.createBuffer()),t.hasColors&&!r.color&&(r.color=Ht.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(Ht.bindBuffer(Ht.ARRAY_BUFFER,r.position),Ht.bufferData(Ht.ARRAY_BUFFER,t.positionArray,Ht.DYNAMIC_DRAW),oe.enableAttribute(i.position),Ht.vertexAttribPointer(i.position,3,Ht.FLOAT,!1,0,0)),t.hasNormals){if(Ht.bindBuffer(Ht.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&n.shading===xi)for(var o=0,s=3*t.count;o<s;o+=9){var a=t.normalArray,u=(a[o+0]+a[o+3]+a[o+6])/3,c=(a[o+1]+a[o+4]+a[o+7])/3,l=(a[o+2]+a[o+5]+a[o+8])/3;a[o+0]=u,a[o+1]=c,a[o+2]=l,a[o+3]=u,a[o+4]=c,a[o+5]=l,a[o+6]=u,a[o+7]=c,a[o+8]=l}Ht.bufferData(Ht.ARRAY_BUFFER,t.normalArray,Ht.DYNAMIC_DRAW),oe.enableAttribute(i.normal),Ht.vertexAttribPointer(i.normal,3,Ht.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(Ht.bindBuffer(Ht.ARRAY_BUFFER,r.uv),Ht.bufferData(Ht.ARRAY_BUFFER,t.uvArray,Ht.DYNAMIC_DRAW),oe.enableAttribute(i.uv),Ht.vertexAttribPointer(i.uv,2,Ht.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==Si&&(Ht.bindBuffer(Ht.ARRAY_BUFFER,r.color),Ht.bufferData(Ht.ARRAY_BUFFER,t.colorArray,Ht.DYNAMIC_DRAW),oe.enableAttribute(i.color),Ht.vertexAttribPointer(i.color,3,Ht.FLOAT,!1,0,0)),oe.disableUnusedAttributes(),Ht.drawArrays(Ht.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,r,i,o,s){T(i);var a=M(t,e,i,o),u=!1,c=r.id+"_"+a.id+"_"+i.wireframe;c!==gt&&(gt=c,u=!0);var l=o.morphTargetInfluences;if(void 0!==l){for(var h=[],p=0,f=l.length;p<f;p++){var m=l[p];h.push([m,p])}h.sort(v),h.length>8&&(h.length=8);for(var y=r.morphAttributes,p=0,f=h.length;p<f;p++){var m=h[p];if(lt[p]=m[0],0!==m[0]){var g=m[1];
i.morphTargets===!0&&y.position&&r.addAttribute("morphTarget"+p,y.position[g]),i.morphNormals===!0&&y.normal&&r.addAttribute("morphNormal"+p,y.normal[g])}else i.morphTargets===!0&&r.removeAttribute("morphTarget"+p),i.morphNormals===!0&&r.removeAttribute("morphNormal"+p)}a.getUniforms().setValue(Ht,"morphTargetInfluences",lt),u=!0}var g=r.index,b=r.attributes.position;i.wireframe===!0&&(g=le.getWireframeAttribute(r));var _;null!==g?(_=de,_.setIndex(g)):_=fe,u&&(d(i,a,r),null!==g&&Ht.bindBuffer(Ht.ELEMENT_ARRAY_BUFFER,le.getAttributeBuffer(g)));var w=0,x=1/0;null!==g?x=g.count:void 0!==b&&(x=b.count);var E=r.drawRange.start,S=r.drawRange.count,C=null!==s?s.start:0,A=null!==s?s.count:1/0,O=Math.max(w,E,C),P=Math.min(w+x,E+S,C+A)-1,R=Math.max(0,P-O+1);if(o.isMesh)if(i.wireframe===!0)oe.setLineWidth(i.wireframeLinewidth*n()),_.setMode(Ht.LINES);else switch(o.drawMode){case fs:_.setMode(Ht.TRIANGLES);break;case ds:_.setMode(Ht.TRIANGLE_STRIP);break;case vs:_.setMode(Ht.TRIANGLE_FAN)}else if(o.isLine){var I=i.linewidth;void 0===I&&(I=1),oe.setLineWidth(I*n()),o.isLineSegments?_.setMode(Ht.LINES):_.setMode(Ht.LINE_STRIP)}else o.isPoints&&_.setMode(Ht.POINTS);r&&r.isInstancedBufferGeometry?r.maxInstancedCount>0&&_.renderInstances(r,O,R):_.render(O,R)},this.render=function(t,e,n,i){if((e&&e.isCamera)===!1)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");var o=t.fog;gt="",yt=-1,bt=null,t.autoUpdate===!0&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),Ft.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Nt.setFromMatrix(Ft),et.length=0,it=-1,ut=-1,ht.length=0,pt.length=0,Dt=this.localClippingEnabled,kt=Lt.init(this.clippingPlanes,Dt,e),x(t,e),rt.length=it+1,at.length=ut+1,ft.sortObjects===!0&&(rt.sort(m),at.sort(y)),kt&&Lt.beginShadows(),j(et),_e.render(t,e),F(et,e),kt&&Lt.endShadows(),Bt.calls=0,Bt.vertices=0,Bt.faces=0,Bt.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var s=t.background;if(null===s?r(Tt.r,Tt.g,Tt.b,Mt):s&&s.isColor&&(r(s.r,s.g,s.b,1),i=!0),(this.autoClear||i)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),s&&s.isCubeTexture?(me.projectionMatrix.copy(e.projectionMatrix),me.matrixWorld.extractRotation(e.matrixWorld),me.matrixWorldInverse.getInverse(me.matrixWorld),be.material.uniforms.tCube.value=s,be.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,be.matrixWorld),le.update(be),ft.renderBufferDirect(me,null,be.geometry,be.material,be,null)):s&&s.isTexture&&(ye.material.map=s,le.update(ye),ft.renderBufferDirect(ve,null,ye.geometry,ye.material,ye,null)),t.overrideMaterial){var a=t.overrideMaterial;E(rt,e,o,a),E(at,e,o,a)}else oe.setBlending(Ci),E(rt,e,o),E(at,e,o);we.render(t,e),xe.render(t,e,Et),n&&ce.updateRenderTargetMipmap(n),oe.setDepthTest(!0),oe.setDepthWrite(!0),oe.setColorWrite(!0)},this.setFaceCulling=function(t,e){oe.setCullFace(t),oe.setFlipSided(e===di)},this.allocTextureUnit=U,this.setTexture2D=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTarget&&(t||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),ce.setTexture2D(e,n)}}(),this.setTexture=function(){var t=!1;return function(e,n){t||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),t=!0),ce.setTexture2D(e,n)}}(),this.setTextureCube=function(){var t=!1;return function(e,n){e&&e.isWebGLRenderTargetCube&&(t||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?ce.setTextureCube(e,n):ce.setTextureCubeDynamic(e,n)}}(),this.getCurrentRenderTarget=function(){return vt},this.setRenderTarget=function(t){vt=t,t&&void 0===ue.get(t).__webglFramebuffer&&ce.setupRenderTarget(t);var e,n=t&&t.isWebGLRenderTargetCube;if(t){var r=ue.get(t);e=n?r.__webglFramebuffer[t.activeCubeFace]:r.__webglFramebuffer,_t.copy(t.scissor),wt=t.scissorTest,Et.copy(t.viewport)}else e=null,_t.copy(Pt).multiplyScalar(Ot),wt=Rt,Et.copy(It).multiplyScalar(Ot);if(mt!==e&&(Ht.bindFramebuffer(Ht.FRAMEBUFFER,e),mt=e),oe.scissor(_t),oe.setScissorTest(wt),oe.viewport(Et),n){var i=ue.get(t.texture);Ht.framebufferTexture2D(Ht.FRAMEBUFFER,Ht.COLOR_ATTACHMENT0,Ht.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,o){if((t&&t.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var s=ue.get(t).__webglFramebuffer;if(s){var a=!1;s!==mt&&(Ht.bindFramebuffer(Ht.FRAMEBUFFER,s),a=!0);try{var u=t.texture,c=u.format,l=u.type;if(c!==Ho&&V(c)!==Ht.getParameter(Ht.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Oo||V(l)===Ht.getParameter(Ht.IMPLEMENTATION_COLOR_READ_TYPE)||l===ko&&(te.get("OES_texture_float")||te.get("WEBGL_color_buffer_float"))||l===Do&&te.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ht.checkFramebufferStatus(Ht.FRAMEBUFFER)===Ht.FRAMEBUFFER_COMPLETE?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&Ht.readPixels(e,n,r,i,V(c),V(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&Ht.bindFramebuffer(Ht.FRAMEBUFFER,mt)}}}}function ce(t,e){this.name="",this.color=new $(t),this.density=void 0!==e?e:25e-5}function le(t,e,n){this.name="",this.color=new $(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function he(){jt.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pe(t,e,n,r,i){jt.call(this),this.lensFlares=[],this.positionScreen=new a,this.customUpdateCallback=void 0,void 0!==t&&this.add(t,e,n,r,i)}function fe(t){K.call(this),this.type="SpriteMaterial",this.color=new $(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function de(t){jt.call(this),this.type="Sprite",this.material=void 0!==t?t:new fe}function ve(){jt.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function me(t,e,n,i,o,s,a,u,c,l,h,p){r.call(this,null,s,a,u,c,l,i,o,h,p),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:Eo,this.minFilter=void 0!==l?l:Eo,this.flipY=!1,this.generateMipmaps=!1}function ye(e,n,r){if(this.useVertexTexture=void 0===r||r,this.identityMatrix=new o,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var i=Math.sqrt(4*this.bones.length);i=t.Math.nextPowerOfTwo(Math.ceil(i)),i=Math.max(i,4),this.boneTextureWidth=i,this.boneTextureHeight=i,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new me(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ho,ko)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===n)this.calculateInverses();else if(this.bones.length===n.length)this.boneInverses=n.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var s=0,a=this.bones.length;s<a;s++)this.boneInverses.push(new o)}}function ge(t){jt.call(this),this.type="Bone",this.skin=t}function be(t,e,n){re.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new o,this.bindMatrixInverse=new o;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,s,a=0,u=this.geometry.bones.length;a<u;++a)s=this.geometry.bones[a],i=new ge(this),r.push(i),i.name=s.name,i.position.fromArray(s.pos),i.quaternion.fromArray(s.rotq),void 0!==s.scl&&i.scale.fromArray(s.scl);for(var a=0,u=this.geometry.bones.length;a<u;++a)s=this.geometry.bones[a],s.parent!==-1&&null!==s.parent&&void 0!==r[s.parent]?r[s.parent].add(r[a]):this.add(r[a])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ye(r,(void 0),n),this.matrixWorld)}function _e(t){K.call(this),this.type="LineBasicMaterial",this.color=new $(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function we(t,e,n){return 1===n?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new xe(t,e)):(jt.call(this),this.type="Line",this.geometry=void 0!==t?t:new zt,void(this.material=void 0!==e?e:new _e({color:16777215*Math.random()})))}function xe(t,e){we.call(this,t,e),this.type="LineSegments"}function Ee(t){K.call(this),this.type="PointsMaterial",this.color=new $(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(t)}function Se(t,e){jt.call(this),this.type="Points",this.geometry=void 0!==t?t:new zt,this.material=void 0!==e?e:new Ee({color:16777215*Math.random()})}function Te(){jt.call(this),this.type="Group"}function Me(t,e,n,i,o,s,a,u,c){function l(){requestAnimationFrame(l),t.readyState>=t.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}r.call(this,t,e,n,i,o,s,a,u,c),this.generateMipmaps=!1;var h=this;l()}function Ce(t,e,n,i,o,s,a,u,c,l,h,p){r.call(this,null,s,a,u,c,l,i,o,h,p),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ae(t,e,n,i,o,s,a,u,c){r.call(this,t,e,n,i,o,s,a,u,c),this.needsUpdate=!0}function Oe(t,e,n,i,o,s,a,u,c,l){if(l=void 0!==l?l:Xo,l!==Xo&&l!==Yo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r.call(this,null,i,o,s,a,u,l,n,c),this.image={width:t,height:e},this.type=void 0!==n?n:Io,this.magFilter=void 0!==a?a:Eo,this.minFilter=void 0!==u?u:Eo,this.flipY=!1,this.generateMipmaps=!1}function Pe(){J.call(this,{uniforms:t.UniformsUtils.merge([Ru.lights,{opacity:{value:1}}]),vertexShader:Pu.shadow_vert,fragmentShader:Pu.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}}})}function Re(t){J.call(this,t),this.type="RawShaderMaterial"}function Ie(e){this.uuid=t.Math.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0}function Ne(t){K.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Le(t){Ne.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function ke(t){K.call(this),this.type="MeshPhongMaterial",this.color=new $(16777215),this.specular=new $(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function De(t){K.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(t)}function je(t){K.call(this),this.type="MeshLambertMaterial",this.color=new $(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ro,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Fe(t){K.call(this),this.type="LineDashedMaterial",this.color=new $(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(t)}function Ue(t,e,n){var r=this,i=!1,o=0,s=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){s++,i===!1&&void 0!==r.onStart&&r.onStart(t,o,s),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,s),o===s&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)}}function Ve(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function Be(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this._parser=null}function ze(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this._parser=null}function He(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function Ge(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function We(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function qe(t,e){jt.call(this),this.type="Light",this.color=new $(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Xe(t,e,n){qe.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(jt.DefaultUp),this.updateMatrix(),this.groundColor=new $(e)}function Ye(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.matrix=new o}function Ze(){Ye.call(this,new se(50,1,.5,500))}function Ke(t,e,n,r,i,o){qe.call(this,t,e),this.type="SpotLight",this.position.copy(jt.DefaultUp),this.updateMatrix(),this.target=new jt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ze}function Qe(t,e,n,r){qe.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Ye(new se(90,1,.5,500))}function Je(t){Ye.call(this,new ae((-5),5,5,(-5),.5,500))}function $e(t,e){qe.call(this,t,e),this.type="DirectionalLight",this.position.copy(jt.DefaultUp),this.updateMatrix(),this.target=new jt,this.shadow=new Je}function tn(t,e){qe.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function en(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function nn(t,e,n,r){en.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function rn(t,e,n,r){en.call(this,t,e,n,r)}function on(t,e,n,r){en.call(this,t,e,n,r)}function sn(e,n,r,i){if(void 0===e)throw new Error("track name is undefined");if(void 0===n||0===n.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=t.AnimationUtils.convertArray(n,this.TimeBufferType),this.values=t.AnimationUtils.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function an(t,e,n,r){sn.call(this,t,e,n,r)}function un(t,e,n,r){en.call(this,t,e,n,r)}function cn(t,e,n,r){sn.call(this,t,e,n,r)}function ln(t,e,n,r){sn.call(this,t,e,n,r)}function hn(t,e,n,r){sn.call(this,t,e,n,r)}function pn(t,e,n){sn.call(this,t,e,n)}function fn(t,e,n,r){sn.call(this,t,e,n,r)}function dn(t,e,n,r){sn.apply(this,arguments)}function vn(e,n,r){this.name=e,this.tracks=r,this.duration=void 0!==n?n:-1,this.uuid=t.Math.generateUUID(),this.duration<0&&this.resetDuration(),this.trim(),this.optimize()}function mn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this.textures={}}function yn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function gn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function bn(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:t.DefaultLoadingManager,this.withCredentials=!1}function _n(e){this.manager=void 0!==e?e:t.DefaultLoadingManager,this.texturePath=""}function wn(){}function xn(t,e){this.v1=t,this.v2=e}function En(){this.curves=[],this.autoClose=!1}function Sn(t,e,n,r,i,o,s,a){this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a||0}function Tn(t){this.points=void 0===t?[]:t}function Mn(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r}function Cn(t,e,n){this.v0=t,this.v1=e,this.v2=n}function An(t,e,r,i,o,s){function u(t,e,n){return R.vertices.push(new a(t,e,n))-1}Ut.call(this),this.type="TubeGeometry",this.parameters={path:t,segments:e,radius:r,radialSegments:i,closed:o,taper:s},e=e||64,r=r||1,i=i||8,o=o||!1,s=s||An.NoTaper;var c,l,h,p,f,d,v,m,y,g,b,_,w,x,E,S,T,M,C,A,O,P=[],R=this,I=e+1,N=new a,L=new An.FrenetFrames(t,e,o),k=L.tangents,D=L.normals,j=L.binormals;for(this.tangents=k,this.normals=D,this.binormals=j,g=0;g<I;g++)for(P[g]=[],p=g/(I-1),y=t.getPointAt(p),c=k[g],l=D[g],h=j[g],d=r*s(p),b=0;b<i;b++)f=b/i*2*Math.PI,v=-d*Math.cos(f),m=d*Math.sin(f),N.copy(y),N.x+=v*l.x+m*h.x,N.y+=v*l.y+m*h.y,N.z+=v*l.z+m*h.z,P[g][b]=u(N.x,N.y,N.z);for(g=0;g<e;g++)for(b=0;b<i;b++)_=o?(g+1)%e:g+1,w=(b+1)%i,x=P[g][b],E=P[_][b],S=P[_][w],T=P[g][w],M=new n(g/e,b/i),C=new n((g+1)/e,b/i),A=new n((g+1)/e,(b+1)/i),O=new n(g/e,(b+1)/i),this.faces.push(new Lt(x,E,T)),this.faceVertexUvs[0].push([M,C,O]),this.faces.push(new Lt(E,S,T)),this.faceVertexUvs[0].push([C.clone(),A,O.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function On(t,e){return"undefined"==typeof t?void(t=[]):(Ut.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),void this.computeFaceNormals())}function Pn(t,e){Ut.call(this),this.type="ShapeGeometry",Array.isArray(t)===!1&&(t=[t]),this.addShapeList(t,e),this.computeFaceNormals()}function Rn(){In.apply(this,arguments),this.holes=[]}function In(t){En.call(this),this.currentPoint=new n,t&&this.fromPoints(t)}function Nn(){this.subPaths=[],this.currentPath=null}function Ln(t){this.data=t}function kn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function Dn(){return void 0===Uu&&(Uu=new(window.AudioContext||window.webkitAudioContext)),Uu}function jn(e){this.manager=void 0!==e?e:t.DefaultLoadingManager}function Fn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new se,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new se,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Un(t,e,n){jt.call(this),this.type="CubeCamera";var r=90,i=1,o=new se(r,i,t,e);o.up.set(0,-1,0),o.lookAt(new a(1,0,0)),this.add(o);var s=new se(r,i,t,e);s.up.set(0,-1,0),s.lookAt(new a((-1),0,0)),this.add(s);var u=new se(r,i,t,e);u.up.set(0,0,1),u.lookAt(new a(0,1,0)),this.add(u);var c=new se(r,i,t,e);c.up.set(0,0,-1),c.lookAt(new a(0,(-1),0)),this.add(c);var l=new se(r,i,t,e);l.up.set(0,-1,0),l.lookAt(new a(0,0,1)),this.add(l);var h=new se(r,i,t,e);h.up.set(0,-1,0),h.lookAt(new a(0,0,(-1))),this.add(h);var p={format:zo,magFilter:Mo,minFilter:Mo};this.renderTarget=new Qt(n,n,p),this.updateCubeMap=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,t.render(e,o,n),n.activeCubeFace=1,t.render(e,s,n),n.activeCubeFace=2,t.render(e,u,n),n.activeCubeFace=3,t.render(e,c,n),n.activeCubeFace=4,t.render(e,l,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,t.render(e,h,n),t.setRenderTarget(null)}}function Vn(){jt.call(this),this.type="AudioListener",this.context=Dn(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Bn(t){jt.call(this),this.type="Audio",this.context=t.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function zn(t){Bn.call(this,t),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Hn(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Gn(t,e,n){this.binding=t,this.valueSize=n;var r,i=Float64Array;switch(e){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Wn(t,e,n){this.path=e,this.parsedPath=n||Wn.parseTrackName(e),this.node=Wn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function qn(e){this.uuid=t.Math.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var n={};this._indicesByUUID=n;for(var r=0,i=arguments.length;r!==i;++r)n[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}function Xn(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var r=e.tracks,i=r.length,o=new Array(i),s={endingStart:ls,endingEnd:ls},a=0;a!==i;++a){var u=r[a].createInterpolant(null);o[a]=u,u.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=os,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Yn(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Zn(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t,this.dynamic=!1}function Kn(){zt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Qn(e,n,r,i){this.uuid=t.Math.generateUUID(),this.data=e,this.itemSize=n,this.offset=r,this.normalized=i===!0}function Jn(e,n){this.uuid=t.Math.generateUUID(),this.array=e,this.stride=n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function $n(t,e,n){Jn.call(this,t,e),this.meshPerAttribute=n||1}function tr(t,e,n){Et.call(this,t,e),this.meshPerAttribute=n||1}function er(t,e,n,r){this.ray=new $t(t,e),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function nr(t,e){return t.distance-e.distance}function rr(t,e,n,r){if(t.visible!==!1&&(t.raycast(e,n),r===!0))for(var i=t.children,o=0,s=i.length;o<s;o++)rr(i[o],e,n,!0)}function ir(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function or(t){function e(t,e,n,r,i,o,s){var a=.5*(n-t),u=.5*(r-e);return(2*(e-n)+a+u)*s+(-3*(e-n)-2*a-u)*o+a*i+e}this.points=t;var n,r,i,o,s,u,c,l,h,p=[],f={x:0,y:0,z:0};this.initFromArray=function(t){this.points=[];for(var e=0;e<t.length;e++)this.points[e]={x:t[e][0],y:t[e][1],z:t[e][2]}},this.getPoint=function(t){return n=(this.points.length-1)*t,r=Math.floor(n),i=n-r,p[0]=0===r?r:r-1,p[1]=r,p[2]=r>this.points.length-2?this.points.length-1:r+1,p[3]=r>this.points.length-3?this.points.length-1:r+2,u=this.points[p[0]],c=this.points[p[1]],l=this.points[p[2]],h=this.points[p[3]],o=i*i,s=i*o,f.x=e(u.x,c.x,l.x,h.x,i,o,s),f.y=e(u.y,c.y,l.y,h.y,i,o,s),f.z=e(u.z,c.z,l.z,h.z,i,o,s),f},this.getControlPointsArray=function(){var t,e,n=this.points.length,r=[];for(t=0;t<n;t++)e=this.points[t],r[t]=[e.x,e.y,e.z];return r},this.getLength=function(t){var e,n,r,i,o=0,s=0,u=0,c=new a,l=new a,h=[],p=0;for(h[0]=0,t||(t=100),r=this.points.length*t,c.copy(this.points[0]),e=1;e<r;e++)n=e/r,i=this.getPoint(n),l.copy(i),p+=l.distanceTo(c),c.copy(i),o=(this.points.length-1)*n,s=Math.floor(o),s!==u&&(h[s]=p,u=s);return h[h.length]=p,{chunks:h,total:p}},this.reparametrizeByArcLength=function(t){var e,n,r,i,o,s,u,c,l=[],h=new a,p=this.getLength();for(l.push(h.copy(this.points[0]).clone()),e=1;e<this.points.length;e++){for(s=p.chunks[e]-p.chunks[e-1],u=Math.ceil(t*s/p.total),i=(e-1)/(this.points.length-1),o=e/(this.points.length-1),n=1;n<u-1;n++)r=i+n*(1/u)*(o-i),c=this.getPoint(r),l.push(h.copy(c).clone());l.push(h.copy(this.points[e]).clone())}this.points=l}}function sr(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function ar(t,e){re.call(this,t,e),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r="__default",i=0,o=n-1,s=n/1;this.createAnimation(r,i,o,s),this.setAnimationWeight(r,1)}function ur(t){jt.call(this),this.material=t,this.render=function(t){}}function cr(t){function e(t,e){return t-e}zt.call(this);var n=[0,0],r={},i=["a","b","c"];if(t&&t.isGeometry){for(var o=t.vertices,s=t.faces,a=0,u=new Uint32Array(6*s.length),c=0,l=s.length;c<l;c++)for(var h=s[c],p=0;p<3;p++){n[0]=h[i[p]],n[1]=h[i[(p+1)%3]],n.sort(e);var f=n.toString();void 0===r[f]&&(u[2*a]=n[0],u[2*a+1]=n[1],r[f]=!0,a++)}for(var d=new Float32Array(2*a*3),c=0,l=a;c<l;c++)for(var p=0;p<2;p++){var v=o[u[2*c+p]],m=6*c+3*p;d[m+0]=v.x,d[m+1]=v.y,d[m+2]=v.z}this.addAttribute("position",new Et(d,3))}else if(t&&t.isBufferGeometry)if(null!==t.index){var y=t.index.array,o=t.attributes.position,g=t.groups,a=0;0===g.length&&t.addGroup(0,y.length);for(var u=new Uint32Array(2*y.length),b=0,_=g.length;b<_;++b)for(var w=g[b],x=w.start,E=w.count,c=x,S=x+E;c<S;c+=3)for(var p=0;p<3;p++){n[0]=y[c+p],n[1]=y[c+(p+1)%3],n.sort(e);var f=n.toString();void 0===r[f]&&(u[2*a]=n[0],u[2*a+1]=n[1],r[f]=!0,a++)}for(var d=new Float32Array(2*a*3),c=0,l=a;c<l;c++)for(var p=0;p<2;p++){var m=6*c+3*p,T=u[2*c+p];d[m+0]=o.getX(T),d[m+1]=o.getY(T),d[m+2]=o.getZ(T)}this.addAttribute("position",new Et(d,3))}else{for(var o=t.attributes.position.array,a=o.length/3,M=a/3,d=new Float32Array(2*a*3),c=0,l=M;c<l;c++)for(var p=0;p<3;p++){var m=18*c+6*p,C=9*c+3*p;d[m+0]=o[C],d[m+1]=o[C+1],d[m+2]=o[C+2];var T=9*c+3*((p+1)%3);d[m+3]=o[T],d[m+4]=o[T+1],d[m+5]=o[T+2]}this.addAttribute("position",new Et(d,3))}}function lr(t,e){var n=void 0!==e?e:16777215;xe.call(this,new cr(t.geometry),new _e({color:n})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function hr(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=3*a.faces.length:a&&a.isBufferGeometry&&(s=a.attributes.normal.count);var u=new zt,c=new Rt(2*s*3,3);u.addAttribute("position",c),xe.call(this,u,new _e({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function pr(t){jt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;for(var e=new zt,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,i=1,o=32;r<o;r++,i++){var s=r/o*Math.PI*2,a=i/o*Math.PI*2;n.push(Math.cos(s),Math.sin(s),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new Rt(n,3));var u=new _e({fog:!1});this.cone=new xe(e,u),this.add(this.cone),this.update()}function fr(t){this.bones=this.getBoneList(t);for(var e=new Ut,n=0;n<this.bones.length;n++){var r=this.bones[n];r.parent&&r.parent.isBone&&(e.vertices.push(new a),e.vertices.push(new a),e.colors.push(new $(0,0,1)),e.colors.push(new $(0,1,0)))}e.dynamic=!0;var i=new _e({vertexColors:Mi,depthTest:!1,depthWrite:!1,transparent:!0});xe.call(this,e,i),this.root=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function dr(t,e,n,r,i,o,s){zt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;for(var u=o+s,c=(e+1)*(n+1),l=new Et(new Float32Array(3*c),3),h=new Et(new Float32Array(3*c),3),p=new Et(new Float32Array(2*c),2),f=0,d=[],v=new a,m=0;m<=n;m++){for(var y=[],g=m/n,b=0;b<=e;b++){var _=b/e,w=-t*Math.cos(r+_*i)*Math.sin(o+g*s),x=t*Math.cos(o+g*s),E=t*Math.sin(r+_*i)*Math.sin(o+g*s);v.set(w,x,E).normalize(),l.setXYZ(f,w,x,E),h.setXYZ(f,v.x,v.y,v.z),p.setXY(f,_,1-g),y.push(f),f++}d.push(y)}for(var S=[],m=0;m<n;m++)for(var b=0;b<e;b++){var T=d[m][b+1],M=d[m][b],C=d[m+1][b],A=d[m+1][b+1];(0!==m||o>0)&&S.push(T,M,A),(m!==n-1||u<Math.PI)&&S.push(M,C,A)}this.setIndex(new(l.count>65535?Pt:At)(S,1)),this.addAttribute("position",l),this.addAttribute("normal",h),this.addAttribute("uv",p),this.boundingSphere=new nt(new a,t)}function vr(t,e){this.light=t,this.light.updateMatrixWorld();var n=new dr(e,4,2),r=new ne({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),re.call(this,n,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function mr(t,e,n,r,i,o,s){Ut.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new dr(t,e,n,r,i,o,s))}function yr(t,e){jt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new $,new $];var n=new mr(e,4,2);n.rotateX(-Math.PI/2);for(var r=0,i=8;r<i;r++)n.faces[r].color=this.colors[r<4?0:1];var o=new ne({vertexColors:Ti,wireframe:!0});this.lightSphere=new re(n,o),this.add(this.lightSphere),this.update()}function gr(t,e,n,r){e=e||1,n=new $(void 0!==n?n:4473924),r=new $(void 0!==r?r:8947848);for(var i=e/2,o=2*t/e,s=[],a=[],u=0,c=0,l=-t;u<=e;u++,l+=o){s.push(-t,0,l,t,0,l),s.push(l,0,-t,l,0,t);var h=u===i?n:r;h.toArray(a,c),c+=3,h.toArray(a,c),c+=3,h.toArray(a,c),c+=3,h.toArray(a,c),c+=3}var p=new zt;p.addAttribute("position",new Rt(s,3)),p.addAttribute("color",new Rt(a,3));var f=new _e({vertexColors:Mi});xe.call(this,p,f)}function br(t,e,n,r){this.object=t,this.size=void 0!==e?e:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,s=0,a=this.object.geometry;a&&a.isGeometry?s=a.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new zt,c=new Rt(2*s*3,3);u.addAttribute("position",c),xe.call(this,u,new _e({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function _r(e,n){function r(t,e){return t-e}zt.call(this),n=void 0!==n?n:1;var i,o=Math.cos(t.Math.DEG2RAD*n),s=[0,0],a={},u=["a","b","c"];e&&e.isBufferGeometry?(i=new Ut,
i.fromBufferGeometry(e)):i=e.clone(),i.mergeVertices(),i.computeFaceNormals();for(var c=i.vertices,l=i.faces,h=0,p=l.length;h<p;h++)for(var f=l[h],d=0;d<3;d++){s[0]=f[u[d]],s[1]=f[u[(d+1)%3]],s.sort(r);var v=s.toString();void 0===a[v]?a[v]={vert1:s[0],vert2:s[1],face1:h,face2:void 0}:a[v].face2=h}var m=[];for(var v in a){var y=a[v];if(void 0===y.face2||l[y.face1].normal.dot(l[y.face2].normal)<=o){var g=c[y.vert1];m.push(g.x),m.push(g.y),m.push(g.z),g=c[y.vert2],m.push(g.x),m.push(g.y),m.push(g.z)}}this.addAttribute("position",new Et(new Float32Array(m),3))}function wr(t,e,n){var r=void 0!==e?e:16777215;xe.call(this,new _r(t.geometry,n),new _e({color:r})),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function xr(t,e){jt.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,void 0===e&&(e=1);var n=new zt;n.addAttribute("position",new Rt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new _e({fog:!1});this.add(new we(n,r)),n=new zt,n.addAttribute("position",new Rt([0,0,0,0,0,1],3)),this.add(new we(n,r)),this.update()}function Er(t){function e(t,e,r){n(t,r),n(e,r)}function n(t,e){r.vertices.push(new a),r.colors.push(new $(e)),void 0===o[t]&&(o[t]=[]),o[t].push(r.vertices.length-1)}var r=new Ut,i=new _e({color:16777215,vertexColors:Ti}),o={},s=16755200,u=16711680,c=43775,l=16777215,h=3355443;e("n1","n2",s),e("n2","n4",s),e("n4","n3",s),e("n3","n1",s),e("f1","f2",s),e("f2","f4",s),e("f4","f3",s),e("f3","f1",s),e("n1","f1",s),e("n2","f2",s),e("n3","f3",s),e("n4","f4",s),e("p","n1",u),e("p","n2",u),e("p","n3",u),e("p","n4",u),e("u1","u2",c),e("u2","u3",c),e("u3","u1",c),e("c","t",l),e("p","c",h),e("cn1","cn2",h),e("cn3","cn4",h),e("cf1","cf2",h),e("cf3","cf4",h),xe.call(this,r,i),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Sr(t,e,n,r,i,o){Ut.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Jt(t,e,n,r,i,o)),this.mergeVertices()}function Tr(t,e){var n=void 0!==e?e:8947848;this.object=t,this.box=new et,re.call(this,new Sr(1,1,1),new ne({color:n,wireframe:!0}))}function Mr(t,e){void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new zt;i.setIndex(new Et(n,1)),i.addAttribute("position",new Et(r,3)),xe.call(this,i,new _e({color:e})),void 0!==t&&this.update(t)}function Cr(t,e,r,i,o,s,u,c){function l(){var t=(i+1)*(o+1);return s===!1&&(t+=(i+1)*v+i*v),t}function h(){var t=i*o*2*3;return s===!1&&(t+=i*v*3),t}function p(){var n,s,l=new a,h=new a,p=0,f=(e-t)/r;for(s=0;s<=o;s++){var v=[],m=s/o,y=m*(e-t)+t;for(n=0;n<=i;n++){var C=n/i;h.x=y*Math.sin(C*c+u),h.y=-m*r+T,h.z=y*Math.cos(C*c+u),b.setXYZ(x,h.x,h.y,h.z),l.copy(h),(0===t&&0===s||0===e&&s===o)&&(l.x=Math.sin(C*c+u),l.z=Math.cos(C*c+u)),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*f).normalize(),_.setXYZ(x,l.x,l.y,l.z),w.setXY(x,C,1-m),v.push(x),x++}S.push(v)}for(n=0;n<i;n++)for(s=0;s<o;s++){var A=S[s][n],O=S[s+1][n],P=S[s+1][n+1],R=S[s][n+1];g.setX(E,A),E++,g.setX(E,O),E++,g.setX(E,R),E++,g.setX(E,O),E++,g.setX(E,P),E++,g.setX(E,R),E++,p+=6}d.addGroup(M,p,0),M+=p}function f(r){var o,s,l,h=new n,p=new a,f=0,v=r===!0?t:e,m=r===!0?1:-1;for(s=x,o=1;o<=i;o++)b.setXYZ(x,0,T*m,0),_.setXYZ(x,0,m,0),h.x=.5,h.y=.5,w.setXY(x,h.x,h.y),x++;for(l=x,o=0;o<=i;o++){var y=o/i,S=y*c+u,C=Math.cos(S),A=Math.sin(S);p.x=v*A,p.y=T*m,p.z=v*C,b.setXYZ(x,p.x,p.y,p.z),_.setXYZ(x,0,m,0),h.x=.5*C+.5,h.y=.5*A*m+.5,w.setXY(x,h.x,h.y),x++}for(o=0;o<i;o++){var O=s+o,P=l+o;r===!0?(g.setX(E,P),E++,g.setX(E,P+1),E++,g.setX(E,O),E++):(g.setX(E,P+1),E++,g.setX(E,P),E++,g.setX(E,O),E++),f+=3}d.addGroup(M,f,r===!0?1:2),M+=f}zt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:c};var d=this;t=void 0!==t?t:20,e=void 0!==e?e:20,r=void 0!==r?r:100,i=Math.floor(i)||8,o=Math.floor(o)||1,s=void 0!==s&&s,u=void 0!==u?u:0,c=void 0!==c?c:2*Math.PI;var v=0;s===!1&&(t>0&&v++,e>0&&v++);var m=l(),y=h(),g=new Et(new(y>65535?Uint32Array:Uint16Array)(y),1),b=new Et(new Float32Array(3*m),3),_=new Et(new Float32Array(3*m),3),w=new Et(new Float32Array(2*m),2),x=0,E=0,S=[],T=r/2,M=0;p(),s===!1&&(t>0&&f(!0),e>0&&f(!1)),this.setIndex(g),this.addAttribute("position",b),this.addAttribute("normal",_),this.addAttribute("uv",w)}function Ar(t,e,n,r,i,o){jt.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),this.position.copy(e),this.line=new we(Vu,new _e({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new re(Bu,new ne({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function Or(t){t=t||1;var e=new Float32Array([0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t]),n=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),r=new zt;r.addAttribute("position",new Et(e,3)),r.addAttribute("color",new Et(n,3));var i=new _e({vertexColors:Mi});xe.call(this,r,i)}function Pr(t,e,r){Ut.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:r};var i,o,s,a,u,c=this.vertices,l=this.faces,h=this.faceVertexUvs[0],p=e+1;for(i=0;i<=r;i++)for(u=i/r,o=0;o<=e;o++)a=o/e,s=t(a,u),c.push(s);var f,d,v,m,y,g,b,_;for(i=0;i<r;i++)for(o=0;o<e;o++)f=i*p+o,d=i*p+o+1,v=(i+1)*p+o+1,m=(i+1)*p+o,y=new n(o/e,i/r),g=new n((o+1)/e,i/r),b=new n((o+1)/e,(i+1)/r),_=new n(o/e,(i+1)/r),l.push(new Lt(f,d,m)),h.push([y,g,_]),l.push(new Lt(d,v,m)),h.push([g.clone(),b,_.clone()]);this.computeFaceNormals(),this.computeVertexNormals()}function Rr(t,e,r,i){function o(t){var e=t.normalize().clone();e.index=p.vertices.push(e)-1;var r=c(t)/2/Math.PI+.5,i=l(t)/Math.PI+.5;return e.uv=new n(r,1-i),e}function s(t,e,n){var r=new Lt(t.index,e.index,n.index,[t.clone(),e.clone(),n.clone()]);p.faces.push(r),w.copy(t).add(e).add(n).divideScalar(3);var i=c(w);p.faceVertexUvs[0].push([h(t.uv,t,i),h(e.uv,e,i),h(n.uv,n,i)])}function u(t,e){for(var n=Math.pow(2,e),r=o(p.vertices[t.a]),i=o(p.vertices[t.b]),a=o(p.vertices[t.c]),u=[],c=0;c<=n;c++){u[c]=[];for(var l=o(r.clone().lerp(a,c/n)),h=o(i.clone().lerp(a,c/n)),f=n-c,d=0;d<=f;d++)0===d&&c===n?u[c][d]=l:u[c][d]=o(l.clone().lerp(h,d/f))}for(var c=0;c<n;c++)for(var d=0;d<2*(n-c)-1;d++){var v=Math.floor(d/2);d%2===0?s(u[c][v+1],u[c+1][v],u[c][v]):s(u[c][v+1],u[c+1][v+1],u[c+1][v])}}function c(t){return Math.atan2(t.z,-t.x)}function l(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}function h(t,e,r){return r<0&&1===t.x&&(t=new n(t.x-1,t.y)),0===e.x&&0===e.z&&(t=new n(r/2/Math.PI+.5,t.y)),t.clone()}Ut.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:r,detail:i},r=r||1,i=i||0;for(var p=this,f=0,d=t.length;f<d;f+=3)o(new a(t[f],t[f+1],t[f+2]));for(var v=this.vertices,m=[],f=0,y=0,d=e.length;f<d;f+=3,y++){var g=v[e[f]],b=v[e[f+1]],_=v[e[f+2]];m[y]=new Lt(g.index,b.index,_.index,[g.clone(),b.clone(),_.clone()])}for(var w=new a,f=0,d=m.length;f<d;f++)u(m[f],i);for(var f=0,d=this.faceVertexUvs[0].length;f<d;f++){var x=this.faceVertexUvs[0][f],E=x[0].x,S=x[1].x,T=x[2].x,M=Math.max(E,S,T),C=Math.min(E,S,T);M>.9&&C<.1&&(E<.2&&(x[0].x+=1),S<.2&&(x[1].x+=1),T<.2&&(x[2].x+=1))}for(var f=0,d=this.vertices.length;f<d;f++)this.vertices[f].multiplyScalar(r);this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new nt(new a,r)}function Ir(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Rr.call(this,n,r,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}function Nr(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Rr.call(this,n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}function Lr(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Rr.call(this,r,i,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}function kr(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Rr.call(this,i,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}function Dr(t,e,r,i,o,s){function u(t,e,n,r,i){var o=Math.cos(t),s=Math.sin(t),a=n/e*t,u=Math.cos(a);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*s*.5,i.z=r*Math.sin(a)*.5}zt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:i,p:o,q:s},t=t||100,e=e||40,r=Math.floor(r)||64,i=Math.floor(i)||8,o=o||2,s=s||3;var c,l,h=(i+1)*(r+1),p=i*r*2*3,f=new Et(new(p>65535?Uint32Array:Uint16Array)(p),1),d=new Et(new Float32Array(3*h),3),v=new Et(new Float32Array(3*h),3),m=new Et(new Float32Array(2*h),2),y=0,g=0,b=new a,_=new a,w=new n,x=new a,E=new a,S=new a,T=new a,M=new a;for(c=0;c<=r;++c){var C=c/r*o*Math.PI*2;for(u(C,o,s,t,x),u(C+.01,o,s,t,E),T.subVectors(E,x),M.addVectors(E,x),S.crossVectors(T,M),M.crossVectors(S,T),S.normalize(),M.normalize(),l=0;l<=i;++l){var A=l/i*Math.PI*2,O=-e*Math.cos(A),P=e*Math.sin(A);b.x=x.x+(O*M.x+P*S.x),b.y=x.y+(O*M.y+P*S.y),b.z=x.z+(O*M.z+P*S.z),d.setXYZ(y,b.x,b.y,b.z),_.subVectors(b,x).normalize(),v.setXYZ(y,_.x,_.y,_.z),w.x=c/r,w.y=l/i,m.setXY(y,w.x,w.y),y++}}for(l=1;l<=r;l++)for(c=1;c<=i;c++){var R=(i+1)*(l-1)+(c-1),I=(i+1)*l+(c-1),N=(i+1)*l+c,L=(i+1)*(l-1)+c;f.setX(g,R),g++,f.setX(g,I),g++,f.setX(g,L),g++,f.setX(g,I),g++,f.setX(g,N),g++,f.setX(g,L),g++}this.setIndex(f),this.addAttribute("position",d),this.addAttribute("normal",v),this.addAttribute("uv",m)}function jr(t,e,n,r,i,o,s){Ut.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Dr(t,e,n,r,i,o)),this.mergeVertices()}function Fr(t,e,n,r,i){zt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||100,e=e||40,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,s,u=(n+1)*(r+1),c=n*r*2*3,l=new(c>65535?Uint32Array:Uint16Array)(c),h=new Float32Array(3*u),p=new Float32Array(3*u),f=new Float32Array(2*u),d=0,v=0,m=0,y=new a,g=new a,b=new a;for(o=0;o<=n;o++)for(s=0;s<=r;s++){var _=s/r*i,w=o/n*Math.PI*2;g.x=(t+e*Math.cos(w))*Math.cos(_),g.y=(t+e*Math.cos(w))*Math.sin(_),g.z=e*Math.sin(w),h[d]=g.x,h[d+1]=g.y,h[d+2]=g.z,y.x=t*Math.cos(_),y.y=t*Math.sin(_),b.subVectors(g,y).normalize(),p[d]=b.x,p[d+1]=b.y,p[d+2]=b.z,f[v]=s/r,f[v+1]=o/n,d+=3,v+=2}for(o=1;o<=n;o++)for(s=1;s<=r;s++){var x=(r+1)*o+s-1,E=(r+1)*(o-1)+s-1,S=(r+1)*(o-1)+s,T=(r+1)*o+s;l[m]=x,l[m+1]=E,l[m+2]=T,l[m+3]=E,l[m+4]=S,l[m+5]=T,m+=6}this.setIndex(new Et(l,1)),this.addAttribute("position",new Et(h,3)),this.addAttribute("normal",new Et(p,3)),this.addAttribute("uv",new Et(f,2))}function Ur(t,e,n,r,i){Ut.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Fr(t,e,n,r,i))}function Vr(t,e){e=e||{};var n=e.font;if((n&&n.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ut;var r=n.generateShapes(t,e.size,e.curveSegments);e.amount=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),On.call(this,r,e),this.type="TextGeometry"}function Br(t,e,r,i,o,s){zt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},t=t||20,e=e||50,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,r=void 0!==r?Math.max(3,r):8,i=void 0!==i?Math.max(1,i):1;var u,c,l,h=(r+1)*(i+1),p=r*i*2*3,f=new Et(new(p>65535?Uint32Array:Uint16Array)(p),1),d=new Et(new Float32Array(3*h),3),v=new Et(new Float32Array(3*h),3),m=new Et(new Float32Array(2*h),2),y=0,g=0,b=t,_=(e-t)/i,w=new a,x=new n;for(c=0;c<=i;c++){for(l=0;l<=r;l++)u=o+l/r*s,w.x=b*Math.cos(u),w.y=b*Math.sin(u),d.setXYZ(y,w.x,w.y,w.z),v.setXYZ(y,0,0,1),x.x=(w.x/e+1)/2,x.y=(w.y/e+1)/2,m.setXY(y,x.x,x.y),y++;b+=_}for(c=0;c<i;c++){var E=c*(r+1);for(l=0;l<r;l++){u=l+E;var S=u,T=u+r+1,M=u+r+2,C=u+1;f.setX(g,S),g++,f.setX(g,T),g++,f.setX(g,M),g++,f.setX(g,S),g++,f.setX(g,M),g++,f.setX(g,C),g++}}this.setIndex(f),this.addAttribute("position",d),this.addAttribute("normal",v),this.addAttribute("uv",m)}function zr(t,e,n,r,i,o){Ut.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Br(t,e,n,r,i,o))}function Hr(t,e,n,r){Ut.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ie(t,e,n,r))}function Gr(e,r,i,o){zt.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:r,phiStart:i,phiLength:o},r=Math.floor(r)||12,i=i||0,o=o||2*Math.PI,o=t.Math.clamp(o,0,2*Math.PI);var s,u,c,l=(r+1)*e.length,h=r*e.length*2*3,p=new Et(new(h>65535?Uint32Array:Uint16Array)(h),1),f=new Et(new Float32Array(3*l),3),d=new Et(new Float32Array(2*l),2),v=0,m=0,y=1/r,g=new a,b=new n;for(u=0;u<=r;u++){var _=i+u*y*o,w=Math.sin(_),x=Math.cos(_);for(c=0;c<=e.length-1;c++)g.x=e[c].x*w,g.y=e[c].y,g.z=e[c].x*x,f.setXYZ(v,g.x,g.y,g.z),b.x=u/r,b.y=c/(e.length-1),d.setXY(v,b.x,b.y),v++}for(u=0;u<r;u++)for(c=0;c<e.length-1;c++){s=c+u*e.length;var E=s,S=s+e.length,T=s+e.length+1,M=s+1;p.setX(m,E),m++,p.setX(m,S),m++,p.setX(m,M),m++,p.setX(m,S),m++,p.setX(m,T),m++,p.setX(m,M),m++}if(this.setIndex(p),this.addAttribute("position",f),this.addAttribute("uv",d),this.computeVertexNormals(),o===2*Math.PI){var C=this.attributes.normal.array,A=new a,O=new a,P=new a;for(s=r*e.length*3,u=0,c=0;u<e.length;u++,c+=3)A.x=C[c+0],A.y=C[c+1],A.z=C[c+2],O.x=C[s+c+0],O.y=C[s+c+1],O.z=C[s+c+2],P.addVectors(A,O).normalize(),C[c+0]=C[s+c+0]=P.x,C[c+1]=C[s+c+1]=P.y,C[c+2]=C[s+c+2]=P.z}}function Wr(t,e,n,r){Ut.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new Gr(t,e,n,r)),this.mergeVertices()}function qr(t,e,n,r,i,o,s,a){Ut.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new Cr(t,e,n,r,i,o,s,a)),this.mergeVertices()}function Xr(t,e,n,r,i,o,s){qr.call(this,0,t,e,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}function Yr(t,e,n,r,i,o,s){Cr.call(this,0,t,e,n,r,i,o,s),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,thetaStart:o,thetaLength:s}}function Zr(t,e,n,r){zt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i=e+2,o=new Float32Array(3*i),s=new Float32Array(3*i),u=new Float32Array(2*i);s[2]=1,u[0]=.5,u[1]=.5;for(var c=0,l=3,h=2;c<=e;c++,l+=3,h+=2){var p=n+c/e*r;o[l]=t*Math.cos(p),o[l+1]=t*Math.sin(p),s[l+2]=1,u[h]=(o[l]/t+1)/2,u[h+1]=(o[l+1]/t+1)/2}for(var f=[],l=1;l<=e;l++)f.push(l,l+1,0);this.setIndex(new Et(new Uint16Array(f),1)),this.addAttribute("position",new Et(o,3)),this.addAttribute("normal",new Et(s,3)),this.addAttribute("uv",new Et(u,2)),this.boundingSphere=new nt(new a,t)}function Kr(t,e,n,r){Ut.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Zr(t,e,n,r))}function Qr(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),t.CatmullRomCurve3.call(this,e),this.type="catmullrom",this.closed=!0}function Jr(t,e,n,r,i,o){Sn.call(this,t,e,n,n,r,i,o)}function $r(t,e,n,r,i,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Lt(t,e,n,i,o,s)}function ti(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Se(t,e)}function ei(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Se(t,e)}function ni(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function ri(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function ii(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ee(t)}function oi(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(t,e,n)}function si(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){console.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function ai(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}(),Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,r=n[t];if(void 0!==r){var i=r.indexOf(e);i!==-1&&r.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;var r=[],i=0,o=n.length;for(i=0;i<o;i++)r[i]=n[i];for(i=0;i<o;i++)r[i].call(this,t)}}}});var ui="80",ci={LEFT:0,MIDDLE:1,RIGHT:2},li=0,hi=1,pi=2,fi=3,di=0,vi=1,mi=0,yi=1,gi=2,bi=0,_i=1,wi=2,xi=1,Ei=2,Si=0,Ti=1,Mi=2,Ci=0,Ai=1,Oi=2,Pi=3,Ri=4,Ii=5,Ni=100,Li=101,ki=102,Di=103,ji=104,Fi=200,Ui=201,Vi=202,Bi=203,zi=204,Hi=205,Gi=206,Wi=207,qi=208,Xi=209,Yi=210,Zi=0,Ki=1,Qi=2,Ji=3,$i=4,to=5,eo=6,no=7,ro=0,io=1,oo=2,so=0,ao=1,uo=2,co=3,lo=4,ho=300,po=301,fo=302,vo=303,mo=304,yo=305,go=306,bo=307,_o=1e3,wo=1001,xo=1002,Eo=1003,So=1004,To=1005,Mo=1006,Co=1007,Ao=1008,Oo=1009,Po=1010,Ro=1011,Io=1012,No=1013,Lo=1014,ko=1015,Do=1016,jo=1017,Fo=1018,Uo=1019,Vo=1020,Bo=1021,zo=1022,Ho=1023,Go=1024,Wo=1025,qo=Ho,Xo=1026,Yo=1027,Zo=2001,Ko=2002,Qo=2003,Jo=2004,$o=2100,ts=2101,es=2102,ns=2103,rs=2151,is=2200,os=2201,ss=2202,as=2300,us=2301,cs=2302,ls=2400,hs=2401,ps=2402,fs=0,ds=1,vs=2,ms=3e3,ys=3001,gs=3007,bs=3002,_s=3003,ws=3004,xs=3005,Es=3006,Ss=3200,Ts=3201;t.Math={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?n[i]="-":14===i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19===i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(e){return e*t.Math.DEG2RAD},radToDeg:function(e){return e*t.Math.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t}},n.prototype={constructor:n,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(r,i){return void 0===t&&(t=new n,e=new n),t.set(r,r),e.set(i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}},r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=ho,r.prototype={constructor:r,isTexture:!0,set needsUpdate(t){t===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(e){function n(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=t.Math.generateUUID()),void 0===e.images[i.uuid]&&(e.images[i.uuid]={uuid:i.uuid,url:n(i)}),r.image=i.uuid}return e.textures[this.uuid]=r,r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===ho){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case _o:t.x=t.x-Math.floor(t.x);break;case wo:t.x=t.x<0?0:1;break;case xo:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case _o:t.y=t.y-Math.floor(t.y);break;case wo:t.y=t.y<0?0:1;break;case xo:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(r.prototype,e.prototype);var Ms=0;o.prototype={constructor:o,isMatrix4:!0,set:function(t,e,n,r,i,o,s,a,u,c,l,h,p,f,d,v){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=o,m[9]=s,m[13]=a,m[2]=u,m[6]=c,m[10]=l,m[14]=h,m[3]=p,m[7]=f,m[11]=d,m[15]=v,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new o).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new a);var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,this}}(),makeRotationFromEuler:function(t){(t&&t.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===t.order){var h=o*c,p=o*l,f=s*c,d=s*l;e[0]=a*c,e[4]=-a*l,e[8]=u,e[1]=p+f*u,e[5]=h-d*u,e[9]=-s*a,e[2]=d-h*u,e[6]=f+p*u,e[10]=o*a}else if("YXZ"===t.order){var v=a*c,m=a*l,y=u*c,g=u*l;e[0]=v+g*s,e[4]=y*s-m,e[8]=o*u,e[1]=o*l,e[5]=o*c,e[9]=-s,e[2]=m*s-y,e[6]=g+v*s,e[10]=o*a}else if("ZXY"===t.order){var v=a*c,m=a*l,y=u*c,g=u*l;e[0]=v-g*s,e[4]=-o*l,e[8]=y+m*s,e[1]=m+y*s,e[5]=o*c,e[9]=g-v*s,e[2]=-o*u,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){var h=o*c,p=o*l,f=s*c,d=s*l;e[0]=a*c,e[4]=f*u-p,e[8]=h*u+d,e[1]=a*l,e[5]=d*u+h,e[9]=p*u-f,e[2]=-u,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var b=o*a,_=o*u,w=s*a,x=s*u;e[0]=a*c,e[4]=x-b*l,e[8]=w*l+_,e[1]=l,e[5]=o*c,e[9]=-s*c,e[2]=-u*c,e[6]=_*l+w,e[10]=b-x*l}else if("XZY"===t.order){var b=o*a,_=o*u,w=s*a,x=s*u;e[0]=a*c,e[4]=-l,e[8]=u*c,e[1]=b*l+x,e[5]=o*c,e[9]=_*l-w,e[2]=w*l-_,e[6]=s*c,e[10]=x*l+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,o=t.w,s=n+n,a=r+r,u=i+i,c=n*s,l=n*a,h=n*u,p=r*a,f=r*u,d=i*u,v=o*s,m=o*a,y=o*u;return e[0]=1-(p+d),e[4]=l-y,e[8]=h+m,e[1]=l+y,e[5]=1-(c+d),e[9]=f-v,e[2]=h-m,e[6]=f+v,e[10]=1-(c+p),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,n;return function(r,i,o){void 0===t&&(t=new a,e=new a,n=new a);var s=this.elements;return n.subVectors(r,i).normalize(),0===n.lengthSq()&&(n.z=1),t.crossVectors(o,n).normalize(),0===t.lengthSq()&&(n.z+=1e-4,t.crossVectors(o,n).normalize()),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],u=n[12],c=n[1],l=n[5],h=n[9],p=n[13],f=n[2],d=n[6],v=n[10],m=n[14],y=n[3],g=n[7],b=n[11],_=n[15],w=r[0],x=r[4],E=r[8],S=r[12],T=r[1],M=r[5],C=r[9],A=r[13],O=r[2],P=r[6],R=r[10],I=r[14],N=r[3],L=r[7],k=r[11],D=r[15];return i[0]=o*w+s*T+a*O+u*N,i[4]=o*x+s*M+a*P+u*L,i[8]=o*E+s*C+a*R+u*k,i[12]=o*S+s*A+a*I+u*D,i[1]=c*w+l*T+h*O+p*N,i[5]=c*x+l*M+h*P+p*L,i[9]=c*E+l*C+h*R+p*k,i[13]=c*S+l*A+h*I+p*D,i[2]=f*w+d*T+v*O+m*N,i[6]=f*x+d*M+v*P+m*L,i[10]=f*E+d*C+v*R+m*k,i[14]=f*S+d*A+v*I+m*D,i[3]=y*w+g*T+b*O+_*N,i[7]=y*x+g*M+b*P+_*L,i[11]=y*E+g*C+b*R+_*k,i[15]=y*S+g*A+b*I+_*D,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],
this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new a),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,o=n;i<r;i+=3,o+=3)t.fromArray(e,o),t.applyMatrix4(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new a),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var i=0,o=n;i<r;i++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix4(this),e.setXYZ(t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],u=t[13],c=t[2],l=t[6],h=t[10],p=t[14],f=t[3],d=t[7],v=t[11],m=t[15];return f*(+i*a*l-r*u*l-i*s*h+n*u*h+r*s*p-n*a*p)+d*(+e*a*p-e*u*h+i*o*h-r*o*p+r*u*c-i*a*c)+v*(+e*u*l-e*s*p-i*o*l+n*o*p+i*s*c-n*u*c)+m*(-r*s*c-e*a*l+e*s*h+r*o*l-n*o*h+n*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],l=r[6],h=r[7],p=r[8],f=r[9],d=r[10],v=r[11],m=r[12],y=r[13],g=r[14],b=r[15],_=f*g*h-y*d*h+y*l*v-c*g*v-f*l*b+c*d*b,w=m*d*h-p*g*h-m*l*v+u*g*v+p*l*b-u*d*b,x=p*y*h-m*f*h+m*c*v-u*y*v-p*c*b+u*f*b,E=m*f*l-p*y*l-m*c*d+u*y*d+p*c*g-u*f*g,S=i*_+o*w+s*x+a*E;if(0===S){var T="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(T);return console.warn(T),this.identity()}var M=1/S;return n[0]=_*M,n[1]=(y*d*a-f*g*a-y*s*v+o*g*v+f*s*b-o*d*b)*M,n[2]=(c*g*a-y*l*a+y*s*h-o*g*h-c*s*b+o*l*b)*M,n[3]=(f*l*a-c*d*a-f*s*h+o*d*h+c*s*v-o*l*v)*M,n[4]=w*M,n[5]=(p*g*a-m*d*a+m*s*v-i*g*v-p*s*b+i*d*b)*M,n[6]=(m*l*a-u*g*a-m*s*h+i*g*h+u*s*b-i*l*b)*M,n[7]=(u*d*a-p*l*a+p*s*h-i*d*h-u*s*v+i*l*v)*M,n[8]=x*M,n[9]=(m*f*a-p*y*a-m*o*v+i*y*v+p*o*b-i*f*b)*M,n[10]=(u*y*a-m*c*a+m*o*h-i*y*h-u*o*b+i*c*b)*M,n[11]=(p*c*a-u*f*a-p*o*h+i*f*h+u*o*v-i*c*v)*M,n[12]=E*M,n[13]=(p*y*s-m*f*s+m*o*d-i*y*d-p*o*g+i*f*g)*M,n[14]=(m*c*s-u*y*s-m*o*l+i*y*l+u*o*g-i*c*g)*M,n[15]=(u*f*s-p*c*s+p*o*l-i*f*l-u*o*d+i*c*d)*M,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,c=i*s;return this.set(u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,c*s+n,c*a-r*o,0,u*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t,e;return function(n,r,i){void 0===t&&(t=new a,e=new o);var s=this.elements,u=t.set(s[0],s[1],s[2]).length(),c=t.set(s[4],s[5],s[6]).length(),l=t.set(s[8],s[9],s[10]).length(),h=this.determinant();h<0&&(u=-u),n.x=s[12],n.y=s[13],n.z=s[14],e.elements.set(this.elements);var p=1/u,f=1/c,d=1/l;return e.elements[0]*=p,e.elements[1]*=p,e.elements[2]*=p,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,r.setFromRotationMatrix(e),i.x=u,i.y=c,i.z=l,this}}(),makeFrustum:function(t,e,n,r,i,o){var s=this.elements,a=2*i/(e-t),u=2*i/(r-n),c=(e+t)/(e-t),l=(r+n)/(r-n),h=-(o+i)/(o-i),p=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=l,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(e,n,r,i){var o=r*Math.tan(t.Math.DEG2RAD*e*.5),s=-o,a=s*n,u=o*n;return this.makeFrustum(a,u,s,o,r,i)},makeOrthographic:function(t,e,n,r,i,o){var s=this.elements,a=1/(e-t),u=1/(n-r),c=1/(o-i),l=(e+t)*a,h=(n+r)*u,p=(o+i)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-l,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},s.prototype={constructor:s,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if((t&&t.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),i=Math.cos(t._z/2),o=Math.sin(t._x/2),s=Math.sin(t._y/2),a=Math.sin(t._z/2),u=t.order;return"XYZ"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i-o*s*a):"YXZ"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i+o*s*a):"ZXY"===u?(this._x=o*r*i-n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i-o*s*a):"ZYX"===u?(this._x=o*r*i-n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i+o*s*a):"YZX"===u?(this._x=o*r*i+n*s*a,this._y=n*s*i+o*r*a,this._z=n*r*a-o*s*i,this._w=n*r*i-o*s*a):"XZY"===u&&(this._x=o*r*i-n*s*a,this._y=n*s*i-o*r*a,this._z=n*r*a+o*s*i,this._w=n*r*i+o*s*a),e!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],u=n[9],c=n[2],l=n[6],h=n[10],p=r+a+h;return p>0?(e=.5/Math.sqrt(p+1),this._w=.25/e,this._x=(l-u)*e,this._y=(o-c)*e,this._z=(s-i)*e):r>a&&r>h?(e=2*Math.sqrt(1+r-a-h),this._w=(l-u)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(o+c)/e):a>h?(e=2*Math.sqrt(1+a-r-h),this._w=(o-c)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(u+l)/e):(e=2*Math.sqrt(1+h-r-a),this._w=(s-i)/e,this._x=(o+c)/e,this._y=(u+l)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e,n=1e-6;return function(r,i){return void 0===t&&(t=new a),e=r.dot(i)+1,e<n?(e=0,Math.abs(r.x)>Math.abs(r.z)?t.set(-r.y,r.x,0):t.set(0,-r.z,r.y)):t.crossVectors(r,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,u=e._z,c=e._w;return this._x=n*c+o*s+r*u-i*a,this._y=r*c+o*a+i*s-n*u,this._z=i*c+o*u+n*a-r*s,this._w=o*c-n*s-r*a-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var a=Math.sqrt(1-s*s);if(Math.abs(a)<.001)return this._w=.5*(o+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(a,s),c=Math.sin((1-e)*u)/a,l=Math.sin(e*u)/a;return this._w=o*c+this._w*l,this._x=n*c+this._x*l,this._y=r*c+this._y*l,this._z=i*c+this._z*l,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(s,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,s){var a=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],p=i[o+1],f=i[o+2],d=i[o+3];if(l!==d||a!==h||u!==p||c!==f){var v=1-s,m=a*h+u*p+c*f+l*d,y=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var b=Math.sqrt(g),_=Math.atan2(b,m*y);v=Math.sin(v*_)/b,s=Math.sin(s*_)/b}var w=s*y;if(a=a*v+h*w,u=u*v+p*w,c=c*v+f*w,l=l*v+d*w,v===1-s){var x=1/Math.sqrt(a*a+u*u+c*c+l*l);a*=x,u*=x,c*=x,l*=x}}t[e]=a,t[e+1]=u,t[e+2]=c,t[e+3]=l}}),a.prototype={constructor:a,isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return(e&&e.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===t&&(t=new s),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new s),this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,c=a*n+s*e-i*r,l=a*r+i*n-o*e,h=-i*e-o*n-s*r;return this.x=u*a+h*-i+c*-s-l*-o,this.y=c*a+h*-o+l*-i-u*-s,this.z=l*a+h*-s+u*-o-c*-i,this},project:function(){var t;return function(e){return void 0===t&&(t=new o),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyProjection(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new o),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new a,e=new a),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new a),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new a),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(e){var n=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(t.Math.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=t;t=e,e=n}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},c.prototype={constructor:c,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new n;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){var e=t||new n;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new n;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){var r=e||new n;return r.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){var r=e||new n;return r.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new n;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},h.prototype=Object.create(r.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Cs=new r,As=new h,Os=[],Ps=[];z.prototype.setValue=function(t,e){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var o=n[r];o.setValue(t,e[o.id])}};var Rs=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(t,e,n){var r=this.map[e];void 0!==r&&r.setValue(t,n,this.renderer)},W.prototype.set=function(t,e,n){var r=this.map[n];void 0!==r&&r.setValue(t,e[n],this.renderer)},W.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},W.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var s=e[i],a=n[s.id];a.needsUpdate!==!1&&s.setValue(t,a.value,r)}},W.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n},W.splitDynamic=function(t,e){for(var n=null,r=t.length,i=0,o=0;o!==r;++o){var s=t[o],a=e[s.id];a&&a.dynamic===!0?(null===n&&(n=[]),n.push(s)):(i<o&&(t[i]=s),++i)}return i<r&&(t.length=i),n},W.evalDynamic=function(t,e,n,r){for(var i=0,o=t.length;i!==o;++i){var s=e[t[i].id],a=s.onUpdateCallback;void 0!==a&&a.call(s,n,r)}},X.prototype={constructor:X,isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,s=.1,a=t.elements,u=a[0],c=a[4],l=a[8],h=a[1],p=a[5],f=a[9],d=a[2],v=a[6],m=a[10];if(Math.abs(c-h)<o&&Math.abs(l-d)<o&&Math.abs(f-v)<o){if(Math.abs(c+h)<s&&Math.abs(l+d)<s&&Math.abs(f+v)<s&&Math.abs(u+p+m-3)<s)return this.set(1,0,0,0),this;e=Math.PI;var y=(u+1)/2,g=(p+1)/2,b=(m+1)/2,_=(c+h)/4,w=(l+d)/4,x=(f+v)/4;return y>g&&y>b?y<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(y),r=_/n,i=w/n):g>b?g<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(g),n=_/r,i=x/r):b<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=x/i),this.set(n,r,i,e),this}var E=Math.sqrt((v-f)*(v-f)+(l-d)*(l-d)+(h-c)*(h-c));return Math.abs(E)<.001&&(E=1),this.x=(v-f)/E,this.y=(l-d)/E,this.z=(h-c)/E,this.w=Math.acos((u+p+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new X,e=new X),t.set(n,n,n,n),e.set(r,r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},Object.assign(Z.prototype,e.prototype,{isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),K.prototype={constructor:K,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){t===!0&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):"overdraw"===e?this[e]=Number(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t;n&&(t={textures:{},images:{}});var r={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,r.reflectivity=this.reflectivity),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ai&&(r.blending=this.blending),this.shading!==Ei&&(r.shading=this.shading),this.side!==bi&&(r.side=this.side),this.vertexColors!==Si&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),r.skinning=this.skinning,r.morphTargets=this.morphTargets,n){var i=e(t.textures),o=e(t.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,
this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(K.prototype,e.prototype);var Is=0;t.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t){e[n]={};for(var r in t[n]){var i=t[n][r];i&&i.isColor||i&&i.isVector2||i&&i.isVector3||i&&i.isVector4||i&&i.isMatrix3||i&&i.isMatrix4||i&&i.isTexture?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}},J.prototype=Object.create(K.prototype),J.prototype.constructor=J,J.prototype.isShaderMaterial=!0,J.prototype.copy=function(e){return K.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=t.UniformsUtils.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},J.prototype.toJSON=function(t){var e=K.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e};var Ns="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Ls="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",ks="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",Ds="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",js="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",Fs="\nvec3 transformed = vec3( position );\n",Us="\nvec3 objectNormal = vec3( normal );\n",Vs="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Bs="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",zs="#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n#endif\n",Hs="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",Gs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",Ws="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",qs="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Xs="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",Ys="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Zs="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",Ks="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",Qs="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",Js="#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",$s="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",ta="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",ea="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",na="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",ra="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",ia="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",oa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",sa="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",aa="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",ua="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",ca="#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",la="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",ha="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",pa="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",fa="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",da="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\n\t\t\tdirectLight.color = pointLight.color;\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t#include <normal_flip>\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\t#include <normal_flip>\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",va="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",ma="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",ya="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",ga="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",ba="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",_a="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",wa="#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",xa="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",Ea="#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",Sa="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",Ta="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",Ma="#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Ca="#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",Aa="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",Oa="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Pa="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",Ra="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Ia="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",Na="#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",La="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",ka="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",Da="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",ja="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",Fa="#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Ua="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",Va="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",Ba="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",za="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",Ha="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",Ga="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",Wa="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",qa="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",Xa="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",Ya="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",Za="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Ka="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Qa="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",Ja="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",$a="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",tu="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",eu="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",nu="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",ru="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",iu="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",ou="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",su="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",au="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",uu="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",cu="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",lu="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",hu="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",pu="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",fu="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",du="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",vu="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",mu="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",yu="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",gu="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",bu="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",_u="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",wu="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",xu="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Eu="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Su="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",Tu="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvNormal = normalize( normalMatrix * normal );\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",Mu="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",Cu="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Au="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",Ou="#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",Pu={
alphamap_fragment:Ns,alphamap_pars_fragment:Ls,alphatest_fragment:ks,aomap_fragment:Ds,aomap_pars_fragment:js,begin_vertex:Fs,beginnormal_vertex:Us,bsdfs:Vs,bumpmap_pars_fragment:Bs,clipping_planes_fragment:zs,clipping_planes_pars_fragment:Hs,clipping_planes_pars_vertex:Gs,clipping_planes_vertex:Ws,color_fragment:qs,color_pars_fragment:Xs,color_pars_vertex:Ys,color_vertex:Zs,common:Ks,cube_uv_reflection_fragment:Qs,defaultnormal_vertex:Js,displacementmap_pars_vertex:$s,displacementmap_vertex:ta,emissivemap_fragment:ea,emissivemap_pars_fragment:na,encodings_fragment:ra,encodings_pars_fragment:ia,envmap_fragment:oa,envmap_pars_fragment:sa,envmap_pars_vertex:aa,envmap_vertex:ua,fog_fragment:ca,fog_pars_fragment:la,lightmap_fragment:ha,lightmap_pars_fragment:pa,lights_lambert_vertex:fa,lights_pars:da,lights_phong_fragment:va,lights_phong_pars_fragment:ma,lights_physical_fragment:ya,lights_physical_pars_fragment:ga,lights_template:ba,logdepthbuf_fragment:_a,logdepthbuf_pars_fragment:wa,logdepthbuf_pars_vertex:xa,logdepthbuf_vertex:Ea,map_fragment:Sa,map_pars_fragment:Ta,map_particle_fragment:Ma,map_particle_pars_fragment:Ca,metalnessmap_fragment:Aa,metalnessmap_pars_fragment:Oa,morphnormal_vertex:Pa,morphtarget_pars_vertex:Ra,morphtarget_vertex:Ia,normal_flip:Na,normal_fragment:La,normalmap_pars_fragment:ka,packing:Da,premultiplied_alpha_fragment:ja,project_vertex:Fa,roughnessmap_fragment:Ua,roughnessmap_pars_fragment:Va,shadowmap_pars_fragment:Ba,shadowmap_pars_vertex:za,shadowmap_vertex:Ha,shadowmask_pars_fragment:Ga,skinbase_vertex:Wa,skinning_pars_vertex:qa,skinning_vertex:Xa,skinnormal_vertex:Ya,specularmap_fragment:Za,specularmap_pars_fragment:Ka,tonemapping_fragment:Qa,tonemapping_pars_fragment:Ja,uv_pars_fragment:$a,uv_pars_vertex:tu,uv_vertex:eu,uv2_pars_fragment:nu,uv2_pars_vertex:ru,uv2_vertex:iu,worldpos_vertex:ou,cube_frag:su,cube_vert:au,depth_frag:uu,depth_vert:cu,distanceRGBA_frag:lu,distanceRGBA_vert:hu,equirect_frag:pu,equirect_vert:fu,linedashed_frag:du,linedashed_vert:vu,meshbasic_frag:mu,meshbasic_vert:yu,meshlambert_frag:gu,meshlambert_vert:bu,meshphong_frag:_u,meshphong_vert:wu,meshphysical_frag:xu,meshphysical_vert:Eu,normal_frag:Su,normal_vert:Tu,points_frag:Mu,points_vert:Cu,shadow_frag:Au,shadow_vert:Ou};$.prototype={constructor:$,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function e(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(n,r,i){if(n=t.Math.euclideanModulo(n,1),r=t.Math.clamp(r,0,1),i=t.Math.clamp(i,0,1),0===r)this.r=this.g=this.b=i;else{var o=i<=.5?i*(1+r):i+r-i*r,s=2*i-o;this.r=e(s,o,n+1/3),this.g=e(s,o,n),this.b=e(s,o,n-1/3)}return this}}(),setStyle:function(e){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,o=r[1],s=r[2];switch(o){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,n(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,n(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(i[1])/360,u=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return n(i[5]),this.setHSL(a,u,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=t.ColorKeywords[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,o=this.g,s=this.b,a=Math.max(i,o,s),u=Math.min(i,o,s),c=(u+a)/2;if(u===a)e=0,n=0;else{var l=a-u;switch(n=c<=.5?l/(a+u):l/(2-a-u),a){case i:e=(o-s)/l+(o<s?6:0);break;case o:e=(s-i)/l+2;break;case s:e=(i-o)/l+4}e/=6}return r.h=e,r.s=n,r.l=c,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}},t.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};var Ru={common:{diffuse:{value:new $(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new X(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new $(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new X(0,0,1,1)}}},Iu={basic:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.aomap,Ru.fog]),vertexShader:Pu.meshbasic_vert,fragmentShader:Pu.meshbasic_frag},lambert:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.fog,Ru.lights,{emissive:{value:new $(0)}}]),vertexShader:Pu.meshlambert_vert,fragmentShader:Pu.meshlambert_frag},phong:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.bumpmap,Ru.normalmap,Ru.displacementmap,Ru.fog,Ru.lights,{emissive:{value:new $(0)},specular:{value:new $(1118481)},shininess:{value:30}}]),vertexShader:Pu.meshphong_vert,fragmentShader:Pu.meshphong_frag},standard:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.aomap,Ru.lightmap,Ru.emissivemap,Ru.bumpmap,Ru.normalmap,Ru.displacementmap,Ru.roughnessmap,Ru.metalnessmap,Ru.fog,Ru.lights,{emissive:{value:new $(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Pu.meshphysical_vert,fragmentShader:Pu.meshphysical_frag},points:{uniforms:t.UniformsUtils.merge([Ru.points,Ru.fog]),vertexShader:Pu.points_vert,fragmentShader:Pu.points_frag},dashed:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Pu.linedashed_vert,fragmentShader:Pu.linedashed_frag},depth:{uniforms:t.UniformsUtils.merge([Ru.common,Ru.displacementmap]),vertexShader:Pu.depth_vert,fragmentShader:Pu.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Pu.normal_vert,fragmentShader:Pu.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Pu.cube_vert,fragmentShader:Pu.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Pu.equirect_vert,fragmentShader:Pu.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new a}},vertexShader:Pu.distanceRGBA_vert,fragmentShader:Pu.distanceRGBA_frag}};Iu.physical={uniforms:t.UniformsUtils.merge([Iu.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Pu.meshphysical_vert,fragmentShader:Pu.meshphysical_frag},tt.prototype=Object.create(K.prototype),tt.prototype.constructor=tt,tt.prototype.isMeshDepthMaterial=!0,tt.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},et.prototype={constructor:et,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=+(1/0),n=+(1/0),r=+(1/0),i=-(1/0),o=-(1/0),s=-(1/0),a=0,u=t.length;a<u;a+=3){var c=t[a],l=t[a+1],h=t[a+2];c<e&&(e=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>s&&(s=h)}this.min.set(e,n,r),this.max.set(i,o,s)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new a;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new a;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse(function(e){var r=e.geometry;if(void 0!==r)if(r&&r.isGeometry)for(var i=r.vertices,o=0,s=i.length;o<s;o++)t.copy(i[o]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(r&&r.isBufferGeometry){var a=r.attributes.position;if(void 0!==a){var u,c,l;a&&a.isInterleavedBufferAttribute?(u=a.data.array,c=a.offset,l=a.data.stride):(u=a.array,c=0,l=3);for(var o=c,s=u.length;o<s;o+=l)t.fromArray(u,o),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){var e=t||new a;return e.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){var e=t||new a;return e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){var n=e||new a;return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new a),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){var n=e||new a;return n.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new a;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new a;return function(e){var n=e||new nt;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new a,new a,new a,new a,new a,new a,new a,new a];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},nt.prototype={constructor:nt,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new et;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).center(r);for(var i=0,o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new a;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new et;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},rt.prototype={constructor:rt,isMatrix3:!0,set:function(t,e,n,r,i,o,s,a,u){var c=this.elements;return c[0]=t,c[1]=r,c[2]=s,c[3]=e,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(){var t;return function(e,n,r){void 0===t&&(t=new a),void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,o=n;i<r;i+=3,o+=3)t.fromArray(e,o),t.applyMatrix3(this),t.toArray(e,o);return e}}(),applyToBuffer:function(){var t;return function(e,n,r){void 0===t&&(t=new a),void 0===n&&(n=0),void 0===r&&(r=e.length/e.itemSize);for(var i=0,o=n;i<r;i++,o++)t.x=e.getX(o),t.y=e.getY(o),t.z=e.getZ(o),t.applyMatrix3(this),e.setXYZ(t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*o*c-e*s*u-n*i*c+n*s*a+r*i*u-r*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],p=n[8],f=p*u-c*h,d=c*l-p*a,v=h*a-u*l,m=i*f+o*d+s*v;if(0===m){var y="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(e===!0)throw new Error(y);return console.warn(y),this.identity()}var g=1/m;return r[0]=f*g,r[1]=(s*h-p*o)*g,r[2]=(c*o-s*u)*g,r[3]=d*g,r[4]=(p*i-s*l)*g,r[5]=(s*a-c*i)*g,r[6]=v*g,r[7]=(o*l-h*i)*g,r[8]=(u*i-o*a)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(t,e)},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},it.prototype={constructor:it,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new a,e=new a;return function(n,r,i){var o=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t),r=e||new a;return r.copy(this.normal).multiplyScalar(n)},intersectLine:function(){var t=new a;return function(e,n){var r=n||new a,i=e.delta(t),o=this.normal.dot(i);if(0!==o){var s=-(e.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return r.copy(i).multiplyScalar(s).add(e.start)}else if(0===this.distanceToPoint(e.start))return r.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){var e=t||new a;return e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new a,e=new rt;return function(n,r){var i=this.coplanarPoint(t).applyMatrix4(n),o=r||e.getNormalMatrix(n),s=this.normal.applyMatrix3(o).normalize();return this.constant=-i.dot(s),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},ot.prototype={constructor:ot,set:function(t,e,n,r,i,o){var s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],u=n[5],c=n[6],l=n[7],h=n[8],p=n[9],f=n[10],d=n[11],v=n[12],m=n[13],y=n[14],g=n[15];return e[0].setComponents(s-r,l-a,d-h,g-v).normalize(),e[1].setComponents(s+r,l+a,d+h,g+v).normalize(),e[2].setComponents(s+i,l+u,d+p,g+m).normalize(),e[3].setComponents(s-i,l-u,d-p,g-m).normalize(),e[4].setComponents(s-o,l-c,d-f,g-y).normalize(),e[5].setComponents(s+o,l+c,d+f,g+y).normalize(),this},intersectsObject:function(){var t=new nt;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new nt;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){var o=e[i].distanceToPoint(n);if(o<r)return!1}return!0},intersectsBox:function(){var t=new a,e=new a;return function(n){for(var r=this.planes,i=0;i<6;i++){var o=r[i];t.x=o.normal.x>0?n.min.x:n.max.x,e.x=o.normal.x>0?n.max.x:n.min.x,t.y=o.normal.y>0?n.min.y:n.max.y,e.y=o.normal.y>0?n.max.y:n.min.y,t.z=o.normal.z>0?n.min.z:n.max.z,e.z=o.normal.z>0?n.max.z:n.min.z;var s=o.distanceToPoint(t),a=o.distanceToPoint(e);if(s<0&&a<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}};var Nu=0;Et.prototype={constructor:Et,isBufferAttribute:!0,get count(){return this.array.length/this.itemSize},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new $),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];e[n++]=o.a,e[n++]=o.b,e[n++]=o.c}return this},copyVector2sArray:function(t){for(var e=this.array,r=0,i=0,o=t.length;i<o;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new n),e[r++]=s.x,e[r++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new X),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},Lt.prototype={constructor:Lt,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},kt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],kt.DefaultOrder="XYZ",kt.prototype={constructor:kt,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,n,r){var i=t.Math.clamp,o=e.elements,s=o[0],a=o[4],u=o[8],c=o[1],l=o[5],h=o[9],p=o[2],f=o[6],d=o[10];return n=n||this._order,"XYZ"===n?(this._y=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===n?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(u,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-p,s),this._z=0)):"ZXY"===n?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-p,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,s))):"ZYX"===n?(this._y=Math.asin(-i(p,-1,1)),Math.abs(p)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===n?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(u,d))):"XZY"===n?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+n),this._order=n,r!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,n,r){return void 0===t&&(t=new o),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new s;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Dt.prototype={constructor:Dt,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t;
},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!==(this.mask&t.mask)}},jt.DefaultUp=new a(0,1,0),jt.DefaultMatrixAutoUpdate=!0,Object.assign(jt.prototype,e.prototype,{isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new s;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new a(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new a(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new a(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new a;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new a(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new a(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new a(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);n!==-1&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n],o=i.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){var e=t||new a;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new a,e=new a;return function(n){var r=n||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,r,e),r}}(),getWorldRotation:function(){var t=new s;return function(e){var n=e||new kt;return this.getWorldQuaternion(t),n.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new a,e=new s;return function(n){var r=n||new a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,r),r}}(),getWorldDirection:function(){var t=new s;return function(e){var n=e||new a;return this.getWorldQuaternion(t),n.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible!==!1){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate===!0&&this.updateMatrix(),this.matrixWorldNeedsUpdate!==!0&&t!==!0||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}var n=void 0===t||""===t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{}},r.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(n){var s=e(t.geometries),a=e(t.materials),u=e(t.textures),c=e(t.images);s.length>0&&(r.geometries=s),a.length>0&&(r.materials=a),u.length>0&&(r.textures=u),c.length>0&&(r.images=c)}return r.object=i,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}});var Lu=0;Object.assign(Ut.prototype,e.prototype,{isGeometry:!0,applyMatrix:function(t){for(var e=(new rt).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){var i=this.vertices[n];i.applyMatrix4(t)}for(var n=0,r=this.faces.length;n<r;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var s=0,a=o.vertexNormals.length;s<a;s++)o.vertexNormals[s].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new o),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new o),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new jt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,n,i){var o=void 0!==u?[p[t].clone(),p[e].clone(),p[n].clone()]:[],s=void 0!==c?[r.colors[t].clone(),r.colors[e].clone(),r.colors[n].clone()]:[],a=new Lt(t,e,n,o,s,i);r.faces.push(a),void 0!==l&&r.faceVertexUvs[0].push([f[t].clone(),f[e].clone(),f[n].clone()]),void 0!==h&&r.faceVertexUvs[1].push([d[t].clone(),d[e].clone(),d[n].clone()])}var r=this,i=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,u=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,l=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=[],f=[],d=[],v=0,m=0;v<s.length;v+=3,m+=2)r.vertices.push(new a(s[v],s[v+1],s[v+2])),void 0!==u&&p.push(new a(u[v],u[v+1],u[v+2])),void 0!==c&&r.colors.push(new $(c[v],c[v+1],c[v+2])),void 0!==l&&f.push(new n(l[m],l[m+1])),void 0!==h&&d.push(new n(h[m],h[m+1]));if(void 0!==i){var y=t.groups;if(y.length>0)for(var v=0;v<y.length;v++)for(var g=y[v],b=g.start,_=g.count,m=b,w=b+_;m<w;m+=3)e(i[m],i[m+1],i[m+2],g.materialIndex);else for(var v=0;v<i.length;v+=3)e(i[v],i[v+1],i[v+2])}else for(var v=0;v<s.length/3;v+=3)e(v,v+1,v+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new o;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new a,e=new a,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],s=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,s),e.subVectors(o,s),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,n,r,i,o,s;for(s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new a;if(t){var u,c,l,h=new a,p=new a;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],u=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,c),p.subVectors(u,c),h.cross(p),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(r=0,i=this.faces.length;r<i;r++){o=this.faces[r];var f=o.vertexNormals;3===f.length?(f[0].copy(s[o.a]),f[1].copy(s[o.b]),f[2].copy(s[o.c])):(f[0]=s[o.a].clone(),f[1]=s[o.b].clone(),f[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for(i=this.faces[n],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new Ut;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s,u,c=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)s=new a,u={a:new a,b:new a,c:new a},c.push(s),l.push(u)}var h=this.morphNormals[t];o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,u;for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],s=h.faceNormals[n],u=h.vertexNormals[n],s.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)i=this.faces[n],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;n<r;n++)n>0&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new et),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new nt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if((t&&t.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);var r,i=this.vertices.length,o=this.vertices,s=t.vertices,a=this.faces,u=t.faces,c=this.faceVertexUvs[0],l=t.faceVertexUvs[0];void 0===n&&(n=0),void 0!==e&&(r=(new rt).getNormalMatrix(e));for(var h=0,p=s.length;h<p;h++){var f=s[h],d=f.clone();void 0!==e&&d.applyMatrix4(e),o.push(d)}for(h=0,p=u.length;h<p;h++){var v,m,y,g=u[h],b=g.vertexNormals,_=g.vertexColors;v=new Lt(g.a+i,g.b+i,g.c+i),v.normal.copy(g.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var w=0,x=b.length;w<x;w++)m=b[w].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),v.vertexNormals.push(m);v.color.copy(g.color);for(var w=0,x=_.length;w<x;w++)y=_[w],v.vertexColors.push(y.clone());v.materialIndex=g.materialIndex+n,a.push(v)}for(h=0,p=l.length;h<p;h++){var E=l[h],S=[];if(void 0!==E){for(var w=0,x=E.length;w<x;w++)S.push(E[w].clone());c.push(S)}}},mergeMesh:function(t){return(t&&t.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t):(t.matrixAutoUpdate&&t.updateMatrix(),void this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r,i,o,s,a,u={},c=[],l=[],h=4,p=Math.pow(10,h);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],e=Math.round(t.x*p)+"_"+Math.round(t.y*p)+"_"+Math.round(t.z*p),void 0===u[e]?(u[e]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){i=this.faces[n],i.a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=-1,v=0;v<3;v++)if(o[v]===o[(v+1)%3]){d=v,f.push(n);break}}for(n=f.length-1;n>=0;n--){var m=f[n];for(this.faces.splice(m,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(m,1)}var y=this.vertices.length-c.length;return this.vertices=c,y},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,r=0;r<n;r++)e[r]._id=r;e.sort(t);var i,o,s=this.faceVertexUvs[0],a=this.faceVertexUvs[1];s&&s.length===n&&(i=[]),a&&a.length===n&&(o=[]);for(var r=0;r<n;r++){var u=e[r]._id;i&&i.push(s[u]),o&&o.push(a[u])}i&&(this.faceVertexUvs[0]=i),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==p[e]?p[e]:(p[e]=h.length/3,h.push(t.x,t.y,t.z),p[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=f.length,f.push(t.getHex()),d[e])}function r(t){var e=t.x.toString()+t.y.toString();return void 0!==m[e]?m[e]:(m[e]=v.length/2,v.push(t.x,t.y),m[e])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var s in o)void 0!==o[s]&&(i[s]=o[s]);return i}for(var a=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];a.push(c.x,c.y,c.z)}for(var l=[],h=[],p={},f=[],d={},v=[],m={},u=0;u<this.faces.length;u++){var y=this.faces[u],g=!0,b=!1,_=void 0!==this.faceVertexUvs[0][u],w=y.normal.length()>0,x=y.vertexNormals.length>0,E=1!==y.color.r||1!==y.color.g||1!==y.color.b,S=y.vertexColors.length>0,T=0;if(T=t(T,0,0),T=t(T,1,g),T=t(T,2,b),T=t(T,3,_),T=t(T,4,w),T=t(T,5,x),T=t(T,6,E),T=t(T,7,S),l.push(T),l.push(y.a,y.b,y.c),l.push(y.materialIndex),_){var M=this.faceVertexUvs[0][u];l.push(r(M[0]),r(M[1]),r(M[2]))}if(w&&l.push(e(y.normal)),x){var C=y.vertexNormals;l.push(e(C[0]),e(C[1]),e(C[2]))}if(E&&l.push(n(y.color)),S){var A=y.vertexColors;l.push(n(A[0]),n(A[1]),n(A[2]))}}return i.data={},i.data.vertices=a,i.data.normals=h,f.length>0&&(i.data.colors=f),v.length>0&&(i.data.uvs=[v]),i.data.faces=l,i},clone:function(){return(new Ut).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());for(var i=t.faces,n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(var n=0,r=t.faceVertexUvs.length;n<r;n++){var o=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var s=0,a=o.length;s<a;s++){for(var u=o[s],c=[],l=0,h=u.length;l<h;l++){var p=u[l];c.push(p.clone())}this.faceVertexUvs[n].push(c)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ku=0;Object.assign(Bt.prototype,e.prototype,{computeBoundingBox:Ut.prototype.computeBoundingBox,computeBoundingSphere:Ut.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(t){for(var e,n,r=[],i=t.faces,o=0;o<i.length;o++){var s=i[o];s.materialIndex!==n&&(n=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,r.push(e)),e={start:3*o,materialIndex:n})}void 0!==e&&(e.count=3*o-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,r=t.faces,i=t.vertices,o=t.faceVertexUvs,s=o[0]&&o[0].length>0,a=o[1]&&o[1].length>0,u=t.morphTargets,c=u.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]=[];this.morphTargets.position=e}var h,p=t.morphNormals,f=p.length;if(f>0){h=[];for(var l=0;l<f;l++)h[l]=[];this.morphTargets.normal=h}for(var d=t.skinIndices,v=t.skinWeights,m=d.length===i.length,y=v.length===i.length,l=0;l<r.length;l++){var g=r[l];this.vertices.push(i[g.a],i[g.b],i[g.c]);var b=g.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=g.normal;this.normals.push(_,_,_)}var w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var x=g.color;this.colors.push(x,x,x)}if(s===!0){var E=o[0][l];void 0!==E?this.uvs.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new n,new n,new n))}if(a===!0){var E=o[1][l];void 0!==E?this.uvs2.push(E[0],E[1],E[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new n,new n,new n))}for(var S=0;S<c;S++){var T=u[S].vertices;e[S].push(T[g.a],T[g.b],T[g.c])}for(var S=0;S<f;S++){var M=p[S].vertexNormals[l];h[S].push(M.a,M.b,M.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),y&&this.skinWeights.push(v[g.a],v[g.b],v[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(zt.prototype,e.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){return(e&&e.isBufferAttribute)===!1&&(e&&e.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(t,new Et(arguments[1],arguments[2]))):"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(e)):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new rt).getNormalMatrix(t);r.applyToVector3Array(n.array),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new o),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,n,r){return void 0===t&&(t=new o),t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,n,r){return void 0===t&&(t=new o),t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new jt),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t&&t.isPoints||t&&t.isLine){var n=new Rt(3*e.vertices.length,3),r=new Rt(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Rt(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t&&t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t&&t.isMesh){var n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}var r;return e.verticesNeedUpdate===!0&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(e.vertices),r.needsUpdate=!0),e.verticesNeedUpdate=!1),e.normalsNeedUpdate===!0&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1),e.colorsNeedUpdate===!0&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(e.colors),r.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(e.uvs),r.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(e.lineDistances),r.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Bt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Et(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Et(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new Et(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Et(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Et(o,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var s=t.vertices.length>65535?Uint32Array:Uint16Array,a=new s(3*t.indices.length);this.setIndex(new Et(a,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var u in t.morphTargets){for(var c=[],l=t.morphTargets[u],h=0,p=l.length;h<p;h++){var f=l[h],d=new Rt(3*f.length,3);c.push(d.copyVector3sArray(f))}this.morphAttributes[u]=c}if(t.skinIndices.length>0){var v=new Rt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",v.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new Rt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new et);var t=this.attributes.position.array;void 0!==t?this.boundingBox.setFromArray(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new et,e=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new nt);var n=this.attributes.position;if(n){var r=n.array,i=this.boundingSphere.center;t.setFromArray(r),t.center(i);for(var o=0,s=0,a=r.length;s<a;s+=3)e.fromArray(r,s),o=Math.max(o,i.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Et(new Float32Array(r.length),3));else for(var i=e.normal.array,o=0,s=i.length;o<s;o++)i[o]=0;var u,c,l,h=e.normal.array,p=new a,f=new a,d=new a,v=new a,m=new a;if(t){var y=t.array;0===n.length&&this.addGroup(0,y.length);for(var g=0,b=n.length;g<b;++g)for(var _=n[g],w=_.start,x=_.count,o=w,s=w+x;o<s;o+=3)u=3*y[o+0],c=3*y[o+1],l=3*y[o+2],p.fromArray(r,u),f.fromArray(r,c),d.fromArray(r,l),v.subVectors(d,f),m.subVectors(p,f),v.cross(m),h[u]+=v.x,h[u+1]+=v.y,h[u+2]+=v.z,h[c]+=v.x,h[c+1]+=v.y,h[c+2]+=v.z,h[l]+=v.x,h[l+1]+=v.y,h[l+2]+=v.z}else for(var o=0,s=r.length;o<s;o+=9)p.fromArray(r,o),f.fromArray(r,o+3),d.fromArray(r,o+6),v.subVectors(d,f),m.subVectors(p,f),v.cross(m),h[o]=v.x,h[o+1]=v.y,h[o+2]=v.z,h[o+3]=v.x,h[o+4]=v.y,h[o+5]=v.z,h[o+6]=v.x,h[o+7]=v.y,h[o+8]=v.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if((t&&t.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0);var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r],o=i.array,s=t.attributes[r],a=s.array,u=s.itemSize,c=0,l=u*e;c<a.length;c++,l++)o[l]=a[c];return this},normalizeNormals:function(){for(var t,e,n,r,i=this.attributes.normal.array,o=0,s=i.length;o<s;o+=3)t=i[o],e=i[o+1],n=i[o+2],r=1/Math.sqrt(t*t+e*e+n*n),i[o]*=r,i[o+1]*=r,i[o+2]*=r},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new zt,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,s=i.itemSize,a=new o.constructor(e.length*s),u=0,c=0,l=0,h=e.length;l<h;l++){u=e[l]*s;for(var p=0;p<s;p++)a[c++]=o[u++]}t.addAttribute(r,new Et(a,s))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var s=o[n],i=Array.prototype.slice.call(s.array);t.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:i,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new zt).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,s=0,a=o.length;s<a;s++){var u=o[s];this.addGroup(u.start,u.count,u.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),zt.MaxIndex=65535,Qt.prototype=Object.create(Z.prototype),Qt.prototype.constructor=Qt,Qt.prototype.isWebGLRenderTargetCube=!0,Jt.prototype=Object.create(zt.prototype),Jt.prototype.constructor=Jt,$t.prototype={constructor:$t,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){var n=e||new a;return n.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new a;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var n=e||new a;n.subVectors(t,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new a;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new a,e=new a,n=new a;return function(r,i,o,s){t.copy(r).add(i).multiplyScalar(.5),e.copy(i).sub(r).normalize(),n.copy(this.origin).sub(t);var a,u,c,l,h=.5*r.distanceTo(i),p=-this.direction.dot(e),f=n.dot(this.direction),d=-n.dot(e),v=n.lengthSq(),m=Math.abs(1-p*p);if(m>0)if(a=p*d-f,u=p*f-d,l=h*m,a>=0)if(u>=-l)if(u<=l){var y=1/m;a*=y,u*=y,c=a*(a+p*u+2*f)+u*(p*a+u+2*d)+v}else u=h,a=Math.max(0,-(p*u+f)),c=-a*a+u*(u+2*d)+v;else u=-h,a=Math.max(0,-(p*u+f)),c=-a*a+u*(u+2*d)+v;else u<=-l?(a=Math.max(0,-(-p*h+f)),u=a>0?-h:Math.min(Math.max(-h,-d),h),c=-a*a+u*(u+2*d)+v):u<=l?(a=0,u=Math.min(Math.max(-h,-d),h),c=u*(u+2*d)+v):(a=Math.max(0,-(p*h+f)),u=a>0?h:Math.min(Math.max(-h,-d),h),c=-a*a+u*(u+2*d)+v);else u=p>0?-h:h,a=Math.max(0,-(p*u+f)),c=-a*a+u*(u+2*d)+v;return o&&o.copy(this.direction).multiplyScalar(a).add(this.origin),s&&s.copy(e).multiplyScalar(u).add(t),c}}(),intersectSphere:function(){var t=new a;return function(e,n){t.subVectors(e.center,this.origin);var r=t.dot(this.direction),i=t.dot(t)-r*r,o=e.radius*e.radius;if(i>o)return null;var s=Math.sqrt(o-i),a=r-s,u=r+s;return a<0&&u<0?null:a<0?this.at(u,n):this.at(a,n)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,r,i,o,s,a,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(i=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(i=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(s=(t.min.z-h.z)*l,a=(t.max.z-h.z)*l):(s=(t.max.z-h.z)*l,a=(t.min.z-h.z)*l),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(){var t=new a;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new a,e=new a,n=new a,r=new a;return function(i,o,s,a,u){
e.subVectors(o,i),n.subVectors(s,i),r.crossVectors(e,n);var c,l=this.direction.dot(r);if(l>0){if(a)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}t.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var p=c*this.direction.dot(e.cross(t));if(p<0)return null;if(h+p>l)return null;var f=-c*t.dot(r);return f<0?null:this.at(f/l,u)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},te.prototype={constructor:te,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},center:function(t){var e=t||new a;return e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){var e=t||new a;return e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var n=e||new a;return this.delta(n).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var e=new a,n=new a;return function(r,i){e.subVectors(r,this.start),n.subVectors(this.end,this.start);var o=n.dot(n),s=n.dot(e),a=s/o;return i&&(a=t.Math.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e),i=n||new a;return this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ee.normal=function(){var t=new a;return function(e,n,r,i){var o=i||new a;o.subVectors(r,n),t.subVectors(e,n),o.cross(t);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),ee.barycoordFromPoint=function(){var t=new a,e=new a,n=new a;return function(r,i,o,s,u){t.subVectors(s,i),e.subVectors(o,i),n.subVectors(r,i);var c=t.dot(t),l=t.dot(e),h=t.dot(n),p=e.dot(e),f=e.dot(n),d=c*p-l*l,v=u||new a;if(0===d)return v.set(-2,-1,-1);var m=1/d,y=(p*h-l*f)*m,g=(c*f-l*h)*m;return v.set(1-y-g,g,y)}}(),ee.containsPoint=function(){var t=new a;return function(e,n,r,i){var o=ee.barycoordFromPoint(e,n,r,i,t);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),ee.prototype={constructor:ee,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new a,e=new a;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){var e=t||new a;return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ee.normal(this.a,this.b,this.c,t)},plane:function(t){var e=t||new it;return e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ee.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ee.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,n,r;return function(i,o){void 0===t&&(t=new it,e=[new te,new te,new te],n=new a,r=new a);var s=o||new a,u=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(i,n),this.containsPoint(n)===!0)s.copy(n);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var c=0;c<e.length;c++){e[c].closestPointToPoint(n,!0,r);var l=n.distanceToSquared(r);l<u&&(u=l,s.copy(r))}}return s}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},ne.prototype=Object.create(K.prototype),ne.prototype.constructor=ne,ne.prototype.isMeshBasicMaterial=!0,ne.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},re.prototype=Object.assign(Object.create(jt.prototype),{constructor:re,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return jt.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;t<e;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},getMorphTargetIndexByName:function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:(console.warn("THREE.Mesh.getMorphTargetIndexByName: morph target "+t+" does not exist. Returning 0."),0)},raycast:function(){function t(t,e,n,r,i,o,s){return ee.barycoordFromPoint(t,e,n,r,g),i.multiplyScalar(g.x),o.multiplyScalar(g.y),s.multiplyScalar(g.z),i.add(o).add(s),i.clone()}function e(t,e,n,r,i,o,s){var a,u=t.material;if(a=u.side===_i?n.intersectTriangle(o,i,r,!0,s):n.intersectTriangle(r,i,o,u.side!==wi,s),null===a)return null;_.copy(s),_.applyMatrix4(t.matrixWorld);var c=e.ray.origin.distanceTo(_);return c<e.near||c>e.far?null:{distance:c,point:_.clone(),object:t}}function r(n,r,i,o,s,a,u,p){c.fromArray(o,3*a),l.fromArray(o,3*u),h.fromArray(o,3*p);var f=e(n,r,i,c,l,h,b);return f&&(s&&(v.fromArray(s,2*a),m.fromArray(s,2*u),y.fromArray(s,2*p),f.uv=t(b,c,l,h,v,m,y)),f.face=new Lt(a,u,p,ee.normal(c,l,h)),f.faceIndex=a),f}var i=new o,s=new $t,u=new nt,c=new a,l=new a,h=new a,p=new a,f=new a,d=new a,v=new n,m=new n,y=new n,g=new a,b=new a,_=new a;return function(n,o){var a=this.geometry,g=this.material,_=this.matrixWorld;if(void 0!==g&&(null===a.boundingSphere&&a.computeBoundingSphere(),u.copy(a.boundingSphere),u.applyMatrix4(_),n.ray.intersectsSphere(u)!==!1&&(i.getInverse(_),s.copy(n.ray).applyMatrix4(i),null===a.boundingBox||s.intersectsBox(a.boundingBox)!==!1))){var w,x;if(a&&a.isBufferGeometry){var E,S,T,M=a.index,C=a.attributes,A=C.position.array;if(void 0!==C.uv&&(w=C.uv.array),null!==M)for(var O=M.array,P=0,R=O.length;P<R;P+=3)E=O[P],S=O[P+1],T=O[P+2],x=r(this,n,s,A,w,E,S,T),x&&(x.faceIndex=Math.floor(P/3),o.push(x));else for(var P=0,R=A.length;P<R;P+=9)E=P/3,S=E+1,T=E+2,x=r(this,n,s,A,w,E,S,T),x&&(x.index=E,o.push(x))}else if(a&&a.isGeometry){var I,N,L,k=g&&g.isMultiMaterial,D=k===!0?g.materials:null,j=a.vertices,F=a.faces,U=a.faceVertexUvs[0];U.length>0&&(w=U);for(var V=0,B=F.length;V<B;V++){var z=F[V],H=k===!0?D[z.materialIndex]:g;if(void 0!==H){if(I=j[z.a],N=j[z.b],L=j[z.c],H.morphTargets===!0){var G=a.morphTargets,W=this.morphTargetInfluences;c.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var q=0,X=G.length;q<X;q++){var Y=W[q];if(0!==Y){var Z=G[q].vertices;c.addScaledVector(p.subVectors(Z[z.a],I),Y),l.addScaledVector(f.subVectors(Z[z.b],N),Y),h.addScaledVector(d.subVectors(Z[z.c],L),Y)}}c.add(I),l.add(N),h.add(L),I=c,N=l,L=h}if(x=e(this,n,s,I,N,L,b)){if(w){var K=w[V];v.copy(K[0]),m.copy(K[1]),y.copy(K[2]),x.uv=t(b,I,N,L,v,m,y)}x.face=z,x.faceIndex=V,o.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ie.prototype=Object.create(zt.prototype),ie.prototype.constructor=ie,oe.prototype=Object.create(jt.prototype),oe.prototype.constructor=oe,oe.prototype.isCamera=!0,oe.prototype.getWorldDirection=function(){var t=new s;return function(e){var n=e||new a;return this.getWorldQuaternion(t),n.set(0,0,-1).applyQuaternion(t)}}(),oe.prototype.lookAt=function(){var t=new o;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),oe.prototype.clone=function(){return(new this.constructor).copy(this)},oe.prototype.copy=function(t){return jt.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},se.prototype=Object.assign(Object.create(oe.prototype),{constructor:se,isPerspectiveCamera:!0,copy:function(t){return oe.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(e){var n=.5*this.getFilmHeight()/e;this.fov=2*t.Math.RAD2DEG*Math.atan(n),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*t.Math.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*t.Math.RAD2DEG*Math.atan(Math.tan(.5*t.Math.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,n=e*Math.tan(.5*t.Math.DEG2RAD*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i,s=this.view;if(null!==s){var a=s.fullWidth,u=s.fullHeight;o+=s.offsetX*i/a,n-=s.offsetY*r/u,i*=s.width/a,r*=s.height/u}var c=this.filmOffset;0!==c&&(o+=e*c/this.getFilmWidth()),this.projectionMatrix.makeFrustum(o,o+i,n-r,n,e,this.far)},toJSON:function(t){var e=jt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),ae.prototype=Object.assign(Object.create(oe.prototype),{constructor:ae,isOrthographicCamera:!0,copy:function(t){return oe.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){this.view={fullWidth:t,fullHeight:e,offsetX:n,offsetY:r,width:i,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,s=r+e,a=r-e;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;i+=l*(this.view.offsetX/u),o=i+l*(this.view.width/u),s-=h*(this.view.offsetY/c),a=s-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far)},toJSON:function(t){var e=jt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),ce.prototype.isFogExp2=!0,ce.prototype.clone=function(){return new ce(this.color.getHex(),this.density)},ce.prototype.toJSON=function(t){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},le.prototype.isFog=!0,le.prototype.clone=function(){return new le(this.color.getHex(),this.near,this.far)},le.prototype.toJSON=function(t){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},he.prototype=Object.create(jt.prototype),he.prototype.constructor=he,he.prototype.copy=function(t,e){return jt.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},he.prototype.toJSON=function(t){var e=jt.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},pe.prototype=Object.assign(Object.create(jt.prototype),{constructor:pe,isLensFlare:!0,copy:function(t){jt.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},add:function(t,e,n,r,i,o){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===i&&(i=new $(16777215)),void 0===r&&(r=Ai),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:i,blending:r})},updateLensFlares:function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<n;t++)e=this.lensFlares[t],e.x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)}}),fe.prototype=Object.create(K.prototype),fe.prototype.constructor=fe,fe.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},de.prototype=Object.assign(Object.create(jt.prototype),{constructor:de,isSprite:!0,raycast:function(){var t=new a;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.distanceSqToPoint(t),i=this.scale.x*this.scale.y/4;r>i||n.push({distance:Math.sqrt(r),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ve.prototype=Object.assign(Object.create(jt.prototype),{constructor:ve,copy:function(t){jt.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);n.splice(r,0,{distance:e,object:t}),this.add(t)},getObjectForDistance:function(t){for(var e=this.levels,n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new a;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(t);this.getObjectForDistance(r).raycast(e,n)}}(),update:function(){var t=new a,e=new a;return function(n){var r=this.levels;if(r.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var i=t.distanceTo(e);r[0].object.visible=!0;for(var o=1,s=r.length;o<s&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<s;o++)r[o].object.visible=!1}}}(),toJSON:function(t){var e=jt.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),me.prototype=Object.create(r.prototype),me.prototype.constructor=me,me.prototype.isDataTexture=!0,Object.assign(ye.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new o;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t,e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(var e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new o;return function(){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;t.multiplyMatrices(r,this.boneInverses[e]),t.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ye(this.bones,this.boneInverses,this.useVertexTexture)}}),ge.prototype=Object.assign(Object.create(jt.prototype),{constructor:ge,isBone:!0,copy:function(t){return jt.prototype.copy.call(this,t),this.skin=t.skin,this}}),be.prototype=Object.assign(Object.create(re.prototype),{constructor:be,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t],n=1/e.lengthManhattan();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var r=new X,i=this.geometry.attributes.skinWeight,t=0;t<i.count;t++){r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t);var n=1/r.lengthManhattan();n!==1/0?r.multiplyScalar(n):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(t){re.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_e.prototype=Object.create(K.prototype),_e.prototype.constructor=_e,_e.prototype.isLineBasicMaterial=!0,_e.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},we.prototype=Object.assign(Object.create(jt.prototype),{constructor:we,isLine:!0,raycast:function(){var t=new o,e=new $t,n=new nt;return function(r,i){var o=r.linePrecision,s=o*o,u=this.geometry,c=this.matrixWorld;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),r.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var l=new a,h=new a,p=new a,f=new a,d=this&&this.isLineSegments?2:1;if(u&&u.isBufferGeometry){var v=u.index,m=u.attributes,y=m.position.array;if(null!==v)for(var g=v.array,b=0,_=g.length-1;b<_;b+=d){var w=g[b],x=g[b+1];l.fromArray(y,3*w),h.fromArray(y,3*x);var E=e.distanceSqToSegment(l,h,f,p);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,_=y.length/3-1;b<_;b+=d){l.fromArray(y,3*b),h.fromArray(y,3*b+3);var E=e.distanceSqToSegment(l,h,f,p);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(u&&u.isGeometry)for(var T=u.vertices,M=T.length,b=0;b<M-1;b+=d){var E=e.distanceSqToSegment(T[b],T[b+1],f,p);if(!(E>s)){f.applyMatrix4(this.matrixWorld);var S=r.ray.origin.distanceTo(f);S<r.near||S>r.far||i.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),xe.prototype=Object.assign(Object.create(we.prototype),{constructor:xe,isLineSegments:!0}),Ee.prototype=Object.create(K.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isPointsMaterial=!0,Ee.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this},Se.prototype=Object.assign(Object.create(jt.prototype),{constructor:Se,isPoints:!0,raycast:function(){var t=new o,e=new $t,n=new nt;return function(r,i){function o(t,n){var o=e.distanceSqToPoint(t);if(o<p){var a=e.closestPointToPoint(t);a.applyMatrix4(c);var u=r.ray.origin.distanceTo(a);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:a.clone(),index:n,face:null,object:s})}}var s=this,u=this.geometry,c=this.matrixWorld,l=r.params.Points.threshold;if(null===u.boundingSphere&&u.computeBoundingSphere(),n.copy(u.boundingSphere),n.applyMatrix4(c),r.ray.intersectsSphere(n)!==!1){t.getInverse(c),e.copy(r.ray).applyMatrix4(t);var h=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,f=new a;if(u&&u.isBufferGeometry){var d=u.index,v=u.attributes,m=v.position.array;if(null!==d)for(var y=d.array,g=0,b=y.length;g<b;g++){var _=y[g];f.fromArray(m,3*_),o(f,_)}else for(var g=0,w=m.length/3;g<w;g++)f.fromArray(m,3*g),o(f,g)}else for(var x=u.vertices,g=0,w=x.length;g<w;g++)o(x[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Te.prototype=Object.assign(Object.create(jt.prototype),{constructor:Te}),Me.prototype=Object.create(r.prototype),Me.prototype.constructor=Me,Ce.prototype=Object.create(r.prototype),Ce.prototype.constructor=Ce,Ce.prototype.isCompressedTexture=!0,Ae.prototype=Object.create(r.prototype),Ae.prototype.constructor=Ae,Oe.prototype=Object.create(r.prototype),Oe.prototype.constructor=Oe,Oe.prototype.isDepthTexture=!0,Pe.prototype=Object.create(J.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isShadowMaterial=!0,Re.prototype=Object.create(J.prototype),Re.prototype.constructor=Re,Re.prototype.isRawShaderMaterial=!0,Ie.prototype={constructor:Ie,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var o=n[r].toJSON(t);delete o.metadata,e.materials.push(o)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},Ne.prototype=Object.create(K.prototype),Ne.prototype.constructor=Ne,Ne.prototype.isMeshStandardMaterial=!0,Ne.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Le.prototype=Object.create(Ne.prototype),Le.prototype.constructor=Le,Le.prototype.isMeshPhysicalMaterial=!0,Le.prototype.copy=function(t){return Ne.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},ke.prototype=Object.create(K.prototype),ke.prototype.constructor=ke,ke.prototype.isMeshPhongMaterial=!0,ke.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},De.prototype=Object.create(K.prototype),De.prototype.constructor=De,De.prototype.isMeshNormalMaterial=!0,De.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},je.prototype=Object.create(K.prototype),je.prototype.constructor=je,je.prototype.isMeshLambertMaterial=!0,je.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Fe.prototype=Object.create(K.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isLineDashedMaterial=!0,Fe.prototype.copy=function(t){return K.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this},t.Cache={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},t.DefaultLoadingManager=new Ue,Object.assign(Ve.prototype,{load:function(e,n,r,i){void 0!==this.path&&(e=this.path+e);var o=this,s=t.Cache.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){n&&n(s),o.manager.itemEnd(e)},0),s;var a=new XMLHttpRequest;return a.open("GET",e,!0),a.addEventListener("load",function(r){var s=r.target.response;t.Cache.add(e,s),200===this.status?(n&&n(s),o.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),n&&n(s),o.manager.itemEnd(e)):(i&&i(r),o.manager.itemError(e))},!1),void 0!==r&&a.addEventListener("progress",function(t){r(t)},!1),a.addEventListener("error",function(t){i&&i(t),o.manager.itemError(e)},!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType("text/plain"),a.send(null),o.manager.itemStart(e),a},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this}}),Object.assign(Be.prototype,{load:function(t,e,n,r){function i(i){u.load(t[i],function(t){var n=o._parser(t,!0);s[i]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=Mo),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,r)}var o=this,s=[],a=new Ce;a.image=s;var u=new Ve(this.manager);if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,l=0,h=t.length;l<h;++l)i(l);else u.load(t,function(t){var n=o._parser(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,i=0;i<r;i++){s[i]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)s[i].mipmaps.push(n.mipmaps[i*n.mipmapCount+u]),s[i].format=n.format,s[i].width=n.width,s[i].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Mo),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,r);return a},setPath:function(t){return this.path=t,this}});var Du=ze;Object.assign(ze.prototype,{load:function(t,e,n,r){var i=this,o=new me,s=new Ve(this.manager);return s.setResponseType("arraybuffer"),s.load(t,function(t){var n=i._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:wo,o.wrapT=void 0!==n.wrapT?n.wrapT:wo,o.magFilter=void 0!==n.magFilter?n.magFilter:Mo,o.minFilter=void 0!==n.minFilter?n.minFilter:Ao,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Mo),o.needsUpdate=!0,e&&e(o,n))},n,r),o}}),Object.assign(He.prototype,{load:function(t,e,n,r){var i=this,o=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(o.onload=function(){URL.revokeObjectURL(o.src),e&&e(o),i.manager.itemEnd(t)},0===t.indexOf("data:"))o.src=t;else{var s=new Ve;s.setPath(this.path),s.setResponseType("blob"),s.setWithCredentials(this.withCredentials),s.load(t,function(t){o.src=URL.createObjectURL(t)},n,r)}return i.manager.itemStart(t),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ge.prototype,{load:function(t,e,n,r){function i(n){s.load(t[n],function(t){o.images[n]=t,a++,6===a&&(o.needsUpdate=!0,e&&e(o))},void 0,r)}var o=new h,s=new He(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);for(var a=0,u=0;u<t.length;++u)i(u);return o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(We.prototype,{load:function(t,e,n,i){var o=new r,s=new He(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setWithCredentials(this.withCredentials),s.setPath(this.path),s.load(t,function(n){var r=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=r?zo:Ho,o.image=n,o.needsUpdate=!0,void 0!==e&&e(o)},n,i),o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this}}),qe.prototype=Object.assign(Object.create(jt.prototype),{constructor:qe,isLight:!0,copy:function(t){return jt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=jt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Xe.prototype=Object.assign(Object.create(qe.prototype),{constructor:Xe,isHemisphereLight:!0,copy:function(t){return qe.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ye.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,
this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Ze.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Ze,isSpotLightShadow:!0,update:function(e){var n=2*t.Math.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||500,o=this.camera;n===o.fov&&r===o.aspect&&i===o.far||(o.fov=n,o.aspect=r,o.far=i,o.updateProjectionMatrix())}}),Ke.prototype=Object.assign(Object.create(qe.prototype),{constructor:Ke,isSpotLight:!0,copy:function(t){return qe.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Qe.prototype=Object.assign(Object.create(qe.prototype),{constructor:Qe,isPointLight:!0,copy:function(t){return qe.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Je.prototype=Object.assign(Object.create(Ye.prototype),{constructor:Je}),$e.prototype=Object.assign(Object.create(qe.prototype),{constructor:$e,isDirectionalLight:!0,copy:function(t){return qe.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),tn.prototype=Object.assign(Object.create(qe.prototype),{constructor:tn,isAmbientLight:!0}),t.AnimationUtils={arraySlice:function(e,n,r){return t.AnimationUtils.isTypedArray(e)?new e.constructor(e.subarray(n,r)):e.slice(n,r)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,r=new Array(n),i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,s=0;s!==r;++o)for(var a=n[o]*e,u=0;u!==e;++u)i[s++]=t[a+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var s=o[r];if(void 0!==s)if(Array.isArray(s)){do s=o[r],void 0!==s&&(e.push(o.time),n.push.apply(n,s)),o=t[i++];while(void 0!==o)}else if(void 0!==s.toArray){do s=o[r],void 0!==s&&(e.push(o.time),s.toArray(n,n.length)),o=t[i++];while(void 0!==o)}else do s=o[r],void 0!==s&&(e.push(o.time),n.push(s)),o=t[i++];while(void 0!==o)}}},en.prototype={constructor:en,evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var s=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===s)break;if(i=r,r=e[++n],t<r)break e}o=e.length;break n}{if(t>=i)break t;var a=e[1];t<a&&(n=2,i=a);for(var s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===s)break;if(r=i,i=e[--n-1],t>=i)break e}o=n,n=0}}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],i=e[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(t,e,n,r){throw new Error("call to abstract method")},intervalChanged_:function(t,e,n){}},Object.assign(en.prototype,{beforeStart_:en.prototype.copySampleValue_,afterEnd_:en.prototype.copySampleValue_}),nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,DefaultSettings_:{endingStart:ls,endingEnd:ls},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case hs:i=t,s=2*e-n;break;case ps:i=r.length-2,s=e+r[i]-r[i+1];break;default:i=t,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case hs:o=t,a=2*n-e;break;case ps:o=1,a=n+r[1]-r[0];break;default:o=t-1,a=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-s),this._weightNext=u/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,u=a-s,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-e)/(r-e),d=f*f,v=d*f,m=-h*v+2*h*d-h*f,y=(1+h)*v+(-1.5-2*h)*d+(-.5+h)*f+1,g=(-1-p)*v+(1.5+p)*d+.5*f,b=p*v-p*d,_=0;_!==s;++_)i[_]=m*o[c+_]+y*o[u+_]+g*o[a+_]+b*o[l+_];return i}}),rn.prototype=Object.assign(Object.create(en.prototype),{constructor:rn,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,u=a-s,c=(n-e)/(r-e),l=1-c,h=0;h!==s;++h)i[h]=o[u+h]*l+o[a+h]*c;return i}}),on.prototype=Object.assign(Object.create(en.prototype),{constructor:on,interpolate_:function(t,e,n,r){return this.copySampleValue_(t-1)}});var ju;ju={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:us,InterpolantFactoryMethodDiscrete:function(t){return new on(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new rn(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new nn(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case as:e=this.InterpolantFactoryMethodDiscrete;break;case us:e=this.InterpolantFactoryMethodLinear;break;case cs:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(n)}this.createInterpolant=e},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return as;case this.InterpolantFactoryMethodLinear:return us;case this.InterpolantFactoryMethodSmooth:return cs}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(e,n){for(var r=this.times,i=r.length,o=0,s=i-1;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>n;)--s;if(++s,0!==o||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);var a=this.getValueSize();this.times=t.AnimationUtils.arraySlice(r,o,s),this.values=t.AnimationUtils.arraySlice(this.values,o*a,s*a)}return this},validate:function(){var e=!0,n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,i=this.values,o=r.length;0===o&&(console.error("track is empty",this),e=!1);for(var s=null,a=0;a!==o;a++){var u=r[a];if("number"==typeof u&&isNaN(u)){console.error("time is not a valid number",this,a,u),e=!1;break}if(null!==s&&s>u){console.error("out of order keys",this,a,u,s),e=!1;break}s=u}if(void 0!==i&&t.AnimationUtils.isTypedArray(i))for(var a=0,c=i.length;a!==c;++a){var l=i[a];if(isNaN(l)){console.error("value is not a valid number",this,a,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,n=this.values,r=this.getValueSize(),i=1,o=1,s=e.length-1;o<=s;++o){var a=!1,u=e[o],c=e[o+1];if(u!==c&&(1!==o||u!==u[0]))for(var l=o*r,h=l-r,p=l+r,f=0;f!==r;++f){var d=n[l+f];if(d!==n[h+f]||d!==n[p+f]){a=!0;break}}if(a){if(o!==i){e[i]=e[o];for(var v=o*r,m=i*r,f=0;f!==r;++f)n[m+f]=n[v+f]}++i}}return i!==e.length&&(this.times=t.AnimationUtils.arraySlice(e,0,i),this.values=t.AnimationUtils.arraySlice(n,0,i*r)),this}},an.prototype=Object.assign(Object.create(ju),{constructor:an,ValueTypeName:"vector"}),un.prototype=Object.assign(Object.create(en.prototype),{constructor:un,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,u=t*a,c=(n-e)/(r-e),l=u+a;u!==l;u+=4)s.slerpFlat(i,0,o,u-a,o,u,c);return i}}),cn.prototype=Object.assign(Object.create(ju),{constructor:cn,ValueTypeName:"quaternion",DefaultInterpolation:us,InterpolantFactoryMethodLinear:function(t){return new un(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ln.prototype=Object.assign(Object.create(ju),{constructor:ln,ValueTypeName:"number"}),hn.prototype=Object.assign(Object.create(ju),{constructor:hn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:as,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pn.prototype=Object.assign(Object.create(ju),{constructor:pn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:as,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fn.prototype=Object.assign(Object.create(ju),{constructor:fn,ValueTypeName:"color"}),dn.prototype=ju,ju.constructor=dn,Object.assign(dn,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var n=dn._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];t.AnimationUtils.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==n.parse?n.parse(e):new n(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var n,r=e.constructor;if(void 0!==r.toJSON)n=r.toJSON(e);else{n={name:e.name,times:t.AnimationUtils.convertArray(e.times,Array),values:t.AnimationUtils.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ln;case"vector":case"vector2":case"vector3":case"vector4":return an;case"color":return fn;case"quaternion":return cn;case"bool":case"boolean":return pn;case"string":return hn}throw new Error("Unsupported typeName: "+t)}}),vn.prototype={constructor:vn,resetDuration:function(){for(var t=this.tracks,e=0,n=0,r=t.length;n!==r;++n){var i=this.tracks[n];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(vn,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(dn.parse(n[i]).scale(r));return new vn(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e},i=0,o=n.length;i!==o;++i)e.push(dn.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,n,r,i){for(var o=n.length,s=[],a=0;a<o;a++){var u=[],c=[];u.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);var l=t.AnimationUtils.getKeyframeOrder(u);u=t.AnimationUtils.sortedArray(u,1,l),c=t.AnimationUtils.sortedArray(c,1,l),i||0!==u[0]||(u.push(o),c.push(c[0])),s.push(new ln(".morphTargetInfluences["+n[a].name+"]",u,c).scale(1/r))}return new vn(e,(-1),s)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,s=t.length;o<s;o++){var a=t[o],u=a.name.match(i);if(u&&u.length>1){var c=u[1],l=r[c];l||(r[c]=l=[]),l.push(a)}}var h=[];for(var c in r)h.push(vn.CreateFromMorphTargetSequence(c,r[c],e,n));return h},parseAnimation:function(e,n,r){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var i=function(e,n,r,i,o){if(0!==r.length){var s=[],a=[];t.AnimationUtils.flattenJSON(r,s,a,i),0!==s.length&&o.push(new e(n,s,a))}},o=[],s=e.name||"default",a=e.length||-1,u=e.fps||30,c=e.hierarchy||[],l=0;l<c.length;l++){var h=c[l].keys;if(h&&0!==h.length)if(h[0].morphTargets){for(var p={},f=0;f<h.length;f++)if(h[f].morphTargets)for(var d=0;d<h[f].morphTargets.length;d++)p[h[f].morphTargets[d]]=-1;for(var v in p){for(var m=[],y=[],d=0;d!==h[f].morphTargets.length;++d){var g=h[f];m.push(g.time),y.push(g.morphTarget===v?1:0)}o.push(new ln(".morphTargetInfluence["+v+"]",m,y))}a=p.length*(u||1)}else{var b=".bones["+n[l].name+"]";i(an,b+".position",h,"pos",o),i(cn,b+".quaternion",h,"rot",o),i(an,b+".scale",h,"scl",o)}}if(0===o.length)return null;var _=new vn(s,a,o);return _}}),Object.assign(mn.prototype,{load:function(t,e,n,r){var i=this,o=new Ve(i.manager);o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return void 0===r[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),r[t]}var r=this.textures,i=new THREE[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.uniforms&&(i.uniforms=t.uniforms),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.shading&&(i.shading=t.shading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalScale){var o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=(new n).fromArray(o)}if(void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.materials)for(var s=0,a=t.materials.length;s<a;s++)i.materials.push(this.parse(t.materials[s]));return i}}),Object.assign(yn.prototype,{load:function(t,e,n,r){var i=this,o=new Ve(i.manager);o.load(t,function(t){e(i.parse(JSON.parse(t)))},n,r)},parse:function(t){var e=new zt,n=t.data.index,r={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var i=new r[n.type](n.array);e.setIndex(new Et(i,1))}var o=t.data.attributes;for(var s in o){var u=o[s],i=new r[u.type](u.array);e.addAttribute(s,new Et(i,u.itemSize,u.normalized))}var c=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==c)for(var l=0,h=c.length;l!==h;++l){var p=c[l];e.addGroup(p.start,p.count,p.materialIndex)}var f=t.data.boundingSphere;if(void 0!==f){var d=new a;void 0!==f.center&&d.fromArray(f.center),e.boundingSphere=new nt(d,f.radius)}return e}}),gn.prototype={constructor:gn,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,n){for(var r=[],i=0;i<t.length;++i)r[i]=this.createMaterial(t[i],e,n);return r},createMaterial:function(){var e,n,r;return function(i,o,s){function a(e,r,i,a,c){var l,h=o+e,p=gn.Handlers.get(h);null!==p?l=p.load(h):(n.setCrossOrigin(s),l=n.load(h)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=_o),1!==r[1]&&(l.wrapT=_o)),void 0!==i&&l.offset.fromArray(i),void 0!==a&&("repeat"===a[0]&&(l.wrapS=_o),"mirror"===a[0]&&(l.wrapS=xo),"repeat"===a[1]&&(l.wrapT=_o),"mirror"===a[1]&&(l.wrapT=xo)),void 0!==c&&(l.anisotropy=c);var f=t.Math.generateUUID();return u[f]=l,f}void 0===e&&(e=new $),void 0===n&&(n=new We),void 0===r&&(r=new mn);var u={},c={uuid:t.Math.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=THREE[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(h).getHex();break;case"colorSpecular":c.specular=e.fromArray(h).getHex();break;case"colorEmissive":c.emissive=e.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=a(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=a(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=a(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=a(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=a(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=a(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[h,h];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=a(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=a(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=a(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=a(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=_i;break;case"doubleSided":c.side=wi;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":h===!0&&(c.vertexColors=Mi),"face"===h&&(c.vertexColors=Ti);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(u),r.parse(c)}}()},gn.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,r=e.length;n<r;n+=2){var i=e[n],o=e[n+1];if(i.test(t))return o}return null}},Object.assign(bn.prototype,{load:function(t,e,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:gn.prototype.extractUrlBase(t),s=new Ve(this.manager);s.setWithCredentials(this.withCredentials),s.load(t,function(n){var r=JSON.parse(n),s=r.metadata;if(void 0!==s){var a=s.type;if(void 0!==a){if("object"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.ObjectLoader instead.");if("scene"===a.toLowerCase())return void console.error("THREE.JSONLoader: "+t+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(r,o);e(u.geometry,u.materials)},n,r)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){function r(e){function r(t,e){return t&1<<e}var i,o,s,c,l,h,p,f,d,v,m,y,g,b,_,w,x,E,S,T,M,C,A,O,P,R,I,N=t.faces,L=t.vertices,k=t.normals,D=t.colors,j=0;if(void 0!==t.uvs){for(i=0;i<t.uvs.length;i++)t.uvs[i].length&&j++;for(i=0;i<j;i++)u.faceVertexUvs[i]=[]}for(c=0,l=L.length;c<l;)E=new a,E.x=L[c++]*e,E.y=L[c++]*e,E.z=L[c++]*e,u.vertices.push(E);for(c=0,l=N.length;c<l;)if(v=N[c++],m=r(v,0),y=r(v,1),g=r(v,3),b=r(v,4),_=r(v,5),w=r(v,6),x=r(v,7),m){if(T=new Lt,T.a=N[c],T.b=N[c+1],T.c=N[c+3],M=new Lt,M.a=N[c+1],M.b=N[c+2],M.c=N[c+3],c+=4,y&&(d=N[c++],T.materialIndex=d,M.materialIndex=d),s=u.faces.length,g)for(i=0;i<j;i++)for(O=t.uvs[i],u.faceVertexUvs[i][s]=[],u.faceVertexUvs[i][s+1]=[],o=0;o<4;o++)f=N[c++],R=O[2*f],I=O[2*f+1],P=new n(R,I),2!==o&&u.faceVertexUvs[i][s].push(P),0!==o&&u.faceVertexUvs[i][s+1].push(P);if(b&&(p=3*N[c++],T.normal.set(k[p++],k[p++],k[p]),M.normal.copy(T.normal)),_)for(i=0;i<4;i++)p=3*N[c++],A=new a(k[p++],k[p++],k[p]),2!==i&&T.vertexNormals.push(A),0!==i&&M.vertexNormals.push(A);if(w&&(h=N[c++],C=D[h],T.color.setHex(C),M.color.setHex(C)),x)for(i=0;i<4;i++)h=N[c++],C=D[h],2!==i&&T.vertexColors.push(new $(C)),0!==i&&M.vertexColors.push(new $(C));u.faces.push(T),u.faces.push(M)}else{if(S=new Lt,S.a=N[c++],S.b=N[c++],S.c=N[c++],y&&(d=N[c++],S.materialIndex=d),s=u.faces.length,g)for(i=0;i<j;i++)for(O=t.uvs[i],u.faceVertexUvs[i][s]=[],o=0;o<3;o++)f=N[c++],R=O[2*f],I=O[2*f+1],P=new n(R,I),u.faceVertexUvs[i][s].push(P);if(b&&(p=3*N[c++],S.normal.set(k[p++],k[p++],k[p])),_)for(i=0;i<3;i++)p=3*N[c++],A=new a(k[p++],k[p++],k[p]),S.vertexNormals.push(A);if(w&&(h=N[c++],S.color.setHex(D[h])),x)for(i=0;i<3;i++)h=N[c++],S.vertexColors.push(new $(D[h]));u.faces.push(S)}}function i(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var n=0,r=t.skinWeights.length;n<r;n+=e){var i=t.skinWeights[n],o=e>1?t.skinWeights[n+1]:0,s=e>2?t.skinWeights[n+2]:0,a=e>3?t.skinWeights[n+3]:0;u.skinWeights.push(new X(i,o,s,a))}if(t.skinIndices)for(var n=0,r=t.skinIndices.length;n<r;n+=e){var c=t.skinIndices[n],l=e>1?t.skinIndices[n+1]:0,h=e>2?t.skinIndices[n+2]:0,p=e>3?t.skinIndices[n+3]:0;u.skinIndices.push(new X(c,l,h,p))}u.bones=t.bones,u.bones&&u.bones.length>0&&(u.skinWeights.length!==u.skinIndices.length||u.skinIndices.length!==u.vertices.length)&&console.warn("When skinning, number of vertices ("+u.vertices.length+"), skinIndices ("+u.skinIndices.length+"), and skinWeights ("+u.skinWeights.length+") should match.")}function o(e){if(void 0!==t.morphTargets)for(var n=0,r=t.morphTargets.length;n<r;n++){u.morphTargets[n]={},u.morphTargets[n].name=t.morphTargets[n].name,u.morphTargets[n].vertices=[];for(var i=u.morphTargets[n].vertices,o=t.morphTargets[n].vertices,s=0,c=o.length;s<c;s+=3){var l=new a;l.x=o[s]*e,l.y=o[s+1]*e,l.z=o[s+2]*e,i.push(l)}}if(void 0!==t.morphColors&&t.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=u.faces,p=t.morphColors[0].colors,n=0,r=h.length;n<r;n++)h[n].color.fromArray(p,3*n)}}function s(){var e=[],n=[];void 0!==t.animation&&n.push(t.animation),void 0!==t.animations&&(t.animations.length?n=n.concat(t.animations):n.push(t.animations));for(var r=0;r<n.length;r++){var i=vn.parseAnimation(n[r],u.bones);i&&e.push(i)}if(u.morphTargets){var o=vn.CreateClipsFromMorphTargetSequences(u.morphTargets,10);e=e.concat(o)}e.length>0&&(u.animations=e)}var u=new Ut,c=void 0!==t.scale?1/t.scale:1;if(r(c),i(),o(c),s(),u.computeFaceNormals(),u.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:u};var l=gn.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:u,materials:l}}}),Object.assign(_n.prototype,{load:function(t,e,n,r){""===this.texturePath&&(this.texturePath=t.substring(0,t.lastIndexOf("/")+1));var i=this,o=new Ve(i.manager);o.load(t,function(t){i.parse(JSON.parse(t),e)},n,r)},setTexturePath:function(t){this.texturePath=t},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(t,e){var n=this.parseGeometries(t.geometries),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),i=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,i),s=this.parseObject(t.object,n,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseGeometries:function(t){var e={};if(void 0!==t)for(var n=new bn,r=new yn,i=0,o=t.length;i<o;i++){var s,a=t[i];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new THREE[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new THREE[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new THREE[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new THREE[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new THREE[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new THREE[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new THREE[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new THREE[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new THREE[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new THREE[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new THREE[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":s=r.parse(a);break;case"Geometry":s=n.parse(a.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),e[a.uuid]=s}return e},parseMaterials:function(t,e){var n={};if(void 0!==t){var r=new mn;r.setTextures(e);for(var i=0,o=t.length;i<o;i++){var s=r.parse(t[i]);n[s.uuid]=s}}return n},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=vn.parse(t[n]);e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),s.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t)})}var r=this,i={};if(void 0!==t&&t.length>0){var o=new Ue(e),s=new He(o);s.setCrossOrigin(this.crossOrigin);for(var a=0,u=t.length;a<u;a++){var c=t[a],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.texturePath+c.url;i[c.uuid]=n(l)}}return i},parseTextures:function(t,e){function n(t){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),THREE[t])}var i={};if(void 0!==t)for(var o=0,s=t.length;o<s;o++){var a=t[o];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var u=new r(e[a.image]);u.needsUpdate=!0,u.uuid=a.uuid,void 0!==a.name&&(u.name=a.name),void 0!==a.mapping&&(u.mapping=n(a.mapping)),void 0!==a.offset&&u.offset.fromArray(a.offset),void 0!==a.repeat&&u.repeat.fromArray(a.repeat),void 0!==a.wrap&&(u.wrapS=n(a.wrap[0]),u.wrapT=n(a.wrap[1])),void 0!==a.minFilter&&(u.minFilter=n(a.minFilter)),void 0!==a.magFilter&&(u.magFilter=n(a.magFilter)),void 0!==a.anisotropy&&(u.anisotropy=a.anisotropy),void 0!==a.flipY&&(u.flipY=a.flipY),i[a.uuid]=u}return i},parseObject:function(){var t=new o;return function(e,n,r){function i(t){return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),n[t]}function o(t){if(void 0!==t)return void 0===r[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),r[t]}var s;switch(e.type){case"Scene":s=new he,void 0!==e.background&&Number.isInteger(e.background)&&(s.background=new THREE.Color(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new le(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new ce(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new se(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new ae(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":s=new tn(e.color,e.intensity);break;case"DirectionalLight":s=new $e(e.color,e.intensity);break;case"PointLight":s=new Qe(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":s=new Ke(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Xe(e.color,e.groundColor,e.intensity);break;case"Mesh":var a=i(e.geometry),u=o(e.material);s=a.bones&&a.bones.length>0?new be(a,u):new re(a,u);break;case"LOD":s=new ve;break;case"Line":s=new we(i(e.geometry),o(e.material),e.mode);break;case"LineSegments":s=new xe(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":s=new Se(i(e.geometry),o(e.material));break;case"Sprite":s=new de(o(e.material));break;case"Group":s=new Te;break;default:s=new jt}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(t.fromArray(e.matrix),t.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),
void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.children)for(var c in e.children)s.add(this.parseObject(e.children[c],n,r));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var p=l[h],c=s.getObjectByProperty("uuid",p.object);void 0!==c&&s.addLevel(c,p.distance)}return s}}()}),t.ShapeUtils={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},triangulate:function(){function e(t,e,n,r,i,o){var s,a,u,c,l,h,p,f,d;if(a=t[o[e]].x,u=t[o[e]].y,c=t[o[n]].x,l=t[o[n]].y,h=t[o[r]].x,p=t[o[r]].y,Number.EPSILON>(c-a)*(p-u)-(l-u)*(h-a))return!1;var v,m,y,g,b,_,w,x,E,S,T,M,C,A,O;for(v=h-c,m=p-l,y=a-h,g=u-p,b=c-a,_=l-u,s=0;s<i;s++)if(f=t[o[s]].x,d=t[o[s]].y,!(f===a&&d===u||f===c&&d===l||f===h&&d===p)&&(w=f-a,x=d-u,E=f-c,S=d-l,T=f-h,M=d-p,O=v*S-m*E,C=b*x-_*w,A=y*M-g*T,O>=-Number.EPSILON&&A>=-Number.EPSILON&&C>=-Number.EPSILON))return!1;return!0}return function(n,r){var i=n.length;if(i<3)return null;var o,s,a,u=[],c=[],l=[];if(t.ShapeUtils.area(n)>0)for(s=0;s<i;s++)c[s]=s;else for(s=0;s<i;s++)c[s]=i-1-s;var h=i,p=2*h;for(s=h-1;h>2;){if(p--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?l:u;if(o=s,h<=o&&(o=0),s=o+1,h<=s&&(s=0),a=s+1,h<=a&&(a=0),e(n,o,s,a,h,c)){var f,d,v,m,y;for(f=c[o],d=c[s],v=c[a],u.push([n[f],n[d],n[v]]),l.push([c[o],c[s],c[a]]),m=s,y=s+1;y<h;m++,y++)c[m]=c[y];h--,p=2*h}}return r?l:u}}(),triangulateShape:function(e,n){function r(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function i(t,e,n){return t.x!==e.x?t.x<e.x?t.x<=n.x&&n.x<=e.x:e.x<=n.x&&n.x<=t.x:t.y<e.y?t.y<=n.y&&n.y<=e.y:e.y<=n.y&&n.y<=t.y}function o(t,e,n,r,o){var s=e.x-t.x,a=e.y-t.y,u=r.x-n.x,c=r.y-n.y,l=t.x-n.x,h=t.y-n.y,p=a*u-s*c,f=a*l-s*h;if(Math.abs(p)>Number.EPSILON){var d;if(p>0){if(f<0||f>p)return[];if(d=c*l-u*h,d<0||d>p)return[]}else{if(f>0||f<p)return[];if(d=c*l-u*h,d>0||d<p)return[]}if(0===d)return!o||0!==f&&f!==p?[t]:[];if(d===p)return!o||0!==f&&f!==p?[e]:[];if(0===f)return[n];if(f===p)return[r];var v=d/p;return[{x:t.x+v*s,y:t.y+v*a}]}if(0!==f||c*l!==u*h)return[];var m=0===s&&0===a,y=0===u&&0===c;if(m&&y)return t.x!==n.x||t.y!==n.y?[]:[t];if(m)return i(n,r,t)?[t]:[];if(y)return i(t,e,n)?[n]:[];var g,b,_,w,x,E,S,T;return 0!==s?(t.x<e.x?(g=t,_=t.x,b=e,w=e.x):(g=e,_=e.x,b=t,w=t.x),n.x<r.x?(x=n,S=n.x,E=r,T=r.x):(x=r,S=r.x,E=n,T=n.x)):(t.y<e.y?(g=t,_=t.y,b=e,w=e.y):(g=e,_=e.y,b=t,w=t.y),n.y<r.y?(x=n,S=n.y,E=r,T=r.y):(x=r,S=r.y,E=n,T=n.y)),_<=S?w<S?[]:w===S?o?[]:[x]:w<=T?[x,b]:[x,E]:_>T?[]:_===T?o?[]:[g]:w<=T?[g,b]:[g,E]}function s(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=n.x-t.x,a=n.y-t.y,u=r.x-t.x,c=r.y-t.y,l=i*a-o*s,h=i*c-o*u;if(Math.abs(l)>Number.EPSILON){var p=u*a-c*s;return l>0?h>=0&&p>=0:h>=0||p>=0}return h>0}function a(t,e){function n(t,e){var n=g.length-1,r=t-1;r<0&&(r=n);var i=t+1;i>n&&(i=0);var o=s(g[t],g[r],g[i],a[e]);if(!o)return!1;var u=a.length-1,c=e-1;c<0&&(c=u);var l=e+1;return l>u&&(l=0),o=s(a[e],a[c],a[l],g[t]),!!o}function r(t,e){var n,r,i;for(n=0;n<g.length;n++)if(r=n+1,r%=g.length,i=o(t,e,g[n],g[r],!0),i.length>0)return!0;return!1}function i(t,n){var r,i,s,a,u;for(r=0;r<b.length;r++)for(i=e[b[r]],s=0;s<i.length;s++)if(a=s+1,a%=i.length,u=o(t,n,i[s],i[a],!0),u.length>0)return!0;return!1}for(var a,u,c,l,h,p,f,d,v,m,y,g=t.concat(),b=[],_=[],w=0,x=e.length;w<x;w++)b.push(w);for(var E=0,S=2*b.length;b.length>0;){if(S--,S<0){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(c=E;c<g.length;c++){l=g[c],u=-1;for(var w=0;w<b.length;w++)if(p=b[w],f=l.x+":"+l.y+":"+p,void 0===_[f]){a=e[p];for(var T=0;T<a.length;T++)if(h=a[T],n(c,T)&&!r(l,h)&&!i(l,h)){u=T,b.splice(w,1),d=g.slice(0,c+1),v=g.slice(c),m=a.slice(u),y=a.slice(0,u+1),g=d.concat(m).concat(y).concat(v),E=c;break}if(u>=0)break;_[f]=!0}if(u>=0)break}}return g}r(e),n.forEach(r);for(var u,c,l,h,p,f,d={},v=e.concat(),m=0,y=n.length;m<y;m++)Array.prototype.push.apply(v,n[m]);for(u=0,c=v.length;u<c;u++)p=v[u].x+":"+v[u].y,void 0!==d[p]&&console.warn("THREE.ShapeUtils: Duplicate point",p,u),d[p]=u;var g=a(e,n),b=t.ShapeUtils.triangulate(g,!1);for(u=0,c=b.length;u<c;u++)for(h=b[u],l=0;l<3;l++)p=h[l].x+":"+h[l].y,f=d[p],void 0!==f&&(h[l]=f);return b.concat()},isClockWise:function(e){return t.ShapeUtils.area(e)<0},b2:function(){function t(t,e){var n=1-t;return n*n*e}function e(t,e){return 2*(1-t)*t*e}function n(t,e){return t*t*e}return function(r,i,o,s){return t(r,i)+e(r,o)+n(r,s)}}(),b3:function(){function t(t,e){var n=1-t;return n*n*n*e}function e(t,e){var n=1-t;return 3*n*n*t*e}function n(t,e){var n=1-t;return 3*n*t*t*e}function r(t,e){return t*t*t*e}return function(i,o,s,a,u){return t(i,o)+e(i,s)+n(i,a)+r(i,u)}}()},wn.prototype={constructor:wn,getPoint:function(t){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t||(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t||(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e?e:t*r[o-1];for(var s,a=0,u=o-1;a<=u;)if(i=Math.floor(a+(u-a)/2),s=r[i]-n,s<0)a=i+1;else{if(!(s>0)){u=i;break}u=i-1}if(i=u,r[i]===n){var c=i/(o-1);return c}var l=r[i],h=r[i+1],p=h-l,f=(n-l)/p,c=(i+f)/(o-1);return c},getTangent:function(t){var e=1e-4,n=t-e,r=t+e;n<0&&(n=0),r>1&&(r=1);var i=this.getPoint(n),o=this.getPoint(r),s=o.clone().sub(i);return s.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)}},wn.create=function(t,e){return t.prototype=Object.create(wn.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},xn.prototype=Object.create(wn.prototype),xn.prototype.constructor=xn,xn.prototype.isLineCurve=!0,xn.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},xn.prototype.getPointAt=function(t){return this.getPoint(t)},xn.prototype.getTangent=function(t){var e=this.v2.clone().sub(this.v1);return e.normalize()},En.prototype=Object.assign(Object.create(wn.prototype),{constructor:En,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new xn(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],s=o.getLength(),a=0===s?0:1-i/s;return o.getPointAt(a)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t||(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],s=o&&o.isEllipseCurve?2*t:o&&o.isLineCurve?1:o&&o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s),u=0;u<a.length;u++){var c=a[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new Ut,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new a(i.x,i.y,i.z||0))}return e}}),Sn.prototype=Object.create(wn.prototype),Sn.prototype.constructor=Sn,Sn.prototype.isEllipseCurve=!0,Sn.prototype.getPoint=function(t){for(var e=2*Math.PI,r=this.aEndAngle-this.aStartAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=e;for(;r>e;)r-=e;r<Number.EPSILON&&(r=i?0:e),this.aClockwise!==!0||i||(r===e?r=-e:r-=e);var o=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(o),a=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),l=s-this.aX,h=a-this.aY;s=l*u-h*c+this.aX,a=l*c+h*u+this.aY}return new n(s,a)},t.CurveUtils={tangentQuadraticBezier:function(t,e,n,r){return 2*(1-t)*(n-e)+2*t*(r-n)},tangentCubicBezier:function(t,e,n,r,i){return-3*e*(1-t)*(1-t)+3*n*(1-t)*(1-t)-6*t*n*(1-t)+6*t*r*(1-t)-3*t*t*r+3*t*t*i},tangentSpline:function(t,e,n,r,i){var o=6*t*t-6*t,s=3*t*t-4*t+1,a=-6*t*t+6*t,u=3*t*t-2*t;return o+s+a+u},interpolate:function(t,e,n,r,i){var o=.5*(n-t),s=.5*(r-e),a=i*i,u=i*a;return(2*e-2*n+o+s)*u+(-3*e+3*n-2*o-s)*a+o*i+e}},Tn.prototype=Object.create(wn.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isSplineCurve=!0,Tn.prototype.getPoint=function(e){var r=this.points,i=(r.length-1)*e,o=Math.floor(i),s=i-o,a=r[0===o?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2],h=t.CurveUtils.interpolate;return new n(h(a.x,u.x,c.x,l.x,s),h(a.y,u.y,c.y,l.y,s))},Mn.prototype=Object.create(wn.prototype),Mn.prototype.constructor=Mn,Mn.prototype.getPoint=function(e){var r=t.ShapeUtils.b3;return new n(r(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},Mn.prototype.getTangent=function(e){var r=t.CurveUtils.tangentCubicBezier;return new n(r(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),r(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},Cn.prototype=Object.create(wn.prototype),Cn.prototype.constructor=Cn,Cn.prototype.getPoint=function(e){var r=t.ShapeUtils.b2;return new n(r(e,this.v0.x,this.v1.x,this.v2.x),r(e,this.v0.y,this.v1.y,this.v2.y))},Cn.prototype.getTangent=function(e){var r=t.CurveUtils.tangentQuadraticBezier;return new n(r(e,this.v0.x,this.v1.x,this.v2.x),r(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var Fu=Object.assign(Object.create(En.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var r=new xn(this.currentPoint.clone(),new n(t,e));this.curves.push(r),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,r,i){var o=new Cn(this.currentPoint.clone(),new n(t,e),new n(r,i));this.curves.push(o),this.currentPoint.set(r,i)},bezierCurveTo:function(t,e,r,i,o,s){var a=new Mn(this.currentPoint.clone(),new n(t,e),new n(r,i),new n(o,s));this.curves.push(a),this.currentPoint.set(o,s)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Tn(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,r,i,o){var s=this.currentPoint.x,a=this.currentPoint.y;this.absarc(t+s,e+a,n,r,i,o)},absarc:function(t,e,n,r,i,o){this.absellipse(t,e,n,n,r,i,o)},ellipse:function(t,e,n,r,i,o,s,a){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+u,e+c,n,r,i,o,s,a)},absellipse:function(t,e,n,r,i,o,s,a){var u=new Sn(t,e,n,r,i,o,s,a);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)}});An.prototype=Object.create(Ut.prototype),An.prototype.constructor=An,An.NoTaper=function(t){return 1},An.SinusoidalTaper=function(t){return Math.sin(Math.PI*t)},An.FrenetFrames=function(e,n,r){function i(){m[0]=new a,y[0]=new a,u=Number.MAX_VALUE,c=Math.abs(v[0].x),l=Math.abs(v[0].y),h=Math.abs(v[0].z),c<=u&&(u=c,d.set(1,0,0)),l<=u&&(u=l,d.set(0,1,0)),h<=u&&d.set(0,0,1),g.crossVectors(v[0],d).normalize(),m[0].crossVectors(v[0],g),y[0].crossVectors(v[0],m[0])}var s,u,c,l,h,p,f,d=new a,v=[],m=[],y=[],g=new a,b=new o,_=n+1;for(this.tangents=v,this.normals=m,this.binormals=y,p=0;p<_;p++)f=p/(_-1),v[p]=e.getTangentAt(f),v[p].normalize();for(i(),p=1;p<_;p++)m[p]=m[p-1].clone(),y[p]=y[p-1].clone(),g.crossVectors(v[p-1],v[p]),g.length()>Number.EPSILON&&(g.normalize(),s=Math.acos(t.Math.clamp(v[p-1].dot(v[p]),-1,1)),m[p].applyMatrix4(b.makeRotationAxis(g,s))),y[p].crossVectors(v[p],m[p]);if(r)for(s=Math.acos(t.Math.clamp(m[0].dot(m[_-1]),-1,1)),s/=_-1,v[0].dot(g.crossVectors(m[0],m[_-1]))>0&&(s=-s),p=1;p<_;p++)m[p].applyMatrix4(b.makeRotationAxis(v[p],s*p)),y[p].crossVectors(v[p],m[p])},On.prototype=Object.create(Ut.prototype),On.prototype.constructor=On,On.prototype.addShapeList=function(t,e){for(var n=t.length,r=0;r<n;r++){var i=t[r];this.addShape(i,e)}},On.prototype.addShape=function(e,r){function i(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function o(t,e,r){var i,o,s=1,a=t.x-e.x,u=t.y-e.y,c=r.x-t.x,l=r.y-t.y,h=a*a+u*u,p=a*l-u*c;if(Math.abs(p)>Number.EPSILON){var f=Math.sqrt(h),d=Math.sqrt(c*c+l*l),v=e.x-u/f,m=e.y+a/f,y=r.x-l/d,g=r.y+c/d,b=((y-v)*l-(g-m)*c)/(a*l-u*c);i=v+a*b-t.x,o=m+u*b-t.y;var _=i*i+o*o;if(_<=2)return new n(i,o);s=Math.sqrt(_/2)}else{var w=!1;a>Number.EPSILON?c>Number.EPSILON&&(w=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(w=!0):Math.sign(u)===Math.sign(l)&&(w=!0),w?(i=-u,o=a,s=Math.sqrt(h)):(i=a,o=u,s=Math.sqrt(h/2))}return new n(i/s,o/s)}function s(){if(x){var t=0,e=W*t;for(Y=0;Y<q;Y++)G=j[Y],h(G[2]+e,G[1]+e,G[0]+e);for(t=S+2*w,e=W*t,Y=0;Y<q;Y++)G=j[Y],h(G[0]+e,G[1]+e,G[2]+e)}else{for(Y=0;Y<q;Y++)G=j[Y],h(G[2],G[1],G[0]);for(Y=0;Y<q;Y++)G=j[Y],h(G[0]+W*S,G[1]+W*S,G[2]+W*S)}}function u(){var t=0;for(c(F,t),t+=F.length,O=0,P=k.length;O<P;O++)A=k[O],c(A,t),t+=A.length}function c(t,e){var n,r;for(Y=t.length;--Y>=0;){n=Y,r=Y-1,r<0&&(r=t.length-1);var i=0,o=S+2*w;for(i=0;i<o;i++){var s=W*i,a=W*(i+1),u=e+n+s,c=e+r+s,l=e+r+a,h=e+n+a;p(u,c,l,h,t,i,o,n,r)}}}function l(t,e,n){R.vertices.push(new a(t,e,n))}function h(t,e,n){t+=I,e+=I,n+=I,R.faces.push(new Lt(t,e,n,null,null,0));var r=C.generateTopUV(R,t,e,n);R.faceVertexUvs[0].push(r)}function p(t,e,n,r,i,o,s,a,u){t+=I,e+=I,n+=I,r+=I,R.faces.push(new Lt(t,e,r,null,null,1)),R.faces.push(new Lt(e,n,r,null,null,1));var c=C.generateSideWallUV(R,t,e,n,r);R.faceVertexUvs[0].push([c[0],c[1],c[3]]),R.faceVertexUvs[0].push([c[1],c[2],c[3]])}var f,d,v,m,y,g=void 0!==r.amount?r.amount:100,b=void 0!==r.bevelThickness?r.bevelThickness:6,_=void 0!==r.bevelSize?r.bevelSize:b-2,w=void 0!==r.bevelSegments?r.bevelSegments:3,x=void 0===r.bevelEnabled||r.bevelEnabled,E=void 0!==r.curveSegments?r.curveSegments:12,S=void 0!==r.steps?r.steps:1,T=r.extrudePath,M=!1,C=void 0!==r.UVGenerator?r.UVGenerator:On.WorldUVGenerator;T&&(f=T.getSpacedPoints(S),M=!0,x=!1,d=void 0!==r.frames?r.frames:new An.FrenetFrames(T,S,(!1)),v=new a,m=new a,y=new a),x||(w=0,b=0,_=0);var A,O,P,R=this,I=this.vertices.length,N=e.extractPoints(E),L=N.shape,k=N.holes,D=!t.ShapeUtils.isClockWise(L);if(D){for(L=L.reverse(),O=0,P=k.length;O<P;O++)A=k[O],t.ShapeUtils.isClockWise(A)&&(k[O]=A.reverse());D=!1}var j=t.ShapeUtils.triangulateShape(L,k),F=L;for(O=0,P=k.length;O<P;O++)A=k[O],L=L.concat(A);for(var U,V,B,z,H,G,W=L.length,q=j.length,X=[],Y=0,Z=F.length,K=Z-1,Q=Y+1;Y<Z;Y++,K++,Q++)K===Z&&(K=0),Q===Z&&(Q=0),X[Y]=o(F[Y],F[K],F[Q]);var J,$=[],tt=X.concat();for(O=0,P=k.length;O<P;O++){for(A=k[O],J=[],Y=0,Z=A.length,K=Z-1,Q=Y+1;Y<Z;Y++,K++,Q++)K===Z&&(K=0),Q===Z&&(Q=0),J[Y]=o(A[Y],A[K],A[Q]);$.push(J),tt=tt.concat(J)}for(U=0;U<w;U++){for(B=U/w,z=b*Math.cos(B*Math.PI/2),V=_*Math.sin(B*Math.PI/2),Y=0,Z=F.length;Y<Z;Y++)H=i(F[Y],X[Y],V),l(H.x,H.y,-z);for(O=0,P=k.length;O<P;O++)for(A=k[O],J=$[O],Y=0,Z=A.length;Y<Z;Y++)H=i(A[Y],J[Y],V),l(H.x,H.y,-z)}for(V=_,Y=0;Y<W;Y++)H=x?i(L[Y],tt[Y],V):L[Y],M?(m.copy(d.normals[0]).multiplyScalar(H.x),v.copy(d.binormals[0]).multiplyScalar(H.y),y.copy(f[0]).add(m).add(v),l(y.x,y.y,y.z)):l(H.x,H.y,0);var et;for(et=1;et<=S;et++)for(Y=0;Y<W;Y++)H=x?i(L[Y],tt[Y],V):L[Y],M?(m.copy(d.normals[et]).multiplyScalar(H.x),v.copy(d.binormals[et]).multiplyScalar(H.y),y.copy(f[et]).add(m).add(v),l(y.x,y.y,y.z)):l(H.x,H.y,g/S*et);for(U=w-1;U>=0;U--){for(B=U/w,z=b*Math.cos(B*Math.PI/2),V=_*Math.sin(B*Math.PI/2),Y=0,Z=F.length;Y<Z;Y++)H=i(F[Y],X[Y],V),l(H.x,H.y,g+z);for(O=0,P=k.length;O<P;O++)for(A=k[O],J=$[O],Y=0,Z=A.length;Y<Z;Y++)H=i(A[Y],J[Y],V),M?l(H.x,H.y+f[S-1].y,f[S-1].x+z):l(H.x,H.y,g+z)}s(),u()},On.WorldUVGenerator={generateTopUV:function(t,e,r,i){var o=t.vertices,s=o[e],a=o[r],u=o[i];return[new n(s.x,s.y),new n(a.x,a.y),new n(u.x,u.y)]},generateSideWallUV:function(t,e,r,i,o){var s=t.vertices,a=s[e],u=s[r],c=s[i],l=s[o];return Math.abs(a.y-u.y)<.01?[new n(a.x,1-a.z),new n(u.x,1-u.z),new n(c.x,1-c.z),new n(l.x,1-l.z)]:[new n(a.y,1-a.z),new n(u.y,1-u.z),new n(c.y,1-c.z),new n(l.y,1-l.z)]}},Pn.prototype=Object.create(Ut.prototype),Pn.prototype.constructor=Pn,Pn.prototype.addShapeList=function(t,e){for(var n=0,r=t.length;n<r;n++)this.addShape(t[n],e);return this},Pn.prototype.addShape=function(e,n){void 0===n&&(n={});var r,i,o,s=void 0!==n.curveSegments?n.curveSegments:12,u=n.material,c=void 0===n.UVGenerator?On.WorldUVGenerator:n.UVGenerator,l=this.vertices.length,h=e.extractPoints(s),p=h.shape,f=h.holes,d=!t.ShapeUtils.isClockWise(p);if(d){for(p=p.reverse(),r=0,i=f.length;r<i;r++)o=f[r],t.ShapeUtils.isClockWise(o)&&(f[r]=o.reverse());d=!1}var v=t.ShapeUtils.triangulateShape(p,f);for(r=0,i=f.length;r<i;r++)o=f[r],p=p.concat(o);var m,y,g=p.length,b=v.length;for(r=0;r<g;r++)m=p[r],this.vertices.push(new a(m.x,m.y,0));for(r=0;r<b;r++){y=v[r];var _=y[0]+l,w=y[1]+l,x=y[2]+l;this.faces.push(new Lt(_,w,x,null,null,u)),this.faceVertexUvs[0].push(c.generateTopUV(this,_,w,x))}},Rn.prototype=Object.assign(Object.create(Fu),{constructor:Rn,extrude:function(t){return new On(this,t)},makeGeometry:function(t){return new Pn(this,t)},getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}}),In.prototype=Fu,Fu.constructor=In,Nn.prototype={moveTo:function(t,e){this.currentPath=new In,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,r){this.currentPath.quadraticCurveTo(t,e,n,r)},bezierCurveTo:function(t,e,n,r,i,o){this.currentPath.bezierCurveTo(t,e,n,r,i,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(e,n){function r(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new Rn;o.curves=i.curves,e.push(o)}return e}function i(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var s=e[i],a=e[o],u=a.x-s.x,c=a.y-s.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(s=e[o],u=-u,a=e[i],c=-c),t.y<s.y||t.y>a.y)continue;if(t.y===s.y){if(t.x===s.x)return!0}else{var l=c*(t.x-s.x)-u*(t.y-s.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(t.y!==s.y)continue;if(a.x<=t.x&&t.x<=s.x||s.x<=t.x&&t.x<=a.x)return!0}}return r}var o=t.ShapeUtils.isClockWise,s=this.subPaths;if(0===s.length)return[];if(n===!0)return r(s);var a,u,c,l=[];if(1===s.length)return u=s[0],c=new Rn,c.curves=u.curves,l.push(c),l;var h=!o(s[0].getPoints());h=e?!h:h;var p,f=[],d=[],v=[],m=0;d[m]=void 0,v[m]=[];for(var y=0,g=s.length;y<g;y++)u=s[y],p=u.getPoints(),a=o(p),a=e?!a:a,a?(!h&&d[m]&&m++,d[m]={s:new Rn,p:p},d[m].s.curves=u.curves,h&&m++,v[m]=[]):v[m].push({h:u,p:p[0]});if(!d[0])return r(s);if(d.length>1){for(var b=!1,_=[],w=0,x=d.length;w<x;w++)f[w]=[];for(var w=0,x=d.length;w<x;w++)for(var E=v[w],S=0;S<E.length;S++){for(var T=E[S],M=!0,C=0;C<d.length;C++)i(T.p,d[C].p)&&(w!==C&&_.push({froms:w,tos:C,hole:S}),M?(M=!1,f[C].push(T)):b=!0);M&&f[w].push(T)}_.length>0&&(b||(v=f))}for(var A,y=0,O=d.length;y<O;y++){c=d[y].s,l.push(c),A=v[y];for(var P=0,R=A.length;P<R;P++)c.holes.push(A[P].h)}return l}},Object.assign(Ln.prototype,{isFont:!0,generateShapes:function(e,n,r){function i(t){for(var e=String(t).split(""),r=n/s.resolution,i=0,a=[],u=0;u<e.length;u++){var c=o(e[u],r,i);i+=c.offset,a.push(c.path)}return a}function o(e,n,i){var o=s.glyphs[e]||s.glyphs["?"];if(o){var a,u,c,l,h,p,f,d,v,m,y,g=new Nn,b=[],_=t.ShapeUtils.b2,w=t.ShapeUtils.b3;if(o.o)for(var x=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),E=0,S=x.length;E<S;){var T=x[E++];switch(T){case"m":a=x[E++]*n+i,u=x[E++]*n,g.moveTo(a,u);break;case"l":a=x[E++]*n+i,u=x[E++]*n,g.lineTo(a,u);break;case"q":if(c=x[E++]*n+i,l=x[E++]*n,f=x[E++]*n+i,d=x[E++]*n,g.quadraticCurveTo(f,d,c,l),y=b[b.length-1]){h=y.x,p=y.y;for(var M=1;M<=r;M++){var C=M/r;_(C,h,f,c),_(C,p,d,l)}}break;case"b":if(c=x[E++]*n+i,l=x[E++]*n,f=x[E++]*n+i,d=x[E++]*n,v=x[E++]*n+i,m=x[E++]*n,g.bezierCurveTo(f,d,v,m,c,l),y=b[b.length-1]){h=y.x,p=y.y;for(var M=1;M<=r;M++){var C=M/r;w(C,h,f,v,c),w(C,p,d,m,l)}}}}return{offset:o.ha*n,path:g}}}void 0===n&&(n=100),void 0===r&&(r=4);for(var s=this.data,a=i(e),u=[],c=0,l=a.length;c<l;c++)Array.prototype.push.apply(u,a[c].toShapes());return u}}),Object.assign(kn.prototype,{load:function(t,e,n,r){var i=this,o=new Ve(this.manager);o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var o=i.parse(n);e&&e(o)},n,r)},parse:function(t){return new Ln(t)}});var Uu;Object.assign(jn.prototype,{load:function(t,e,n,r){var i=new Ve(this.manager);i.setResponseType("arraybuffer"),i.load(t,function(t){var n=Dn();n.decodeAudioData(t,function(t){e(t)})},n,r)}}),Object.assign(Fn.prototype,{update:function(){var e,n,r,i,s,a=new o,u=new o;return function(o){var c=e!==o.focus||n!==o.fov||r!==o.aspect*this.aspect||i!==o.near||s!==o.far;if(c){e=o.focus,n=o.fov,r=o.aspect*this.aspect,i=o.near,s=o.far;var l,h,p=o.projectionMatrix.clone(),f=this.eyeSep/2,d=f*i/e,v=i*Math.tan(t.Math.DEG2RAD*n*.5);u.elements[12]=-f,a.elements[12]=f,l=-v*r+d,h=v*r+d,p.elements[0]=2*i/(h-l),p.elements[8]=(h+l)/(h-l),this.cameraL.projectionMatrix.copy(p),l=-v*r-d,h=v*r-d,p.elements[0]=2*i/(h-l),p.elements[8]=(h+l)/(h-l),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(a)}}()}),Un.prototype=Object.create(jt.prototype),Un.prototype.constructor=Un,Vn.prototype=Object.assign(Object.create(jt.prototype),{constructor:Vn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(t){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){this.gain.gain.value=t},updateMatrixWorld:function(){var t=new a,e=new s,n=new a,r=new a;return function(i){jt.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,s=this.up;this.matrixWorld.decompose(t,e,n),r.set(0,0,-1).applyQuaternion(e),o.setPosition(t.x,t.y,t.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),Bn.prototype=Object.assign(Object.create(jt.prototype),{constructor:Bn,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setBuffer:function(t){return this.source.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var t=this.context.createBufferSource();return t.buffer=this.source.buffer,t.loop=this.source.loop,t.onended=this.source.onended,t.start(0,this.startTime),t.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=t,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),this.isPlaying===!0?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(t){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=t)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.value=t,this}}),zn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:zn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){this.panner.refDistance=t},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){this.panner.rolloffFactor=t},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){this.panner.distanceModel=t},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){this.panner.maxDistance=t},updateMatrixWorld:function(){var t=new a;return function(e){jt.prototype.updateMatrixWorld.call(this,e),t.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(t.x,t.y,t.z)}}()}),Object.assign(Hn.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Gn.prototype={constructor:Gn,accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==r;++s)n[i+s]=n[s];o=e}else{o+=e;var a=e/o;this._mixBufferRegion(n,i,0,a,r)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var s=3*e;this._mixBufferRegion(n,r,s,1-i,e)}for(var a=e,u=e+e;a!==u;++a)if(n[a]!==n[a+e]){o.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=3*n;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r,i){s.slerpFlat(t,e,t,e,t,n,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,s=0;s!==i;++s){var a=e+s;t[a]=t[a]*o+t[n+s]*r}}},Wn.prototype={constructor:Wn,getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=Wn.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("  can not bind to material as node does not have a material",this);if(!t.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[n])return void console.error("  can not bind to objectName of node, undefined",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,t);t=t[o]}}var a=t[r];if(void 0===a){var u=e.nodeName;return void console.error("  trying to update property for track: "+u+"."+r+" but it wasn't found.",t)}var c=this.Versioning.None;void 0!==t.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=t):void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=t);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!t.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(t.geometry.morphTargets[s].name===i){i=s;break}}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):void 0!==a.length?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Wn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Wn.prototype.getValue,_setValue_unbound:Wn.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e);
}],SetterByBindingTypeAndVersioning:[[function(t,e){this.node[this.propertyName]=t[e]},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.node[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Wn.Composite=function(t,e,n){var r=n||Wn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)},Wn.Composite.prototype={constructor:Wn.Composite,getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Wn.create=function(t,e,n){return t&&t.isAnimationObjectGroup?new Wn.Composite(t,e,n):new Wn(t,e,n)},Wn.parseTrackName=function(t){var e=/^((?:\w+\/)*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,n=e.exec(t);if(!n)throw new Error("cannot parse trackName at all: "+t);var r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]};if(null===r.propertyName||0===r.propertyName.length)throw new Error("can not parse propertyName from trackName: "+t);return r},Wn.findNode=function(t,e){if(!e||""===e||"root"===e||"."===e||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=function(t){for(var n=0;n<t.bones.length;n++){var r=t.bones[n];if(r.name===e)return r}return null},r=n(t.skeleton);if(r)return r}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},o=i(t.children);if(o)return o}return null},qn.prototype={constructor:qn,isAnimationObjectGroup:!0,add:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,s=this._parsedPaths,a=this._bindings,u=a.length,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],p=h.uuid,f=i[p];if(void 0===f){f=n++,i[p]=f,e.push(h);for(var d=0,v=u;d!==v;++d)a[d].push(new Wn(h,o[d],s[d]))}else if(f<r){var m=e[f],y=--r,g=e[y];i[g.uuid]=f,e[f]=g,i[p]=y,e[y]=h;for(var d=0,v=u;d!==v;++d){var b=a[d],_=b[y],w=b[f];b[f]=_,void 0===w&&(w=new Wn(h,o[d],s[d])),b[y]=w}}else e[f]!==m&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(t){for(var e=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,s=0,a=arguments.length;s!==a;++s){var u=arguments[s],c=u.uuid,l=r[c];if(void 0!==l&&l>=n){var h=n++,p=e[h];r[p.uuid]=l,e[l]=p,r[c]=h,e[h]=u;for(var f=0,d=o;f!==d;++f){var v=i[f],m=v[h],y=v[l];v[l]=m,v[h]=y}}}this.nCachedObjects_=n},uncache:function(t){for(var e=this._objects,n=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,s=o.length,a=0,u=arguments.length;a!==u;++a){var c=arguments[a],l=c.uuid,h=i[l];if(void 0!==h)if(delete i[l],h<r){var p=--r,f=e[p],d=--n,v=e[d];i[f.uuid]=h,e[h]=f,i[v.uuid]=p,e[p]=v,e.pop();for(var m=0,y=s;m!==y;++m){var g=o[m],b=g[p],_=g[d];g[h]=b,g[p]=_,g.pop()}}else{var d=--n,v=e[d];i[v.uuid]=h,e[h]=v,e.pop();for(var m=0,y=s;m!==y;++m){var g=o[m];g[h]=g[d],g.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,s=this._parsedPaths,a=this._objects,u=a.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[t]=r,o.push(t),s.push(e),i.push(l);for(var h=c,p=a.length;h!==p;++h){var f=a[h];l[h]=new Wn(f,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],u=t[s];e[u]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}},Xn.prototype={constructor:Xn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,s=r/i;t.warp(1,o,e),this.warp(s,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,s=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var a=o.parameterPositions,u=o.sampleValues;return a[0]=i,a[1]=i+n,u[0]=t/s,u[1]=e/s,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var s=this._updateTime(e),a=this._updateWeight(t);if(a>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(s),c[l].accumulate(r,a)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t;if(0===t)return e;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(r===is){i===-1&&(this.loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0))break t;e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{var o=r===ss;if(i===-1&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var s=Math.floor(e/n);e-=n*s,i+=Math.abs(s);var a=this.repetitions-i;if(a<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(0===a){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1===(1&i))return this.time=e,n-e}return this.time=e,e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=hs,r.endingEnd=hs):(t?r.endingStart=this.zeroSlopeAtStart?hs:ls:r.endingStart=ps,e?r.endingEnd=this.zeroSlopeAtEnd?hs:ls:r.endingEnd=ps)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=e,s[1]=i+t,a[1]=n,this}},Object.assign(Yn.prototype,e.prototype,{clipAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?vn.findByName(n,t):t,o=null!==i?i.uuid:t,s=this._actionsByClip[o],a=null;if(void 0!==s){var u=s.actionByRoot[r];if(void 0!==u)return u;a=s.knownActions[0],null===i&&(i=a._clip)}if(null===i)return null;var c=new Xn(this,i,e);return this._bindAction(c,a),this._addInactiveAction(c,o,r),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?vn.findByName(n,t):t,o=i?i.uuid:t,s=this._actionsByClip[o];return void 0!==s?s.actionByRoot[r]||null:null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(var i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,s=0;s!==n;++s){var a=e[s];a.enabled&&a._update(r,t,i,o)}for(var u=this._bindings,c=this._nActiveBindings,s=0;s!==c;++s)u[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,s=0,a=o.length;s!==a;++s){var u=o[s];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot,o=i[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var s=this._bindingsByRootAndName,a=s[e];if(void 0!==a)for(var u in a){var c=a[u];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Object.assign(Yn.prototype,{_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,s=t._interpolants,a=n.uuid,u=this._bindingsByRootAndName,c=u[a];void 0===c&&(c={},u[a]=c);for(var l=0;l!==i;++l){var h=r[l],p=h.name,f=c[p];if(void 0!==f)o[l]=f;else{if(f=o[l],void 0!==f){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,a,p));continue}var d=e&&e._propertyBindings[l].binding.parsedPath;f=new Gn(Wn.create(n,p,d),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,a,p),o[l]=f}s[l].resultBuffer=f.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,s=i.length;o!==s;++o){var a=i[o];0===a.useCount++&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,u=a[a.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,a[c]=u,a.pop(),t._byClipCacheIndex=null;var l=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete l[h],0===a.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=e[e.length-1],u=t._cacheIndex;a._cacheIndex=u,e[u]=a,e.pop(),delete s[i];t:{for(var c in s)break t;delete o[r]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new rn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),Zn.prototype={constructor:Zn,onUpdate:function(t){return this.dynamic=!0,this.onUpdateCallback=t,this}},Kn.prototype=Object.create(zt.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isInstancedBufferGeometry=!0,Kn.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},Kn.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var o=t.groups,s=0,a=o.length;s<a;s++){var u=o[s];this.addGroup(u.start,u.count,u.instances)}return this},Qn.prototype={constructor:Qn,isInterleavedBufferAttribute:!0,get length(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length},get count(){return this.data.count},get array(){return this.data.array},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},Jn.prototype={constructor:Jn,isInterleavedBuffer:!0,get length(){return this.array.length},get count(){return this.array.length/this.stride},set needsUpdate(t){t===!0&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)}},$n.prototype=Object.create(Jn.prototype),$n.prototype.constructor=$n,$n.prototype.isInstancedInterleavedBuffer=!0,$n.prototype.copy=function(t){return Jn.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},tr.prototype=Object.create(Et.prototype),tr.prototype.constructor=tr,tr.prototype.isInstancedBufferAttribute=!0,tr.prototype.copy=function(t){return Et.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},er.prototype={constructor:er,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e){var n=[];return rr(t,this,n,e),n.sort(nr),n},intersectObjects:function(t,e){var n=[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var r=0,i=t.length;r<i;r++)rr(t[r],this,n,e);return n.sort(nr),n}},ir.prototype={constructor:ir,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},sr.prototype={constructor:sr,set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius.copy(t.radius),this.phi.copy(t.phi),this.theta.copy(t.theta),this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(t.Math.clamp(e.y/this.radius,-1,1))),this}},ar.prototype=Object.create(re.prototype),ar.prototype.constructor=ar,ar.prototype.createAnimation=function(t,e,n,r){var i={start:e,end:n,length:n-e+1,fps:r,duration:(n-e)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[t]=i,this.animationsList.push(i)},ar.prototype.autoCreateAnimations=function(t){for(var e,n=/([a-z]+)_?(\d+)/i,r={},i=this.geometry,o=0,s=i.morphTargets.length;o<s;o++){var a=i.morphTargets[o],u=a.name.match(n);if(u&&u.length>1){var c=u[1];r[c]||(r[c]={start:1/0,end:-(1/0)});var l=r[c];o<l.start&&(l.start=o),o>l.end&&(l.end=o),e||(e=c)}}for(var c in r){var l=r[c];this.createAnimation(c,l.start,l.end,t)}this.firstAnimation=e},ar.prototype.setAnimationDirectionForward=function(t){var e=this.animationsMap[t];e&&(e.direction=1,e.directionBackwards=!1)},ar.prototype.setAnimationDirectionBackward=function(t){var e=this.animationsMap[t];e&&(e.direction=-1,e.directionBackwards=!0)},ar.prototype.setAnimationFPS=function(t,e){var n=this.animationsMap[t];n&&(n.fps=e,n.duration=(n.end-n.start)/n.fps)},ar.prototype.setAnimationDuration=function(t,e){var n=this.animationsMap[t];n&&(n.duration=e,n.fps=(n.end-n.start)/n.duration)},ar.prototype.setAnimationWeight=function(t,e){var n=this.animationsMap[t];n&&(n.weight=e)},ar.prototype.setAnimationTime=function(t,e){var n=this.animationsMap[t];n&&(n.time=e)},ar.prototype.getAnimationTime=function(t){var e=0,n=this.animationsMap[t];return n&&(e=n.time),e},ar.prototype.getAnimationDuration=function(t){var e=-1,n=this.animationsMap[t];return n&&(e=n.duration),e},ar.prototype.playAnimation=function(t){var e=this.animationsMap[t];e?(e.time=0,e.active=!0):console.warn("THREE.MorphBlendMesh: animation["+t+"] undefined in .playAnimation()")},ar.prototype.stopAnimation=function(t){var e=this.animationsMap[t];e&&(e.active=!1)},ar.prototype.update=function(e){for(var n=0,r=this.animationsList.length;n<r;n++){var i=this.animationsList[n];if(i.active){var o=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var s=i.start+t.Math.clamp(Math.floor(i.time/o),0,i.length-1),a=i.weight;s!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*a,this.morphTargetInfluences[s]=0,i.lastFrame=i.currentFrame,i.currentFrame=s);var u=i.time%o/o;i.directionBackwards&&(u=1-u),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=u*a,this.morphTargetInfluences[i.lastFrame]=(1-u)*a):this.morphTargetInfluences[i.currentFrame]=a}}},ur.prototype=Object.create(jt.prototype),ur.prototype.constructor=ur,ur.prototype.isImmediateRenderObject=!0,cr.prototype=Object.create(zt.prototype),cr.prototype.constructor=cr,lr.prototype=Object.create(xe.prototype),lr.prototype.constructor=lr,hr.prototype=Object.create(xe.prototype),hr.prototype.constructor=hr,hr.prototype.update=function(){var t=new a,e=new a,n=new rt;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var a=s.vertices,u=s.faces,c=0,l=0,h=u.length;l<h;l++)for(var p=u[l],f=0,d=p.vertexNormals.length;f<d;f++){var v=a[p[r[f]]],m=p.vertexNormals[f];t.copy(v).applyMatrix4(i),e.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(s&&s.isBufferGeometry)for(var y=s.attributes.position,g=s.attributes.normal,c=0,f=0,d=y.count;f<d;f++)t.set(y.getX(f),y.getY(f),y.getZ(f)).applyMatrix4(i),e.set(g.getX(f),g.getY(f),g.getZ(f)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1;return o.needsUpdate=!0,this}}(),pr.prototype=Object.create(jt.prototype),pr.prototype.constructor=pr,pr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},pr.prototype.update=function(){var t=new a,e=new a;return function(){var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e.sub(t)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),fr.prototype=Object.create(xe.prototype),fr.prototype.constructor=fr,fr.prototype.getBoneList=function(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,this.getBoneList(t.children[n]));return e},fr.prototype.update=function(){for(var t=this.geometry,e=(new o).getInverse(this.root.matrixWorld),n=new o,r=0,i=0;i<this.bones.length;i++){var s=this.bones[i];s.parent&&s.parent.isBone&&(n.multiplyMatrices(e,s.matrixWorld),t.vertices[r].setFromMatrixPosition(n),n.multiplyMatrices(e,s.parent.matrixWorld),t.vertices[r+1].setFromMatrixPosition(n),r+=2)}t.verticesNeedUpdate=!0,t.computeBoundingSphere()},dr.prototype=Object.create(zt.prototype),dr.prototype.constructor=dr,vr.prototype=Object.create(re.prototype),vr.prototype.constructor=vr,vr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},vr.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},mr.prototype=Object.create(Ut.prototype),mr.prototype.constructor=mr,yr.prototype=Object.create(jt.prototype),yr.prototype.constructor=yr,yr.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},yr.prototype.update=function(){var t=new a;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),gr.prototype=Object.create(xe.prototype),gr.prototype.constructor=gr,gr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},br.prototype=Object.create(xe.prototype),br.prototype.constructor=br,br.prototype.update=function(){var t=new a,e=new a,n=new rt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,a=o.faces,u=0,c=0,l=a.length;c<l;c++){var h=a[c],p=h.normal;t.copy(s[h.a]).add(s[h.b]).add(s[h.c]).divideScalar(3).applyMatrix4(r),e.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),i.setXYZ(u,t.x,t.y,t.z),u+=1,i.setXYZ(u,e.x,e.y,e.z),u+=1}return i.needsUpdate=!0,this}}(),_r.prototype=Object.create(zt.prototype),_r.prototype.constructor=_r,wr.prototype=Object.create(xe.prototype),wr.prototype.constructor=wr,xr.prototype=Object.create(jt.prototype),xr.prototype.constructor=xr,xr.prototype.dispose=function(){var t=this.children[0],e=this.children[1];t.geometry.dispose(),t.material.dispose(),e.geometry.dispose(),e.material.dispose()},xr.prototype.update=function(){var t=new a,e=new a,n=new a;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t);var r=this.children[0],i=this.children[1];r.lookAt(n),r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(n),i.scale.z=n.length()}}(),Er.prototype=Object.create(xe.prototype),Er.prototype.constructor=Er,Er.prototype.update=function(){function t(t,o,s,a){r.set(o,s,a).unproject(i);var u=n[t];if(void 0!==u)for(var c=0,l=u.length;c<l;c++)e.vertices[u[c]].copy(r)}var e,n,r=new a,i=new oe;return function(){e=this.geometry,n=this.pointMap;var r=1,o=1;i.projectionMatrix.copy(this.camera.projectionMatrix),t("c",0,0,-1),t("t",0,0,1),t("n1",-r,-o,-1),t("n2",r,-o,-1),t("n3",-r,o,-1),t("n4",r,o,-1),t("f1",-r,-o,1),t("f2",r,-o,1),t("f3",-r,o,1),t("f4",r,o,1),t("u1",.7*r,1.1*o,-1),t("u2",.7*-r,1.1*o,-1),t("u3",0,2*o,-1),t("cf1",-r,0,1),t("cf2",r,0,1),t("cf3",0,-o,1),t("cf4",0,o,1),t("cn1",-r,0,-1),t("cn2",r,0,-1),t("cn3",0,-o,-1),t("cn4",0,o,-1),e.verticesNeedUpdate=!0}}(),Sr.prototype=Object.create(Ut.prototype),Sr.prototype.constructor=Sr,Tr.prototype=Object.create(re.prototype),Tr.prototype.constructor=Tr,Tr.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},Mr.prototype=Object.create(xe.prototype),Mr.prototype.constructor=Mr,Mr.prototype.update=function(){var t=new et;return function(e){if(e&&e.isBox3?t.copy(e):t.setFromObject(e),!t.isEmpty()){var n=t.min,r=t.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Cr.prototype=Object.create(zt.prototype),Cr.prototype.constructor=Cr;var Vu=new zt;Vu.addAttribute("position",new Rt([0,0,0,0,1,0],3));var Bu=new Cr(0,.5,1,5,1);Bu.translate(0,-.5,0),Ar.prototype=Object.create(jt.prototype),Ar.prototype.constructor=Ar,Ar.prototype.setDirection=function(){var t,e=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),Ar.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Ar.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Or.prototype=Object.create(xe.prototype),Or.prototype.constructor=Or,Pr.prototype=Object.create(Ut.prototype),Pr.prototype.constructor=Pr,Rr.prototype=Object.create(Ut.prototype),Rr.prototype.constructor=Rr,Ir.prototype=Object.create(Rr.prototype),Ir.prototype.constructor=Ir,Nr.prototype=Object.create(Rr.prototype),Nr.prototype.constructor=Nr,Lr.prototype=Object.create(Rr.prototype),Lr.prototype.constructor=Lr,kr.prototype=Object.create(Rr.prototype),kr.prototype.constructor=kr,Dr.prototype=Object.create(zt.prototype),Dr.prototype.constructor=Dr,jr.prototype=Object.create(Ut.prototype),jr.prototype.constructor=jr,Fr.prototype=Object.create(zt.prototype),Fr.prototype.constructor=Fr,Ur.prototype=Object.create(Ut.prototype),Ur.prototype.constructor=Ur,Vr.prototype=Object.create(On.prototype),Vr.prototype.constructor=Vr,Br.prototype=Object.create(zt.prototype),Br.prototype.constructor=Br,zr.prototype=Object.create(Ut.prototype),zr.prototype.constructor=zr,Hr.prototype=Object.create(Ut.prototype),Hr.prototype.constructor=Hr,Gr.prototype=Object.create(zt.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Object.create(Ut.prototype),Wr.prototype.constructor=Wr,qr.prototype=Object.create(Ut.prototype),qr.prototype.constructor=qr,Xr.prototype=Object.create(qr.prototype),Xr.prototype.constructor=Xr,Yr.prototype=Object.create(zt.prototype),Yr.prototype.constructor=Yr,Zr.prototype=Object.create(zt.prototype),Zr.prototype.constructor=Zr,Kr.prototype=Object.create(Ut.prototype),Kr.prototype.constructor=Kr,t.CatmullRomCurve3=function(){function t(){}var e=new a,n=new t,r=new t,i=new t;return t.prototype.init=function(t,e,n,r){this.c0=t,this.c1=n,this.c2=-3*t+3*e-2*n-r,this.c3=2*t-2*e+n+r},t.prototype.initNonuniformCatmullRom=function(t,e,n,r,i,o,s){
var a=(e-t)/i-(n-t)/(i+o)+(n-e)/o,u=(n-e)/o-(r-e)/(o+s)+(r-n)/s;a*=o,u*=o,this.init(e,n,a,u)},t.prototype.initCatmullRom=function(t,e,n,r,i){this.init(e,n,i*(n-t),i*(r-e))},t.prototype.calc=function(t){var e=t*t,n=e*t;return this.c0+this.c1*t+this.c2*e+this.c3*n},wn.create(function(t){this.points=t||[],this.closed=!1},function(t){var o,s,u,c,l=this.points;c=l.length,c<2&&console.log("duh, you need at least 2 points"),o=(c-(this.closed?0:1))*t,s=Math.floor(o),u=o-s,this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/l.length)+1)*l.length:0===u&&s===c-1&&(s=c-2,u=1);var h,p,f,d;if(this.closed||s>0?h=l[(s-1)%c]:(e.subVectors(l[0],l[1]).add(l[0]),h=e),p=l[s%c],f=l[(s+1)%c],this.closed||s+2<c?d=l[(s+2)%c]:(e.subVectors(l[c-1],l[c-2]).add(l[c-1]),d=e),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var v="chordal"===this.type?.5:.25,m=Math.pow(h.distanceToSquared(p),v),y=Math.pow(p.distanceToSquared(f),v),g=Math.pow(f.distanceToSquared(d),v);y<1e-4&&(y=1),m<1e-4&&(m=y),g<1e-4&&(g=y),n.initNonuniformCatmullRom(h.x,p.x,f.x,d.x,m,y,g),r.initNonuniformCatmullRom(h.y,p.y,f.y,d.y,m,y,g),i.initNonuniformCatmullRom(h.z,p.z,f.z,d.z,m,y,g)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;n.initCatmullRom(h.x,p.x,f.x,d.x,b),r.initCatmullRom(h.y,p.y,f.y,d.y,b),i.initCatmullRom(h.z,p.z,f.z,d.z,b)}var _=new a(n.calc(u),r.calc(u),i.calc(u));return _})}(),Qr.prototype=Object.create(t.CatmullRomCurve3.prototype);var zu=wn.create(function(t){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===t?[]:t},function(e){var n=this.points,r=(n.length-1)*e,i=Math.floor(r),o=r-i,s=n[0==i?i:i-1],u=n[i],c=n[i>n.length-2?n.length-1:i+1],l=n[i>n.length-3?n.length-1:i+2],h=t.CurveUtils.interpolate;return new a(h(s.x,u.x,c.x,l.x,o),h(s.y,u.y,c.y,l.y,o),h(s.z,u.z,c.z,l.z,o))});t.CubicBezierCurve3=wn.create(function(t,e,n,r){this.v0=t,this.v1=e,this.v2=n,this.v3=r},function(e){var n=t.ShapeUtils.b3;return new a(n(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),n(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),n(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),t.QuadraticBezierCurve3=wn.create(function(t,e,n){this.v0=t,this.v1=e,this.v2=n},function(e){var n=t.ShapeUtils.b2;return new a(n(e,this.v0.x,this.v1.x,this.v2.x),n(e,this.v0.y,this.v1.y,this.v2.y),n(e,this.v0.z,this.v1.z,this.v2.z))}),t.LineCurve3=wn.create(function(t,e){this.v1=t,this.v2=e},function(t){if(1===t)return this.v2.clone();var e=new a;return e.subVectors(this.v2,this.v1),e.multiplyScalar(t),e.add(this.v1),e}),Jr.prototype=Object.create(Sn.prototype),Jr.prototype.constructor=Jr,t.SceneUtils={createMultiMaterialObject:function(t,e){for(var n=new Te,r=0,i=e.length;r<i;r++)n.add(new re(t,e[r]));return n},detach:function(t,e,n){t.applyMatrix(e.matrixWorld),e.remove(t),n.add(t)},attach:function(t,e,n){var r=new o;r.getInverse(n.matrixWorld),t.applyMatrix(r),e.remove(t),n.add(t)}};var Hu=0,Gu=1;Object.assign(c.prototype,{empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)}}),Object.assign(et.prototype,{empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(rt.prototype,{multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)}}),Object.assign(o.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(t){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(it.prototype,{isIntersectionLine:function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)}}),Object.assign(s.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)}}),Object.assign($t.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)}}),Object.assign(jt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(t){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)}}),Object.defineProperties(jt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(t){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ve.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),se.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(qe.prototype,{onlyShadow:{set:function(t){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(t){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(t){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Et.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(zt.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(zt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(K.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(t){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new $}}}),Object.defineProperties(ke.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(t){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(J.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),e.prototype=Object.assign(Object.create({constructor:e,apply:function(t){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(t,this)}}),e.prototype),Object.assign(ue.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(ue.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=t}}}),Object.defineProperties(st.prototype,{cullFace:{get:function(){return this.renderReverseSided?pi:hi},set:function(t){var e=t!==hi;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+e+"."),this.renderReverseSided=e}}}),Object.defineProperties(Z.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.assign(Bn.prototype,{load:function(t){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var e=this,n=new jn;return n.load(t,function(t){e.setBuffer(t)}),this}}),Object.assign(Hn.prototype,{getData:function(t){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var Wu={merge:function(t,e,n){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var r;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}},qu={crossOrigin:void 0,loadTexture:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new We;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadTextureCube:function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Ge;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};Object.defineProperty(t,"AudioContext",{get:function(){return t.getAudioContext()}}),t.SpritePlugin=u,t.LensFlarePlugin=l,t.WebGLUniforms=W,t.WebGLTextures=q,t.WebGLState=Y,t.WebGLShadowMap=st,t.WebGLShader=ut,t.WebGLProperties=ct,t.WebGLPrograms=xt,t.WebGLProgram=wt,t.WebGLObjects=Gt,t.WebGLLights=Wt,t.WebGLGeometries=Ht,t.WebGLCapabilities=qt,t.WebGLExtensions=Xt,t.WebGLIndexedBufferRenderer=Yt,t.WebGLClipping=Zt,t.WebGLBufferRenderer=Kt,t.WebGLRenderTargetCube=Qt,t.WebGLRenderTarget=Z,t.WebGLRenderer=ue,t.ShaderLib=Iu,t.UniformsLib=Ru,t.ShaderChunk=Pu,t.FogExp2=ce,t.Fog=le,t.Scene=he,t.LensFlare=pe,t.Sprite=de,t.LOD=ve,t.SkinnedMesh=be,t.Skeleton=ye,t.Bone=ge,t.Mesh=re,t.LineSegments=xe,t.Line=we,t.Points=Se,t.Group=Te,t.VideoTexture=Me,t.DataTexture=me,t.CompressedTexture=Ce,t.CubeTexture=h,t.CanvasTexture=Ae,t.DepthTexture=Oe,t.TextureIdCount=i,t.Texture=r,t.ShadowMaterial=Pe,t.SpriteMaterial=fe,t.RawShaderMaterial=Re,t.ShaderMaterial=J,t.PointsMaterial=Ee,t.MultiMaterial=Ie,t.MeshPhysicalMaterial=Le,t.MeshStandardMaterial=Ne,t.MeshPhongMaterial=ke,t.MeshNormalMaterial=De,t.MeshLambertMaterial=je,t.MeshDepthMaterial=tt,t.MeshBasicMaterial=ne,t.LineDashedMaterial=Fe,t.LineBasicMaterial=_e,t.MaterialIdCount=Q,t.Material=K,t.CompressedTextureLoader=Be,t.BinaryTextureLoader=ze,t.DataTextureLoader=Du,t.CubeTextureLoader=Ge,t.TextureLoader=We,t.ObjectLoader=_n,t.MaterialLoader=mn,t.BufferGeometryLoader=yn,t.LoadingManager=Ue,t.JSONLoader=bn,t.ImageLoader=He,t.FontLoader=kn,t.XHRLoader=Ve,t.Loader=gn,t.AudioLoader=jn,t.SpotLightShadow=Ze,t.SpotLight=Ke,t.PointLight=Qe,t.HemisphereLight=Xe,t.DirectionalLightShadow=Je,t.DirectionalLight=$e,t.AmbientLight=tn,t.LightShadow=Ye,t.Light=qe,t.StereoCamera=Fn,t.PerspectiveCamera=se,t.OrthographicCamera=ae,t.CubeCamera=Un,t.Camera=oe,t.AudioListener=Vn,t.PositionalAudio=zn,t.getAudioContext=Dn,t.AudioAnalyser=Hn,t.Audio=Bn,t.VectorKeyframeTrack=an,t.StringKeyframeTrack=hn,t.QuaternionKeyframeTrack=cn,t.NumberKeyframeTrack=ln,t.ColorKeyframeTrack=fn,t.BooleanKeyframeTrack=pn,t.PropertyMixer=Gn,t.PropertyBinding=Wn,t.KeyframeTrack=dn,t.AnimationObjectGroup=qn,t.AnimationMixer=Yn,t.AnimationClip=vn,t.Uniform=Zn,t.InstancedBufferGeometry=Kn,t.BufferGeometry=zt,t.DirectGeometry=Bt,t.GeometryIdCount=Vt,t.Geometry=Ut,t.InterleavedBufferAttribute=Qn,t.InstancedInterleavedBuffer=$n,t.InterleavedBuffer=Jn,t.InstancedBufferAttribute=tr,t.DynamicBufferAttribute=Nt,t.Float64Attribute=It,t.Float32Attribute=Rt,t.Uint32Attribute=Pt,t.Int32Attribute=Ot,t.Uint16Attribute=At,t.Int16Attribute=Ct,t.Uint8ClampedAttribute=Mt,t.Uint8Attribute=Tt,t.Int8Attribute=St,t.BufferAttribute=Et,t.Face3=Lt,t.Object3DIdCount=Ft,t.Object3D=jt,t.Raycaster=er,t.Layers=Dt,t.EventDispatcher=e,t.Clock=ir,t.QuaternionLinearInterpolant=un,t.LinearInterpolant=rn,t.DiscreteInterpolant=on,t.CubicInterpolant=nn,t.Interpolant=en,t.Triangle=ee,t.Spline=or,t.Spherical=sr,t.Plane=it,t.Frustum=ot,t.Sphere=nt,t.Ray=$t,t.Matrix4=o,t.Matrix3=rt,t.Box3=et,t.Box2=c,t.Line3=te,t.Euler=kt,t.Vector4=X,t.Vector3=a,t.Vector2=n,t.Quaternion=s,t.Color=$,t.MorphBlendMesh=ar,t.ImmediateRenderObject=ur,t.WireframeHelper=lr,t.VertexNormalsHelper=hr,t.SpotLightHelper=pr,t.SkeletonHelper=fr,t.PointLightHelper=vr,t.HemisphereLightHelper=yr,t.GridHelper=gr,t.FaceNormalsHelper=br,t.EdgesHelper=wr,t.DirectionalLightHelper=xr,t.CameraHelper=Er,t.BoundingBoxHelper=Tr,t.BoxHelper=Mr,t.ArrowHelper=Ar,t.AxisHelper=Or,t.WireframeGeometry=cr,t.ParametricGeometry=Pr,t.TetrahedronGeometry=Ir,t.OctahedronGeometry=Nr,t.IcosahedronGeometry=Lr,t.DodecahedronGeometry=kr,t.PolyhedronGeometry=Rr,t.TubeGeometry=An,t.TorusKnotGeometry=jr,t.TorusKnotBufferGeometry=Dr,t.TorusGeometry=Ur,t.TorusBufferGeometry=Fr,t.TextGeometry=Vr,t.SphereBufferGeometry=dr,t.SphereGeometry=mr,t.RingGeometry=zr,t.RingBufferGeometry=Br,t.PlaneBufferGeometry=ie,t.PlaneGeometry=Hr,t.LatheGeometry=Wr,t.LatheBufferGeometry=Gr,t.ShapeGeometry=Pn,t.ExtrudeGeometry=On,t.EdgesGeometry=_r,t.ConeGeometry=Xr,t.ConeBufferGeometry=Yr,t.CylinderGeometry=qr,t.CylinderBufferGeometry=Cr,t.CircleBufferGeometry=Zr,t.CircleGeometry=Kr,t.BoxBufferGeometry=Jt,t.BoxGeometry=Sr,t.ClosedSplineCurve3=Qr,t.SplineCurve3=zu,t.ArcCurve=Jr,t.EllipseCurve=Sn,t.SplineCurve=Tn,t.CubicBezierCurve=Mn,t.QuadraticBezierCurve=Cn,t.LineCurve=xn,t.Shape=Rn,t.ShapePath=Nn,t.Path=In,t.Font=Ln,t.CurvePath=En,t.Curve=wn,t.REVISION=ui,t.MOUSE=ci,t.CullFaceNone=li,t.CullFaceBack=hi,t.CullFaceFront=pi,t.CullFaceFrontBack=fi,t.FrontFaceDirectionCW=di,t.FrontFaceDirectionCCW=vi,t.BasicShadowMap=mi,t.PCFShadowMap=yi,t.PCFSoftShadowMap=gi,t.FrontSide=bi,t.BackSide=_i,t.DoubleSide=wi,t.FlatShading=xi,t.SmoothShading=Ei,t.NoColors=Si,t.FaceColors=Ti,t.VertexColors=Mi,t.NoBlending=Ci,t.NormalBlending=Ai,t.AdditiveBlending=Oi,t.SubtractiveBlending=Pi,t.MultiplyBlending=Ri,t.CustomBlending=Ii,t.AddEquation=Ni,t.SubtractEquation=Li,t.ReverseSubtractEquation=ki,t.MinEquation=Di,t.MaxEquation=ji,t.ZeroFactor=Fi,t.OneFactor=Ui,t.SrcColorFactor=Vi,t.OneMinusSrcColorFactor=Bi,t.SrcAlphaFactor=zi,t.OneMinusSrcAlphaFactor=Hi,t.DstAlphaFactor=Gi,t.OneMinusDstAlphaFactor=Wi,t.DstColorFactor=qi,t.OneMinusDstColorFactor=Xi,t.SrcAlphaSaturateFactor=Yi,t.NeverDepth=Zi,t.AlwaysDepth=Ki,t.LessDepth=Qi,t.LessEqualDepth=Ji,t.EqualDepth=$i,t.GreaterEqualDepth=to,t.GreaterDepth=eo,t.NotEqualDepth=no,t.MultiplyOperation=ro,t.MixOperation=io,t.AddOperation=oo,t.NoToneMapping=so,t.LinearToneMapping=ao,t.ReinhardToneMapping=uo,t.Uncharted2ToneMapping=co,t.CineonToneMapping=lo,t.UVMapping=ho,t.CubeReflectionMapping=po,t.CubeRefractionMapping=fo,t.EquirectangularReflectionMapping=vo,t.EquirectangularRefractionMapping=mo,t.SphericalReflectionMapping=yo,t.CubeUVReflectionMapping=go,t.CubeUVRefractionMapping=bo,t.RepeatWrapping=_o,t.ClampToEdgeWrapping=wo,t.MirroredRepeatWrapping=xo,t.NearestFilter=Eo,t.NearestMipMapNearestFilter=So,t.NearestMipMapLinearFilter=To,t.LinearFilter=Mo,t.LinearMipMapNearestFilter=Co,t.LinearMipMapLinearFilter=Ao,t.UnsignedByteType=Oo,t.ByteType=Po,t.ShortType=Ro,t.UnsignedShortType=Io,t.IntType=No,t.UnsignedIntType=Lo,t.FloatType=ko,t.HalfFloatType=Do,t.UnsignedShort4444Type=jo,t.UnsignedShort5551Type=Fo,t.UnsignedShort565Type=Uo,t.UnsignedInt248Type=Vo,t.AlphaFormat=Bo,t.RGBFormat=zo,t.RGBAFormat=Ho,t.LuminanceFormat=Go,t.LuminanceAlphaFormat=Wo,t.RGBEFormat=qo,t.DepthFormat=Xo,t.DepthStencilFormat=Yo,t.RGB_S3TC_DXT1_Format=Zo,t.RGBA_S3TC_DXT1_Format=Ko,t.RGBA_S3TC_DXT3_Format=Qo,t.RGBA_S3TC_DXT5_Format=Jo,t.RGB_PVRTC_4BPPV1_Format=$o,t.RGB_PVRTC_2BPPV1_Format=ts,t.RGBA_PVRTC_4BPPV1_Format=es,t.RGBA_PVRTC_2BPPV1_Format=ns,t.RGB_ETC1_Format=rs,t.LoopOnce=is,t.LoopRepeat=os,t.LoopPingPong=ss,t.InterpolateDiscrete=as,t.InterpolateLinear=us,t.InterpolateSmooth=cs,t.ZeroCurvatureEnding=ls,t.ZeroSlopeEnding=hs,t.WrapAroundEnding=ps,t.TrianglesDrawMode=fs,t.TriangleStripDrawMode=ds,t.TriangleFanDrawMode=vs,t.LinearEncoding=ms,t.sRGBEncoding=ys,t.GammaEncoding=gs,t.RGBEEncoding=bs,t.LogLuvEncoding=_s,t.RGBM7Encoding=ws,t.RGBM16Encoding=xs,t.RGBDEncoding=Es,t.BasicDepthPacking=Ss,t.RGBADepthPacking=Ts,t.CubeGeometry=Sr,t.Face4=$r,t.LineStrip=Hu,t.LinePieces=Gu,t.MeshFaceMaterial=Ie,t.PointCloud=ti,t.Particle=de,t.ParticleSystem=ei,t.PointCloudMaterial=ni,t.ParticleBasicMaterial=ri,t.ParticleSystemMaterial=ii,t.Vertex=oi,t.GeometryUtils=Wu,t.ImageUtils=qu,t.Projector=si,t.CanvasRenderer=ai,Object.defineProperty(t,"__esModule",{value:!0})})},,,,,,,,,function(t,e,n){"use strict";function r(t){var e=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})}var i=n(6);e.toPromise=r},,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r=n(4);e.Subject=r.Subject;var i=n(5);e.Observable=i.Observable,n(84),n(88),n(91),n(94),n(97),n(100),n(102),n(105),n(106),n(109),n(112),n(113),n(115),n(118),n(127),n(130),n(132),n(136),n(137),n(139),n(142),n(145),n(148),n(151),n(155),n(158),n(161),n(169),n(171),n(173),n(175),n(177),n(179),n(181),n(182),n(184),n(185),n(186),n(187),n(189),n(192),n(194),n(196),n(198),n(200),n(202),n(204),n(206),n(208),n(210),n(212),n(214),n(216),n(218),n(220),n(222),n(225),n(227),n(229),n(231),n(233),n(234),n(239),n(241),n(243),n(245),n(247),n(248),n(250),n(251),n(252),n(254),n(256),n(258),n(259),n(260),n(261),n(262),n(264),n(266),n(270),n(271),n(272),n(274),n(277),n(279),n(281),n(283),n(285),n(287),n(288),n(289),n(291),n(293),n(295),n(297),n(299),n(301),n(303),n(305),n(307),n(309),n(311),n(313),n(322),n(324),n(326),n(328),n(330),n(332),n(334),n(336),n(338),n(340),n(342),n(344),n(346),n(348),n(350),n(351),n(353),n(355),n(357),n(359),n(361),n(363),n(364);var o=n(11);e.Subscription=o.Subscription;var s=n(9);e.Subscriber=s.Subscriber;var a=n(87);e.AsyncSubject=a.AsyncSubject;var u=n(164);e.ReplaySubject=u.ReplaySubject;var c=n(55);e.BehaviorSubject=c.BehaviorSubject;var l=n(268);e.MulticastObservable=l.MulticastObservable;var h=n(269);e.ConnectableObservable=h.ConnectableObservable;var p=n(39);e.Notification=p.Notification;var f=n(52);e.EmptyError=f.EmptyError;var d=n(224);e.ArgumentOutOfRangeError=d.ArgumentOutOfRangeError;var v=n(20);e.ObjectUnsubscribedError=v.ObjectUnsubscribedError;var m=n(16);e.UnsubscriptionError=m.UnsubscriptionError;var y=n(341);e.TimeInterval=y.TimeInterval;var g=n(347);e.Timestamp=g.Timestamp;var b=n(366);e.TestScheduler=b.TestScheduler;var _=n(372);e.VirtualTimeScheduler=_.VirtualTimeScheduler;var w=n(160);e.AjaxResponse=w.AjaxResponse,e.AjaxError=w.AjaxError,e.AjaxTimeoutError=w.AjaxTimeoutError;var x=n(316),E=n(122),S=n(165),T=n(373),M=n(18),C=n(32),A=n(19),O={asap:x.asap,queue:S.queue,animationFrame:T.animationFrame,async:E.async};e.Scheduler=O;var P={rxSubscriber:M.$$rxSubscriber,observable:A.$$observable,iterator:C.$$iterator};e.Symbol=P},function(t,e,n){"use strict";var r=n(5),i=n(85);r.Observable.bindCallback=i.bindCallback},function(t,e,n){"use strict";var r=n(86);e.bindCallback=r.BoundCallbackObservable.create},function(t,e,n){"use strict";function r(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function i(t){var e=t.err,n=t.subject;n.error(e)}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(5),a=n(14),u=n(15),c=n(87),l=function(t){function e(e,n,r,i){t.call(this),this.callbackFunc=e,this.selector=n,this.args=r,this.scheduler=i}return o(e,t),e.create=function(t,n,r){return void 0===n&&(n=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,n,i,r)}},e.prototype._subscribe=function(t){var n=this.callbackFunc,r=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(e.dispatch,0,{source:this,subscriber:t});if(!o){o=this.subject=new c.AsyncSubject;var s=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=t.source,i=r.selector,o=r.subject;if(i){var s=a.tryCatch(i).apply(this,e);s===u.errorObject?o.error(u.errorObject.e):(o.next(s),o.complete())}else o.next(1===e.length?e[0]:e),o.complete()};s.source=this;var l=a.tryCatch(n).apply(this,r.concat(s));l===u.errorObject&&o.error(u.errorObject.e)}return o.subscribe(t)},e.dispatch=function(t){var e=this,n=t.source,o=t.subscriber,s=n.callbackFunc,l=n.args,h=n.scheduler,p=n.subject;if(!p){p=n.subject=new c.AsyncSubject;var f=function t(){for(var n=[],o=0;o<arguments.length;o++)n[o-0]=arguments[o];var s=t.source,c=s.selector,l=s.subject;if(c){var p=a.tryCatch(c).apply(this,n);p===u.errorObject?e.add(h.schedule(i,0,{err:u.errorObject.e,subject:l})):e.add(h.schedule(r,0,{value:p,subject:l}))}else{var f=1===n.length?n[0]:n;e.add(h.schedule(r,0,{value:f,subject:l}))}};f.source=n;var d=a.tryCatch(s).apply(this,l.concat(f));d===u.errorObject&&p.error(u.errorObject.e)}e.add(p.subscribe(o))},
e}(s.Observable);e.BoundCallbackObservable=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(11),s=function(t){function e(){t.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return r(e,t),e.prototype._subscribe=function(e){return this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.Subscription.EMPTY):this.hasError?(e.error(this.thrownError),o.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.Subject);e.AsyncSubject=s},function(t,e,n){"use strict";var r=n(5),i=n(89);r.Observable.bindNodeCallback=i.bindNodeCallback},function(t,e,n){"use strict";var r=n(90);e.bindNodeCallback=r.BoundNodeCallbackObservable.create},function(t,e,n){"use strict";function r(t){var e=this,n=t.source,r=t.subscriber,s=n,a=s.callbackFunc,h=s.args,p=s.scheduler,f=n.subject;if(!f){f=n.subject=new l.AsyncSubject;var d=function t(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var s=t.source,a=s.selector,l=s.subject,h=n.shift();if(h)l.error(h);else if(a){var f=u.tryCatch(a).apply(this,n);f===c.errorObject?e.add(p.schedule(o,0,{err:c.errorObject.e,subject:l})):e.add(p.schedule(i,0,{value:f,subject:l}))}else{var d=1===n.length?n[0]:n;e.add(p.schedule(i,0,{value:d,subject:l}))}};d.source=n;var v=u.tryCatch(a).apply(this,h.concat(d));v===c.errorObject&&f.error(c.errorObject.e)}e.add(f.subscribe(r))}function i(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function o(t){var e=t.err,n=t.subject;n.error(e)}var s=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=n(5),u=n(14),c=n(15),l=n(87),h=function(t){function e(e,n,r,i){t.call(this),this.callbackFunc=e,this.selector=n,this.args=r,this.scheduler=i}return s(e,t),e.create=function(t,n,r){return void 0===n&&(n=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new e(t,n,i,r)}},e.prototype._subscribe=function(t){var e=this.callbackFunc,n=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(r,0,{source:this,subscriber:t});if(!o){o=this.subject=new l.AsyncSubject;var s=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=t.source,i=r.selector,o=r.subject,s=e.shift();if(s)o.error(s);else if(i){var a=u.tryCatch(i).apply(this,e);a===c.errorObject?o.error(c.errorObject.e):(o.next(a),o.complete())}else o.next(1===e.length?e[0]:e),o.complete()};s.source=this;var a=u.tryCatch(e).apply(this,n.concat(s));a===c.errorObject&&o.error(c.errorObject.e)}return o.subscribe(t)},e}(a.Observable);e.BoundNodeCallbackObservable=h},function(t,e,n){"use strict";var r=n(5),i=n(92);r.Observable.combineLatest=i.combineLatest},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,r=null;return i.isScheduler(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&o.isArray(t[0])&&(t=t[0]),new s.ArrayObservable(t,r).lift(new a.CombineLatestOperator(n))}var i=n(36),o=n(12),s=n(33),a=n(93);e.combineLatest=r},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),t.unshift(this),new o.ArrayObservable(t).lift(new l(n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(33),s=n(12),a=n(44),u=n(45),c={};e.combineLatest=r;var l=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.project))},t}();e.CombineLatestOperator=l;var h=function(t){function e(e,n){t.call(this,e),this.project=n,this.active=0,this.values=[],this.observables=[]}return i(e,t),e.prototype._next=function(t){this.values.push(c),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(u.subscribeToResult(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===c?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(a.OuterSubscriber);e.CombineLatestSubscriber=h},function(t,e,n){"use strict";var r=n(5),i=n(95);r.Observable.concat=i.concat},function(t,e,n){"use strict";var r=n(96);e.concat=r.concatStatic},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i.apply(void 0,[this].concat(t))}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null,r=t;return o.isScheduler(r[t.length-1])&&(n=r.pop()),new s.ArrayObservable(t,n).lift(new a.MergeAllOperator(1))}var o=n(36),s=n(33),a=n(43);e.concat=r,e.concatStatic=i},function(t,e,n){"use strict";var r=n(5),i=n(98);r.Observable.defer=i.defer},function(t,e,n){"use strict";var r=n(99);e.defer=r.DeferObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(45),s=n(44),a=function(t){function e(e){t.call(this),this.observableFactory=e}return r(e,t),e.create=function(t){return new e(t)},e.prototype._subscribe=function(t){return new u(t,this.observableFactory)},e}(i.Observable);e.DeferObservable=a;var u=function(t){function e(e,n){t.call(this,e),this.factory=n,this.tryDefer()}return r(e,t),e.prototype.tryDefer=function(){try{this._callFactory()}catch(t){this._error(t)}},e.prototype._callFactory=function(){var t=this.factory();t&&this.add(o.subscribeToResult(this,t))},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(101);r.Observable.empty=i.empty},function(t,e,n){"use strict";var r=n(35);e.empty=r.EmptyObservable.create},function(t,e,n){"use strict";var r=n(5),i=n(103);r.Observable.forkJoin=i.forkJoin},function(t,e,n){"use strict";var r=n(104);e.forkJoin=r.ForkJoinObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(35),s=n(12),a=n(45),u=n(44),c=function(t){function e(e,n){t.call(this),this.sources=e,this.resultSelector=n}return r(e,t),e.create=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];if(null===t||0===arguments.length)return new o.EmptyObservable;var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),0===t.length?new o.EmptyObservable:new e(t,r)},e.prototype._subscribe=function(t){return new l(t,this.sources,this.resultSelector)},e}(i.Observable);e.ForkJoinObservable=c;var l=function(t){function e(e,n,r){t.call(this,e),this.sources=n,this.resultSelector=r,this.completed=0,this.haveValues=0;var i=n.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var s=n[o],u=a.subscribeToResult(this,s,null,o);u&&(u.outerIndex=o,this.add(u))}}return r(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this,r=n.haveValues,i=n.resultSelector,o=n.values,s=o.length;if(!t._hasValue)return void e.complete();if(this.completed++,this.completed===s){if(r===s){var a=i?i.apply(this,o):o;e.next(a)}e.complete()}},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(27);r.Observable.from=i.from},function(t,e,n){"use strict";var r=n(5),i=n(107);r.Observable.fromEvent=i.fromEvent},function(t,e,n){"use strict";var r=n(108);e.fromEvent=r.FromEventObservable.create},function(t,e,n){"use strict";function r(t){return!!t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function i(t){return!!t&&"function"==typeof t.on&&"function"==typeof t.off}function o(t){return!!t&&"[object NodeList]"===t.toString()}function s(t){return!!t&&"[object HTMLCollection]"===t.toString()}function a(t){return!!t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}var u=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=n(5),l=n(14),h=n(10),p=n(15),f=n(11),d=function(t){function e(e,n,r,i){t.call(this),this.sourceObj=e,this.eventName=n,this.selector=r,this.options=i}return u(e,t),e.create=function(t,n,r,i){return h.isFunction(r)&&(i=r,r=void 0),new e(t,n,i,r)},e.setupSubscription=function(t,n,u,c,l){var h;if(o(t)||s(t))for(var p=0,d=t.length;p<d;p++)e.setupSubscription(t[p],n,u,c,l);else if(a(t)){var v=t;t.addEventListener(n,u,l),h=function(){return v.removeEventListener(n,u)}}else if(i(t)){var m=t;t.on(n,u),h=function(){return m.off(n,u)}}else if(r(t)){var y=t;t.addListener(n,u),h=function(){return y.removeListener(n,u)}}c.add(new f.Subscription(h))},e.prototype._subscribe=function(t){var n=this.sourceObj,r=this.eventName,i=this.options,o=this.selector,s=o?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=l.tryCatch(o).apply(void 0,e);r===p.errorObject?t.error(p.errorObject.e):t.next(r)}:function(e){return t.next(e)};e.setupSubscription(n,r,s,t,i)},e}(c.Observable);e.FromEventObservable=d},function(t,e,n){"use strict";var r=n(5),i=n(110);r.Observable.fromEventPattern=i.fromEventPattern},function(t,e,n){"use strict";var r=n(111);e.fromEventPattern=r.FromEventPatternObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(11),s=function(t){function e(e,n,r){t.call(this),this.addHandler=e,this.removeHandler=n,this.selector=r}return r(e,t),e.create=function(t,n,r){return new e(t,n,r)},e.prototype._subscribe=function(t){var e=this,n=this.removeHandler,r=this.selector?function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];e._callSelector(t,n)}:function(e){t.next(e)};this._callAddHandler(r,t),t.add(new o.Subscription(function(){n(r)}))},e.prototype._callSelector=function(t,e){try{var n=this.selector.apply(this,e);t.next(n)}catch(r){t.error(r)}},e.prototype._callAddHandler=function(t,e){try{this.addHandler(t)}catch(n){e.error(n)}},e}(i.Observable);e.FromEventPatternObservable=s},function(t,e,n){"use strict";var r=n(5),i=n(53);r.Observable.fromPromise=i.fromPromise},function(t,e,n){"use strict";var r=n(5),i=n(114);r.Observable.generate=i.GenerateObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(36),s=function(t){return t},a=function(t){function e(e,n,r,i,o){t.call(this),this.initialState=e,this.condition=n,this.iterate=r,this.resultSelector=i,this.scheduler=o}return r(e,t),e.create=function(t,n,r,i,a){return 1==arguments.length?new e(t.initialState,t.condition,t.iterate,t.resultSelector||s,t.scheduler):void 0===i||o.isScheduler(i)?new e(t,n,r,s,i):new e(t,n,r,i,a)},e.prototype._subscribe=function(t){var n=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:t,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:n});for(var r=this,i=r.condition,o=r.resultSelector,s=r.iterate;;){if(i){var a=void 0;try{a=i(n)}catch(u){return void t.error(u)}if(!a){t.complete();break}}var c=void 0;try{c=o(n)}catch(u){return void t.error(u)}if(t.next(c),t.closed)break;try{n=s(n)}catch(u){return void t.error(u)}}},e.dispatch=function(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(r){return void e.error(r)}else t.needIterate=!0;if(n){var i=void 0;try{i=n(t.state)}catch(r){return void e.error(r)}if(!i)return void e.complete();if(e.closed)return}var o;try{o=t.resultSelector(t.state)}catch(r){return void e.error(r)}if(!e.closed&&(e.next(o),!e.closed))return this.schedule(t)}},e}(i.Observable);e.GenerateObservable=a},function(t,e,n){"use strict";var r=n(5),i=n(116);r.Observable.if=i._if},function(t,e,n){"use strict";var r=n(117);e._if=r.IfObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(45),s=n(44),a=function(t){function e(e,n,r){t.call(this),this.condition=e,this.thenSource=n,this.elseSource=r}return r(e,t),e.create=function(t,n,r){return new e(t,n,r)},e.prototype._subscribe=function(t){var e=this,n=e.condition,r=e.thenSource,i=e.elseSource;return new u(t,n,r,i)},e}(i.Observable);e.IfObservable=a;var u=function(t){function e(e,n,r,i){t.call(this,e),this.condition=n,this.thenSource=r,this.elseSource=i,this.tryIf()}return r(e,t),e.prototype.tryIf=function(){var t,e=this,n=e.condition,r=e.thenSource,i=e.elseSource;try{t=n();var s=t?r:i;s?this.add(o.subscribeToResult(this,s)):this._complete()}catch(a){this._error(a)}},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(119);r.Observable.interval=i.interval},function(t,e,n){"use strict";var r=n(120);e.interval=r.IntervalObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(121),o=n(5),s=n(122),a=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=s.async),t.call(this),this.period=e,this.scheduler=n,(!i.isNumeric(e)||e<0)&&(this.period=0),n&&"function"==typeof n.schedule||(this.scheduler=s.async)}return r(e,t),e.create=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=s.async),new e(t,n)},e.dispatch=function(t){var e=t.index,n=t.subscriber,r=t.period;n.next(e),n.closed||(t.index+=1,this.schedule(t,r))},e.prototype._subscribe=function(t){var n=0,r=this.period,i=this.scheduler;t.add(i.schedule(e.dispatch,r,{index:n,subscriber:t,period:r}))},e}(o.Observable);e.IntervalObservable=a},function(t,e,n){"use strict";function r(t){return!i.isArray(t)&&t-parseFloat(t)+1>=0}var i=n(12);e.isNumeric=r},function(t,e,n){"use strict";var r=n(123),i=n(125);e.async=new i.AsyncScheduler(r.AsyncAction)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(6),o=n(124),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n,this.pending=!1}return r(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),i.root.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n?e:i.root.clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.delay=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null))},e}(o.Action);e.AsyncAction=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(11),o=function(t){function e(e,n){t.call(this)}return r(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i.Subscription);e.Action=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(126),o=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var n;this.active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}},e}(i.Scheduler);e.AsyncScheduler=o},function(t,e){"use strict";var n=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=n},function(t,e,n){"use strict";var r=n(5),i=n(128);r.Observable.merge=i.merge},function(t,e,n){"use strict";var r=n(129);e.merge=r.mergeStatic},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return a.isScheduler(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),1===t.length?t[0]:new o.ArrayObservable(t,r).lift(new s.MergeAllOperator(n))}var o=n(33),s=n(43),a=n(36);e.merge=r,e.mergeStatic=i},function(t,e,n){"use strict";var r=n(5),i=n(131);r.Observable.race=i.raceStatic},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&s.isArray(t[0])&&(t=t[0]),t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(1===t.length){if(!s.isArray(t[0]))return t[0];t=t[0]}return new a.ArrayObservable(t).lift(new l)}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(12),a=n(33),u=n(44),c=n(45);e.race=r,e.raceStatic=i;var l=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new h(t))},t}();e.RaceOperator=l;var h=function(t){function e(e){t.call(this,e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return o(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e;n++){var r=t[n],i=c.subscribeToResult(this,r,r,n);this.subscriptions&&(this.subscriptions.push(i),this.add(i))}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(u.OuterSubscriber);e.RaceSubscriber=h},function(t,e,n){"use strict";var r=n(5),i=n(133);r.Observable.never=i.never},function(t,e,n){"use strict";var r=n(134);e.never=r.NeverObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(135),s=function(t){function e(){t.call(this)}return r(e,t),e.create=function(){return new e},e.prototype._subscribe=function(t){o.noop()},e}(i.Observable);e.NeverObservable=s},function(t,e){"use strict";function n(){}e.noop=n},function(t,e,n){"use strict";var r=n(5),i=n(40);r.Observable.of=i.of},function(t,e,n){"use strict";var r=n(5),i=n(138);r.Observable.onErrorResumeNext=i.onErrorResumeNextStatic},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 1===t.length&&a.isArray(t[0])&&(t=t[0]),this.lift(new l(t))}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=null;return 1===t.length&&a.isArray(t[0])&&(t=t[0]),n=t.shift(),new s.FromObservable(n,null).lift(new l(t))}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(28),a=n(12),u=n(44),c=n(45);e.onErrorResumeNext=r,e.onErrorResumeNextStatic=i;var l=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.nextSources))},t}(),h=function(t){function e(e,n){t.call(this,e),this.destination=e,this.nextSources=n}return o(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(c.subscribeToResult(this,t)):this.destination.complete()},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(140);r.Observable.pairs=i.pairs},function(t,e,n){"use strict";var r=n(141);e.pairs=r.PairsObservable.create},function(t,e,n){"use strict";function r(t){var e=t.obj,n=t.keys,r=t.length,i=t.index,o=t.subscriber;if(i===r)return void o.complete();var s=n[i];o.next([s,e[s]]),t.index=i+1,this.schedule(t)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(5),s=function(t){function e(e,n){t.call(this),this.obj=e,this.scheduler=n,this.keys=Object.keys(e)}return i(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e=this,n=e.keys,i=e.scheduler,o=n.length;if(i)return i.schedule(r,0,{obj:this.obj,keys:n,length:o,index:0,subscriber:t});for(var s=0;s<o;s++){var a=n[s];t.next([a,this.obj[a]])}t.complete()},e}(o.Observable);e.PairsObservable=s},function(t,e,n){"use strict";var r=n(5),i=n(143);r.Observable.range=i.range},function(t,e,n){"use strict";var r=n(144);e.range=r.RangeObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=function(t){function e(e,n,r){t.call(this),this.start=e,this._count=n,this.scheduler=r}return r(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),void 0===n&&(n=0),new e(t,n,r)},e.dispatch=function(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;return n>=r?void i.complete():(i.next(e),void(i.closed||(t.index=n+1,t.start=e+1,this.schedule(t))))},e.prototype._subscribe=function(t){var n=0,r=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(e.dispatch,0,{index:n,count:i,start:r,subscriber:t});for(;;){if(n++>=i){t.complete();break}if(t.next(r++),t.closed)break}},e}(i.Observable);e.RangeObservable=o},function(t,e,n){"use strict";var r=n(5),i=n(146);r.Observable.using=i.using},function(t,e,n){"use strict";var r=n(147);e.using=r.UsingObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(45),s=n(44),a=function(t){function e(e,n){t.call(this),this.resourceFactory=e,this.observableFactory=n}return r(e,t),e.create=function(t,n){return new e(t,n)},e.prototype._subscribe=function(t){var e,n=this,r=n.resourceFactory,i=n.observableFactory;try{return e=r(),new u(t,e,i)}catch(o){t.error(o)}},e}(i.Observable);e.UsingObservable=a;var u=function(t){function e(e,n,r){t.call(this,e),this.resource=n,this.observableFactory=r,e.add(n),this.tryUse()}return r(e,t),e.prototype.tryUse=function(){try{var t=this.observableFactory.call(this,this.resource);t&&this.add(o.subscribeToResult(this,t))}catch(e){this._error(e)}},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(149);r.Observable.throw=i._throw},function(t,e,n){"use strict";var r=n(150);e._throw=r.ErrorObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=function(t){function e(e,n){t.call(this),this.error=e,this.scheduler=n}return r(e,t),e.create=function(t,n){return new e(t,n)},e.dispatch=function(t){var e=t.error,n=t.subscriber;n.error(e)},e.prototype._subscribe=function(t){var n=this.error,r=this.scheduler;return r?r.schedule(e.dispatch,0,{error:n,subscriber:t}):void t.error(n)},e}(i.Observable);e.ErrorObservable=o},function(t,e,n){"use strict";var r=n(5),i=n(152);r.Observable.timer=i.timer},function(t,e,n){"use strict";var r=n(153);e.timer=r.TimerObservable.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(121),o=n(5),s=n(122),a=n(36),u=n(154),c=function(t){function e(e,n,r){void 0===e&&(e=0),t.call(this),this.period=-1,this.dueTime=0,i.isNumeric(n)?this.period=Number(n)<1&&1||Number(n):a.isScheduler(n)&&(r=n),a.isScheduler(r)||(r=s.async),this.scheduler=r,this.dueTime=u.isDate(e)?+e-this.scheduler.now():e}return r(e,t),e.create=function(t,n,r){return void 0===t&&(t=0),new e(t,n,r)},e.dispatch=function(t){var e=t.index,n=t.period,r=t.subscriber,i=this;if(r.next(e),!r.closed){if(n===-1)return r.complete();t.index=e+1,i.schedule(t,n)}},e.prototype._subscribe=function(t){var n=0,r=this,i=r.period,o=r.dueTime,s=r.scheduler;return s.schedule(e.dispatch,o,{index:n,period:i,subscriber:t})},e}(o.Observable);e.TimerObservable=c},function(t,e){"use strict";function n(t){return t instanceof Date&&!isNaN(+t)}e.isDate=n},function(t,e,n){"use strict";var r=n(5),i=n(156);r.Observable.zip=i.zip},function(t,e,n){"use strict";var r=n(157);e.zip=r.zipStatic},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.unshift(this),i.apply(this,t)}function i(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),new s.ArrayObservable(t).lift(new p(n))}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(33),a=n(12),u=n(9),c=n(44),l=n(45),h=n(32);e.zipProto=r,e.zipStatic=i;var p=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.project))},t}();e.ZipOperator=p;var f=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null)),t.call(this,e),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof n?n:null,this.values=r}return o(e,t),e.prototype._next=function(t){var e=this.iterators,n=this.index++;a.isArray(t)?e.push(new v(t)):"function"==typeof t[h.$$iterator]?e.push(new d(t[h.$$iterator]())):e.push(new m(this.destination,this,t,n))},e.prototype._complete=function(){var t=this.iterators,e=t.length;this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){var i=t[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,s=[],r=0;r<e;r++){var i=t[r],a=i.next();if(i.hasCompleted()&&(o=!0),a.done)return void n.complete();s.push(a.value)}this.project?this._tryProject(s):n.next(s),o&&n.complete()},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(u.Subscriber);e.ZipSubscriber=f;var d=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),v=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[h.$$iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),m=function(t){function e(e,n,r,i){t.call(this,e),this.parent=n,this.observable=r,this.index=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return o(e,t),e.prototype[h.$$iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return l.subscribeToResult(this,this.observable,this,e)},e}(c.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(159);r.Observable.ajax=i.ajax},function(t,e,n){"use strict";var r=n(160);e.ajax=r.AjaxObservable.create},function(t,e,n){"use strict";function r(){if(h.root.XMLHttpRequest){var t=new h.root.XMLHttpRequest;return"withCredentials"in t&&(t.withCredentials=!!this.withCredentials),t}if(h.root.XDomainRequest)return new h.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}function i(){if(h.root.XMLHttpRequest)return new h.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=0;n<3;n++)try{if(t=e[n],new h.root.ActiveXObject(t))break}catch(r){}return new h.root.ActiveXObject(t)}catch(r){throw new Error("XMLHttpRequest is not supported by your browser")}}function o(t,e){return void 0===e&&(e=null),new m({method:"GET",url:t,headers:e})}function s(t,e,n){return new m({method:"POST",
url:t,body:e,headers:n})}function a(t,e){return new m({method:"DELETE",url:t,headers:e})}function u(t,e,n){return new m({method:"PUT",url:t,body:e,headers:n})}function c(t,e){return new m({method:"GET",url:t,responseType:"json",headers:e}).map(function(t){return t.response})}var l=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},h=n(6),p=n(14),f=n(15),d=n(5),v=n(9);e.ajaxGet=o,e.ajaxPost=s,e.ajaxDelete=a,e.ajaxPut=u,e.ajaxGetJSON=c;var m=function(t){function e(e){t.call(this);var n={async:!0,createXHR:function(){return this.crossDomain?r.call(this):i()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof e)n.url=e;else for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);this.request=n}return l(e,t),e.prototype._subscribe=function(t){return new y(t,this.request)},e.create=function(){var t=function(t){return new e(t)};return t.get=o,t.post=s,t.delete=a,t.put=u,t.getJSON=c,t}(),e}(d.Observable);e.AjaxObservable=m;var y=function(t){function e(e,n){t.call(this,e),this.request=n,this.done=!1;var r=n.headers=n.headers||{};n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||h.root.FormData&&n.body instanceof h.root.FormData||"undefined"==typeof n.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),n.body=this.serializeBody(n.body,n.headers["Content-Type"]),this.send()}return l(e,t),e.prototype.next=function(t){this.done=!0;var e=this,n=e.xhr,r=e.request,i=e.destination,o=new g(t,n,r);i.next(o)},e.prototype.send=function(){var t=this,e=t.request,n=t.request,r=n.user,i=n.method,o=n.url,s=n.async,a=n.password,u=n.headers,c=n.body,l=e.createXHR,h=p.tryCatch(l).call(e);if(h===f.errorObject)this.error(f.errorObject.e);else{this.xhr=h;var d=void 0;if(d=r?p.tryCatch(h.open).call(h,i,o,s,r,a):p.tryCatch(h.open).call(h,i,o,s),d===f.errorObject)return this.error(f.errorObject.e),null;h.timeout=e.timeout,h.responseType=e.responseType,this.setHeaders(h,u),this.setupEvents(h,e),c?h.send(c):h.send()}return h},e.prototype.serializeBody=function(t,e){if(!t||"string"==typeof t)return t;if(h.root.FormData&&t instanceof h.root.FormData)return t;if(e){var n=e.indexOf(";");n!==-1&&(e=e.substring(0,n))}switch(e){case"application/x-www-form-urlencoded":return Object.keys(t).map(function(e){return encodeURI(e)+"="+encodeURI(t[e])}).join("&");case"application/json":return JSON.stringify(t);default:return t}},e.prototype.setHeaders=function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setRequestHeader(n,e[n])},e.prototype.setupEvents=function(t,e){var n=e.progressSubscriber;t.ontimeout=function t(e){var n=t,r=n.subscriber,i=n.progressSubscriber,o=n.request;i&&i.error(e),r.error(new _(this,o))},t.ontimeout.request=e,t.ontimeout.subscriber=this,t.ontimeout.progressSubscriber=n,t.upload&&"withCredentials"in t&&h.root.XDomainRequest&&(n&&(t.onprogress=function t(e){var n=t.progressSubscriber;n.next(e)},t.onprogress.progressSubscriber=n),t.onerror=function t(e){var n=t,r=n.progressSubscriber,i=n.subscriber,o=n.request;r&&r.error(e),i.error(new b("ajax error",this,o))},t.onerror.request=e,t.onerror.subscriber=this,t.onerror.progressSubscriber=n),t.onreadystatechange=function t(e){var n=t,r=n.subscriber,i=n.progressSubscriber,o=n.request;if(4===this.readyState){var s=1223===this.status?204:this.status,a="text"===this.responseType?this.response||this.responseText:this.response;0===s&&(s=a?200:0),200<=s&&s<300?(i&&i.complete(),r.next(e),r.complete()):(i&&i.error(e),r.error(new b("ajax error "+s,this,o)))}},t.onreadystatechange.subscriber=this,t.onreadystatechange.progressSubscriber=n,t.onreadystatechange.request=e},e.prototype.unsubscribe=function(){var e=this,n=e.done,r=e.xhr;!n&&r&&4!==r.readyState&&r.abort(),t.prototype.unsubscribe.call(this)},e}(v.Subscriber);e.AjaxSubscriber=y;var g=function(){function t(t,e,n){switch(this.originalEvent=t,this.xhr=e,this.request=n,this.status=e.status,this.responseType=e.responseType||n.responseType,this.responseType){case"json":"response"in e?this.response=e.responseType?e.response:JSON.parse(e.response||e.responseText||""):this.response=JSON.parse(e.responseText||"");break;case"xml":this.response=e.responseXML;break;case"text":default:this.response="response"in e?e.response:e.responseText}}return t}();e.AjaxResponse=g;var b=function(t){function e(e,n,r){t.call(this,e),this.message=e,this.xhr=n,this.request=r,this.status=n.status}return l(e,t),e}(Error);e.AjaxError=b;var _=function(t){function e(e,n){t.call(this,"ajax timeout",e,n)}return l(e,t),e}(b);e.AjaxTimeoutError=_},function(t,e,n){"use strict";var r=n(5),i=n(162);r.Observable.webSocket=i.webSocket},function(t,e,n){"use strict";var r=n(163);e.webSocket=r.WebSocketSubject.create},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(9),s=n(5),a=n(11),u=n(6),c=n(164),l=n(14),h=n(15),p=n(168),f=function(t){function e(e,n){if(e instanceof s.Observable)t.call(this,n,e);else{if(t.call(this),this.WebSocketCtor=u.root.WebSocket,this._output=new i.Subject,"string"==typeof e?this.url=e:p.assign(this,e),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new c.ReplaySubject}}return r(e,t),e.prototype.resultSelector=function(t){return JSON.parse(t.data)},e.create=function(t){return new e(t)},e.prototype.lift=function(t){var n=new e(this,this.destination);return n.operator=t,n},e.prototype.multiplex=function(t,e,n){var r=this;return new s.Observable(function(i){var o=l.tryCatch(t)();o===h.errorObject?i.error(h.errorObject.e):r.next(o);var s=r.subscribe(function(t){var e=l.tryCatch(n)(t);e===h.errorObject?i.error(h.errorObject.e):e&&i.next(t)},function(t){return i.error(t)},function(){return i.complete()});return function(){var t=l.tryCatch(e)();t===h.errorObject?i.error(h.errorObject.e):r.next(t),s.unsubscribe()}})},e.prototype._connectSocket=function(){var t=this,e=this.WebSocketCtor,n=this.protocol?new e(this.url,this.protocol):new e(this.url);this.socket=n;var r=new a.Subscription(function(){t.socket=null,n&&1===n.readyState&&n.close()}),i=this._output;n.onopen=function(e){var s=t.openObserver;s&&s.next(e);var a=t.destination;t.destination=o.Subscriber.create(function(t){return 1===n.readyState&&n.send(t)},function(e){var r=t.closingObserver;r&&r.next(void 0),e&&e.code?n.close(e.code,e.reason):i.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t.destination=new c.ReplaySubject,t.socket=null},function(){var e=t.closingObserver;e&&e.next(void 0),n.close(),t.destination=new c.ReplaySubject,t.socket=null}),a&&a instanceof c.ReplaySubject&&r.add(a.subscribe(t.destination))},n.onerror=function(t){return i.error(t)},n.onclose=function(e){var n=t.closeObserver;n&&n.next(e),e.wasClean?i.complete():i.error(e)},n.onmessage=function(e){var n=l.tryCatch(t.resultSelector)(e);n===h.errorObject?i.error(h.errorObject.e):i.next(n)}},e.prototype._subscribe=function(t){var e=this,n=this.source;if(n)return n.subscribe(t);this.socket||this._connectSocket();var r=new a.Subscription;return r.add(this._output.subscribe(t)),r.add(function(){var t=e.socket;0===e._output.observers.length&&t&&1===t.readyState&&(t.close(),e.socket=null)}),r},e.prototype.unsubscribe=function(){var e=this,n=e.source,r=e.socket;r&&1===r.readyState&&(r.close(),this.socket=null),t.prototype.unsubscribe.call(this),n||(this.destination=new c.ReplaySubject)},e}(i.AnonymousSubject);e.WebSocketSubject=f},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(165),s=n(38),a=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),t.call(this),this.scheduler=r,this._events=[],this._bufferSize=e<1?1:e,this._windowTime=n<1?1:n}return r(e,t),e.prototype.next=function(e){var n=this._getNow();this._events.push(new u(n,e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var n=this._trimBufferThenGetEvents(),r=this.scheduler;r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return t.prototype._subscribe.call(this,e)},e.prototype._getNow=function(){return(this.scheduler||o.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.Subject);e.ReplaySubject=a;var u=function(){function t(t,e){this.time=t,this.value=e}return t}()},function(t,e,n){"use strict";var r=n(166),i=n(167);e.queue=new i.QueueScheduler(r.QueueAction)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(123),o=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return r(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(i.AsyncAction);e.QueueAction=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(125),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e}(i.AsyncScheduler);e.QueueScheduler=o},function(t,e,n){"use strict";var r=n(6),i=r.root.Object;"function"!=typeof i.assign&&!function(){i.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(void 0===t||null===t)throw new TypeError("cannot convert undefined or null to object");for(var r=i(t),o=e.length,s=0;s<o;s++){var a=e[s];if(void 0!==a&&null!==a)for(var u in a)a.hasOwnProperty(u)&&(r[u]=a[u])}return r}}(),e.assign=i.assign},function(t,e,n){"use strict";var r=n(5),i=n(170);r.Observable.prototype.buffer=i.buffer},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.buffer=r;var a=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.closingNotifier))},t}(),u=function(t){function e(e,n){t.call(this,e),this.buffer=[],this.add(s.subscribeToResult(this,n))}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(172);r.Observable.prototype.bufferCount=i.bufferCount},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=null),this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.bufferCount=r;var s=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.bufferSize,this.startBufferEvery))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.bufferSize=n,this.startBufferEvery=r,this.buffers=[[]],this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.count+=1,n=this.destination,r=this.bufferSize,i=null==this.startBufferEvery?r:this.startBufferEvery,o=this.buffers,s=o.length,a=-1;e%i===0&&o.push([]);for(var u=0;u<s;u++){var c=o[u];c.push(t),c.length===r&&(a=u,n.next(c))}a!==-1&&o.splice(a,1)},e.prototype._complete=function(){for(var e=this.destination,n=this.buffers;n.length>0;){var r=n.shift();r.length>0&&e.next(r)}t.prototype._complete.call(this)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(174);r.Observable.prototype.bufferTime=i.bufferTime},function(t,e,n){"use strict";function r(t){var e=arguments.length,n=u.async;l.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),this.lift(new h(t,r,i,n))}function i(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function o(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext(),a=this;r.closed||(r.add(o.closeAction=i.schedule(s,n,{subscriber:r,context:o})),a.schedule(t,e))}function s(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n(122),c=n(9),l=n(36);e.bufferTime=r;var h=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new f(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),p=function(){function t(){this.buffer=[]}return t}(),f=function(t){function e(e,n,r,a,u){t.call(this,e),this.bufferTimeSpan=n,this.bufferCreationInterval=r,this.maxBufferSize=a,this.scheduler=u,this.contexts=[];var c=this.openContext();if(this.timespanOnly=null==r||r<0,this.timespanOnly){var l={subscriber:this,context:c,bufferTimeSpan:n};this.add(c.closeAction=u.schedule(i,n,l))}else{var h={subscriber:this,context:c},p={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:this,scheduler:u};this.add(c.closeAction=u.schedule(s,n,h)),this.add(u.schedule(o,r,p))}}return a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],s=o.buffer;s.push(t),s.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this,n=e.contexts,r=e.destination;n.length>0;){var i=n.shift();r.next(i.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(i,n,r))}},e.prototype.openContext=function(){var t=new p;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts,n=e?e.indexOf(t):-1;n>=0&&e.splice(e.indexOf(t),1)},e}(c.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(176);r.Observable.prototype.bufferToggle=i.bufferToggle},function(t,e,n){"use strict";function r(t,e){return this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(11),s=n(45),a=n(44);e.bufferToggle=r;var u=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.openings,this.closingSelector))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(s.subscribeToResult(this,n))}return i(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector,n=e.call(this,t);n&&this.trySubscribe(n)}catch(r){this._error(r)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=[],r=new o.Subscription,i={buffer:n,subscription:r};e.push(i);var a=s.subscribeToResult(this,t,i);!a||a.closed?this.closeBuffer(i):(a.context=i,this.add(a),r.add(a))},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(178);r.Observable.prototype.bufferWhen=i.bufferWhen},function(t,e,n){"use strict";function r(t){return this.lift(new l(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(11),s=n(14),a=n(15),u=n(44),c=n(45);e.bufferWhen=r;var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){t.call(this,e),this.closingSelector=n,this.subscribing=!1,this.openBuffer()}return i(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=s.tryCatch(this.closingSelector)();n===a.errorObject?this.error(a.errorObject.e):(t=new o.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(c.subscribeToResult(this,n)),this.subscribing=!1)},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(180);r.Observable.prototype.cache=i.cache},function(t,e,n){"use strict";function r(t,e,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var r,s,a=this,u=0,c=function(){return r=new o.ReplaySubject(t,e,n)};return new i.Observable(function(t){r||(r=c(),s=a.subscribe(function(t){return r.next(t)},function(t){var e=r;r=null,e.error(t)},function(){return r.complete()})),u++,r||(r=c());var e=r.subscribe(t);return function(){u--,e&&e.unsubscribe(),0===u&&s.unsubscribe()}})}var i=n(5),o=n(164);e.cache=r},function(t,e,n){"use strict";var r=n(5),i=n(49);r.Observable.prototype.catch=i._catch},function(t,e,n){"use strict";var r=n(5),i=n(183);r.Observable.prototype.combineAll=i.combineAll},function(t,e,n){"use strict";function r(t){return this.lift(new i.CombineLatestOperator(t))}var i=n(93);e.combineAll=r},function(t,e,n){"use strict";var r=n(5),i=n(93);r.Observable.prototype.combineLatest=i.combineLatest},function(t,e,n){"use strict";var r=n(5),i=n(96);r.Observable.prototype.concat=i.concat},function(t,e,n){"use strict";var r=n(5),i=n(50);r.Observable.prototype.concatAll=i.concatAll},function(t,e,n){"use strict";var r=n(5),i=n(188);r.Observable.prototype.concatMap=i.concatMap},function(t,e,n){"use strict";function r(t,e){return this.lift(new i.MergeMapOperator(t,e,1))}var i=n(47);e.concatMap=r},function(t,e,n){"use strict";var r=n(5),i=n(190);r.Observable.prototype.concatMapTo=i.concatMapTo},function(t,e,n){"use strict";function r(t,e){return this.lift(new i.MergeMapToOperator(t,e,1))}var i=n(191);e.concatMapTo=r},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"number"==typeof e&&(n=e,e=null),this.lift(new a(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.mergeMapTo=r;var a=function(){function t(t,e,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.ish=t,this.resultSelector=e,this.concurrent=n}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.ish,this.resultSelector,this.concurrent))},t}();e.MergeMapToOperator=a;var u=function(t){function e(e,n,r,i){void 0===i&&(i=Number.POSITIVE_INFINITY),t.call(this,e),this.ish=n,this.resultSelector=r,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.resultSelector,n=this.index++,r=this.ish,i=this.destination;this.active++,this._innerSub(r,i,e,t,n)}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n,r,i){this.add(s.subscribeToResult(this,t,r,i))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this,s=o.resultSelector,a=o.destination;s?this.trySelectResult(t,e,n,r):a.next(e)},e.prototype.trySelectResult=function(t,e,n,r){var i,o=this,s=o.resultSelector,a=o.destination;try{i=s(t,e,n,r)}catch(u){return void a.error(u)}a.next(i)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber);e.MergeMapToSubscriber=u},function(t,e,n){"use strict";var r=n(5),i=n(193);r.Observable.prototype.count=i.count},function(t,e,n){"use strict";function r(t){return this.lift(new s(t,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.count=r;var s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate,this.source))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.source=r,this.count=0,this.index=0}return i(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(195);r.Observable.prototype.dematerialize=i.dematerialize},function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.dematerialize=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(197);r.Observable.prototype.debounce=i.debounce},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.debounce=r;var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1,this.durationSubscription=null}return i(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),n=s.subscribeToResult(this,e),n.closed||this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(199);r.Observable.prototype.debounceTime=i.debounceTime},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=a.async),this.lift(new u(t,e))}function i(t){t.debouncedNext()}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(9),a=n(122);e.debounceTime=r;var u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.dueTime,this.scheduler))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.dueTime=n,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(i,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(s.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(201);r.Observable.prototype.defaultIfEmpty=i.defaultIfEmpty},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=null),this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.defaultIfEmpty=r;var s=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.defaultValue))},t}(),a=function(t){function e(e,n){t.call(this,e),this.defaultValue=n,this.isEmpty=!0}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(203);r.Observable.prototype.delay=i.delay},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=o.async);var n=s.isDate(t),r=n?+t-e.now():Math.abs(t);return this.lift(new c(r,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(122),s=n(154),a=n(9),u=n(39);e.delay=r;var c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.delay,this.scheduler))},t}(),l=function(t){function e(e,n,r){t.call(this,e),this.delay=n,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return i(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(this.errored!==!0){var e=this.scheduler,n=new h(e.now()+this.delay,t);this.queue.push(n),this.active===!1&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(u.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(u.Notification.createComplete())},e}(a.Subscriber),h=function(){function t(t,e){this.time=t,this.notification=e}return t}()},function(t,e,n){"use strict";var r=n(5),i=n(205);r.Observable.prototype.delayWhen=i.delayWhen},function(t,e,n){"use strict";function r(t,e){return e?new h(this,e).lift(new c(t)):this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(5),a=n(44),u=n(45);e.delayWhen=r;var c=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.delayDurationSelector))},t}(),l=function(t){function e(e,n){t.call(this,e),this.delayDurationSelector=n,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return e!==-1&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=u.subscribeToResult(this,t,e);this.add(n),this.delayNotifierSubscriptions.push(n),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(a.OuterSubscriber),h=function(t){function e(e,n){t.call(this),this.source=e,this.subscriptionDelay=n}return i(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new p(t,this.source))},e}(s.Observable),p=function(t){function e(e,n){t.call(this),this.parent=e,this.source=n,this.sourceSubscribed=!1}return i(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(207);
r.Observable.prototype.distinct=i.distinct},function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.distinct=r;var a=function(){function t(t,e){this.compare=t,this.flushes=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.compare,this.flushes))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.values=[],"function"==typeof n&&(this.compare=n),r&&this.add(s.subscribeToResult(this,r))}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.length=0},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){var e=!1,n=this.values,r=n.length;try{for(var i=0;i<r;i++)if(this.compare(n[i],t))return void(e=!0)}catch(o){return void this.destination.error(o)}this.values.push(t),this.destination.next(t)},e.prototype.compare=function(t,e){return t===e},e}(o.OuterSubscriber);e.DistinctSubscriber=u},function(t,e,n){"use strict";var r=n(5),i=n(209);r.Observable.prototype.distinctKey=i.distinctKey},function(t,e,n){"use strict";function r(t,e,n){return i.distinct.call(this,function(n,r){return e?e(n[t],r[t]):n[t]===r[t]},n)}var i=n(207);e.distinctKey=r},function(t,e,n){"use strict";var r=n(5),i=n(211);r.Observable.prototype.distinctUntilChanged=i.distinctUntilChanged},function(t,e,n){"use strict";function r(t,e){return this.lift(new u(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(14),a=n(15);e.distinctUntilChanged=r;var u=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.keySelector=r,this.hasKey=!1,"function"==typeof n&&(this.compare=n)}return i(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=this.keySelector,n=t;if(e&&(n=s.tryCatch(this.keySelector)(t),n===a.errorObject))return this.destination.error(a.errorObject.e);var r=!1;if(this.hasKey){if(r=s.tryCatch(this.compare)(this.key,n),r===a.errorObject)return this.destination.error(a.errorObject.e)}else this.hasKey=!0;Boolean(r)===!1&&(this.key=n,this.destination.next(t))},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(213);r.Observable.prototype.distinctUntilKeyChanged=i.distinctUntilKeyChanged},function(t,e,n){"use strict";function r(t,e){return i.distinctUntilChanged.call(this,function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}var i=n(211);e.distinctUntilKeyChanged=r},function(t,e,n){"use strict";var r=n(5),i=n(215);r.Observable.prototype.do=i._do},function(t,e,n){"use strict";function r(t,e,n){return this.lift(new s(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e._do=r;var s=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(t){function e(e,n,r,i){t.call(this,e);var s=new o.Subscriber(n,r,i);s.syncErrorThrowable=!0,this.add(s),this.safeSubscriber=s}return i(e,t),e.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},e.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},e.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(217);r.Observable.prototype.exhaust=i.exhaust},function(t,e,n){"use strict";function r(){return this.lift(new a)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.exhaust=r;var a=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e),this.hasCompleted=!1,this.hasSubscription=!1}return i(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(s.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(219);r.Observable.prototype.exhaustMap=i.exhaustMap},function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.exhaustMap=r;var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.resultSelector))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return i(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(s.subscribeToResult(this,r,t,e))}catch(i){n.error(i)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this,s=o.resultSelector,a=o.destination;s?this.trySelectResult(t,e,n,r):a.next(e)},e.prototype.trySelectResult=function(t,e,n,r){var i=this,o=i.resultSelector,s=i.destination;try{var a=o(t,e,n,r);s.next(a)}catch(u){s.error(u)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(221);r.Observable.prototype.expand=i.expand},function(t,e,n){"use strict";function r(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,this.lift(new c(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),s=n(15),a=n(44),u=n(45);e.expand=r;var c=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=c;var l=function(t){function e(e,n,r,i){t.call(this,e),this.project=n,this.concurrent=r,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(this.buffer=[])}return i(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)return void this._complete();var r=this.index++;if(this.active<this.concurrent){n.next(t);var i=o.tryCatch(this.project)(t,r);if(i===s.errorObject)n.error(s.errorObject.e);else if(this.scheduler){var a={subscriber:this,result:i,value:t,index:r};this.add(this.scheduler.schedule(e.dispatch,0,a))}else this.subscribeToProjection(i,t,r)}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(u.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(a.OuterSubscriber);e.ExpandSubscriber=l},function(t,e,n){"use strict";var r=n(5),i=n(223);r.Observable.prototype.elementAt=i.elementAt},function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(224);e.elementAt=r;var a=function(){function t(t,e){if(this.index=t,this.defaultValue=e,t<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.index,this.defaultValue))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.index=n,this.defaultValue=r}return i(e,t),e.prototype._next=function(t){0===this.index--&&(this.destination.next(t),this.destination.complete())},e.prototype._complete=function(){var t=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?t.next(this.defaultValue):t.error(new s.ArgumentOutOfRangeError)),t.complete()},e}(o.Subscriber)},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){var e=t.call(this,"argument out of range");this.name=e.name="ArgumentOutOfRangeError",this.stack=e.stack,this.message=e.message}return n(e,t),e}(Error);e.ArgumentOutOfRangeError=r},function(t,e,n){"use strict";var r=n(5),i=n(226);r.Observable.prototype.filter=i.filter},function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.filter=r;var s=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate,this.thisArg))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.thisArg=r,this.count=0,this.predicate=n}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(228);r.Observable.prototype.finally=i._finally},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(11);e._finally=r;var a=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.callback))},t}(),u=function(t){function e(e,n){t.call(this,e),this.add(new s.Subscription(n))}return i(e,t),e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(230);r.Observable.prototype.find=i.find},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return this.lift(new s(t,this,(!1),e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.find=r;var s=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=s;var a=function(t){function e(e,n,r,i,o){t.call(this,e),this.predicate=n,this.source=r,this.yieldIndex=i,this.thisArg=o,this.index=0}return i(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this,n=e.predicate,r=e.thisArg,i=this.index++;try{var o=n.call(r||this,t,i,this.source);o&&this.notifyComplete(this.yieldIndex?i:t)}catch(s){this.destination.error(s)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(o.Subscriber);e.FindValueSubscriber=a},function(t,e,n){"use strict";var r=n(5),i=n(232);r.Observable.prototype.findIndex=i.findIndex},function(t,e,n){"use strict";function r(t,e){return this.lift(new i.FindValueOperator(t,this,(!0),e))}var i=n(230);e.findIndex=r},function(t,e,n){"use strict";var r=n(5),i=n(51);r.Observable.prototype.first=i.first},function(t,e,n){"use strict";var r=n(5),i=n(235);r.Observable.prototype.groupBy=i.groupBy},function(t,e,n){"use strict";function r(t,e,n){return this.lift(new h(this,t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(11),a=n(5),u=n(4),c=n(236),l=n(238);e.groupBy=r;var h=function(){function t(t,e,n,r){this.source=t,this.keySelector=e,this.elementSelector=n,this.durationSelector=r}return t.prototype.call=function(t,e){return e._subscribe(new p(t,this.keySelector,this.elementSelector,this.durationSelector))},t}(),p=function(t){function e(e,n,r,i){t.call(this,e),this.keySelector=n,this.elementSelector=r,this.durationSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return i(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups="string"==typeof e?new l.FastMap:new c.Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){n.set(e,i=new u.Subject);var s=new d(e,i,this);if(this.destination.next(s),this.durationSelector){var a=void 0;try{a=this.durationSelector(new d(e,i))}catch(o){return void this.error(o)}this.add(a.subscribe(new f(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.Subscriber),f=function(t){function e(e,n,r){t.call(this),this.key=e,this.group=n,this.parent=r}return i(e,t),e.prototype._next=function(t){this._complete()},e.prototype._error=function(t){var e=this.group;e.closed||e.error(t),this.parent.removeGroup(this.key)},e.prototype._complete=function(){var t=this.group;t.closed||t.complete(),this.parent.removeGroup(this.key)},e}(o.Subscriber),d=function(t){function e(e,n,r){t.call(this),this.key=e,this.groupSubject=n,this.refCountSubscription=r}return i(e,t),e.prototype._subscribe=function(t){var e=new s.Subscription,n=this,r=n.refCountSubscription,i=n.groupSubject;return r&&!r.closed&&e.add(new v(r)),e.add(i.subscribe(t)),e},e}(a.Observable);e.GroupedObservable=d;var v=function(t){function e(e){t.call(this),this.parent=e,e.count++}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(s.Subscription)},function(t,e,n){"use strict";var r=n(6),i=n(237);e.Map=r.root.Map||function(){return i.MapPolyfill}()},function(t,e){"use strict";var n=function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return e===-1?void 0:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return n===-1?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.delete=function(t){var e=this._keys.indexOf(t);return e!==-1&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();e.MapPolyfill=n},function(t,e){"use strict";var n=function(){function t(){this.values={}}return t.prototype.delete=function(t){return this.values[t]=null,!0},t.prototype.set=function(t,e){return this.values[t]=e,this},t.prototype.get=function(t){return this.values[t]},t.prototype.forEach=function(t,e){var n=this.values;for(var r in n)n.hasOwnProperty(r)&&null!==n[r]&&t.call(e,n[r],r)},t.prototype.clear=function(){this.values={}},t}();e.FastMap=n},function(t,e,n){"use strict";var r=n(5),i=n(240);r.Observable.prototype.ignoreElements=i.ignoreElements},function(t,e,n){"use strict";function r(){return this.lift(new a)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(135);e.ignoreElements=r;var a=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype._next=function(t){s.noop()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(242);r.Observable.prototype.isEmpty=i.isEmpty},function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.isEmpty=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(244);r.Observable.prototype.audit=i.audit},function(t,e,n){"use strict";function r(t){return this.lift(new c(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),s=n(15),a=n(44),u=n(45);e.audit=r;var c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){t.call(this,e),this.durationSelector=n,this.hasValue=!1}return i(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=o.tryCatch(this.durationSelector)(t);e===s.errorObject?this.destination.error(s.errorObject.e):this.add(this.throttled=u.subscribeToResult(this,e))}},e.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,r=t.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(246);r.Observable.prototype.auditTime=i.auditTime},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=s.async),this.lift(new u(t,e))}function i(t){t.clearThrottle()}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(122),a=n(9);e.auditTime=r;var u=function(){function t(t,e){this.duration=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.duration,this.scheduler))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.duration=n,this.scheduler=r,this.hasValue=!1}return o(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(i,this.duration,this))},e.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,r=t.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e}(a.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(54);r.Observable.prototype.last=i.last},function(t,e,n){"use strict";var r=n(5),i=n(249);r.Observable.prototype.let=i.letProto,r.Observable.prototype.letBind=i.letProto},function(t,e){"use strict";function n(t){return t(this)}e.letProto=n},function(t,e,n){"use strict";var r=n(5),i=n(41);r.Observable.prototype.every=i.every},function(t,e,n){"use strict";var r=n(5),i=n(42);r.Observable.prototype.map=i.map},function(t,e,n){"use strict";var r=n(5),i=n(253);r.Observable.prototype.mapTo=i.mapTo},function(t,e,n){"use strict";function r(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.mapTo=r;var s=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.value))},t}(),a=function(t){function e(e,n){t.call(this,e),this.value=n}return i(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(255);r.Observable.prototype.materialize=i.materialize},function(t,e,n){"use strict";function r(){return this.lift(new a)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(39);e.materialize=r;var a=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e)}return i(e,t),e.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(257);r.Observable.prototype.max=i.max},function(t,e,n){"use strict";function r(t){var e="function"==typeof t?t:function(t,e){return t>e?t:e};return this.lift(new i.ReduceOperator(e))}var i=n(48);e.max=r},function(t,e,n){"use strict";var r=n(5),i=n(129);r.Observable.prototype.merge=i.merge},function(t,e,n){"use strict";var r=n(5),i=n(43);r.Observable.prototype.mergeAll=i.mergeAll},function(t,e,n){"use strict";var r=n(5),i=n(47);r.Observable.prototype.mergeMap=i.mergeMap,r.Observable.prototype.flatMap=i.mergeMap},function(t,e,n){"use strict";var r=n(5),i=n(191);r.Observable.prototype.flatMapTo=i.mergeMapTo,r.Observable.prototype.mergeMapTo=i.mergeMapTo},function(t,e,n){"use strict";var r=n(5),i=n(263);r.Observable.prototype.mergeScan=i.mergeScan},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),this.lift(new c(t,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(14),s=n(15),a=n(45),u=n(44);e.mergeScan=r;var c=function(){function t(t,e,n){this.project=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.project,this.seed,this.concurrent))},t}();e.MergeScanOperator=c;var l=function(t){function e(e,n,r,i){t.call(this,e),this.project=n,this.acc=r,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return i(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=o.tryCatch(this.project)(this.acc,t),r=this.destination;n===s.errorObject?r.error(s.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(a.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(u.OuterSubscriber);e.MergeScanSubscriber=l},function(t,e,n){"use strict";var r=n(5),i=n(265);r.Observable.prototype.min=i.min},function(t,e,n){"use strict";function r(t){var e="function"==typeof t?t:function(t,e){return t<e?t:e};return this.lift(new i.ReduceOperator(e))}var i=n(48);e.min=r},function(t,e,n){"use strict";var r=n(5),i=n(267);r.Observable.prototype.multicast=i.multicast},function(t,e,n){"use strict";function r(t,e){var n;return n="function"==typeof t?t:function(){return t},e?new i.MulticastObservable(this,n,e):new o.ConnectableObservable(this,n)}var i=n(268),o=n(269);e.multicast=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(269),s=function(t){function e(e,n,r){t.call(this),this.source=e,this.subjectFactory=n,this.selector=r}return r(e,t),e.prototype._subscribe=function(t){var e=this,n=e.selector,r=e.source,i=new o.ConnectableObservable(r,this.subjectFactory),s=n(i).subscribe(t);return s.add(i.connect()),s},e}(i.Observable);e.MulticastObservable=s},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(5),s=n(9),a=n(11),u=function(t){function e(e,n){t.call(this),this.source=e,this.subjectFactory=n,this._refCount=0}return r(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(t=this._connection=new a.Subscription,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed?(this._connection=null,t=a.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return this.lift(new l(this))},e}(o.Observable);e.ConnectableObservable=u;var c=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.SubjectSubscriber),l=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new h(t,n),i=e._subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),h=function(t){function e(e,n){t.call(this,e),this.connectable=n}return r(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},e}(s.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(38);r.Observable.prototype.observeOn=i.observeOn},function(t,e,n){"use strict";var r=n(5),i=n(138);r.Observable.prototype.onErrorResumeNext=i.onErrorResumeNext},function(t,e,n){"use strict";var r=n(5),i=n(273);r.Observable.prototype.pairwise=i.pairwise},function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.pairwise=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e),this.hasPrev=!1}return i(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(275);r.Observable.prototype.partition=i.partition},function(t,e,n){"use strict";function r(t,e){return[o.filter.call(this,t),o.filter.call(this,i.not(t,e))]}var i=n(276),o=n(226);e.partition=r},function(t,e){"use strict";function n(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}e.not=n},function(t,e,n){"use strict";var r=n(5),i=n(278);r.Observable.prototype.pluck=i.pluck},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return o.map.call(this,i(t,n))}function i(t,e){var n=function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if("undefined"==typeof o)return;r=o}return r};return n}var o=n(42);e.pluck=r},function(t,e,n){"use strict";var r=n(5),i=n(280);r.Observable.prototype.publish=i.publish},function(t,e,n){"use strict";function r(t){return t?o.multicast.call(this,function(){return new i.Subject},t):o.multicast.call(this,new i.Subject)}var i=n(4),o=n(267);e.publish=r},function(t,e,n){"use strict";var r=n(5),i=n(282);r.Observable.prototype.publishBehavior=i.publishBehavior},function(t,e,n){"use strict";function r(t){return o.multicast.call(this,new i.BehaviorSubject(t))}var i=n(55),o=n(267);e.publishBehavior=r},function(t,e,n){"use strict";var r=n(5),i=n(284);r.Observable.prototype.publishReplay=i.publishReplay},function(t,e,n){"use strict";function r(t,e,n){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(t,e,n))}var i=n(164),o=n(267);e.publishReplay=r},function(t,e,n){"use strict";var r=n(5),i=n(286);r.Observable.prototype.publishLast=i.publishLast},function(t,e,n){"use strict";function r(){return o.multicast.call(this,new i.AsyncSubject)}var i=n(87),o=n(267);e.publishLast=r},function(t,e,n){"use strict";var r=n(5),i=n(131);r.Observable.prototype.race=i.race},function(t,e,n){"use strict";var r=n(5),i=n(48);r.Observable.prototype.reduce=i.reduce},function(t,e,n){"use strict";var r=n(5),i=n(290);r.Observable.prototype.repeat=i.repeat},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=-1),0===t?new s.EmptyObservable:t<0?this.lift(new a((-1),this)):this.lift(new a(t-1,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(35);e.repeat=r;var a=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.count,this.source));
},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.count=n,this.source=r}return i(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,r=e.count;if(0===r)return t.prototype.complete.call(this);r>-1&&(this.count=r-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,n.subscribe(this)}},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(292);r.Observable.prototype.retry=i.retry},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=-1),this.lift(new s(t,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.retry=r;var s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.count,this.source))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.count=n,this.source=r}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this,r=n.source,i=n.count;if(0===i)return t.prototype.error.call(this,e);i>-1&&(this.count=i-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,r.subscribe(this)}},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(294);r.Observable.prototype.retryWhen=i.retryWhen},function(t,e,n){"use strict";function r(t){return this.lift(new l(t,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),s=n(14),a=n(15),u=n(44),c=n(45);e.retryWhen=r;var l=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.notifier,this.source))},t}(),h=function(t){function e(e,n,r){t.call(this,e),this.notifier=n,this.source=r}return i(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new o.Subject,r=s.tryCatch(this.notifier)(n),r===a.errorObject)return t.prototype.error.call(this,a.errorObject.e);i=c.subscribeToResult(this,r)}this.unsubscribe(),this.closed=!1,this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this,e=t.errors,n=t.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this,s=o.errors,a=o.retries,u=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.closed=!1,this.errors=s,this.retries=a,this.retriesSubscription=u,this.source.subscribe(this)},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(296);r.Observable.prototype.sample=i.sample},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.sample=r;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.notifier))},t}(),u=function(t){function e(e,n){t.call(this,e),this.hasValue=!1,this.add(s.subscribeToResult(this,n))}return i(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(298);r.Observable.prototype.sampleTime=i.sampleTime},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=a.async),this.lift(new u(t,e))}function i(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(9),a=n(122);e.sampleTime=r;var u=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.period,this.scheduler))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.period=n,this.scheduler=r,this.hasValue=!1,this.add(r.schedule(i,n,{subscriber:this,period:n}))}return o(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(s.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(300);r.Observable.prototype.scan=i.scan},function(t,e,n){"use strict";function r(t,e){return this.lift(new s(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.scan=r;var s=function(){function t(t,e){this.accumulator=t,this.seed=e}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.accumulator,this.seed))},t}(),a=function(t){function e(e,n,r){t.call(this,e),this.accumulator=n,this.index=0,this.accumulatorSet=!1,this.seed=r,this.accumulatorSet="undefined"!=typeof r}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.accumulatorSet=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){return this.accumulatorSet?this._tryNext(t):(this.seed=t,void this.destination.next(t))},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(r){this.destination.error(r)}this.seed=e,this.destination.next(e)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(302);r.Observable.prototype.share=i.share},function(t,e,n){"use strict";function r(){return new s.Subject}function i(){return o.multicast.call(this,r).refCount()}var o=n(267),s=n(4);e.share=i},function(t,e,n){"use strict";var r=n(5),i=n(304);r.Observable.prototype.single=i.single},function(t,e,n){"use strict";function r(t){return this.lift(new a(t,this))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(52);e.single=r;var a=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.predicate,this.source))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.predicate=n,this.source=r,this.seenValue=!1,this.index=0}return i(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.predicate;this.index++,e?this.tryNext(t):this.applySingleValue(t)},e.prototype.tryNext=function(t){try{var e=this.predicate(t,this.index,this.source);e&&this.applySingleValue(t)}catch(n){this.destination.error(n)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(306);r.Observable.prototype.skip=i.skip},function(t,e,n){"use strict";function r(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.skip=r;var s=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.total))},t}(),a=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return i(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(308);r.Observable.prototype.skipUntil=i.skipUntil},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.skipUntil=r;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.notifier))},t}(),u=function(t){function e(e,n){t.call(this,e),this.hasValue=!1,this.isInnerStopped=!1,this.add(s.subscribeToResult(this,n))}return i(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype._complete=function(){this.isInnerStopped?t.prototype._complete.call(this):this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0},e.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&t.prototype._complete.call(this)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(310);r.Observable.prototype.skipWhile=i.skipWhile},function(t,e,n){"use strict";function r(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.skipWhile=r;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate))},t}(),a=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.skipping=!0,this.index=0}return i(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(312);r.Observable.prototype.startWith=i.startWith},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];u.isScheduler(n)?t.pop():n=null;var r=t.length;return 1===r?a.concatStatic(new o.ScalarObservable(t[0],n),this):r>1?a.concatStatic(new i.ArrayObservable(t,n),this):a.concatStatic(new s.EmptyObservable(n),this)}var i=n(33),o=n(34),s=n(35),a=n(96),u=n(36);e.startWith=r},function(t,e,n){"use strict";var r=n(5),i=n(314);r.Observable.prototype.subscribeOn=i.subscribeOn},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),new i.SubscribeOnObservable(this,e,t)}var i=n(315);e.subscribeOn=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(316),s=n(121),a=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=o.asap),t.call(this),this.source=e,this.delayTime=n,this.scheduler=r,(!s.isNumeric(n)||n<0)&&(this.delayTime=0),r&&"function"==typeof r.schedule||(this.scheduler=o.asap)}return r(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=o.asap),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return e.subscribe(n)},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source,i=this.scheduler;return i.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(i.Observable);e.SubscribeOnObservable=a},function(t,e,n){"use strict";var r=n(317),i=n(321);e.asap=new i.AsapScheduler(r.AsapAction)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(318),o=n(123),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=i.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.recycleAsyncId.call(this,e,n,r):void(0===e.actions.length&&(i.Immediate.clearImmediate(n),e.scheduled=void 0))},e}(o.AsyncAction);e.AsapAction=s},function(t,e,n){(function(t,r){"use strict";var i=n(6),o=function(){function t(t){if(this.root=t,t.setImmediate&&"function"==typeof t.setImmediate)this.setImmediate=t.setImmediate.bind(t),this.clearImmediate=t.clearImmediate.bind(t);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var e=function t(e){delete t.instance.tasksByHandle[e]};e.instance=this,this.clearImmediate=e}}return t.prototype.identify=function(t){return this.root.Object.prototype.toString.call(t)},t.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},t.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},t.prototype.canUseReadyStateChange=function(){var t=this.root.document;return Boolean(t&&"onreadystatechange"in t.createElement("script"))},t.prototype.canUsePostMessage=function(){var t=this.root;if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}return!1},t.prototype.partiallyApplied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=function t(){var e=t,n=e.handler,r=e.args;"function"==typeof n?n.apply(void 0,r):new Function(""+n)()};return r.handler=t,r.args=e,r},t.prototype.addFromSetImmediateArguments=function(t){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,t),this.nextHandle++},t.prototype.createProcessNextTickSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,n)),n};return t.instance=this,t},t.prototype.createPostMessageSetImmediate=function(){var t=this.root,e="setImmediate$"+t.Math.random()+"$",n=function n(r){var i=n.instance;r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&i.runIfPresent(+r.data.slice(e.length))};n.instance=this,t.addEventListener("message",n,!1);var r=function t(){var e=t,n=e.messagePrefix,r=e.instance,i=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(n+i,"*"),i};return r.instance=this,r.messagePrefix=e,r},t.prototype.runIfPresent=function(t){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,t),0);else{var e=this.tasksByHandle[t];if(e){this.currentlyRunningATask=!0;try{e()}finally{this.clearImmediate(t),this.currentlyRunningATask=!1}}}},t.prototype.createMessageChannelSetImmediate=function(){var t=this,e=new this.root.MessageChannel;e.port1.onmessage=function(e){var n=e.data;t.runIfPresent(n)};var n=function t(){var e=t,n=e.channel,r=e.instance,i=r.addFromSetImmediateArguments(arguments);return n.port2.postMessage(i),i};return n.channel=e,n.instance=this,n},t.prototype.createReadyStateChangeSetImmediate=function(){var t=function t(){var e=t.instance,n=e.root,r=n.document,i=r.documentElement,o=e.addFromSetImmediateArguments(arguments),s=r.createElement("script");return s.onreadystatechange=function(){e.runIfPresent(o),s.onreadystatechange=null,i.removeChild(s),s=null},i.appendChild(s),o};return t.instance=this,t},t.prototype.createSetTimeoutSetImmediate=function(){var t=function t(){var e=t.instance,n=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,n),0),n};return t.instance=this,t},t}();e.ImmediateDefinition=o,e.Immediate=new o(i.root)}).call(e,n(319).clearImmediate,n(319).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(320).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=!(arguments.length<2)&&a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(319).setImmediate,n(319).clearImmediate)},,function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(125),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var t,e=this.actions,n=-1,r=e.length,i=e.shift();do if(t=i.execute(i.state,i.delay))break;while(++n<r&&(i=e.shift()));if(this.active=!1,t){for(;++n<r&&(i=e.shift());)i.unsubscribe();throw t}},e}(i.AsyncScheduler);e.AsapScheduler=o},function(t,e,n){"use strict";var r=n(5),i=n(323);r.Observable.prototype.switch=i._switch},function(t,e,n){"use strict";function r(){return this.lift(new a)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e._switch=r;var a=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new u(t))},t}(),u=function(t){function e(e){t.call(this,e),this.active=0,this.hasCompleted=!1}return i(e,t),e.prototype._next=function(t){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=s.subscribeToResult(this,t))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},e.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var t=this.innerSubscription;t&&(t.unsubscribe(),this.remove(t))},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(325);r.Observable.prototype.switchMap=i.switchMap},function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.switchMap=r;var a=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.project,this.resultSelector))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.project=n,this.resultSelector=r,this.index=0}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.resultSelector?this._tryNotifyNext(t,e,n,r):this.destination.next(e)},e.prototype._tryNotifyNext=function(t,e,n,r){var i;try{i=this.resultSelector(t,e,n,r)}catch(o){return void this.destination.error(o)}this.destination.next(i)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(327);r.Observable.prototype.switchMapTo=i.switchMapTo},function(t,e,n){"use strict";function r(t,e){return this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.switchMapTo=r;var a=function(){function t(t,e){this.observable=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.observable,this.resultSelector))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.inner=n,this.resultSelector=r,this.index=0}return i(e,t),e.prototype._next=function(t){var e=this.innerSubscription;e&&e.unsubscribe(),this.add(this.innerSubscription=s.subscribeToResult(this,this.inner,t,this.index++))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this,s=o.resultSelector,a=o.destination;s?this.tryResultSelector(t,e,n,r):a.next(e)},e.prototype.tryResultSelector=function(t,e,n,r){var i,o=this,s=o.resultSelector,a=o.destination;try{i=s(t,e,n,r)}catch(u){return void a.error(u)}a.next(i)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(329);r.Observable.prototype.take=i.take},function(t,e,n){"use strict";function r(t){return 0===t?new a.EmptyObservable:this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(224),a=n(35);e.take=r;var u=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){t.call(this,e),this.total=n,this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.total;++this.count<=e&&(this.destination.next(t),this.count===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(331);r.Observable.prototype.takeLast=i.takeLast},function(t,e,n){"use strict";function r(t){return 0===t?new a.EmptyObservable:this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(224),a=n(35);e.takeLast=r;var u=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){t.call(this,e),this.total=n,this.ring=new Array,this.count=0}return i(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;if(e.length<n)e.push(t);else{var i=r%n;e[i]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(333);r.Observable.prototype.takeUntil=i.takeUntil},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.takeUntil=r;var a=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.notifier))},t}(),u=function(t){function e(e,n){t.call(this,e),this.notifier=n,this.add(s.subscribeToResult(this,n))}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(335);r.Observable.prototype.takeWhile=i.takeWhile},function(t,e,n){"use strict";function r(t){return this.lift(new s(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.takeWhile=r;var s=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e._subscribe(new a(t,this.predicate))},t}(),a=function(t){function e(e,n){t.call(this,e),this.predicate=n,this.index=0}return i(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(r){return void n.error(r)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(337);r.Observable.prototype.throttle=i.throttle},function(t,e,n){"use strict";function r(t){return this.lift(new a(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.throttle=r;var a=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,n){t.call(this,e),this.destination=e,this.durationSelector=n}return i(e,t),e.prototype._next=function(t){this.throttled||this.tryDurationSelector(t)},e.prototype.tryDurationSelector=function(t){var e=null;try{e=this.durationSelector(t)}catch(n){return void this.destination.error(n)}this.emitAndThrottle(t,e)},e.prototype.emitAndThrottle=function(t,e){this.add(this.throttled=s.subscribeToResult(this,e)),this.destination.next(t)},e.prototype._unsubscribe=function(){var t=this.throttled;t&&(this.remove(t),this.throttled=null,t.unsubscribe())},e.prototype.notifyNext=function(t,e,n,r,i){this._unsubscribe()},e.prototype.notifyComplete=function(){this._unsubscribe()},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(339);r.Observable.prototype.throttleTime=i.throttleTime},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=a.async),this.lift(new u(t,e))}function i(t){var e=t.subscriber;e.clearThrottle()}var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(9),a=n(122);e.throttleTime=r;var u=function(){function t(t,e){this.duration=t,this.scheduler=e}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.duration,this.scheduler))},t}(),c=function(t){function e(e,n,r){t.call(this,e),this.duration=n,this.scheduler=r}return o(e,t),e.prototype._next=function(t){this.throttled||(this.add(this.throttled=this.scheduler.schedule(i,this.duration,{subscriber:this})),this.destination.next(t))},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(t.unsubscribe(),this.remove(t),this.throttled=null)},e}(s.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(341);r.Observable.prototype.timeInterval=i.timeInterval},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=s.async),this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(122);e.timeInterval=r;var a=function(){function t(t,e){this.value=t,this.interval=e}return t}();e.TimeInterval=a;var u=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.scheduler))},t}(),c=function(t){function e(e,n){t.call(this,e),this.scheduler=n,this.lastTime=0,this.lastTime=n.now()}return i(e,t),e.prototype._next=function(t){var e=this.scheduler.now(),n=e-this.lastTime;this.lastTime=e,this.destination.next(new a(t,n))},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(343);r.Observable.prototype.timeout=i.timeout},function(t,e,n){"use strict";function r(t,e,n){void 0===e&&(e=null),void 0===n&&(n=o.async);var r=s.isDate(t),i=r?+t-n.now():Math.abs(t);return this.lift(new u(i,r,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(122),s=n(154),a=n(9);e.timeout=r;var u=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.errorToSend=n,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},t}(),c=function(t){function e(e,n,r,i,o){t.call(this,e),this.absoluteTimeout=n,this.waitFor=r,this.errorToSend=i,this.scheduler=o,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return i(e,t),Object.defineProperty(e.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),e.dispatchTimeout=function(t){var e=t.subscriber,n=t.index;e.hasCompleted||e.previousIndex!==n||e.notifyTimeout()},e.prototype.scheduleTimeout=function(){var t=this.index;this.scheduler.schedule(e.dispatchTimeout,this.waitFor,{subscriber:this,index:t}),this.index++,this._previousIndex=t},e.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},e.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},e.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},e.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},e}(a.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(345);r.Observable.prototype.timeoutWith=i.timeoutWith},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n=o.async);var r=s.isDate(t),i=r?+t-n.now():Math.abs(t);return this.lift(new c(i,r,e,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(122),s=n(154),a=n(44),u=n(45);e.timeoutWith=r;var c=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e._subscribe(new l(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),l=function(t){function e(e,n,r,i,o){t.call(this),this.destination=e,this.absoluteTimeout=n,this.waitFor=r,this.withObservable=i,this.scheduler=o,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,e.add(this),this.scheduleTimeout()}return i(e,t),Object.defineProperty(e.prototype,"previousIndex",{
get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),e.dispatchTimeout=function(t){var e=t.subscriber,n=t.index;e.hasCompleted||e.previousIndex!==n||e.handleTimeout()},e.prototype.scheduleTimeout=function(){var t=this.index,n={subscriber:this,index:t};this.scheduler.schedule(e.dispatchTimeout,this.waitFor,n),this.index++,this._previousIndex=t},e.prototype._next=function(t){this.destination.next(t),this.absoluteTimeout||this.scheduleTimeout()},e.prototype._error=function(t){this.destination.error(t),this._hasCompleted=!0},e.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},e.prototype.handleTimeout=function(){if(!this.closed){var t=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=u.subscribeToResult(this,t))}},e}(a.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(347);r.Observable.prototype.timestamp=i.timestamp},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=s.async),this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(122);e.timestamp=r;var a=function(){function t(t,e){this.value=t,this.timestamp=e}return t}();e.Timestamp=a;var u=function(){function t(t){this.scheduler=t}return t.prototype.call=function(t,e){return e._subscribe(new c(t,this.scheduler))},t}(),c=function(t){function e(e,n){t.call(this,e),this.scheduler=n}return i(e,t),e.prototype._next=function(t){var e=this.scheduler.now();this.destination.next(new a(t,e))},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(349);r.Observable.prototype.toArray=i.toArray},function(t,e,n){"use strict";function r(){return this.lift(new s)}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9);e.toArray=r;var s=function(){function t(){}return t.prototype.call=function(t,e){return e._subscribe(new a(t))},t}(),a=function(t){function e(e){t.call(this,e),this.array=[]}return i(e,t),e.prototype._next=function(t){this.array.push(t)},e.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(67);r.Observable.prototype.toPromise=i.toPromise},function(t,e,n){"use strict";var r=n(5),i=n(352);r.Observable.prototype.window=i.window},function(t,e,n){"use strict";function r(t){return this.lift(new u(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),s=n(44),a=n(45);e.window=r;var u=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new c(t),r=e._subscribe(n);return r.closed||n.add(a.subscribeToResult(n,this.windowBoundaries)),r},t}(),c=function(t){function e(e){t.call(this,e),this.window=new o.Subject,e.next(this.window)}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new o.Subject;e.next(n)},e}(s.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(354);r.Observable.prototype.windowCount=i.windowCount},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),this.lift(new a(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),s=n(4);e.windowCount=r;var a=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.windowSize,this.startWindowEvery))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.destination=e,this.windowSize=n,this.startWindowEvery=r,this.windows=[new s.Subject],this.count=0,e.next(this.windows[0])}return i(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,a=0;a<o&&!this.closed;a++)i[a].next(t);var u=this.count-r+1;if(u>=0&&u%e===0&&!this.closed&&i.shift().complete(),++this.count%e===0&&!this.closed){var c=new s.Subject;i.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(o.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(356);r.Observable.prototype.windowTime=i.windowTime},function(t,e,n){"use strict";function r(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=c.async),this.lift(new h(t,e,n))}function i(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&r.complete(),t.window=e.openWindow(),this.schedule(t,n)}function o(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),a=this,u={action:a,subscription:null},c={subscriber:n,window:o,context:u};u.subscription=r.schedule(s,e,c),a.add(u.subscription),a.schedule(t,i)}function s(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}var a=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=n(4),c=n(122),l=n(9);e.windowTime=r;var h=function(){function t(t,e,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.scheduler=n}return t.prototype.call=function(t,e){return e._subscribe(new p(t,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},t}(),p=function(t){function e(e,n,r,a){if(t.call(this,e),this.destination=e,this.windowTimeSpan=n,this.windowCreationInterval=r,this.scheduler=a,this.windows=[],null!==r&&r>=0){var u=this.openWindow(),c={subscriber:this,window:u,context:null},l={windowTimeSpan:n,windowCreationInterval:r,subscriber:this,scheduler:a};this.add(a.schedule(s,n,c)),this.add(a.schedule(o,r,l))}else{var h=this.openWindow(),p={subscriber:this,window:h,windowTimeSpan:n};this.add(a.schedule(i,n,p))}}return a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||i.next(t)}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new u.Subject;this.windows.push(t);var e=this.destination;return e.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(l.Subscriber)},function(t,e,n){"use strict";var r=n(5),i=n(358);r.Observable.prototype.windowToggle=i.windowToggle},function(t,e,n){"use strict";function r(t,e){return this.lift(new h(t,e))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),s=n(11),a=n(14),u=n(15),c=n(44),l=n(45);e.windowToggle=r;var h=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new p(t,this.openings,this.closingSelector))},t}(),p=function(t){function e(e,n,r){t.call(this,e),this.openings=n,this.closingSelector=r,this.contexts=[],this.add(this.openSubscription=l.subscribeToResult(this,n,n))}return i(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var c=this.closingSelector,h=a.tryCatch(c)(e);if(h===u.errorObject)return this.error(u.errorObject.e);var p=new o.Subject,f=new s.Subscription,d={window:p,subscription:f};this.contexts.push(d);var v=l.subscribeToResult(this,h,d);v.closed?this.closeWindow(this.contexts.length-1):(v.context=d,f.add(v)),this.destination.next(p)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(t!==-1){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(c.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(360);r.Observable.prototype.windowWhen=i.windowWhen},function(t,e,n){"use strict";function r(t){return this.lift(new l(t))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(4),s=n(14),a=n(15),u=n(44),c=n(45);e.windowWhen=r;var l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e._subscribe(new h(t,this.closingSelector))},t}(),h=function(t){function e(e,n){t.call(this,e),this.destination=e,this.closingSelector=n,this.openWindow()}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new o.Subject;this.destination.next(n);var r=s.tryCatch(this.closingSelector)();if(r===a.errorObject){var i=a.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=c.subscribeToResult(this,r))},e}(u.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(362);r.Observable.prototype.withLatestFrom=i.withLatestFrom},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return this.lift(new a(r,n))}var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(44),s=n(45);e.withLatestFrom=r;var a=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e._subscribe(new u(t,this.observables,this.project))},t}(),u=function(t){function e(e,n,r){t.call(this,e),this.observables=n,this.project=r,this.toRespond=[];var i=n.length;this.values=new Array(i);for(var o=0;o<i;o++)this.toRespond.push(o);for(var o=0;o<i;o++){var a=n[o];this.add(s.subscribeToResult(this,a,a,o))}}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var s=o.indexOf(n);s!==-1&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)},e}(o.OuterSubscriber)},function(t,e,n){"use strict";var r=n(5),i=n(157);r.Observable.prototype.zip=i.zipProto},function(t,e,n){"use strict";var r=n(5),i=n(365);r.Observable.prototype.zipAll=i.zipAll},function(t,e,n){"use strict";function r(t){return this.lift(new i.ZipOperator(t))}var i=n(157);e.zipAll=r},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(39),s=n(367),a=n(371),u=n(369),c=n(372),l=function(t){function e(e){t.call(this),this.assertDeepEqual=e,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return r(e,t),e.prototype.createTime=function(t){var n=t.indexOf("|");if(n===-1)throw new Error('marble diagram for time should have a completion marker "|"');return n*e.frameTimeFactor},e.prototype.createColdObservable=function(t,n,r){if(t.indexOf("^")!==-1)throw new Error('cold observable cannot have subscription offset "^"');if(t.indexOf("!")!==-1)throw new Error('cold observable cannot have unsubscription marker "!"');var i=e.parseMarbles(t,n,r),o=new s.ColdObservable(i,this);return this.coldObservables.push(o),o},e.prototype.createHotObservable=function(t,n,r){if(t.indexOf("!")!==-1)throw new Error('hot observable cannot have unsubscription marker "!"');var i=e.parseMarbles(t,n,r),o=new a.HotObservable(i,this);return this.hotObservables.push(o),o},e.prototype.materializeInnerObservable=function(t,e){var n=this,r=[];return t.subscribe(function(t){r.push({frame:n.frame-e,notification:o.Notification.createNext(t)})},function(t){r.push({frame:n.frame-e,notification:o.Notification.createError(t)})},function(){r.push({frame:n.frame-e,notification:o.Notification.createComplete()})}),r},e.prototype.expectObservable=function(t,n){var r=this;void 0===n&&(n=null);var s,a=[],u={actual:a,ready:!1},c=e.parseMarblesAsSubscriptions(n).unsubscribedFrame;return this.schedule(function(){s=t.subscribe(function(t){var e=t;t instanceof i.Observable&&(e=r.materializeInnerObservable(e,r.frame)),a.push({frame:r.frame,notification:o.Notification.createNext(e)})},function(t){a.push({frame:r.frame,notification:o.Notification.createError(t)})},function(){a.push({frame:r.frame,notification:o.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return s.unsubscribe()},c),this.flushTests.push(u),{toBe:function(t,n,r){u.ready=!0,u.expected=e.parseMarbles(t,n,r,!0)}}},e.prototype.expectSubscriptions=function(t){var n={actual:t,ready:!1};return this.flushTests.push(n),{toBe:function(t){var r="string"==typeof t?[t]:t;n.ready=!0,n.expected=r.map(function(t){return e.parseMarblesAsSubscriptions(t)})}}},e.prototype.flush=function(){for(var e=this.hotObservables;e.length>0;)e.shift().setup();t.prototype.flush.call(this);for(var n=this.flushTests.filter(function(t){return t.ready});n.length>0;){var r=n.shift();this.assertDeepEqual(r.actual,r.expected)}},e.parseMarblesAsSubscriptions=function(t){if("string"!=typeof t)return new u.SubscriptionLog(Number.POSITIVE_INFINITY);for(var e=t.length,n=-1,r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0;o<e;o++){var s=o*this.frameTimeFactor,a=t[o];switch(a){case"-":case" ":break;case"(":n=s;break;case")":n=-1;break;case"^":if(r!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");r=n>-1?n:s;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=n>-1?n:s;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return i<0?new u.SubscriptionLog(r):new u.SubscriptionLog(r,i)},e.parseMarbles=function(t,e,n,r){if(void 0===r&&(r=!1),t.indexOf("!")!==-1)throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=t.length,a=[],u=t.indexOf("^"),c=u===-1?0:u*-this.frameTimeFactor,l="object"!=typeof e?function(t){return t}:function(t){return r&&e[t]instanceof s.ColdObservable?e[t].messages:e[t]},h=-1,p=0;p<i;p++){var f=p*this.frameTimeFactor+c,d=void 0,v=t[p];switch(v){case"-":case" ":break;case"(":h=f;break;case")":h=-1;break;case"|":d=o.Notification.createComplete();break;case"^":break;case"#":d=o.Notification.createError(n||"error");break;default:d=o.Notification.createNext(l(v))}d&&a.push({frame:h>-1?h:f,notification:d})}return a},e}(c.VirtualTimeScheduler);e.TestScheduler=l},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(5),o=n(11),s=n(368),a=n(370),u=function(t){function e(e,n){t.call(this,function(t){var e=this,n=e.logSubscribedFrame();return t.add(new o.Subscription(function(){e.logUnsubscribedFrame(n)})),e.scheduleMessages(t),t}),this.messages=e,this.subscriptions=[],this.scheduler=n}return r(e,t),e.prototype.scheduleMessages=function(t){for(var e=this.messages.length,n=0;n<e;n++){var r=this.messages[n];t.add(this.scheduler.schedule(function(t){var e=t.message,n=t.subscriber;e.notification.observe(n)},r.frame,{message:r,subscriber:t}))}},e}(i.Observable);e.ColdObservable=u,a.applyMixins(u,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var r=n(369),i=function(){function t(){this.subscriptions=[]}return t.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new r.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},t.prototype.logUnsubscribedFrame=function(t){var e=this.subscriptions,n=e[t];e[t]=new r.SubscriptionLog(n.subscribedFrame,this.scheduler.now())},t}();e.SubscriptionLoggable=i},function(t,e){"use strict";var n=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.subscribedFrame=t,this.unsubscribedFrame=e}return t}();e.SubscriptionLog=n},function(t,e){"use strict";function n(t,e){for(var n=0,r=e.length;n<r;n++)for(var i=e[n],o=Object.getOwnPropertyNames(i.prototype),s=0,a=o.length;s<a;s++){var u=o[s];t.prototype[u]=i.prototype[u]}}e.applyMixins=n},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(4),o=n(11),s=n(368),a=n(370),u=function(t){function e(e,n){t.call(this),this.messages=e,this.subscriptions=[],this.scheduler=n}return r(e,t),e.prototype._subscribe=function(e){var n=this,r=n.logSubscribedFrame();return e.add(new o.Subscription(function(){n.logUnsubscribedFrame(r)})),t.prototype._subscribe.call(this,e)},e.prototype.setup=function(){for(var t=this,e=t.messages.length,n=0;n<e;n++)!function(){var e=t.messages[n];t.scheduler.schedule(function(){e.notification.observe(t)},e.frame)}()},e}(i.Subject);e.HotObservable=u,a.applyMixins(u,[s.SubscriptionLoggable])},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(123),o=n(125),s=function(t){function e(e,n){var r=this;void 0===e&&(e=a),void 0===n&&(n=750),t.call(this,e,function(){return r.frame}),this.maxFrames=n,this.frame=0,this.index=-1}return r(e,t),e.prototype.flush=function(){for(var t,e,n=this,r=n.actions,i=n.maxFrames;(e=r.shift())&&(this.frame=e.delay)<=i&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(o.AsyncScheduler);e.VirtualTimeScheduler=s;var a=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1),t.call(this,e,n),this.scheduler=e,this.work=n,this.index=r,this.index=e.index=r}return r(e,t),e.prototype.schedule=function(n,r){return void 0===r&&(r=0),this.id?this.add(new e(this.scheduler,this.work)).schedule(n,r):t.prototype.schedule.call(this,n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(i.AsyncAction);e.VirtualAction=a},function(t,e,n){"use strict";var r=n(374),i=n(376);e.animationFrame=new i.AnimationFrameScheduler(r.AnimationFrameAction)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(123),o=n(375),s=function(t){function e(e,n){t.call(this,e,n),this.scheduler=e,this.work=n}return r(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=o.AnimationFrame.requestAnimationFrame(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.recycleAsyncId.call(this,e,n,r):void(0===e.actions.length&&(o.AnimationFrame.cancelAnimationFrame(n),e.scheduled=void 0))},e}(i.AsyncAction);e.AnimationFrameAction=s},function(t,e,n){"use strict";var r=n(6),i=function(){function t(t){t.requestAnimationFrame?(this.cancelAnimationFrame=t.cancelAnimationFrame.bind(t),this.requestAnimationFrame=t.requestAnimationFrame.bind(t)):t.mozRequestAnimationFrame?(this.cancelAnimationFrame=t.mozCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.mozRequestAnimationFrame.bind(t)):t.webkitRequestAnimationFrame?(this.cancelAnimationFrame=t.webkitCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.webkitRequestAnimationFrame.bind(t)):t.msRequestAnimationFrame?(this.cancelAnimationFrame=t.msCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.msRequestAnimationFrame.bind(t)):t.oRequestAnimationFrame?(this.cancelAnimationFrame=t.oCancelAnimationFrame.bind(t),this.requestAnimationFrame=t.oRequestAnimationFrame.bind(t)):(this.cancelAnimationFrame=t.clearTimeout.bind(t),this.requestAnimationFrame=function(e){return t.setTimeout(e,1e3/60)})}return t}();e.RequestAnimationFrameDefinition=i,e.AnimationFrame=new i(r.root)},function(t,e,n){"use strict";var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=n(125),o=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.flush=function(){this.active=!0,this.scheduled=void 0;var t,e=this.actions,n=-1,r=e.length,i=e.shift();do if(t=i.execute(i.state,i.delay))break;while(++n<r&&(i=e.shift()));if(this.active=!1,t){for(;++n<r&&(i=e.shift());)i.unsubscribe();throw t}},e}(i.AsyncScheduler);e.AnimationFrameScheduler=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var s=e[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){}]);